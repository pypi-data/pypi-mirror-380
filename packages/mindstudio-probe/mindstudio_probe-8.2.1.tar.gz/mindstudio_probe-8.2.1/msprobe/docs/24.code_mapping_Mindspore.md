# MindSpore 场景的数码关联工具

数码关联工具，用于 MindSpore 静态图场景下将IR图与dump数据进行关联，获取 dump 数据和代码调用栈的关联关系。

## 安装

请参见[《msprobe 工具安装指南》](./01.installation.md)。


## 功能说明

数码关联是指数据和代码调用栈的关联，数据一般意义上指静态图`O0`,`O1`,`O2`下dump下来的数据。

IR图使用推荐：IR图推荐使用`anf_after_graph_build`图。

命令格式：

```
msprobe -f mindspore code_mapping --ir <ir_file> --dump_data <dump_data> [--output <output_path>]
```


| 参数名称     | 说明                                                                                                                                        | 参数类型 | 是否必选     |
| ---------------------------- |-------------------------------------------------------------------------------------------------------------------------------------------|------| ---------------------------------- |
| -f 或 --framework    | 指定训练框架。mindspore。                                                                                                                     | str  | 是                                 |
| --ir   | 指定 MindSpore 静态图运行时生成的IR图文件。                                                                                                              | str  | 是      |
| --dump_data    | 指定dump数据文件（支持tensor或statistic模式的dump数据）。可指定单个dump数据 文件或dump数据文件的父目录，指定父目录表示关联目录下的所有dump数据文件。                                              | str  | 是      |
| --output | 关联结果输出目录，默认为"./"，只在tensor模式时生效，会把数据文件路径和代码调用栈的关联关系存到output路径下的code_mapping_{时间戳}.csv中。如果关联的是statistic模式，则会把statistic.csv中每个条目加上该条目对应的代码栈。 | str  | 否      |

