<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      xml:lang="en"
      i18n:domain="pas.plugins.kimug"
>

  <body>
    <metal:main fill-slot="main">
      <tal:main-macro metal:define-macro="main">

        <div class="row">
          <div class="col-12">
            <h1 class="documentFirstHeading"
                i18n:translate=""
            >Kimug controlpanel</h1>

            <div class="mb-3">
              <h2 i18n:translate="">Actions</h2>
              <a class="btn btn-primary"
                 tal:attributes="
                   href string:${context/absolute_url}/@@set_oidc_settings;
                 "
              >
                <span i18n:translate="">Update OIDC settings from environment variables</span>
              </a>
              <a class="btn btn-secondary ml-2"
                 tal:attributes="
                   href string:${context/absolute_url}/@@keycloak_users;
                 "
              >
                <span i18n:translate="">Sync users with Keycloak</span>
              </a>
            </div>

            <div>
              <h2 i18n:translate="">Current OIDC Settings</h2>
            </div>
            <div tal:replace="structure view/checkSettings"></div>
            <div class="alert alert-warning"
                 role="alert"
            >
              <strong i18n:translate="">Warning:</strong>
              <span i18n:translate="">
              Kimug settings are set with environment variables. Changes made here may not persist after the server is restarted.
              </span>
            </div>
            <div tal:replace="structure view/contents"></div>
          </div>
        </div>

      </tal:main-macro>
    </metal:main>
  </body>
</html>
