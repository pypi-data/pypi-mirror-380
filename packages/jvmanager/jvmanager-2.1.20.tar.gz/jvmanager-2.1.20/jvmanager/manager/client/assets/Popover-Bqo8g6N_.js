import{j as w}from"./index-B4oKE3iz.js";import{a as g,E as Z}from"./chunk-QMGIS6GS-Ycl3lDfV.js";import{O as ne,g as Ue}from"./OptionalPortal-BQJEy_xn.js";import{j as se,h as N,T as ae,B as We,r as Xe,l as Ye,A as ie,C as F,i as qe,o as Ze,z as Ge,q as Je}from"./Loader-B9JD8HZZ.js";import{a as Qe,u as et}from"./Input-Dk8j5b2Q.js";import{u as le}from"./DirectionProvider-DuCsFlA9.js";import{u as tt,F as rt,i as ot,O as nt}from"./FocusTrap-DSZiEh9q.js";import{c as st}from"./create-safe-context-Bb_7Uh0a.js";import{u as de}from"./use-merged-ref-BUQ1B9HC.js";import{u as at,a as G,o as it,h as lt,s as dt,l as J,f as Q,i as ee,b as ct,c as ft}from"./floating-ui.react-BY6ulEKs.js";import{a as ut}from"./CloseButton-Dy-wbEsU.js";const pt=()=>{};function gt(e,s={active:!0}){return typeof e!="function"||!s.active?s.onKeyDown||pt:t=>{var r;t.key==="Escape"&&(e(t),(r=s.onTrigger)==null||r.call(s))}}const te=["mousedown","touchstart"];function ht(e,s,t){const r=g.useRef(null);return g.useEffect(()=>{const i=f=>{const{target:l}=f??{};if(Array.isArray(t)){const a=(l==null?void 0:l.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(l)&&l.tagName!=="HTML";t.every(d=>!!d&&!f.composedPath().includes(d))&&!a&&e()}else r.current&&!r.current.contains(l)&&e()};return(s||te).forEach(f=>document.addEventListener(f,i)),()=>{(s||te).forEach(f=>document.removeEventListener(f,i))}},[r,e,t]),r}function wt(e){var t;const s=Z.version;return typeof Z.version!="string"||s.startsWith("18.")?e==null?void 0:e.ref:(t=e==null?void 0:e.props)==null?void 0:t.ref}function re(e,s,t,r){return e==="center"||r==="center"?{top:s}:e==="end"?{bottom:t}:e==="start"?{top:t}:{}}function oe(e,s,t,r,i){return e==="center"||r==="center"?{left:s}:e==="end"?{[i==="ltr"?"right":"left"]:t}:e==="start"?{[i==="ltr"?"left":"right"]:t}:{}}const mt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function vt({position:e,arrowSize:s,arrowOffset:t,arrowRadius:r,arrowPosition:i,arrowX:f,arrowY:l,dir:a}){const[n,d="center"]=e.split("-"),c={width:s,height:s,transform:"rotate(45deg)",position:"absolute",[mt[n]]:r},u=-s/2;return n==="left"?{...c,...re(d,l,t,i),right:u,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:n==="right"?{...c,...re(d,l,t,i),left:u,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:n==="top"?{...c,...oe(d,f,t,i,a),bottom:u,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:n==="bottom"?{...c,...oe(d,f,t,i,a),top:u,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const ce=g.forwardRef(({position:e,arrowSize:s,arrowOffset:t,arrowRadius:r,arrowPosition:i,visible:f,arrowX:l,arrowY:a,style:n,...d},c)=>{const{dir:u}=le();return f?w.jsx("div",{...d,ref:c,style:{...n,...vt({position:e,arrowSize:s,arrowOffset:t,arrowRadius:r,arrowPosition:i,dir:u,arrowX:l,arrowY:a})}}):null});ce.displayName="@mantine/core/FloatingArrow";function yt(e,s){if(e==="rtl"&&(s.includes("right")||s.includes("left"))){const[t,r]=s.split("-"),i=t==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return s}const[bt,fe]=st("Popover component was not found in the tree");var ue={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const xt={},k=se((e,s)=>{var T,O,y,v;const t=N("PopoverDropdown",xt,e),{className:r,style:i,vars:f,children:l,onKeyDownCapture:a,variant:n,classNames:d,styles:c,...u}=t,o=fe(),R=tt({opened:o.opened,shouldReturnFocus:o.returnFocus}),C=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},D=de(s,o.floating);return o.disabled?null:w.jsx(ne,{...o.portalProps,withinPortal:o.withinPortal,children:w.jsx(ae,{mounted:o.opened,...o.transitionProps,transition:((T=o.transitionProps)==null?void 0:T.transition)||"fade",duration:((O=o.transitionProps)==null?void 0:O.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((y=o.transitionProps)==null?void 0:y.exitDuration)=="number"?o.transitionProps.exitDuration:(v=o.transitionProps)==null?void 0:v.duration,children:b=>w.jsx(rt,{active:o.trapFocus&&o.opened,innerRef:D,children:w.jsxs(We,{...C,...u,variant:n,onKeyDownCapture:gt(()=>{var E,x;(E=o.onClose)==null||E.call(o),(x=o.onDismiss)==null||x.call(o)},{active:o.closeOnEscape,onTrigger:R,onKeyDown:a}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:r,props:t,classNames:d,styles:c,style:[{...b,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:Xe(o.width),...o.referenceHidden?{display:"none"}:null},o.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[l,w.jsx(ce,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:d,styles:c})})]})})})})});k.classes=ue;k.displayName="@mantine/core/PopoverDropdown";const Pt={refProp:"ref",popupType:"dialog"},pe=se((e,s)=>{const{children:t,refProp:r,popupType:i,...f}=N("PopoverTarget",Pt,e);if(!ot(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const l=f,a=fe(),n=de(a.reference,wt(t),s),d=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return g.cloneElement(t,{...l,...d,...a.targetProps,className:Ye(a.targetProps.className,l.className,t.props.className),[r]:n,...a.controlled?null:{onClick:()=>{var c,u;a.onToggle(),(u=(c=t.props).onClick)==null||u.call(c)}}})});pe.displayName="@mantine/core/PopoverTarget";function Rt(e){if(e===void 0)return{shift:!0,flip:!0};const s={...e};return e.shift===void 0&&(s.shift=!0),e.flip===void 0&&(s.flip=!0),s}function Ct(e,s,t){const r=Rt(e.middlewares),i=[it(e.offset),lt()];return e.dropdownVisible&&t!=="test"&&e.preventPositionChangeWhenVisible&&(r.flip=!1,r.shift=!1),r.shift&&i.push(dt(typeof r.shift=="boolean"?{limiter:J(),padding:5}:{limiter:J(),padding:5,...r.shift})),r.flip&&i.push(typeof r.flip=="boolean"?Q():Q(r.flip)),r.inline&&i.push(typeof r.inline=="boolean"?ee():ee(r.inline)),i.push(ct({element:e.arrowRef,padding:e.arrowOffset})),(r.size||e.width==="target")&&i.push(ft({...typeof r.size=="boolean"?{}:r.size,apply({rects:f,availableWidth:l,availableHeight:a,...n}){var u;const c=((u=s().refs.floating.current)==null?void 0:u.style)??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:f,availableWidth:l,availableHeight:a,...n}):Object.assign(c,{maxWidth:`${l}px`,maxHeight:`${a}px`})),e.width==="target"&&Object.assign(c,{width:`${f.reference.width}px`})}})),i}function Dt(e){const s=ie(),[t,r]=Qe({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),i=g.useRef(t),f=()=>{t&&!e.disabled&&r(!1)},l=()=>{e.disabled||r(!t)},a=at({strategy:e.strategy,placement:e.preventPositionChangeWhenVisible?e.positionRef.current:e.position,middleware:Ct(e,()=>a,s),whileElementsMounted:e.keepMounted?void 0:G});return g.useEffect(()=>{if(!(!e.keepMounted||!a.refs.reference.current||!a.refs.floating.current)&&t)return G(a.refs.reference.current,a.refs.floating.current,a.update)},[e.keepMounted,t,a.refs.reference,a.refs.floating,a.update]),F(()=>{var n;(n=e.onPositionChange)==null||n.call(e,a.placement),e.positionRef.current=a.placement},[a.placement]),F(()=>{var n,d;t!==i.current&&(t?(d=e.onOpen)==null||d.call(e):(n=e.onClose)==null||n.call(e)),i.current=t},[t,e.onClose,e.onOpen]),F(()=>{let n=-1;return t&&(n=window.setTimeout(()=>e.setDropdownVisible(!0),4)),()=>{window.clearTimeout(n)}},[t,e.position]),{floating:a,controlled:typeof e.opened=="boolean",opened:t,onClose:f,onToggle:l}}const Tt={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ue("popover"),__staticSelector:"Popover",width:"max-content"},Ot=Ze((e,{radius:s,shadow:t})=>({dropdown:{"--popover-radius":s===void 0?void 0:Je(s),"--popover-shadow":Ge(t)}}));function S(e){var H,K,U,W,X,Y,q;const s=N("Popover",Tt,e),{children:t,position:r,offset:i,onPositionChange:f,positionDependencies:l,opened:a,transitionProps:n,onExitTransitionEnd:d,onEnterTransitionEnd:c,width:u,middlewares:o,withArrow:R,arrowSize:C,arrowOffset:D,arrowRadius:T,arrowPosition:O,unstyled:y,classNames:v,styles:b,closeOnClickOutside:E,withinPortal:x,portalProps:ge,closeOnEscape:he,clickOutsideEvents:we,trapFocus:me,onClose:ve,onDismiss:P,onOpen:ye,onChange:be,zIndex:xe,radius:Pe,shadow:Re,id:Ce,defaultOpened:j,__staticSelector:z,withRoles:De,disabled:I,returnFocus:Te,variant:Oe,keepMounted:M,vars:Ee,floatingStrategy:A,withOverlay:Se,overlayProps:m,hideDetached:Fe,preventPositionChangeWhenVisible:Ne,...ke}=s,V=qe({name:z,props:s,classes:ue,classNames:v,styles:b,unstyled:y,rootSelector:"dropdown",vars:Ee,varsResolver:Ot}),{resolvedStyles:je}=et({classNames:v,styles:b,props:s}),[ze,_]=g.useState(a??j??!1),$=g.useRef(r),L=g.useRef(null),[Ie,Me]=g.useState(null),[Ae,Ve]=g.useState(null),{dir:_e}=le(),$e=ie(),B=ut(Ce),p=Dt({middlewares:o,width:u,position:yt(_e,r),offset:typeof i=="number"?i+(R?C/2:0):i,arrowRef:L,arrowOffset:D,onPositionChange:f,positionDependencies:l,opened:a,defaultOpened:j,onChange:be,onOpen:ye,onClose:ve,onDismiss:P,strategy:A,dropdownVisible:ze,setDropdownVisible:_,positionRef:$,disabled:I,preventPositionChangeWhenVisible:Ne,keepMounted:M});ht(()=>{E&&(p.onClose(),P==null||P())},we,[Ie,Ae]);const Le=g.useCallback(h=>{Me(h),p.floating.refs.setReference(h)},[p.floating.refs.setReference]),Be=g.useCallback(h=>{Ve(h),p.floating.refs.setFloating(h)},[p.floating.refs.setFloating]),He=g.useCallback(()=>{var h;(h=n==null?void 0:n.onExited)==null||h.call(n),d==null||d(),_(!1),$.current=r},[n==null?void 0:n.onExited,d]),Ke=g.useCallback(()=>{var h;(h=n==null?void 0:n.onEntered)==null||h.call(n),c==null||c()},[n==null?void 0:n.onEntered,c]);return w.jsxs(bt,{value:{returnFocus:Te,disabled:I,controlled:p.controlled,reference:Le,floating:Be,x:p.floating.x,y:p.floating.y,arrowX:(U=(K=(H=p.floating)==null?void 0:H.middlewareData)==null?void 0:K.arrow)==null?void 0:U.x,arrowY:(Y=(X=(W=p.floating)==null?void 0:W.middlewareData)==null?void 0:X.arrow)==null?void 0:Y.y,opened:p.opened,arrowRef:L,transitionProps:{...n,onExited:He,onEntered:Ke},width:u,withArrow:R,arrowSize:C,arrowOffset:D,arrowRadius:T,arrowPosition:O,placement:p.floating.placement,trapFocus:me,withinPortal:x,portalProps:ge,zIndex:xe,radius:Pe,shadow:Re,closeOnEscape:he,onDismiss:P,onClose:p.onClose,onToggle:p.onToggle,getTargetId:()=>`${B}-target`,getDropdownId:()=>`${B}-dropdown`,withRoles:De,targetProps:ke,__staticSelector:z,classNames:v,styles:b,unstyled:y,variant:Oe,keepMounted:M,getStyles:V,resolvedStyles:je,floatingStrategy:A,referenceHidden:Fe&&$e!=="test"?(q=p.floating.middlewareData.hide)==null?void 0:q.referenceHidden:!1},children:[t,Se&&w.jsx(ae,{transition:"fade",mounted:p.opened,duration:(n==null?void 0:n.duration)||250,exitDuration:(n==null?void 0:n.exitDuration)||250,children:h=>w.jsx(ne,{withinPortal:x,children:w.jsx(nt,{...m,...V("overlay",{className:m==null?void 0:m.className,style:[h,m==null?void 0:m.style]})})})})]})}S.Target=pe;S.Dropdown=k;S.displayName="@mantine/core/Popover";S.extend=e=>e;export{S as P};
