import{a as w,z as J,A as Q,v as _,w as ue,O as ge,B as ve}from"./chunk-QMGIS6GS-Ycl3lDfV.js";import{j as i}from"./index-B4oKE3iz.js";import{g as be,U as xe}from"./UserButton-BVGfPNpG.js";import{c as S}from"./createReactComponent-BN_c2kk2.js";import{j as N,h as j,B as v,l as M,r as u,k as A,m as je,e as Y,u as ee,n as Ne,I as ke,p as we,i as se,o as te,q as Ae,s as _e,t as Ie,U as G}from"./Loader-B9JD8HZZ.js";import{f as Z}from"./api-tgDzxHzW.js";import{u as Pe}from"./use-disclosure-ClBEpcAQ.js";import{a as Le,u as Se,r as ye}from"./nprogress.store-DkXEjuQG.js";import{g as oe,O as ze}from"./OptionalPortal-BQJEy_xn.js";import{u as Re}from"./Input-Dk8j5b2Q.js";import{c as ae}from"./create-safe-context-Bb_7Uh0a.js";import{a as $e}from"./Avatar-DueFptlw.js";import{R as ne,u as Be}from"./use-window-event-DvDG7-bU.js";import{g as re,a as K}from"./get-sorted-breakpoints-CWbmZd_q.js";import{u as Te}from"./CloseButton-Dy-wbEsU.js";import"./InputsGroupFieldset-C5T_ipTq.js";import"./DirectionProvider-DuCsFlA9.js";import"./Group-3SoFkW_U.js";import"./Text-BRX5JXq7.js";import"./Stack-CyWGn-AO.js";import"./events-Bu47C8H8.js";import"./Button-kXQ3kFES.js";import"./use-merged-ref-BUQ1B9HC.js";import"./px-CiO0pVtX.js";const[Ce,I]=ae("AppShell was not found in tree");var k={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Ve={},O=N((s,o)=>{const t=j("AppShellAside",Ve,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:h,zIndex:f,mod:a,...m}=t,d=I();return d.disabled?null:i.jsx(v,{component:"aside",ref:o,mod:[{"with-border":h??d.withBorder},a],...d.getStyles("aside",{className:l,classNames:e,styles:n,style:r}),...m,__vars:{"--app-shell-aside-z-index":`calc(${f??d.zIndex} + 1)`}})});O.classes=k;O.displayName="@mantine/core/AppShellAside";const Ee={},q=N((s,o)=>{var b;const t=j("AppShellFooter",Ee,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:h,zIndex:f,mod:a,...m}=t,d=I();return d.disabled?null:i.jsx(v,{component:"footer",ref:o,mod:[{"with-border":h??d.withBorder},a],...d.getStyles("footer",{className:M({[ne.classNames.zeroRight]:d.offsetScrollbars},l),classNames:e,styles:n,style:r}),...m,__vars:{"--app-shell-footer-z-index":(b=f??d.zIndex)==null?void 0:b.toString()}})});q.classes=k;q.displayName="@mantine/core/AppShellFooter";const Oe={},D=N((s,o)=>{var b;const t=j("AppShellHeader",Oe,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:h,zIndex:f,mod:a,...m}=t,d=I();return d.disabled?null:i.jsx(v,{component:"header",ref:o,mod:[{"with-border":h??d.withBorder},a],...d.getStyles("header",{className:M({[ne.classNames.zeroRight]:d.offsetScrollbars},l),classNames:e,styles:n,style:r}),...m,__vars:{"--app-shell-header-z-index":(b=f??d.zIndex)==null?void 0:b.toString()}})});D.classes=k;D.displayName="@mantine/core/AppShellHeader";const qe={},F=N((s,o)=>{const t=j("AppShellMain",qe,s),{classNames:e,className:l,style:r,styles:n,vars:c,...p}=t,h=I();return i.jsx(v,{component:"main",ref:o,...h.getStyles("main",{className:l,style:r,classNames:e,styles:n}),...p})});F.classes=k;F.displayName="@mantine/core/AppShellMain";function y(s){return typeof s=="object"?s.base:s}function z(s){const o=typeof s=="object"&&s!==null&&typeof s.base<"u"&&Object.keys(s).length===1;return typeof s=="number"||typeof s=="string"||o}function R(s){return!(typeof s!="object"||s===null||Object.keys(s).length===1&&"base"in s)}function De({baseStyles:s,minMediaStyles:o,maxMediaStyles:t,aside:e,theme:l}){var p,h,f;const r=e==null?void 0:e.width,n="translateX(var(--app-shell-aside-width))",c="translateX(calc(var(--app-shell-aside-width) * -1))";if(e!=null&&e.breakpoint&&!((p=e==null?void 0:e.collapsed)!=null&&p.mobile)&&(t[e==null?void 0:e.breakpoint]=t[e==null?void 0:e.breakpoint]||{},t[e==null?void 0:e.breakpoint]["--app-shell-aside-width"]="100%",t[e==null?void 0:e.breakpoint]["--app-shell-aside-offset"]="0px"),z(r)){const a=u(y(r));s["--app-shell-aside-width"]=a,s["--app-shell-aside-offset"]=a}if(R(r)&&(typeof r.base<"u"&&(s["--app-shell-aside-width"]=u(r.base),s["--app-shell-aside-offset"]=u(r.base)),A(r).forEach(a=>{a!=="base"&&(o[a]=o[a]||{},o[a]["--app-shell-aside-width"]=u(r[a]),o[a]["--app-shell-aside-offset"]=u(r[a]))})),(h=e==null?void 0:e.collapsed)!=null&&h.desktop){const a=e.breakpoint;o[a]=o[a]||{},o[a]["--app-shell-aside-transform"]=n,o[a]["--app-shell-aside-transform-rtl"]=c,o[a]["--app-shell-aside-offset"]="0px !important"}if((f=e==null?void 0:e.collapsed)!=null&&f.mobile){const a=re(e.breakpoint,l.breakpoints)-.1;t[a]=t[a]||{},t[a]["--app-shell-aside-width"]="100%",t[a]["--app-shell-aside-offset"]="0px",t[a]["--app-shell-aside-transform"]=n,t[a]["--app-shell-aside-transform-rtl"]=c}}function Fe({baseStyles:s,minMediaStyles:o,footer:t}){const e=t==null?void 0:t.height,l="translateY(var(--app-shell-footer-height))",r=(t==null?void 0:t.offset)??!0;if(z(e)){const n=u(y(e));s["--app-shell-footer-height"]=n,r&&(s["--app-shell-footer-offset"]=n)}R(e)&&(typeof e.base<"u"&&(s["--app-shell-footer-height"]=u(e.base),r&&(s["--app-shell-footer-offset"]=u(e.base))),A(e).forEach(n=>{n!=="base"&&(o[n]=o[n]||{},o[n]["--app-shell-footer-height"]=u(e[n]),r&&(o[n]["--app-shell-footer-offset"]=u(e[n])))})),t!=null&&t.collapsed&&(s["--app-shell-footer-transform"]=l,s["--app-shell-footer-offset"]="0px !important")}function He({baseStyles:s,minMediaStyles:o,header:t}){const e=t==null?void 0:t.height,l="translateY(calc(var(--app-shell-header-height) * -1))",r=(t==null?void 0:t.offset)??!0;if(z(e)){const n=u(y(e));s["--app-shell-header-height"]=n,r&&(s["--app-shell-header-offset"]=n)}R(e)&&(typeof e.base<"u"&&(s["--app-shell-header-height"]=u(e.base),r&&(s["--app-shell-header-offset"]=u(e.base))),A(e).forEach(n=>{n!=="base"&&(o[n]=o[n]||{},o[n]["--app-shell-header-height"]=u(e[n]),r&&(o[n]["--app-shell-header-offset"]=u(e[n])))})),t!=null&&t.collapsed&&(s["--app-shell-header-transform"]=l,s["--app-shell-header-offset"]="0px !important")}function We({baseStyles:s,minMediaStyles:o,maxMediaStyles:t,navbar:e,theme:l}){var p,h,f;const r=e==null?void 0:e.width,n="translateX(calc(var(--app-shell-navbar-width) * -1))",c="translateX(var(--app-shell-navbar-width))";if(e!=null&&e.breakpoint&&!((p=e==null?void 0:e.collapsed)!=null&&p.mobile)&&(t[e==null?void 0:e.breakpoint]=t[e==null?void 0:e.breakpoint]||{},t[e==null?void 0:e.breakpoint]["--app-shell-navbar-width"]="100%",t[e==null?void 0:e.breakpoint]["--app-shell-navbar-offset"]="0px"),z(r)){const a=u(y(r));s["--app-shell-navbar-width"]=a,s["--app-shell-navbar-offset"]=a}if(R(r)&&(typeof r.base<"u"&&(s["--app-shell-navbar-width"]=u(r.base),s["--app-shell-navbar-offset"]=u(r.base)),A(r).forEach(a=>{a!=="base"&&(o[a]=o[a]||{},o[a]["--app-shell-navbar-width"]=u(r[a]),o[a]["--app-shell-navbar-offset"]=u(r[a]))})),(h=e==null?void 0:e.collapsed)!=null&&h.desktop){const a=e.breakpoint;o[a]=o[a]||{},o[a]["--app-shell-navbar-transform"]=n,o[a]["--app-shell-navbar-transform-rtl"]=c,o[a]["--app-shell-navbar-offset"]="0px !important"}if((f=e==null?void 0:e.collapsed)!=null&&f.mobile){const a=re(e.breakpoint,l.breakpoints)-.1;t[a]=t[a]||{},t[a]["--app-shell-navbar-width"]="100%",t[a]["--app-shell-navbar-offset"]="0px",t[a]["--app-shell-navbar-transform"]=n,t[a]["--app-shell-navbar-transform-rtl"]=c}}function E(s){return Number(s)===0?"0px":je(s)}function Ue({padding:s,baseStyles:o,minMediaStyles:t}){z(s)&&(o["--app-shell-padding"]=E(y(s))),R(s)&&(s.base&&(o["--app-shell-padding"]=E(s.base)),A(s).forEach(e=>{e!=="base"&&(t[e]=t[e]||{},t[e]["--app-shell-padding"]=E(s[e]))}))}function Xe({navbar:s,header:o,footer:t,aside:e,padding:l,theme:r}){const n={},c={},p={};We({baseStyles:p,minMediaStyles:n,maxMediaStyles:c,navbar:s,theme:r}),De({baseStyles:p,minMediaStyles:n,maxMediaStyles:c,aside:e,theme:r}),He({baseStyles:p,minMediaStyles:n,header:o}),Fe({baseStyles:p,minMediaStyles:n,footer:t}),Ue({baseStyles:p,minMediaStyles:n,padding:l});const h=K(A(n),r.breakpoints).map(m=>({query:`(min-width: ${Y(m.px)})`,styles:n[m.value]})),f=K(A(c),r.breakpoints).map(m=>({query:`(max-width: ${Y(m.px)})`,styles:c[m.value]})),a=[...h,...f];return{baseStyles:p,media:a}}function Je({navbar:s,header:o,aside:t,footer:e,padding:l}){const r=ee(),n=Ne(),{media:c,baseStyles:p}=Xe({navbar:s,header:o,footer:e,aside:t,padding:l,theme:r});return i.jsx(ke,{media:c,styles:p,selector:n.cssVariablesSelector})}const Ye={},H=N((s,o)=>{const t=j("AppShellNavbar",Ye,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:h,zIndex:f,mod:a,...m}=t,d=I();return d.disabled?null:i.jsx(v,{component:"nav",ref:o,mod:[{"with-border":h??d.withBorder},a],...d.getStyles("navbar",{className:l,classNames:e,styles:n,style:r}),...m,__vars:{"--app-shell-navbar-z-index":`calc(${f??d.zIndex} + 1)`}})});H.classes=k;H.displayName="@mantine/core/AppShellNavbar";const Ge={},W=we((s,o)=>{const t=j("AppShellSection",Ge,s),{classNames:e,className:l,style:r,styles:n,vars:c,grow:p,mod:h,...f}=t,a=I();return i.jsx(v,{ref:o,mod:[{grow:p},h],...a.getStyles("section",{className:l,style:r,classNames:e,styles:n}),...f})});W.classes=k;W.displayName="@mantine/core/AppShellSection";function Ze({transitionDuration:s,disabled:o}){const[t,e]=w.useState(!0),l=w.useRef(-1),r=w.useRef(-1);return Be("resize",()=>{e(!0),clearTimeout(l.current),l.current=window.setTimeout(()=>w.startTransition(()=>{e(!1)}),200)}),Te(()=>{e(!0),clearTimeout(r.current),r.current=window.setTimeout(()=>w.startTransition(()=>{e(!1)}),s||0)},[o,s]),t}const Ke={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:oe("app")},Qe=te((s,{transitionDuration:o,transitionTimingFunction:t})=>({root:{"--app-shell-transition-duration":`${o}ms`,"--app-shell-transition-timing-function":t}})),x=N((s,o)=>{const t=j("AppShell",Ke,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,navbar:h,withBorder:f,padding:a,transitionDuration:m,transitionTimingFunction:d,header:b,zIndex:L,layout:B,disabled:V,aside:ce,footer:pe,offsetScrollbars:he=B!=="alt",mod:me,...fe}=t,X=se({name:"AppShell",classes:k,props:t,className:l,style:r,classNames:e,styles:n,unstyled:c,vars:p,varsResolver:Qe}),de=Ze({disabled:V,transitionDuration:m});return i.jsxs(Ce,{value:{getStyles:X,withBorder:f,zIndex:L,disabled:V,offsetScrollbars:he},children:[i.jsx(Je,{navbar:h,header:b,aside:ce,footer:pe,padding:a}),i.jsx(v,{ref:o,...X("root"),mod:[{resizing:de,layout:B,disabled:V},me],...fe})]})});x.classes=k;x.displayName="@mantine/core/AppShell";x.Navbar=H;x.Header=D;x.Main=F;x.Aside=O;x.Footer=q;x.Section=W;const[Me,le]=ae("Progress.Root component was not found in tree");var $={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const es={},U=N((s,o)=>{const{classNames:t,className:e,style:l,styles:r,vars:n,...c}=j("ProgressLabel",es,s),p=le();return i.jsx(v,{ref:o,...p.getStyles("label",{className:e,style:l,classNames:t,styles:r}),...c})});U.classes=$;U.displayName="@mantine/core/ProgressLabel";const ss={},ts=te((s,{size:o,radius:t,transitionDuration:e})=>({root:{"--progress-size":_e(o,"progress-size"),"--progress-radius":t===void 0?void 0:Ae(t),"--progress-transition-duration":typeof e=="number"?`${e}ms`:void 0}})),T=N((s,o)=>{const t=j("ProgressRoot",ss,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,autoContrast:h,transitionDuration:f,...a}=t,m=se({name:"Progress",classes:$,props:t,className:l,style:r,classNames:e,styles:n,unstyled:c,vars:p,varsResolver:ts});return i.jsx(Me,{value:{getStyles:m,autoContrast:h},children:i.jsx(v,{ref:o,...m("root"),...a})})});T.classes=$;T.displayName="@mantine/core/ProgressRoot";const os={withAria:!0},C=N((s,o)=>{const{classNames:t,className:e,style:l,styles:r,vars:n,value:c,withAria:p,color:h,striped:f,animated:a,mod:m,...d}=j("ProgressSection",os,s),b=le(),L=ee(),B=p?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":c,"aria-valuetext":`${c}%`}:{};return i.jsx(v,{ref:o,...b.getStyles("section",{className:e,classNames:t,styles:r,style:l}),...d,...B,mod:[{striped:f||a,animated:a},m],__vars:{"--progress-section-width":`${c}%`,"--progress-section-color":Ie(h,L),"--progress-label-color":be(b.autoContrast,L)?$e({color:h,theme:L,autoContrast:b.autoContrast}):void 0}})});C.classes=$;C.displayName="@mantine/core/ProgressSection";const as={},P=N((s,o)=>{const t=j("Progress",as,s),{value:e,classNames:l,styles:r,vars:n,color:c,striped:p,animated:h,"aria-label":f,...a}=t,{resolvedClassNames:m,resolvedStyles:d}=Re({classNames:l,styles:r,props:t});return i.jsx(T,{ref:o,classNames:m,styles:d,vars:n,...a,children:i.jsx(C,{value:e,color:c,striped:p,animated:h,"aria-label":f})})});P.classes=$;P.displayName="@mantine/core/Progress";P.Section=C;P.Root=T;P.Label=U;var ns={root:"m_8f2832ae",section:"m_7a0fe999"};function ie({initialProgress:s=0,color:o,size:t=3,stepInterval:e=500,withinPortal:l=!0,portalProps:r,zIndex:n=oe("max"),store:c=Le,...p}){c.initialize({mounted:!1,progress:s,interval:-1,step:1,stepInterval:e,timeouts:[]});const h=Se(c);return w.useEffect(()=>()=>ye(c),[c]),i.jsx(ze,{...r,withinPortal:l,children:i.jsx(P,{radius:0,value:h.progress,size:t,color:o,classNames:ns,"data-mounted":h.mounted||void 0,__vars:{"--nprogress-z-index":n==null?void 0:n.toString()},...p})})}ie.displayName="@mantine/nprogress/NavigationProgress";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rs=S("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ls=S("outline","chart-dots-3","IconChartDots3",[["path",{d:"M5 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M16 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M6 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-3"}],["path",{d:"M9 17l5 -1.5",key:"svg-4"}],["path",{d:"M6.5 8.5l7.81 5.37",key:"svg-5"}],["path",{d:"M7 7l8 -1",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var is=S("outline","dashboard","IconDashboard",[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cs=S("outline","logout-2","IconLogout2",[["path",{d:"M10 8v-2a2 2 0 0 1 2 -2h7a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-2",key:"svg-0"}],["path",{d:"M15 12h-12l3 -3",key:"svg-1"}],["path",{d:"M6 15l-3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ps=S("outline","messages","IconMessages",[["path",{d:"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10",key:"svg-0"}],["path",{d:"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2",key:"svg-1"}]]);const hs="_navbar_9qhxk_1",ms="_section_9qhxk_13",fs="_mainLinks_9qhxk_35",ds="_mainLink_9qhxk_35",us="_mainLinkInner_9qhxk_63",gs="_mainLinkIcon_9qhxk_69",vs="_collectionLink_9qhxk_93",g={navbar:hs,section:ms,mainLinks:fs,mainLink:ds,mainLinkInner:us,mainLinkIcon:gs,collectionLink:vs},bs=[{icon:is,label:"Dashboard",to:"/dashboard"},{icon:ps,label:"Chat",to:"/chat"},{icon:ls,label:"Graph",to:"/graph"},{icon:rs,label:"Actions",to:"/actions"}],xs=[{emoji:"",label:"Persona Action"},{emoji:"",label:"Agent Utils"},{emoji:"",label:"DeepDoc Client Action"},{emoji:"",label:"Deepgram Speech-to-Text Action"},{emoji:"",label:"ElevenLabs Text-to-Speech Action"},{emoji:"",label:"Introductory Interact Action"},{emoji:"",label:"LangChain Model Action"},{emoji:"",label:"Persona Interact Action"},{emoji:"",label:"Phoneme Interact Action"}];function js({selectedAgentInfo:s,agents:o}){const t=bs.map(e=>i.jsx(G,{className:g.mainLink,component:J,to:e.to,children:i.jsxs("div",{className:g.mainLinkInner,children:[i.jsx(e.icon,{size:20,className:g.mainLinkIcon,stroke:1.5}),i.jsx("span",{children:e.label})]})},e.label));return xs.map(e=>i.jsxs("a",{href:"#",onClick:l=>l.preventDefault(),className:g.collectionLink,children:[i.jsx(v,{component:"span",mr:9,fz:16,children:e.emoji})," ",e.label]},e.label)),i.jsxs("nav",{className:g.navbar,children:[i.jsx("div",{className:g.section,children:i.jsx(xe,{selectedAgentInfo:s||null,agents:o})}),i.jsx("div",{className:g.section,style:{borderBottom:"none"},children:i.jsx("div",{className:g.mainLinks,children:t})}),i.jsx("div",{className:g.section,style:{flex:1}}),i.jsx("div",{className:g.section,style:{marginBottom:0,paddingBottom:0},children:i.jsx("div",{className:g.mainLinks,style:{marginBottom:0,paddingBottom:0},children:i.jsx(G,{className:g.mainLink,component:J,to:"/logout",children:i.jsxs("div",{className:g.mainLinkInner,children:[i.jsx(cs,{size:20,className:g.mainLinkIcon,stroke:1.5}),i.jsx("span",{children:"Logout"})]})})})})]})}const Ns=()=>{const s=Q();w.useEffect(()=>{const o=localStorage.getItem("jivas-token"),t=localStorage.getItem("jivas-token-exp");if(!o){if(s.pathname!=="/login")throw _("/login");return}if(t&&Date.now()>parseInt(t,10)&&(localStorage.removeItem("jivas-token"),localStorage.removeItem("jivas-token-exp"),s.pathname!=="/login"))throw _("/login")},[s])};function Js({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}async function Ys({request:s}){var c,p,h,f,a;const o=localStorage.getItem("jivas-host"),t=localStorage.getItem("jivas-token");if(!o||!t)throw _("/login");const e="",l=await Z(`${o}/walker/list_agents`,{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then(m=>m.json()).catch(()=>({reports:[]}));if(!((c=l==null?void 0:l.reports)!=null&&c.length)&&!s.url.includes("/new-agent"))return _("/new-agent");((p=l==null?void 0:l.reports)==null?void 0:p.length)===1&&localStorage.setItem("jivas-agent",(h=l.reports[0])==null?void 0:h.id);const r=localStorage.getItem("jivas-agent"),n=r?await Z(`${o}/walker/get_agent`,{method:"POST",body:JSON.stringify({agent_id:r}),headers:{"Content-Type":"application/json"}}).then(m=>{if(console.log({res:m}),m!=null&&m.ok)return m==null?void 0:m.json();throw localStorage.removeItem("jivas-agent"),_("/login")}).catch(m=>{throw console.log({err:m}),localStorage.removeItem("jivas-agent"),_("/login")}):null;return{selectedAgentInfo:{...((f=n==null?void 0:n.reports)==null?void 0:f[0])||{},thumbnail:!((a=e==null?void 0:e.includes)!=null&&a.call(e,"unable"))&&e&&typeof e=="string"?`data:image/png;base64,${e}`:""},agents:l==null?void 0:l.reports}}const Gs=ue(function({loaderData:o}){Ns();const[t,{toggle:e}]=Pe();return i.jsxs(i.Fragment,{children:[i.jsx(ie,{}),i.jsxs(x,{navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!t}},padding:"0",children:[i.jsx(x.Navbar,{children:i.jsx(js,{selectedAgentInfo:o.selectedAgentInfo||null,agents:o.agents})}),i.jsx(x.Main,{children:i.jsx(v,{px:"lg",children:i.jsx(ks,{agents:o.agents,children:i.jsx(ge,{context:{selectedAgentInfo:o.selectedAgentInfo}})})})})]})]})});function ks({children:s,agents:o}){const t=Q(),e=ve();return t.pathname!=="/new-agent"&&!(o!=null&&o.length)?(e("/new-agent"),null):i.jsx(v,{px:"lg",children:s})}export{Ys as clientLoader,Gs as default,Js as meta};
