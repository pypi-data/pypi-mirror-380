# üéØ Real-Time –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ö–æ–º–∞–Ω–¥ - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **Real-time –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —Å —Ç–æ—á–∫–æ–π**
- ‚úÖ –¢–æ—á–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º (`fg:#808080`) 
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∂–µ–ª—Ç—ã–º (`fg:#ffff00`)
- ‚úÖ –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–µ–ª—ã–º —Ü–≤–µ—Ç–æ–º
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ (real-time)

### 2. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `DotCommandProcessor` –Ω–∞—Å–ª–µ–¥–Ω–∏–∫ –∫–ª–∞—Å—Å–∞ `Processor`
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ `input_processors` –ø–∞—Ä–∞–º–µ—Ç—Ä prompt_toolkit
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Ñ—É–Ω–∫—Ü–∏—é `run_dialog_mode`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã `from prompt_toolkit.layout.processors`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —á–µ—Ä–µ–∑ `Style.from_dict`
- ‚úÖ –£–±—Ä–∞–Ω post-processing (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:
1. **test_processor.py** ‚úÖ - –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **aiebash --dialog** ‚úÖ - –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
3. **–ö–æ–º–∞–Ω–¥—ã —Å —Ç–æ—á–∫–æ–π** ‚úÖ - `.ping`, `. ping 8.8.8.8` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8** ‚úÖ - –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üìã –ö–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

```python
class DotCommandProcessor(Processor):
    """–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–ª—è real-time –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ —Å —Ç–æ—á–∫–æ–π"""
    
    def apply_transformation(self, transformation_input):
        """–ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –∫ –≤–≤–æ–¥—É"""
        text = transformation_input.document.text
        
        if text.startswith('.') and len(text) > 0:
            # –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥ —Å —Ç–æ—á–∫–æ–π
            formatted_fragments = [
                ('class:dot', '.'),
                ('class:command', text[1:])
            ]
        else:
            # –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
            formatted_fragments = [('class:text', text)]
        
        return Transformation(
            formatted_fragments,
            source_to_display=lambda i: i,
            display_to_source=lambda i: i
        )
```

## üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

```python
style = Style.from_dict({
    "prompt": "bold fg:green",      # –ó–µ–ª–µ–Ω—ã–π –ø—Ä–æ–º–ø—Ç ">>>"
    "dot": "fg:#808080",           # –°–µ—Ä–∞—è —Ç–æ—á–∫–∞
    "command": "cyan",             # –°–≤–µ—Ç–ª–æ-—Å–∏–Ω—è—è –∫–æ–º–∞–Ω–¥–∞
    "text": "",                    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ü–≤–µ—Ç –∫–æ–Ω—Å–æ–ª–∏
})
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≤–∏—Å–∞–Ω–∏–µ–º –∫—É—Ä—Å–æ—Ä–∞
2. **Real-time** - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å
5. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ API prompt_toolkit

## üìù –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏

**–í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –ø—Ä–æ—Å–∏–ª:
- ‚úÖ "—Ç–æ—á–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å —Å–µ—Ä–æ–π" - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ "–æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç–µ–∫—Å—Ç –∂–µ–ª—Ç—ã–π" - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
- ‚úÖ "–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ" - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ "–≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞" - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!