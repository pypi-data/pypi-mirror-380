
#                     !!! WARNING !!!
#             This is an auto-generated file!
#                 Generated by [Builder].
# Any manual modifications will be lost upon regeneration.
#             DO NOT EDIT THIS FILE DIRECTLY.

from typing import TYPE_CHECKING, Optional, List
from ...gadgets.tlobject import TLObject
from ...gadgets.byteutils import Writer


if TYPE_CHECKING:
    from .peer import TypePeer
    from .star_gift import TypeStarGift
    from .text_with_entities import TypeTextWithEntities
    from ...gadgets.byteutils import Reader


class SavedStarGift(TLObject, family='TypeSavedStarGift'):
    _id = 0X19A9B572
    _group_id = 0X7D90D642

    def __init__(
        self,
        date: int,
        gift: 'TypeStarGift',
        name_hidden: bool = False,
        unsaved: bool = False,
        refunded: bool = False,
        can_upgrade: bool = False,
        pinned_to_top: bool = False,
        upgrade_separate: bool = False,
        from_id: Optional['TypePeer'] = None,
        message: Optional['TypeTextWithEntities'] = None,
        msg_id: Optional[int] = None,
        saved_id: Optional[int] = None,
        convert_stars: Optional[int] = None,
        upgrade_stars: Optional[int] = None,
        can_export_at: Optional[int] = None,
        transfer_stars: Optional[int] = None,
        can_transfer_at: Optional[int] = None,
        can_resell_at: Optional[int] = None,
        collection_id: Optional[List[int]] = None,
        prepaid_upgrade_hash: Optional[str] = None
    ):

        self.date = date
        self.gift = gift
        self.name_hidden = name_hidden
        self.unsaved = unsaved
        self.refunded = refunded
        self.can_upgrade = can_upgrade
        self.pinned_to_top = pinned_to_top
        self.upgrade_separate = upgrade_separate
        self.from_id = from_id
        self.message = message
        self.msg_id = msg_id
        self.saved_id = saved_id
        self.convert_stars = convert_stars
        self.upgrade_stars = upgrade_stars
        self.can_export_at = can_export_at
        self.transfer_stars = transfer_stars
        self.can_transfer_at = can_transfer_at
        self.can_resell_at = can_resell_at
        self.collection_id = collection_id
        self.prepaid_upgrade_hash = prepaid_upgrade_hash

    def to_bytes(self, boxed: bool=True):
        with Writer(b'r\xb5\xa9\x19' if boxed else b'') as writer:
            with writer.flag() as flags:
                flags(self.name_hidden, 0)
                flags(self.unsaved, 5)
                flags(self.refunded, 9)
                flags(self.can_upgrade, 10)
                flags(self.pinned_to_top, 12)
                flags(self.upgrade_separate, 17)

                if flags(self.from_id, 1):
                    writer.object(
                        self.from_id,
                        group_id=0XB4DECBCA
                    )
                writer.int(self.date)
                writer.object(
                    self.gift,
                    group_id=0X87440C7B
                )

                if flags(self.message, 2):
                    writer.object(
                        self.message,
                        group_id=0X5D96896
                    )

                if flags(self.msg_id, 3):
                    writer.int(self.msg_id)

                if flags(self.saved_id, 11):
                    writer.long(self.saved_id)

                if flags(self.convert_stars, 4):
                    writer.long(self.convert_stars)

                if flags(self.upgrade_stars, 6):
                    writer.long(self.upgrade_stars)

                if flags(self.can_export_at, 7):
                    writer.int(self.can_export_at)

                if flags(self.transfer_stars, 8):
                    writer.long(self.transfer_stars)

                if flags(self.can_transfer_at, 13):
                    writer.int(self.can_transfer_at)

                if flags(self.can_resell_at, 14):
                    writer.int(self.can_resell_at)

                if flags(self.collection_id, 15):
                    writer.vector(
                        self.collection_id,
                        writer.int
                    )

                if flags(self.prepaid_upgrade_hash, 16):
                    writer.string(self.prepaid_upgrade_hash)

            return writer.getvalue()

    @classmethod
    def from_reader(cls, reader: 'Reader'):
        flags = reader.flag()
        from_id_ = (
            reader.object(
                group_id=0XB4DECBCA
            )
            if flags(1) else None
        )

        date_ = reader.int()
        gift_ = reader.object(
            group_id=0X87440C7B
        )

        message_ = (
            reader.object(
                group_id=0X5D96896
            )
            if flags(2) else None
        )

        msg_id_ = (
            reader.int()
            if flags(3) else None
        )

        saved_id_ = (
            reader.long()
            if flags(11) else None
        )

        convert_stars_ = (
            reader.long()
            if flags(4) else None
        )

        upgrade_stars_ = (
            reader.long()
            if flags(6) else None
        )

        can_export_at_ = (
            reader.int()
            if flags(7) else None
        )

        transfer_stars_ = (
            reader.long()
            if flags(8) else None
        )

        can_transfer_at_ = (
            reader.int()
            if flags(13) else None
        )

        can_resell_at_ = (
            reader.int()
            if flags(14) else None
        )

        collection_id_ = (
            reader.vector(
                reader.int
            )
            if flags(15) else None
        )

        prepaid_upgrade_hash_ = (
            reader.string()
            if flags(16) else None
        )

        return cls(
            date=date_,
            gift=gift_,
            name_hidden=flags(0),
            unsaved=flags(5),
            refunded=flags(9),
            can_upgrade=flags(10),
            pinned_to_top=flags(12),
            upgrade_separate=flags(17),
            from_id=from_id_,
            message=message_,
            msg_id=msg_id_,
            saved_id=saved_id_,
            convert_stars=convert_stars_,
            upgrade_stars=upgrade_stars_,
            can_export_at=can_export_at_,
            transfer_stars=transfer_stars_,
            can_transfer_at=can_transfer_at_,
            can_resell_at=can_resell_at_,
            collection_id=collection_id_,
            prepaid_upgrade_hash=prepaid_upgrade_hash_
        )

TypeSavedStarGift = SavedStarGift