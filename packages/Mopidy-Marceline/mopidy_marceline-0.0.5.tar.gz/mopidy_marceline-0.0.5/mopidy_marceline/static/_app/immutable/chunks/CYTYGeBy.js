import"./DsnmJJEf.js";import{D as B,E as ua,F as fa,G as da,H as V,I as ma,J as _a,K as va,L as W,U as z,M as F,N as $,O as aa,P as X,Q as ga,R as ha,S as ea,T as ta,V as sa,q as ka,W as na,X as Y,Y as pa,Z as xa,p as ya,g as r,h as y,c as ba,f as T,a as D,s as b,b as p,t as w,o as ra,e as H,k as ia,d as G,r as M,i as Ta,_ as Ia,$ as Aa}from"./C4aLToA0.js";import{i as Z}from"./oXZGlhUn.js";import{g as Na,S as Sa,b as O,I as Ea,s as wa}from"./OkSu_lmj.js";import{T as La,a as Ca}from"./DDL4Vd-v.js";import{t as Ra}from"./CICL-Sq2.js";import{A as qa}from"./C659k8ar.js";import{A as Ba}from"./DKQz3N_7.js";import{L as Da}from"./CUMWwcMq.js";const J=0,P=1,K=2;function Ha(g,a,f,i,I){B&&ua();var t=g,L=fa(),C=ka,s=z,d,m,A,N=L?$(void 0):aa(void 0,!1,!1),R=L?$(void 0):aa(void 0,!1,!1),l=!1;function n(e,o){l=!0,o&&(ea(c),ta(c),sa(C));try{e===J&&f&&(d?na(d):d=X(()=>f(t))),e===P&&i&&(m?na(m):m=X(()=>i(t,N))),e!==J&&d&&Y(d,()=>d=null),e!==P&&m&&Y(m,()=>m=null),e!==K&&A&&Y(A,()=>A=null)}finally{o&&(sa(null),ta(null),ea(null),pa||xa())}}var c=da(()=>{if(s===(s=a()))return;let e=B&&V(s)===(t.data===ma);if(e&&(t=_a(),va(t),W(!1),e=!0),V(s)){var o=s;l=!1,o.then(S=>{o===s&&(F(N,S),n(P,!0))},S=>{if(o===s)throw F(R,S),n(K,!0),R.v}),B?f&&(d=X(()=>f(t))):ga(()=>{l||n(J,!0)})}else F(N,s),n(P,!1);return e&&W(!0),()=>s=z});B&&(t=ha)}const Ga=new TextEncoder,Ma=async g=>{const a=Ga.encode(g.toString());return await globalThis.crypto.subtle.digest("SHA-256",a)},Oa=async g=>{const a=await Ma(g),f=new Uint8Array(a);let i=BigInt(0);for(const I of f)i<<=BigInt(8),i|=BigInt(I);return Number(i%BigInt(Number.MAX_SAFE_INTEGER))};var Pa=T('<span aria-hidden="true"> </span>'),Ua=T('<span class="inline-grid grid-cols-1 grid-rows-1 justify-items-end *:col-span-full *:row-span-full"><span> </span> <!> <!></span>'),ja=T('<div><img alt="Album cover"/></div>'),Fa=T("<!> <!>",1),Xa=T("<!> <!>",1),Ya=T("<!> ",1);function ee(g,a){ya(a,!0);const f=["mask-shape-sunny","mask-shape-6-sided-cookie","mask-shape-7-sided-cookie","mask-shape-9-sided-cookie","mask-shape-8-leaf-clover"],i=Na();let I=y(()=>a.actions??Ra(i,a.track)),t=y(()=>a.active??a.track.uri===i.currentTrack?.track.uri),L=y(()=>Oa(a.track.uri).then(s=>f[s%f.length])),C=y(()=>i.getImage(a.track.uri));{const s=l=>{var n=Fa(),c=D(n);{var e=u=>{var x=Ua(),h=G(x),U=G(h,!0);M(h);var _=b(h,2);{var E=v=>{var k=Pa(),q=G(k,!0);M(k),w(()=>{O(k,1,`pointer-events-none opacity-0 ${a.maxIndexClass??""}`),H(q,a.maxIndex)}),p(v,k)};Z(_,v=>{a.maxIndex!==void 0&&v(E)})}var j=b(_,2);ra(j,()=>a.leading??ia),M(x),w(()=>{O(h,1,`transition-opacity ${a.indexClass??""}`),H(U,a.index)}),p(u,x)};Z(c,u=>{a.index!==void 0&&u(e)})}var o=b(c,2);{var S=u=>{var x=Ta();const h=(_,E)=>{let j=Ia(()=>Aa(E?.(),"mask-shape-circle"));var v=ja();let k;var q=G(v);let Q;M(v),w((la,ca)=>{k=O(v,1,`h-full mask-contain mask-no-repeat [animation-duration:5s] ${(r(t)?r(j):"mask-shape-square")??""}`,null,k,la),Q=O(q,1,"aspect-square h-full object-cover [animation-direction:reverse] [animation-duration:5s]",null,Q,ca),wa(q,"src",r(C))},[()=>({"[animation-play-state:paused]":i.playbackState!=="playing","animate-spin":r(t)}),()=>({"[animation-play-state:paused]":i.playbackState!=="playing","animate-spin":r(t)})]),p(_,v)};var U=D(x);Ha(U,()=>r(L),_=>{h(_)},(_,E)=>{h(_,()=>r(E))}),p(u,x)},oa=u=>{Ea(u,{icon:"music_note"})};Z(o,u=>{r(C)?u(S):u(oa,!1)})}p(l,n)},d=l=>{La(l,{contained:!1,get track(){return a.track}})},m=l=>{var n=Xa(),c=D(n);Ba(c,{get artists(){return a.track.artists}});var e=b(c),o=b(e);qa(o,{get album(){return a.track.album}}),w(()=>H(e,` ${Sa} `)),p(l,n)},A=l=>{var n=Ya(),c=D(n);ra(c,()=>a.trailing??ia);var e=b(c);w(o=>H(e,` ${o??""}`),[()=>Ca(a.track.length)]),p(l,n)};let N=y(()=>r(t)?"text-primary":""),R=y(()=>r(t)?"text-secondary":"");Da(g,{get actions(){return r(I)},get labelTextClass(){return r(N)},leadingClass:"inline-flex flex-row items-center gap-4",lines:2,get supportingTextClass(){return r(R)},leading:s,labelText:d,supportingText:m,trailing:A,$$slots:{leading:!0,labelText:!0,supportingText:!0,trailing:!0}})}ba()}export{ee as T};
