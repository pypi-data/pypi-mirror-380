import"../chunks/DsnmJJEf.js";import{p as x,i as A,a as p,b as o,c as b,g as _,h as E,f as h,n as v,j as y,t as c,e as d,s as O,d as L,r as S,k as j,C as D}from"../chunks/C4aLToA0.js";import{H as M,T as V}from"../chunks/DHUdjfhY.js";import{i as $,s as q,r as C}from"../chunks/oXZGlhUn.js";import{g as K,S as B,a as F}from"../chunks/OkSu_lmj.js";import{b as G,c as J}from"../chunks/DDL4Vd-v.js";import{T as N}from"../chunks/Bouf9AsO.js";import{T as Q}from"../chunks/CYTYGeBy.js";import{V as U}from"../chunks/CUMWwcMq.js";const W=async({parent:s})=>{const{mopidy:t}=await s(),r=t.history;return await t.requestImages(r.map(e=>e.track.uri)),{history:r}},dt=Object.freeze(Object.defineProperty({__proto__:null,load:W},Symbol.toStringTag,{value:"Module"}));var X=h("<span> </span>"),Y=h("<!> <span> </span>",1);function Z(s,t){x(t,!0);let r=C(t,["$$slots","$$events","$$legacy","entry","index","maxIndex"]);const e=K();let n=E(()=>e.getTrack(t.entry.track.uri));var i=A(),u=p(i);{var l=a=>{Q(a,q({get index(){return t.index},get maxIndex(){return t.maxIndex},get track(){return _(n)}},()=>r,{trailing:P=>{var T=Y(),k=p(T);N(k,{trigger:(f,H)=>{let g=()=>H?.().props;var m=X();F(m,()=>({class:"relative cursor-pointer before:absolute before:inset-0 before:z-10",...g()}));var w=L(m);S(m),c(z=>d(w,`${z??""} ago`),[()=>J(t.entry.timestamp)]),o(f,m)},children:(f,H)=>{v();var g=y();c(m=>d(g,m),[()=>G(t.entry.timestamp)]),o(f,g)},$$slots:{trigger:!0,default:!0}});var I=O(k,2),R=L(I,!0);S(I),c(()=>d(R,B)),o(P,T)},$$slots:{trailing:!0}}))};$(u,a=>{_(n)&&a(l)})}o(s,i),b()}function tt(s,t){x(t,!0),U(s,{get data(){return t.entries},getKey:e=>`${e.track.uri} ${e.timestamp.getTime()}`,item:(e,n=j,i=j)=>{{let u=E(()=>i()+1);Z(e,{get entry(){return n()},get index(){return _(u)},get maxIndex(){return t.entries.length}})}},$$slots:{item:!0}}),b()}var et=h("<!> <!>",1);function ft(s,t){x(t,!0);var r=et();D(i=>{V(i,{text:"History"})});var e=p(r);M(e,{title:l=>{v();var a=y("History");o(l,a)},subtitle:l=>{v();var a=y();c(()=>d(a,`${t.data.history.length??""} entr${t.data.history.length===1?"y":"ies"}`)),o(l,a)},$$slots:{title:!0,subtitle:!0}});var n=O(e,2);tt(n,{get entries(){return t.data.history}}),o(s,r),b()}export{ft as component,dt as universal};
