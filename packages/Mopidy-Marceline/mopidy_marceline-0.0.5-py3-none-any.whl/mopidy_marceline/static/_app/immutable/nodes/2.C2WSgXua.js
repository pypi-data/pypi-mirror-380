import"../chunks/DsnmJJEf.js";import{aC as fe,ad as D,aA as pe,D as ve,w as me,af as ge,aD as ke,az as H,N as be,aE as Y,g as n,al as g,aF as V,h as o,p as w,i as L,a as C,b as k,c as R,f as q,aG as ye,s as K,o as Z,d as ne,k as I,r as ie,aH as _e,t as oe,ak as xe,u as Ce,C as we,n as $,j as ee,e as Re}from"../chunks/C4aLToA0.js";import{t as qe}from"../chunks/CRpwIFV_.js";import{s as Se,H as Te,T as ze}from"../chunks/DHUdjfhY.js";import{p as v,i as P,r as U,s as ue,c as De}from"../chunks/oXZGlhUn.js";import{d as Le,C as ce,f as Pe,w as G,E as Ae,h as Ee,j as te,k as re,l as Ie,n as Oe,o as Qe,m as le,a as W,p as je,q as x,t as Me,u as Ne,v as He,b as Ve,s as Be,x as Fe,g as de}from"../chunks/OkSu_lmj.js";import{t as se,d as Ge,f as We}from"../chunks/_iVeYSG_.js";import{i as Ke}from"../chunks/OHVsp9y2.js";import{t as Ue}from"../chunks/CICL-Sq2.js";import{T as Xe}from"../chunks/CYTYGeBy.js";import{V as Je}from"../chunks/CUMWwcMq.js";function Ye(t,e,r=e){var a=new WeakSet;fe(t,"input",async s=>{var i=s?t.defaultValue:t.value;if(i=B(t)?F(i):i,r(i),D!==null&&a.add(D),await pe(),i!==(i=e())){var d=t.selectionStart,f=t.selectionEnd;t.value=i??"",f!==null&&(t.selectionStart=d,t.selectionEnd=Math.min(f,t.value.length))}}),(ve&&t.defaultValue!==t.value||me(e)==null&&t.value)&&(r(B(t)?F(t.value):t.value),D!==null&&a.add(D)),ge(()=>{var s=e();if(t===document.activeElement){var i=ke??D;if(a.has(i))return}B(t)&&s===F(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function B(t){var e=t.type;return e==="number"||e==="range"}function F(t){return t===""?null:+t}var Ze=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],$e=["difference","intersection","symmetricDifference","union"],ae=!1;class A extends Set{#r=new Map;#e=H(0);#t=H(0);#a=Y||-1;constructor(e){if(super(),e){for(var r of e)super.add(r);this.#t.v=super.size}ae||this.#n()}#s(e){return Y===this.#a?H(e):be(e)}#n(){ae=!0;var e=A.prototype,r=Set.prototype;for(const a of Ze)e[a]=function(...s){return n(this.#e),r[a].apply(this,s)};for(const a of $e)e[a]=function(...s){n(this.#e);var i=r[a].apply(this,s);return new A(i)}}has(e){var r=super.has(e),a=this.#r,s=a.get(e);if(s===void 0){if(!r)return n(this.#e),!1;s=this.#s(!0),a.set(e,s)}return n(s),r}add(e){return super.has(e)||(super.add(e),g(this.#t,super.size),V(this.#e)),this}delete(e){var r=super.delete(e),a=this.#r,s=a.get(e);return s!==void 0&&(a.delete(e),g(s,!1)),r&&(g(this.#t,super.size),V(this.#e)),r}clear(){if(super.size!==0){super.clear();var e=this.#r;for(var r of e.values())g(r,!1);e.clear(),g(this.#t,0),V(this.#e)}}keys(){return this.values()}values(){return n(this.#e),super.values()}entries(){return n(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(this.#t)}}const et={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"},tt=Le(et),rt=Oe({component:"checkbox",parts:["root","group","group-label","input"]}),st=new ce("Checkbox.Group"),he=new ce("Checkbox.Root");class X{static create(e,r=null){return he.set(new X(e,r))}opts;group;#r=o(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return n(this.#r)}set trueName(e){g(this.#r,e)}#e=o(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current);get trueRequired(){return n(this.#e)}set trueRequired(e){g(this.#e,e)}#t=o(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current);get trueDisabled(){return n(this.#t)}set trueDisabled(e){g(this.#t,e)}#a=o(()=>this.group&&this.group.opts.readonly.current?!0:this.opts.readonly.current);get trueReadonly(){return n(this.#a)}set trueReadonly(e){g(this.#a,e)}attachment;constructor(e,r){this.opts=e,this.group=r,this.attachment=Pe(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),G.pre([()=>Se(this.group?.opts.value.current),()=>this.opts.value.current],([a,s])=>{!a||!s||(this.opts.checked.current=a.includes(s))}),G.pre(()=>this.opts.checked.current,a=>{this.group&&(a?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.trueDisabled||this.trueReadonly||(e.key===Ae&&e.preventDefault(),e.key===Ee&&(e.preventDefault(),this.#s()))}#s(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){if(!(this.trueDisabled||this.trueReadonly)){if(this.opts.type.current==="submit"){this.#s();return}e.preventDefault(),this.#s()}}#n=o(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return n(this.#n)}set snippetProps(e){g(this.#n,e)}#i=o(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":Ie(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":re(this.trueRequired),"aria-readonly":re(this.trueReadonly),"data-disabled":te(this.trueDisabled),"data-readonly":te(this.trueReadonly),"data-state":at(this.opts.checked.current,this.opts.indeterminate.current),[rt.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return n(this.#i)}set props(e){g(this.#i,e)}}class J{static create(){return new J(he.get())}root;#r=o(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return n(this.#r)}set trueChecked(e){g(this.#r,e)}#e=o(()=>!!this.root.trueName);get shouldRender(){return n(this.#e)}set shouldRender(e){g(this.#e,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){Qe(this.root.opts.ref.current)&&this.root.opts.ref.current.focus()}#t=o(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current,readonly:this.root.trueReadonly,onfocus:this.onfocus}));get props(){return n(this.#t)}set props(e){g(this.#t,e)}}function at(t,e){return e?"indeterminate":t?"checked":"unchecked"}var nt=q("<input/>"),it=q("<input/>");function ot(t,e){w(e,!0);let r=v(e,"value",15),a=U(e,["$$slots","$$events","$$legacy","value"]);const s=o(()=>le(a,{"aria-hidden":"true",tabindex:-1,style:tt}));var i=L(),d=C(i);{var f=u=>{var c=nt();W(c,()=>({...n(s),value:r()}),void 0,void 0,void 0,!0),k(u,c)},p=u=>{var c=it();W(c,()=>({...n(s)}),void 0,void 0,void 0,!0),Ye(c,r),k(u,c)};P(d,u=>{n(s).type==="checkbox"?u(f):u(p,!1)})}k(t,i),R()}function ut(t,e){w(e,!1);const r=J.create();Ke();var a=L(),s=C(a);{var i=d=>{ot(d,ue(()=>r.props))};P(s,d=>{r.shouldRender&&d(i)})}k(t,a),R()}var ct=q("<button><!></button>"),lt=q("<!> <!>",1);function dt(t,e){const r=ye();w(e,!0);let a=v(e,"checked",15,!1),s=v(e,"ref",15,null),i=v(e,"disabled",3,!1),d=v(e,"required",3,!1),f=v(e,"name",3,void 0),p=v(e,"value",3,"on"),u=v(e,"id",19,()=>je(r)),c=v(e,"indeterminate",15,!1),y=v(e,"type",3,"button"),m=U(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type","readonly"]);const h=st.getOr(null);h&&p()&&(h.opts.value.current.includes(p())?a(!0):a(!1)),G.pre(()=>p(),()=>{h&&p()&&(h.opts.value.current.includes(p())?a(!0):a(!1))});const b=X.create({checked:x(()=>a(),l=>{a(l),e.onCheckedChange?.(l)}),disabled:x(()=>i()??!1),required:x(()=>d()),name:x(()=>f()),value:x(()=>p()),id:x(()=>u()),ref:x(()=>s(),l=>s(l)),indeterminate:x(()=>c(),l=>{c(l),e.onIndeterminateChange?.(l)}),type:x(()=>y()),readonly:x(()=>!!e.readonly)},h),E=o(()=>le({...m},b.props));var S=lt(),T=C(S);{var O=l=>{var _=L(),z=C(_);{let M=o(()=>({props:n(E),...b.snippetProps}));Z(z,()=>e.child,()=>n(M))}k(l,_)},Q=l=>{var _=ct();W(_,()=>({...n(E)}));var z=ne(_);Z(z,()=>e.children??I,()=>b.snippetProps),ie(_),k(l,_)};P(T,l=>{e.child?l(O):l(Q,!1)})}var j=K(T,2);ut(j,{}),k(t,S),R()}const ht=Fe({slots:{container:"group/state-layer size-4.5 border-outline rounded-xxs not-ui-unchecked:bg-primary not-ui-unchecked:border-primary text-on-surface not-ui-unchecked:text-on-primary disabled:border-on-surface/38 disabled:not-ui-unchecked:bg-on-surface/38 disabled:not-ui-unchecked:border-transparent disabled:text-surface relative inline-flex cursor-pointer items-center justify-center border-2 transition-colors *:absolute disabled:cursor-default",icon:"size-3.5 fill-none stroke-current stroke-2 linecap-butt linejoin-square",stateLayer:"group-not-ui-unchecked/state-layer:text-primary size-10 rounded-full"}}),ft=Ne(ht);var pt=_e('<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path></path></svg>'),vt=q("<!> <!>",1);function mt(t,e){w(e,!0);const r=(c,y=I)=>{var m=pt(),h=ne(m);ie(m),oe(b=>{Ve(m,0,b),Be(h,"d",y())},[()=>He(n(f).icon({class:e.iconClass}))]),se(1,h,()=>Ge,()=>({duration:300})),se(2,h,()=>We,()=>({duration:300})),k(c,m)};let a=v(e,"checked",15,!1),s=v(e,"indeterminate",15,!1),i=v(e,"ref",15,null),d=U(e,["$$slots","$$events","$$legacy","checked","containerClass","iconClass","indeterminate","ref","stateLayerClass"]),f=o(()=>ft({}));var p=L(),u=C(p);{const c=(m,h)=>{let b=()=>h?.().checked,E=()=>h?.().indeterminate;var S=vt(),T=C(S);{let l=o(()=>n(f).stateLayer({class:e.stateLayerClass}));Me(T,{get containerClass(){return n(l)},get target(){return i()}})}var O=K(T,2);{var Q=l=>{r(l,()=>"M 2 7 H 12")},j=l=>{var _=L(),z=C(_);{var M=N=>{r(N,()=>"M 2.4 7.4 L 5 10 L 11.6 3.4")};P(z,N=>{b()&&N(M)},!0)}k(l,_)};P(O,l=>{E()?l(Q):l(j,!1)})}k(m,S)};let y=o(()=>n(f).container({class:e.containerClass}));De(u,()=>dt,(m,h)=>{h(m,ue({get class(){return n(y)}},()=>d,{get ref(){return i()},set ref(b){i(b)},get checked(){return a()},set checked(b){a(b)},get indeterminate(){return s()},set indeterminate(b){s(b)},children:c,$$slots:{default:!0}}))})}k(t,p),R()}const gt=async({parent:t})=>{const{mopidy:e}=await t();return await e.requestImages(e.queue.map(r=>r.track.uri)),{}},It=Object.freeze(Object.defineProperty({__proto__:null,load:gt},Symbol.toStringTag,{value:"Module"})),kt=t=>[{action:()=>t.clearQueue(),icon:"close",label:"Clear"},{action:()=>t.shuffleQueue(),icon:"shuffle",label:"Shuffle"}],bt=(t,e)=>[{action:()=>t.removeFromQueue(e),icon:"close",label:"Remove from Queue"},"divider",...qe(t,e)],yt=(t,e)=>[{action:()=>t.skipToTrack(e),icon:"skip_next",label:"Skip to Track"},{action:()=>t.removeFromQueue(e),icon:"close",label:"Remove from Queue"},"divider",...Ue(t,e.track)];function _t(t,e){w(e,!0);let r=v(e,"selected",15,!1),a=v(e,"selecting",3,!1);const s=de();let i=o(()=>yt(s,e.track)),d=o(()=>e.track.tlid===s.currentTrack?.tlid);{const f=u=>{{let c=o(()=>a()?"":"group-[&:not(:hover)]/list-item:opacity-0");mt(u,{get containerClass(){return`transition-opacity ${n(c)??""}`},stateLayerClass:"z-20",get checked(){return r()},set checked(y){r(y)}})}};let p=o(()=>a()?"opacity-0":"group-hover/list-item:opacity-0");Xe(t,{get actions(){return n(i)},get active(){return n(d)},get index(){return e.index},get indexClass(){return n(p)},get maxIndex(){return e.maxIndex},get track(){return e.track.track},leading:f,$$slots:{leading:!0}})}R()}function xt(t,e){w(e,!0);let r=v(e,"selected",27,()=>xe(new A)),a=o(()=>r().size>0);Je(t,{get data(){return e.tracks},getKey:i=>i.tlid,item:(i,d=I,f=I)=>{var p=()=>r().has(d()),u=c=>c?r().add(d()):r().delete(d());{let c=o(()=>f()+1);_t(i,{get index(){return n(c)},get maxIndex(){return e.tracks.length},get selecting(){return n(a)},get track(){return d()},get selected(){return p()},set selected(y){u(y)}})}},$$slots:{item:!0}}),R()}var Ct=q("<!> <!>",1);function Ot(t,e){w(e,!0);const r=de();let a=o(()=>kt(r)),s=new A,i=o(()=>bt(r,[...s]));Ce(()=>{for(const u of s)r.queue.includes(u)||s.delete(u)});var d=Ct();we(u=>{{let c=o(()=>r.currentTrack?.track.name??"Queue");ze(u,{get text(){return n(c)}})}});var f=C(d);{const u=m=>{$();var h=ee("Queue");k(m,h)},c=m=>{$();var h=ee();oe(()=>Re(h,`${(s.size||r.queue.length)??""}
        track${(s.size||r.queue.length)===1?"":"s"}
        ${s.size>0?"selected":""}`)),k(m,h)};let y=o(()=>s.size==0?n(a):n(i));Te(f,{get actions(){return n(y)},title:u,subtitle:c,$$slots:{title:!0,subtitle:!0}})}var p=K(f,2);xt(p,{get tracks(){return r.queue},get selected(){return s},set selected(u){s=u}}),k(t,d),R()}export{Ot as component,It as universal};
