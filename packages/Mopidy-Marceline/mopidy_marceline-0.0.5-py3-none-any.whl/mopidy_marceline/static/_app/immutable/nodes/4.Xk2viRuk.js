import{e as G}from"../chunks/C58asskQ.js";import{b as R}from"../chunks/Ddm0HaqK.js";import"../chunks/DsnmJJEf.js";import{p as M,c as O,g as p,f as x,a as P,s as c,b as m,n as I,t as g,e as h,j,h as H,C as B,r as q,d as E}from"../chunks/C4aLToA0.js";import{i as S}from"../chunks/oXZGlhUn.js";import{g as F,e as J,i as K}from"../chunks/OkSu_lmj.js";import{f as N,a as Q}from"../chunks/DDL4Vd-v.js";import{a as U}from"../chunks/B6q3kgX-.js";import{A as V}from"../chunks/C659k8ar.js";import{A as C}from"../chunks/DKQz3N_7.js";import{H as W,T as X}from"../chunks/DHUdjfhY.js";import{I as y}from"../chunks/pFgv2Sl6.js";import{T as Y}from"../chunks/OHTkr9Wp.js";const Z=async({params:f,parent:t})=>{const{mopidy:o}=await t(),e=o.getAlbum(R(f.album));e||G(404,"Album not found");const l=(await o.requestImages([e.uri,...e.tracks.map(a=>a.uri)]))?.at(0),_=l?await o.requestPalette(l):void 0;return{album:e,palette:_}},ht=Object.freeze(Object.defineProperty({__proto__:null,load:Z},Symbol.toStringTag,{value:"Module"}));var $=x(" <!>",1),tt=x("<!> <!> <!> <!>",1);function at(f,t){M(t,!0);const o=F();let e=H(()=>o.getImage(t.album.uri)),l=H(()=>U(o,t.album));W(f,{get actions(){return p(l)},get image(){return p(e)},title:s=>{V(s,{get album(){return t.album}})},subtitle:s=>{C(s,{get artists(){return t.album.artists}})},info:s=>{var b=tt(),A=P(b);y(A,{icon:"person",tooltip:"Artists",children:(r,D)=>{C(r,{get artists(){return t.album.artists}})}});var k=c(A,2);y(k,{icon:"music_note",tooltip:"Genre",children:(r,D)=>{I();var i=$(),n=P(i),T=c(n);{var z=w=>{var L=j();g(()=>h(L,`, ${t.album.num_discs??""}
                discs`)),m(w,L)};S(T,w=>{t.album.num_discs>1&&w(z)})}g(()=>h(n,`${t.album.num_tracks??""} tracks`)),m(r,i)}});var d=c(k,2);y(d,{icon:"calendar_today",tooltip:"Release date",children:(r,D)=>{I();var i=j();g(n=>h(i,n),[()=>N(new Date(t.album.date))]),m(r,i)}});var v=c(d,2);y(v,{icon:"timer",tooltip:"Duration",children:(r,D)=>{I();var i=j();g(n=>h(i,n),[()=>Q(t.album.tracks.reduce((n,T)=>n+T.length,0))]),m(r,i)}}),m(s,b)},$$slots:{title:!0,subtitle:!0,info:!0}}),O()}var et=x('<h2 class="px-4 text-display-s"> </h2>'),rt=x("<!> <!>",1),ot=x('<!> <div class="flex flex-col gap-4"></div>',1);function pt(f,t){M(t,!0);let o=H(()=>t.data.album.tracks.reduce((a,u)=>(a.at(-1)?.at(-1)?.disc_no!==u.disc_no?a.push([u]):a.at(-1)?.push(u),a),[]));var e=ot();B(a=>{X(a,{get text(){return t.data.album.name}})});var l=P(e);at(l,{get album(){return t.data.album}});var _=c(l,2);J(_,21,()=>p(o),K,(a,u)=>{var s=rt(),b=P(s);{var A=d=>{var v=et(),r=E(v);q(v),g(()=>h(r,`Disc ${p(u)[0].disc_no??""}`)),m(d,v)};S(b,d=>{t.data.album.num_discs>1&&d(A)})}var k=c(b,2);Y(k,{numbered:!0,get tracks(){return p(u)}}),m(a,s)}),q(_),m(f,e),O()}export{pt as component,ht as universal};
