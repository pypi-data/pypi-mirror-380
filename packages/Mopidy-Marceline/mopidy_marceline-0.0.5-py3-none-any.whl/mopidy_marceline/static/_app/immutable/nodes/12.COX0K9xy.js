import{e as K}from"../chunks/C58asskQ.js";import{b as N}from"../chunks/Ddm0HaqK.js";import"../chunks/DsnmJJEf.js";import{p as B,c as F,g as j,f as v,a as A,s as a,b as o,t as k,e as b,n as H,j as O,h as M,C as Q,d as U,r as R}from"../chunks/C4aLToA0.js";import{i as T}from"../chunks/oXZGlhUn.js";import{g as V,S as W,e as z,i as E}from"../chunks/OkSu_lmj.js";import{T as X,f as Y,a as Z}from"../chunks/DDL4Vd-v.js";import{t as $}from"../chunks/CICL-Sq2.js";import{A as G}from"../chunks/C659k8ar.js";import{A as S}from"../chunks/DKQz3N_7.js";import{H as tt,T as rt}from"../chunks/DHUdjfhY.js";import{I as f}from"../chunks/pFgv2Sl6.js";const at=async({params:h,parent:t})=>{const{mopidy:i}=await t(),n=i.getTrack(N(h.track));n||K(404,"Track not found");const y=await i.requestLyrics(n),p=(await i.requestImages([n.uri]))?.at(0),m=p?await i.requestPalette(p):void 0;return{lyrics:y,palette:m,track:n}},At=Object.freeze(Object.defineProperty({__proto__:null,load:at},Symbol.toStringTag,{value:"Module"}));var et=v("<!> <!>",1),ot=v("<!> ",1),it=v("<!> <!> <!> <!> <!> <!> <!>",1);function nt(h,t){B(t,!0);const i=V();let n=M(()=>i.getImage(t.track.uri)),y=M(()=>$(i,t.track));tt(h,{get actions(){return j(y)},get image(){return j(n)},title:d=>{X(d,{get track(){return t.track}})},subtitle:d=>{var u=et(),_=A(u);S(_,{get artists(){return t.track.artists}});var s=a(_),g=a(s);G(g,{get album(){return t.track.album}}),k(()=>b(s,` ${W} `)),o(d,u)},info:d=>{var u=it(),_=A(u);f(_,{icon:"album",tooltip:"Album",children:(r,c)=>{var e=ot(),l=A(e);G(l,{get album(){return t.track.album}});var J=a(l);k(()=>b(J,` (#${t.track.track_no??""})`)),o(r,e)}});var s=a(_,2);f(s,{icon:"person",tooltip:"Artists",children:(r,c)=>{S(r,{get artists(){return t.track.artists}})}});var g=a(s,2);{var q=r=>{f(r,{icon:"artist",tooltip:"Performers",children:(c,e)=>{S(c,{get artists(){return t.track.performers}})}})};T(g,r=>{t.track.performers?.length>0&&r(q)})}var L=a(g,2);{var D=r=>{f(r,{icon:"person_edit",tooltip:"Composers",children:(c,e)=>{S(c,{get artists(){return t.track.composers}})}})};T(L,r=>{t.track.composers?.length>0&&r(D)})}var x=a(L,2);{var C=r=>{f(r,{icon:"music_note",tooltip:"Genre",children:(c,e)=>{H();var l=O();k(()=>b(l,t.track.genre)),o(c,l)}})};T(x,r=>{t.track.genre&&r(C)})}var I=a(x,2);f(I,{icon:"calendar_today",tooltip:"Release date",children:(r,c)=>{H();var e=O();k(l=>b(e,l),[()=>Y(new Date(t.track.date))]),o(r,e)}});var P=a(I,2);f(P,{icon:"timer",tooltip:"Duration",children:(r,c)=>{H();var e=O();k(l=>b(e,l),[()=>Z(t.track.length)]),o(r,e)}}),o(d,u)},$$slots:{title:!0,subtitle:!0,info:!0}}),F()}var st=v("<br/>"),ct=v("<!> ",1),lt=v('<p class="mb-4 text-body-l not-only:break-inside-avoid"></p>'),mt=v('<div class="mx-4"><h2 class="mb-4 text-display-m">Lyrics</h2> <div class="columns-[40ch]"></div></div>'),dt=v("<!> <!>",1);function Tt(h,t){B(t,!0);var i=dt();Q(m=>{rt(m,{get text(){return t.data.track.name}})});var n=A(i);nt(n,{get track(){return t.data.track}});var y=a(n,2);{var p=m=>{var w=mt(),d=a(U(w),2);z(d,21,()=>t.data.lyrics.plain,E,(u,_)=>{var s=lt();z(s,21,()=>j(_),E,(g,q,L)=>{var D=ct(),x=A(D);{var C=P=>{var r=st();o(P,r)};T(x,P=>{L>0&&P(C)})}var I=a(x);k(()=>b(I,` ${j(q)??""}`)),o(g,D)}),R(s),o(u,s)}),R(d),R(w),o(m,w)};T(y,m=>{t.data.lyrics&&t.data.lyrics.plain.length>0&&m(p)})}o(h,i),F()}export{Tt as component,At as universal};
