import"./DsnmJJEf.js";import{i as D,a as W,b as q,g as u,p as re,c as ne,h as p,u as me,aB as he,o as Re,al as oe,az as le,ak as Ve,ay as Oe,aA as pe,v as ue}from"./C4aLToA0.js";import{s as Te,r as Ee,p as B,b as ve,i as ke}from"./oXZGlhUn.js";import{M as Me,a as Be,L as Ke,b as Pe}from"./DHUdjfhY.js";import{e as Se,i as Ce,m as Ae,c as be,a as ze}from"./OkSu_lmj.js";import{g as Je}from"./CrbyPaqk.js";function Ue(t,e){Me(t,{strategy:"context",get trigger(){return e.trigger},children:(r,s)=>{var o=D(),l=W(o);Se(l,17,()=>e.actions,Ce,(c,n)=>{Be(c,{get action(){return u(n)}})}),q(r,o)},$$slots:{default:!0}})}function St(t,e){re(e,!0);let r=Ee(e,["$$slots","$$events","$$legacy","actions"]);Ue(t,{get actions(){return e.actions},trigger:(o,l)=>{let c=()=>l?.().props;{let n=p(()=>Ae(r,c()));Ke(o,Te(()=>u(n)))}}}),ne()}const ye=t=>Object.keys(t).reduce((e,r)=>{const s=t[r];return s==null?e:e+`${r}:${s};`},""),De=(t,e)=>"_"+e;function*We([t,e]){for(let r=t;r<=e;r++)yield r}const U=null,{min:K,max:T,abs:de,floor:qe}=Math,Ie=(t,e,r)=>K(r,T(e,t)),Xe=t=>[...t].sort(((e,r)=>e-r)),ie=()=>{let t;return[new Promise((e=>{t=e})),t]},ce=t=>{let e;return()=>(t&&(e=t(),t=void 0),e)},P=-1,ee=(t,e,r)=>{const s=r?"unshift":"push";for(let o=0;o<e;o++)t[s](P);return t},te=(t,e)=>{const r=t.t[e];return r===P?t.o:r},Ye=(t,e,r)=>{const s=t.t[e]===P;return t.t[e]=r,t.i=K(e,t.i),s},Q=(t,e)=>{if(!t.l)return 0;if(t.i>=e)return t.u[e];t.i<0&&(t.u[0]=0,t.i=0);let r=t.i,s=t.u[r];for(;r<e;)s+=te(t,r),t.u[++r]=s;return t.i=e,s},M=(t,e,r=0,s=t.l-1)=>{for(;r<=s;){const o=qe((r+s)/2),l=Q(t,o);if(l<=e){if(l+te(t,o)>e)return o;r=o+1}else s=o-1}return Ie(r,0,t.l-1)},ge=(t,e,r)=>{const s=e-t.l;return t.i=r?-1:K(e-1,t.i),t.l=e,s>0?(ee(t.u,s),ee(t.t,s,r),t.o*s):(t.u.splice(s),(r?t.t.splice(0,-s):t.t.splice(s)).reduce(((o,l)=>o-(l===P?t.o:l)),0))},Ge=typeof window<"u",we=()=>document.documentElement,je=t=>t.ownerDocument,Fe=t=>t.defaultView,xe=ce((()=>!!Ge&&getComputedStyle(we()).direction==="rtl")),_e=ce((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),He=ce((()=>"scrollBehavior"in we().style)),Ne=5,Qe=6,Ze=1,et=4,tt=8,rt=t=>T(t.$getTotalSize(),t.$getViewportSize()),nt=t=>!!t.$getViewportSize(),st=(t,e=40,r=4,s=0,o,l=!1)=>{let c=!!s,n=1,f=0,i=0,g=0,S=0,m=0,h=0,v=0,R=0,_=c?[0,T(s-1,0)]:U,x=[0,0],$=0;const b=((a,d,L)=>({o:d,t:ee([],a),l:a,i:-1,u:ee([],a)}))(t,e),X=new Set,C=()=>g-i,A=()=>C()+m+S,F=a=>((d,L,E,y)=>{if(y=K(y,d.l-1),Q(d,y)<=L){const I=M(d,L+E,y);return[M(d,L,y,I),I]}{const I=M(d,L,void 0,y);return[I,M(d,L+E,I)]}})(b,a,f,x[0]),Y=()=>(a=>a.l?Q(a,a.l-1)+te(a,a.l-1):0)(b),H=a=>Q(b,a)-m,J=a=>te(b,a),G=a=>{a&&(_e()&&v!==0?m+=a:S+=a)};return{$getStateVersion:()=>n,$getCacheSnapshot:()=>(a=>[a.t.slice(),a.o])(b),$getRange:()=>{let a,d;return h?[a,d]=x:([a,d]=x=F(T(0,A())),_&&(a=K(a,_[0]),d=T(d,_[1]))),v!==1&&(a-=T(0,r)),v!==2&&(d+=T(0,r)),[T(a,0),K(d,b.l-1)]},$findStartIndex:()=>M(b,A()),$findEndIndex:()=>M(b,A()+f),$isUnmeasuredItem:a=>b.t[a]===P,$:()=>!!_&&b.t.slice(T(0,_[0]-1),K(b.l-1,_[1]+1)+1).includes(P),$getItemOffset:H,$getItemSize:J,$getItemsLength:()=>b.l,$getScrollOffset:()=>g,$isScrolling:()=>v!==0,$getViewportSize:()=>f,$getStartSpacerSize:()=>i,$getTotalSize:Y,h:()=>(h=S,S=0,[h,R===2||C()+f>=Y()]),$subscribe:(a,d)=>{const L=[a,d];return X.add(L),()=>{X.delete(L)}},$update:(a,d)=>{let L,E,y=0;switch(a){case 1:{const I=h;h=0;const z=d-g,w=de(z);I&&w<de(I)+1||R!==0||(v=z<0?2:1),c&&(_=U,c=!1),g=d,y=4;const V=C();V>=-f&&V<=Y()&&(y+=1,E=w>f);break}case 2:y=8,v!==0&&(L=!0,y+=1),v=0,R=0,_=U;break;case 3:{const I=d.filter((([z,w])=>b.t[z]!==w));if(!I.length)break;G(I.reduce(((z,[w,V])=>((R===2||(_?!c&&w<_[0]:H(w)+(v===0&&R===0?J(w):0)<C()))&&(z+=V-J(w)),z)),0));for(const[z,w]of I){const V=J(z),O=Ye(b,z,w);l&&($+=O?w:w-V)}l&&f&&$>f&&(G(((z,w)=>{let V=0;const O=[];z.t.forEach(((fe,Le)=>{fe!==P&&(O.push(fe),Le<w&&V++)})),z.i=-1;const k=Xe(O),N=k.length,j=N/2|0,se=N%2==0?(k[j-1]+k[j])/2:k[j],$e=z.o;return((z.o=se)-$e)*T(w-V,0)})(b,M(b,A()))),l=!1),y=3,E=!0;break}case 4:f!==d&&(f=d,y=3);break;case 5:d[1]?(G(ge(b,d[0],!0)),R=2,y=1):(ge(b,d[0]),y=1);break;case 6:i=d;break;case 7:R=1;break;case 8:_=F(d),y=1}y&&(n=1+(2147483647&n),L&&m&&(S+=m,m=0),X.forEach((([I,z])=>{y&I&&z(E)})))}}},ae=setTimeout,Z=(t,e)=>e&&xe()?-t:t,it=(t,e,r,s,o,l)=>{const c=Date.now;let n=0,f=!1,i=!1,g=!1,S=!1;const m=(()=>{let x;const $=()=>{x!=U&&clearTimeout(x)},b=()=>{$(),x=ae((()=>{x=U,(()=>{if(f||i)return f=!1,void m();g=!1,t.$update(2)})()}),150)};return b.p=$,b})(),h=()=>{n=c(),g&&(S=!0),t.$update(1,s()),m()},v=x=>{if(f||!t.$isScrolling()||x.ctrlKey)return;const $=c()-n;150>$&&50<$&&(r?x.deltaX:x.deltaY)&&(f=!0)},R=()=>{i=!0,g=S=!1},_=()=>{i=!1,_e()&&(g=!0)};return e.addEventListener("scroll",h),e.addEventListener("wheel",v,{passive:!0}),e.addEventListener("touchstart",R,{passive:!0}),e.addEventListener("touchend",_,{passive:!0}),{m:()=>{e.removeEventListener("scroll",h),e.removeEventListener("wheel",v),e.removeEventListener("touchstart",R),e.removeEventListener("touchend",_),m.p()},v:()=>{const[x,$]=t.h();x&&(o(Z(x,r),$,S),S=!1,$&&t.$getViewportSize()>t.$getTotalSize()&&t.$update(1,s()))}}},ot=(t,e)=>{let r,s,o,l=ie();const c=e?"scrollLeft":"scrollTop",n=e?"overflowX":"overflowY",f=async(i,g)=>{if(!await l[0])return;o&&o();const S=()=>{const[m,h]=ie();return o=()=>{h(!1)},nt(t)&&ae(o,150),[m,t.$subscribe(2,(()=>{h(!0)}))]};if(g&&He()){for(;t.$update(8,i()),t.$();){const[m,h]=S();try{if(!await m)return}finally{h()}}r.scrollTo({[e?"left":"top"]:Z(i(),e),behavior:"smooth"})}else for(;;){const[m,h]=S();try{if(r[c]=Z(i(),e),t.$update(7),!await m)return}finally{h()}}};return{$observe(i){r=i,s=it(t,i,e,(()=>Z(i[c],e)),((g,S,m)=>{if(m){const h=i.style,v=h[n];h[n]="hidden",ae((()=>{h[n]=v}))}S?(i[c]=t.$getScrollOffset()+g,o&&o()):i[c]+=g})),l[1](!0)},$dispose(){s&&s.m(),l[1](!1),l=ie()},$scrollTo(i){f((()=>i))},$scrollBy(i){i+=t.$getScrollOffset(),f((()=>i))},$scrollToIndex(i,{align:g,smooth:S,offset:m=0}={}){if(i=Ie(i,0,t.$getItemsLength()-1),g==="nearest"){const h=t.$getItemOffset(i),v=t.$getScrollOffset();if(h<v)g="start";else{if(!(h+t.$getItemSize(i)>v+t.$getViewportSize()))return;g="end"}}f((()=>m+t.$getStartSpacerSize()+t.$getItemOffset(i)+(g==="end"?t.$getItemSize(i)-t.$getViewportSize():g==="center"?(t.$getItemSize(i)-t.$getViewportSize())/2:0)),S)},$fixScrollJump:()=>{s&&s.v()}}},lt=t=>{let e;return{S(r){(e||(e=new(Fe(je(r))).ResizeObserver(t))).observe(r)},I(r){e.unobserve(r)},m(){e&&e.disconnect()}}},at=(t,e)=>{let r;const s=e?"width":"height",o=new WeakMap,l=lt((c=>{const n=[];for(const{target:f,contentRect:i}of c)if(f.offsetParent)if(f===r)t.$update(4,i[s]);else{const g=o.get(f);g!=U&&n.push([g,i[s]])}n.length&&t.$update(3,n)}));return{$observeRoot(c){l.S(r=c)},$observeItem:(c,n)=>(o.set(c,n),l.S(c),()=>{o.delete(c),l.I(c)}),$dispose:l.m}};function ct(t,e){re(e,!0);let r=B(e,"as",3,"div"),s,o,l;me(()=>{l!==e.index&&(o&&o(),o=e.resizer(s,l=e.index))}),he(()=>{o&&o()});let c=p(()=>{const i={contain:"layout style",position:"absolute",[e.horizontal?"height":"width"]:"100%",[e.horizontal?"top":"left"]:"0px",[e.horizontal?xe()?"right":"left":"top"]:e.offset+"px",visibility:e.hide?"hidden":"visible"};return e.horizontal&&(i.display="inline-flex"),ye(i)});var n=D(),f=W(n);be(f,r,!1,(i,g)=>{ve(i,h=>s=h,()=>s),ze(i,()=>({style:u(c)}));var S=D(),m=W(S);Re(m,()=>e.children,()=>e.item,()=>e.index),q(g,S)}),q(t,n),ne()}function ft(t,e){re(e,!0);let r=B(e,"getKey",3,De),s=B(e,"as",3,"div"),o=B(e,"shift",3,!1),l=B(e,"horizontal",3,!1),c=B(e,"startMargin",3,0);const n=st(e.data.length,e.itemSize,e.overscan,void 0,void 0,!e.itemSize),f=at(n,l()),i=ot(n,l()),g=n.$subscribe(Ze,()=>{oe(v,n.$getStateVersion(),!0)}),S=n.$subscribe(et,()=>{e.onscroll&&e.onscroll(n.$getScrollOffset())}),m=n.$subscribe(tt,()=>{e.onscrollend&&e.onscrollend()});let h=le(void 0),v=le(Ve(n.$getStateVersion())),R=p(()=>u(v)&&n.$getRange()),_=p(()=>u(v)&&n.$isScrolling()),x=p(()=>u(v)&&n.$getTotalSize());Oe(()=>{const I=z=>{f.$observeRoot(z),i.$observe(z)};pe().then(()=>{e.scrollRef?I(e.scrollRef):I(u(h).parentElement)})}),he(()=>{g(),S(),m(),f.$dispose(),i.$dispose()}),ue(()=>{e.data.length!==n.$getItemsLength()&&n.$update(Ne,[e.data.length,o()])}),ue(()=>{c()!==n.$getStartSpacerSize()&&n.$update(Qe,c())});let $;me(()=>{$!==u(v)&&($=u(v),i.$fixScrollJump())});const b=n.$getScrollOffset,X=()=>rt(n),C=n.$getViewportSize,A=n.$findStartIndex,F=n.$findEndIndex,Y=n.$getItemOffset,H=n.$getItemSize,J=i.$scrollToIndex,G=i.$scrollTo,a=i.$scrollBy;let d=p(()=>ye({contain:"strict","overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",width:l()?u(x)+"px":"100%",height:l()?"100%":u(x)+"px","pointer-events":u(_)?"none":void 0}));var L={getScrollOffset:b,getScrollSize:X,getViewportSize:C,findStartIndex:A,findEndIndex:F,getItemOffset:Y,getItemSize:H,scrollToIndex:J,scrollTo:G,scrollBy:a},E=D(),y=W(E);return be(y,s,!1,(I,z)=>{ve(I,O=>oe(h,O,!0),()=>u(h)),ze(I,()=>({style:u(d)}));var w=D(),V=W(w);Se(V,17,()=>We(u(R)),O=>r()(e.data[O],O),(O,k)=>{const N=p(()=>e.data[u(k)]);{let j=p(()=>u(v)&&n.$getItemOffset(u(k))),se=p(()=>u(v)&&n.$isUnmeasuredItem(u(k)));ct(O,{get children(){return e.children},get item(){return u(N)},get index(){return u(k)},get as(){return e.item},get offset(){return u(j)},get hide(){return u(se)},get horizontal(){return l()},get resizer(){return f.$observeItem}})}}),q(z,w)}),q(t,E),ne(L)}function bt(t,e){re(e,!0);let r=B(e,"getKey",3,(n,f)=>f),s=le(null);const o=Je();let l=p(o),c=p(()=>u(s)&&u(l)?u(s).getBoundingClientRect().top-u(l).getBoundingClientRect().top:0);Pe(t,{get ref(){return u(s)},set ref(n){oe(s,n,!0)},children:(n,f)=>{var i=D(),g=W(i);{var S=m=>{ft(m,{get children(){return e.item},get data(){return e.data},get getKey(){return r()},overscan:10,get scrollRef(){return u(l)},get startMargin(){return u(c)}})};ke(g,m=>{u(l)&&m(S)})}q(n,i)},$$slots:{default:!0}}),ne()}export{St as L,bt as V};
