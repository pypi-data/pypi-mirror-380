# Generated by LakehousePlumber - Orchestration Job for {{ project_name }}

resources:
  jobs:
    {{ job_name }}:
      name: {{ job_name }}
      max_concurrent_runs: 1
      tasks:
{%- for stage in execution_stages %}
{%- for pipeline in stage.pipelines %}
        - task_key: {{ pipeline.name }}_pipeline
{%- if pipeline.depends_on %}
          depends_on:
{%- for dependency in pipeline.depends_on %}
            - task_key: {{ dependency }}_pipeline
{%- endfor %}
{%- endif %}
          pipeline_task:
            pipeline_id: ${{ '{' }}resources.pipelines.{{ pipeline.name }}_pipeline.id}
            full_refresh: false
{%- endfor %}
{%- endfor %}
      queue:
        enabled: true
      performance_target: STANDARD # Disabling performance optimization gives you startup times similar to Classic infrastructure and reduces your cost.
    

      # Additional job configuration options (uncomment and modify as needed):

      # performance_target: PERFORMANCE_OPTIMIZED # Fast, performant compute startup and execution speed.

      # Enable job-level timeout
      # timeout_seconds: 3600

      # Job-level tags
      # tags:
      #   environment: {{ bundle_target | default('dev') }}
      #   pipeline_orchestration: "true"

      # Email notifications
      # email_notifications:
      #   on_start: []
      #   on_success: []
      #   on_failure: []

      # Webhook notifications
      # webhook_notifications:
      #   on_start: []
      #   on_success: []
      #   on_failure: []

      # Job permissions
      # permissions:
      #   - level: CAN_MANAGE
      #     user_name: "admin@company.com"
      #   - level: CAN_VIEW
      #     group_name: "data-team"

      # Schedule configuration (uncomment to enable)
      # schedule:
      #   quartz_cron_expression: "0 0 8 * * ?" # Daily at 8 AM
      #   timezone_id: "America/New_York"
      #   pause_status: UNPAUSED