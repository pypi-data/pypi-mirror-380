{"version":3,"file":"PlaygroundDialogContent-BpMNRrbp.js","sources":["../../frontend/tools/monaco.ts","../../node_modules/js-base64/base64.mjs","../../frontend/tools/PlaygroundStartup.py?raw","../../frontend/tools/PlaygroundDialogContent.vue"],"sourcesContent":["import {loader} from \"@guolao/vue-monaco-editor\"\n\nimport * as monaco from \"monaco-editor\"\n//@ts-ignore\nimport editorWorker from \"monaco-editor/esm/vs/editor/editor.worker?worker\"\n//@ts-ignore\nimport jsonWorker from \"monaco-editor/esm/vs/language/json/json.worker?worker\"\n//@ts-ignore\nimport cssWorker from \"monaco-editor/esm/vs/language/css/css.worker?worker\"\n//@ts-ignore\nimport htmlWorker from \"monaco-editor/esm/vs/language/html/html.worker?worker\"\n//@ts-ignore\nimport tsWorker from \"monaco-editor/esm/vs/language/typescript/ts.worker?worker\"\n\n(self as any).MonacoEnvironment = {\n    getWorker(_: any, label: string) {\n        if (label === \"json\") {\n            return new jsonWorker()\n        }\n        if (label === \"css\" || label === \"scss\" || label === \"less\") {\n            return new cssWorker()\n        }\n        if (label === \"html\" || label === \"handlebars\" || label === \"razor\") {\n            return new htmlWorker()\n        }\n        if (label === \"typescript\" || label === \"javascript\") {\n            return new tsWorker()\n        }\n        return new editorWorker()\n    }\n}\n\nexport function setupMonaco() {\n    loader.config({monaco})\n}\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.8';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 ยง5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 ยง5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, r1, r2;\n    let binArray = []; // use array to avoid minor gc in loop\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        if (r1 === 64) {\n            binArray.push(_fromCC(u24 >> 16 & 255));\n        }\n        else if (r2 === 64) {\n            binArray.push(_fromCC(u24 >> 16 & 255, u24 >> 8 & 255));\n        }\n        else {\n            binArray.push(_fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255));\n        }\n    }\n    return binArray.join('');\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","export default \"import micropip\\n\\n# Prioritize the OCP.wasm package repository for finding the ported dependencies.\\nmicropip.set_index_urls([\\\"https://yeicor.github.io/OCP.wasm\\\", \\\"https://pypi.org/simple\\\"])\\n\\n# For build123d < 0.10.0, we need to install the mock the py-lib3mf package (before the main install).\\nawait micropip.install(\\\"lib3mf\\\")\\nmicropip.add_mock_package(\\\"py-lib3mf\\\", \\\"2.4.1\\\", modules={\\\"py_lib3mf\\\": 'from lib3mf import *'})\\n\\n# Install the yacv_server package, which is the main server for the OCP.wasm playground; and also preinstalls build123d.\\nawait micropip.install(\\\"yacv_server\\\", pre=True)\\n\\n# Preimport the yacv_server package to ensure it is available in the global scope, and mock the ocp_vscode package.\\nfrom yacv_server import *\\n\\nmicropip.add_mock_package(\\\"ocp-vscode\\\", \\\"2.8.9\\\", modules={\\\"ocp_vscode\\\": 'from yacv_server import *'})\\nshow_object = show\\n\\n# Preinstall the font-fetcher package and install its hook to automatically download any requested font.\\nawait micropip.install(\\\"font-fetcher\\\", pre=True)\\n\\nfrom font_fetcher.ocp import install_ocp_font_hook\\n\\ninstall_ocp_font_hook()\\n\"","<script setup lang=\"ts\">\nimport {setupMonaco} from \"./monaco.ts\";\nimport {VueMonacoEditor} from '@guolao/vue-monaco-editor'\nimport {nextTick, onMounted, ref, shallowRef} from \"vue\";\nimport Loading from \"../misc/Loading.vue\";\nimport {newPyodideWorker} from \"./pyodide-worker-api.ts\";\nimport {\n  mdiBroom,\n  mdiCircleOpacity,\n  mdiClose,\n  mdiContentSave,\n  mdiFolderOpen,\n  mdiPlay,\n  mdiReload,\n  mdiShare,\n  mdiUpload\n} from \"@mdi/js\";\nimport {VBtn, VCard, VCardText, VSlider, VSpacer, VToolbar, VToolbarTitle, VTooltip} from \"vuetify/components\";\n// @ts-expect-error\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport {version as pyodideVersion} from \"pyodide\";\nimport {gzip} from 'pako';\nimport {b64UrlEncode} from \"./b64.ts\";\nimport {Base64} from 'js-base64'; // More compatible with binary data from python...\nimport {NetworkUpdateEvent, NetworkUpdateEventModel} from \"../misc/network.ts\";\nimport {settings} from \"../misc/settings.ts\";\n// @ts-expect-error\nimport playgroundStartupCode from './PlaygroundStartup.py?raw';\nimport {uploadFile} from \"./upload-file.ts\";\n\nconst model = defineModel<{ code: string, firstTime: boolean }>({required: true}); // Initial code should only be set on first load!\nconst emit = defineEmits<{ close: [], updateModel: [NetworkUpdateEvent] }>()\n\n// ============ LOAD MONACO EDITOR ============\nsetupMonaco() // Must be called before using the editor\n\nconst outputText = ref(``);\n\nfunction output(text: string) {\n  outputText.value += text; // Append to output\n  // Avoid too much output, keep it reasonable\n  let max_output = 10000; // 10k characters\n  if (outputText.value.length > max_output) {\n    outputText.value = outputText.value.slice(-max_output); // Keep only the last 10k characters\n  }\n  console.log(text); // Also log to console\n  nextTick(() => { // Scroll to bottom\n    const consoleElement = document.querySelector('.playground-console');\n    if (consoleElement) {\n      consoleElement.scrollTop = consoleElement.scrollHeight;\n    }\n  })\n}\n\nconst MONACO_EDITOR_OPTIONS = {\n  automaticLayout: true,\n  formatOnType: true,\n  formatOnPaste: true,\n}\n\nconst editorTheme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? `vs-dark` : `vs`\nconst editor = shallowRef()\nconst handleMount = (editorInstance: typeof VueMonacoEditor) => (editor.value = editorInstance)\nconst opacity = ref(0.9); // Opacity for the editor (overriden when settings are loaded)\n\n// ============ LOAD PYODIDE (ASYNC) ============\nlet pyodideWorker: ReturnType<typeof newPyodideWorker> | null = (import.meta as any).hot?.data?.pyodideWorker || null;\nconst running = ref(true);\n\nasync function setupPyodide(first: boolean, loadSnapshot: Uint8Array | undefined = undefined) {\n  running.value = true;\n  if (opacity.value == 0.0 && !first) opacity.value = 0.9; // User doesn't know how to show code again, reset after reopening\n  if (pyodideWorker === null) {\n    output(\"Creating new Pyodide worker...\\n\");\n    pyodideWorker = newPyodideWorker(Object.assign({\n      // Note: python wheels are downloaded from the CDN, as we can't know which ones are needed in advance to bundle them\n      // Furthermore, this lets us use the latest version of all wheels including ocp-specific ones without app updates\n      indexURL: `https://cdn.jsdelivr.net/pyodide/v${pyodideVersion}/full/`,\n      packages: [\"micropip\", \"sqlite3\"], // Faster load if done here\n      // _makeSnapshot: true, // Enable snapshotting for faster startup (still experimental: breaks loading any packages)\n    }, (loadSnapshot ? {_loadSnapshot: loadSnapshot} : {}))); // Load snapshot if provided\n    if ((import.meta as any).hot) (import.meta as any).hot.data.pyodideWorker = pyodideWorker\n  } else {\n    output(\"Reusing existing Pyodide instance...\\n\");\n  }\n  output(\"Preloading packages...\\n\");\n  await pyodideWorker.asyncRun(playgroundStartupCode, output, output); // Also import yacv_server and mock ocp_vscode here for faster custom code execution\n  running.value = false; // Indicate that Pyodide is ready\n  output(\"Pyodide worker ready.\\n\");\n}\n\nasync function runCode() {\n  if (pyodideWorker === null) {\n    output(\"Pyodide worker is not initialized. Please wait...\\n\");\n    return;\n  }\n  if (running.value) {\n    output(\"Pyodide is already running. Please wait...\\n\");\n    return;\n  }\n  output(\"Running code...\\n\");\n  try {\n    running.value = true;\n    await pyodideWorker.asyncRun(model.value.code, output, (msg: string) => {\n      // Detect models printed to console (since http server is not available in pyodide)\n      if (msg.startsWith(yacvServerModelPrefix)) {\n        const modelData = msg.slice(yacvServerModelPrefix.length);\n        onModelData(modelData);\n      } else {\n        output(msg); // Print other messages directly\n      }\n    });\n  } catch (e) {\n    output(`Error running code: ${e}\\n`);\n  } finally {\n    output(\"Code execution finished.\\n\");\n    running.value = false; // Indicate that Pyodide is ready\n  }\n}\n\nconst yacvServerModelPrefix = \"yacv_server://model/\";\n\nfunction onModelData(modelData: string) {\n  output(`Model data detected... ${modelData.length}B\\n`);\n  // Decode the model data and emit the event for the interface to handle\n  // - Start by finding the end of the initial json object by looking for brackets.\n  let i = 0;\n  let openBrackets = 0;\n  for (; i < modelData.length; i++) {\n    if (modelData[i] === '{') openBrackets++;\n    else if (modelData[i] === '}') openBrackets--;\n    if (openBrackets === 0) break; // Found the end of the JSON object\n  }\n  if (openBrackets !== 0) throw `Error: Invalid model data received: ${modelData}\\n`\n  const jsonData = modelData.slice(0, i + 1); // Extract the JSON part and parse it into the proper class\n  let modelMetadataRaw = JSON.parse(jsonData);\n  const modelMetadata: any = new NetworkUpdateEventModel(modelMetadataRaw.name, \"\", modelMetadataRaw.hash, modelMetadataRaw.is_remove)\n  // console.debug(`Model metadata:`, modelMetadata);\n  output(`Model metadata: ${JSON.stringify(modelMetadata)}\\n`);\n  // - Now decode the rest of the model data which is a single base64 encoded glb file (or an empty string)\n  if (!modelMetadata.isRemove) {\n    const binaryData = Base64.toUint8Array(modelData.slice(i + 1)); // Extract the base64 part\n    console.assert(binaryData.slice(0, 4).toString() == \"103,108,84,70\", // Ugly...\n        \"Invalid GLTF binary data received: \" + binaryData.slice(0, 4).toString());\n    // - Save for upload and share link feature\n    builtModelsGlb[modelMetadata.name] = binaryData;\n    // - Create a Blob from the binary data to be used as a URL\n    const blob = new Blob([binaryData as ArrayBufferView<ArrayBuffer>], {type: 'model/gltf-binary'});\n    modelMetadata.url = URL.createObjectURL(blob); // Set the hacked URL in the model metadata XXX: revoked on App.vue\n  } else {\n    delete builtModelsGlb[modelMetadata.name]; // Remove from built models if it's a remove request\n  }\n  // - Emit the event with the model metadata and URL\n  let networkUpdateEvent = new NetworkUpdateEvent([modelMetadata], () => {\n  });\n  emit('updateModel', networkUpdateEvent);\n}\n\nfunction resetWorker(loadSnapshot: Uint8Array | undefined = undefined) {\n  if (pyodideWorker) {\n    pyodideWorker.terminate(); // Terminate existing worker\n    pyodideWorker = null; // Reset worker reference\n  }\n  outputText.value = ``; // Clear output text\n  setupPyodide(false, loadSnapshot); // Reinitialize Pyodide\n}\n\nfunction shareLinkCommon(added: Record<string, Array<string> | string>, forgotten: Array<string>) {\n  const baseUrl = window.location\n  const searchParams = new URLSearchParams(baseUrl.search);\n  for (const k of forgotten) searchParams.delete(k);\n  const hashParams = new URLSearchParams(baseUrl.hash.slice(1)); // Keep all previous URL parameters\n  for (const k of forgotten) hashParams.delete(k);\n  for (const k in added) {\n    if (Array.isArray(added[k])) {\n      for (const v of added[k]) {\n        hashParams.append(k, v); // Prefer hash to GET\n      }\n    } else if (typeof added[k] === 'string') {\n      hashParams.set(k, added[k]); // Prefer hash to GET\n    }\n  }\n  const shareUrl = `${baseUrl.origin}${baseUrl.pathname}?${searchParams}#${hashParams}`;\n  output(`Share link ready: ${shareUrl}\\n`)\n  if (navigator.clipboard?.writeText === undefined) {\n    output(\"Clipboard API not available. Please copy the link manually.\\n\");\n    return;\n  } else {\n    navigator.clipboard.writeText(shareUrl)\n        .then(() => output(\"Link copied to clipboard!\\n\"))\n        .catch(err => output(`Failed to copy link: ${err}\\n`));\n  }\n}\n\nfunction shareLink() {\n  shareLinkCommon({'pg_code': b64UrlEncode(gzip(model.value.code, {level: 9}))}, ['pg_code']);\n}\n\nconst builtModelsGlb: Record<string, Uint8Array> = {}; // Store built models to support uploading\nasync function uploadAndShareLink() {\n  try {\n    output(\"Uploading files...\\n\");\n\n    // Upload code.py\n    const codeBlob = new Blob([model.value.code], {type: 'text/x-python'});\n    const newParams: Record<string, string | Array<string>> = {\n      'pg_code': await uploadFile('code.py', new Uint8Array(await codeBlob.arrayBuffer()))\n    };\n\n    // Upload all models\n    newParams['preload'] = []\n    for (const name in builtModelsGlb) {\n      const glb: any = builtModelsGlb[name];\n      const url = await uploadFile(name + '.glb', glb)\n      newParams['preload'].push(url); // Add to preload list\n    }\n\n    // Build share URL\n    return shareLinkCommon(newParams, ['pg_code'])\n  } catch (e) {\n    output(`Error uploading/sharing files: ${e}. Falling back to private share link.\\n`);\n    return shareLink(); // Fallback to private share link if upload fails\n  }\n}\n\nfunction saveSnapshot() {\n  throw new Error(\"Not implemented yet!\"); // TODO: Implement snapshot saving\n}\n\nfunction loadSnapshot() {\n  throw new Error(\"Not implemented yet!\"); // TODO: Implement snapshot loading\n}\n\n(async () => {\n  const sett = await settings\n  if (model.value.firstTime) opacity.value = sett.pg_opacity_loading\n  await setupPyodide(true);\n  if (model.value.firstTime) {\n    await runCode();\n    opacity.value = sett.pg_opacity_loaded\n    model.value.firstTime = false\n  }\n})()\n\n// Add keyboard shortcuts\nconst editorRef = ref<HTMLElement | null>(null);\nonMounted(() => {\n  if (editorRef.value) {\n    editorRef.value.addEventListener('keydown', (event: Event) => {\n      if (!(event instanceof KeyboardEvent)) return; // Ensure event is a KeyboardEvent\n      if (event.key === 'F10') { // Run code on F10\n        event.preventDefault(); // Prevent default behavior of the key\n        runCode();\n      } else if (event.key === 'Escape') { // Close on Escape key\n        emit('close');\n      }\n    });\n  }\n});\n</script>\n\n<template>\n  <v-card class=\"popup-card\"\n          :style=\"opacity == 0 ? `position: absolute; top: calc(-50vh + 24px); width: calc(100vw - 64px);` : ``\">\n    <v-toolbar class=\"popup\">\n      <v-toolbar-title style=\"flex: 0 1 auto\">Playground</v-toolbar-title>\n      <v-spacer></v-spacer>\n\n      <span style=\"display: inline-flex; margin-right: 16px;\">\n        <svg-icon :path=\"mdiCircleOpacity\" type=\"mdi\" style=\"height: 32px\"></svg-icon>\n        <v-slider v-model=\"opacity\" :max=\"1\" :min=\"0\" :step=\"0.1\"\n                  style=\"width: 100px; height: 32px\">\n        </v-slider>\n        <v-tooltip activator=\"parent\"\n                   location=\"bottom\">Opacity of the editor (0 = hidden, 1 = fully visible)</v-tooltip>\n      </span>\n\n      <span style=\"padding-left: 12px; width: 48px;\"><!-- This span is only needed to force tooltip to work while button is disabled -->\n        <v-btn icon disabled @click=\"saveSnapshot()\">\n          <svg-icon :path=\"mdiContentSave\" type=\"mdi\"/>\n        </v-btn>\n        <v-tooltip activator=\"parent\"\n                   location=\"bottom\">Save current state to a snapshot for fast startup (WIP)</v-tooltip>\n      </span>\n      <span style=\"padding-right: 12px; width: 48px;\"><!-- This span is only needed to force tooltip to work while button is disabled -->\n        <v-btn icon disabled @click=\"loadSnapshot()\">\n          <svg-icon :path=\"mdiFolderOpen\" type=\"mdi\"/>\n        </v-btn>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Load snapshot for fast startup (WIP)</v-tooltip>\n      </span>\n\n      <v-btn icon @click=\"shareLink()\" style=\"padding-left: 12px;\">\n        <svg-icon :path=\"mdiShare\" type=\"mdi\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Share link that automatically runs the code.<br/>Only people\n          with the link can see the code.\n        </v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"uploadAndShareLink()\" style=\"padding-right: 12px\">\n        <svg-icon :path=\"mdiShare\" type=\"mdi\" style=\"position: absolute; scale: 75%; top: 6px;\"/>\n        <svg-icon :path=\"mdiUpload\" type=\"mdi\" style=\"position: absolute; scale: 75%; bottom: 6px;\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Uploads all models and code and then shares a link to them.<br/>Useful\n          to view the models while the playground loads, but uses third-party storage.\n        </v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"resetWorker()\" style=\"padding-left: 12px;\">\n        <svg-icon :path=\"mdiReload\" type=\"mdi\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Reset Pyodide worker (this forgets all previous state and will\n          take a little while)\n        </v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"runCode()\" :disabled=\"running\" style=\"padding-right: 12px\">\n        <svg-icon :path=\"mdiPlay\" type=\"mdi\"/>\n        <Loading v-if=\"running\" style=\"position: absolute; top: -16%; left: -28%\"/><!-- Ugly positioning -->\n        <v-tooltip activator=\"parent\" location=\"bottom\">Run code</v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"emit('close')\">\n        <svg-icon :path=\"mdiClose\" type=\"mdi\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Close (Pyodide remains loaded)</v-tooltip>\n      </v-btn>\n    </v-toolbar>\n    <v-card-text class=\"popup-card-text\" :style=\"opacity == 0 ? `display: none` : ``\">\n      <!-- Only show content if opacity is greater than 0 -->\n      <div class=\"playground-container\">\n        <div class=\"playground-editor\" ref=\"editorRef\">\n          <VueMonacoEditor v-model:value=\"model.code\" :theme=\"editorTheme\" :options=\"MONACO_EDITOR_OPTIONS\"\n                           language=\"python\" @mount=\"handleMount\"/>\n        </div>\n        <div class=\"playground-console\">\n          <h3 style=\"display:flex; align-items: center; justify-content: space-between; margin: 0;\">\n            Console Output\n            <v-spacer></v-spacer>\n            <v-btn @click=\"outputText = ''\">\n              <svg-icon :path=\"mdiBroom\" type=\"mdi\" class=\"h-\"/>\n            </v-btn>\n          </h3>\n          <pre>{{ outputText }}</pre> <!-- Placeholder for console output -->\n          <Loading v-if=\"running\"/>\n        </div>\n      </div>\n    </v-card-text>\n  </v-card>\n</template>\n\n<style scoped>\n.popup-card {\n  background-color: #00000000; /* Transparent background */\n}\n\n.v-toolbar.popup > * {\n  overflow-x: auto;\n}\n\n.popup-card-text {\n  background-color: #1e1e1e; /* Matches the Monaco editor background */\n  opacity: v-bind(opacity);\n}\n\n.playground-container {\n  display: flex;\n  flex-direction: row;\n}\n\n.playground-editor {\n  flex: 1;\n  height: calc(100vh - 150px);\n}\n\n.playground-console {\n  flex: 0.5;\n  padding: 10px;\n  overflow-y: auto;\n  min-width: 100px;\n  height: calc(100vh - 150px);\n}\n\n.playground-console pre {\n  margin: 0;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n@media (min-height: 100vw) {\n  /* Adjust layout for vertical space */\n  .playground-container {\n    flex-direction: column;\n  }\n\n  .playground-editor {\n    flex: 1;\n    min-height: 60vh;\n  }\n\n  .playground-editor > * {\n    min-height: 60vh;\n  }\n\n  .playground-console {\n    max-height: calc(40vh - 150px);\n  }\n}\n\n/* TODO: Adjust more colors on bright mode */\n</style>\n\n<style>\n/* https://stackoverflow.com/questions/47017753/monaco-editor-dynamically-resizable/71876526#71876526 */\n.monaco-editor {\n  position: absolute !important;\n}\n</style>"],"names":["_","label","jsonWorker","cssWorker","htmlWorker","tsWorker","editorWorker","setupMonaco","loader","monaco","version","VERSION","_hasBuffer","_TD","_TE","b64ch","b64chs","b64tab","a","tab","c","i","b64re","_fromCC","_U8Afrom","it","_mkUriSafe","src","m0","_tidyB64","s","btoaPolyfill","bin","u32","c0","c1","c2","asc","pad","_btoa","_fromUint8Array","u8a","strs","l","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","u","_encode","encode","encodeURI","re_btou","cb_btou","cccc","cp","offset","btou","b","atobPolyfill","u24","r1","r2","binArray","_atob","_toUint8Array","toUint8Array","_unURI","_decode","decode","isValid","_noEnum","v","extendString","_add","name","body","extendUint8Array","extendBuiltins","gBase64","playgroundStartupCode","yacvServerModelPrefix","model","_useModel","__props","emit","__emit","outputText","ref","output","text","max_output","nextTick","consoleElement","MONACO_EDITOR_OPTIONS","editorTheme","editor","shallowRef","handleMount","editorInstance","opacity","pyodideWorker","running","setupPyodide","first","loadSnapshot","newPyodideWorker","pyodideVersion","runCode","msg","modelData","onModelData","e","openBrackets","jsonData","modelMetadataRaw","modelMetadata","NetworkUpdateEventModel","builtModelsGlb","binaryData","Base64","blob","networkUpdateEvent","NetworkUpdateEvent","resetWorker","shareLinkCommon","added","forgotten","baseUrl","searchParams","k","hashParams","shareUrl","err","shareLink","b64UrlEncode","gzip","uploadAndShareLink","codeBlob","newParams","uploadFile","glb","url","saveSnapshot","sett","settings","editorRef","onMounted","event","_createBlock","_unref","VCard","_createVNode","VToolbar","VToolbarTitle","_cache","VSpacer","_createElementVNode","_hoisted_1","SvgIcon","mdiCircleOpacity","VSlider","$event","VTooltip","_hoisted_2","VBtn","mdiContentSave","_hoisted_3","mdiFolderOpen","mdiShare","mdiUpload","mdiReload","mdiPlay","Loading","mdiClose","VCardText","_hoisted_4","VueMonacoEditor","_hoisted_5","_hoisted_6","mdiBroom"],"mappings":"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","x_google_ignoreList":[1]}