Metadata-Version: 2.4
Name: xtlog
Version: 0.1.1
Summary: åŸºäºloguruçš„é«˜æ€§èƒ½æ—¥å¿—åº“
Project-URL: Homepage, http://github.com/sandorn/xtlog
Project-URL: Documentation, http://github.com/sandorn/xtlog
Project-URL: Repository, http://github.com/sandorn/xtlog
Project-URL: Issues, http://github.com/sandorn/xtlog/issues
Project-URL: Changelog, http://github.com/sandorn/xtlog/blob/main/CHANGELOG.md
Author-email: sandorn <sandorn@live.cn>
License: MIT
License-File: LICENSE
Keywords: logger,logging,loguru,python,structured-logging
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: System :: Logging
Requires-Python: >=3.10
Requires-Dist: loguru>=0.7.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: isort>=5.12.0; extra == 'dev'
Requires-Dist: mypy>=1.0.0; extra == 'dev'
Requires-Dist: pre-commit>=3.0.0; extra == 'dev'
Requires-Dist: pytest-cov>=4.0.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Requires-Dist: ruff>=0.0.270; extra == 'dev'
Requires-Dist: tox>=4.0.0; extra == 'dev'
Provides-Extra: docs
Requires-Dist: mkdocs-material>=9.0.0; extra == 'docs'
Requires-Dist: mkdocs>=1.4.0; extra == 'docs'
Requires-Dist: mkdocstrings-python>=1.0.0; extra == 'docs'
Requires-Dist: mkdocstrings>=0.20.0; extra == 'docs'
Description-Content-Type: text/markdown

# xtlog

åŸºäº loguru çš„é«˜æ€§èƒ½æ—¥å¿—åº“

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº loguru çš„é«˜æ€§èƒ½æ—¥å¿—è®°å½•
- ğŸ“ **åŒè¾“å‡º**: æ–‡ä»¶å’Œæ§åˆ¶å°åŒè¾“å‡ºæ”¯æŒ
- ğŸ”„ **è‡ªåŠ¨è½®è½¬**: è‡ªåŠ¨æ—¥å¿—æ–‡ä»¶è½®è½¬å’Œä¿ç•™
- ğŸ¯ **å•ä¾‹æ¨¡å¼**: ç¡®ä¿å…¨å±€åªæœ‰ä¸€ä¸ªæ—¥å¿—å®ä¾‹
- ğŸ“ **æ™ºèƒ½å®šä½**: è‡ªåŠ¨è¯†åˆ«è°ƒç”¨ä½ç½®ä¿¡æ¯
- âš™ï¸ **åŠ¨æ€é…ç½®**: æ”¯æŒåŠ¨æ€è®¾ç½®æ—¥å¿—çº§åˆ«
- ğŸ¨ **ä¸°å¯Œå›¾æ ‡**: æ”¯æŒä¸°å¯Œçš„æ—¥å¿—å›¾æ ‡æ˜¾ç¤º
- ğŸ“Š **ç»“æ„åŒ–æ—¥å¿—**: æ”¯æŒJSONæ ¼å¼çš„ç»“æ„åŒ–æ—¥å¿—è¾“å‡º
- ğŸ” **å¼‚å¸¸è¿½è¸ª**: è‡ªåŠ¨æ•è·å’Œè®°å½•å¼‚å¸¸å †æ ˆ
- ğŸ› ï¸ **çµæ´»é…ç½®**: æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼å’Œè¾“å‡ºè·¯å¾„

## å®‰è£…

```bash
pip install xtlog
```

## å¿«é€Ÿå¼€å§‹

```python
from xtlog import mylog

# åŸºæœ¬ä½¿ç”¨
mylog.info("è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—")
mylog.error("è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—")

# æ”¯æŒç›´æ¥è°ƒç”¨
mylog("ç¬¬ä¸€æ¡æ—¥å¿—", "ç¬¬äºŒæ¡æ—¥å¿—")

# è®¾ç½®æ—¥å¿—çº§åˆ«
mylog.set_level("DEBUG")
```

## é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰æ—¥å¿—é…ç½®

```python
from xtlog import LogCls

# åˆ›å»ºè‡ªå®šä¹‰æ—¥å¿—å®ä¾‹
custom_log = LogCls(
    level=20,  # INFOçº§åˆ«
    log_file_rotation_size="10 MB",
    log_file_retention_days="7 days",
    log_dir="/custom/log/path",  # è‡ªå®šä¹‰æ—¥å¿—ç›®å½•
    log_file_name="custom.log"   # è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶å
)

custom_log.info("è‡ªå®šä¹‰é…ç½®çš„æ—¥å¿—")
```

### ä½¿ç”¨ callfrom å‚æ•°

```python
from xtlog import mylog

def my_function():
    mylog.info("å‡½æ•°å†…çš„æ—¥å¿—", callfrom=my_function)

my_function()
```

### ç»“æ„åŒ–æ—¥å¿—è¾“å‡º

```python
from xtlog import LogCls
from xtlog.config import JSON_FORMAT

# åˆ›å»ºJSONæ ¼å¼çš„æ—¥å¿—å®ä¾‹
json_log = LogCls(
    level="INFO",
    log_format=JSON_FORMAT,
    serialize=True  # å¯ç”¨åºåˆ—åŒ–
)

# è®°å½•ç»“æ„åŒ–æ—¥å¿—
json_log.info("ç”¨æˆ·ç™»å½•", extra={
    "user_id": 12345,
    "ip_address": "192.168.1.1",
    "success": True
})
```

### å¼‚å¸¸æ•è·

```python
try:
    # å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç 
    result = 1 / 0
except Exception as e:
    # ä½¿ç”¨xtlogè®°å½•å¼‚å¸¸
    mylog.exception(f"å‘ç”Ÿå¼‚å¸¸: {str(e)}")
```

### ä¸Šä¸‹æ–‡ç®¡ç†

```python
import time
from contextlib import contextmanager

@contextmanager
def log_time(operation_name):
    start_time = time.time()
    try:
        yield
    finally:
        elapsed_time = time.time() - start_time
        mylog.info(f"{operation_name} å®Œæˆï¼Œè€—æ—¶: {elapsed_time:.4f}ç§’")

# ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨
with log_time("è€—æ—¶æ“ä½œ"):
    time.sleep(1.5)
```

## æ—¥å¿—çº§åˆ«

æ”¯æŒä»¥ä¸‹æ—¥å¿—çº§åˆ«ï¼š

- `TRACE` (5)
- `DEBUG` (10)
- `INFO` (20)
- `SUCCESS` (25)
- `WARNING` (30)
- `ERROR` (40)
- `CRITICAL` (50)

## æ—¥å¿—æ ¼å¼

xtlogæä¾›äº†å¤šç§é¢„å®šä¹‰çš„æ—¥å¿—æ ¼å¼ï¼š

- `default`: ä¼˜åŒ–æ ¼å¼ï¼ŒåŒ…å«æ—¶é—´ã€çº§åˆ«ã€è·¯å¾„å’Œæ¶ˆæ¯
- `simple`: ç®€æ´æ ¼å¼ï¼ŒåªåŒ…å«åŸºæœ¬ä¿¡æ¯
- `detailed`: è¯¦ç»†æ ¼å¼ï¼ŒåŒ…å«æ›´å¤šä¿¡æ¯å¦‚è¿›ç¨‹IDã€çº¿ç¨‹IDç­‰
- `json`: JSONæ ¼å¼ï¼Œç”¨äºç»“æ„åŒ–æ—¥å¿—è¾“å‡º

```python
from xtlog import LogCls
from xtlog.config import FORMAT_MAP

# ä½¿ç”¨ç®€æ´æ ¼å¼
simple_log = LogCls(log_format=FORMAT_MAP["simple"])
```

## é…ç½®

### ç¯å¢ƒå˜é‡

- `ENV`: è®¾ç½®ç¯å¢ƒç±»å‹ï¼Œ`dev` ä¸ºå¼€å‘ç¯å¢ƒï¼ˆæ˜¾ç¤ºæ§åˆ¶å°æ—¥å¿—ï¼‰ï¼Œå…¶ä»–ä¸ºç”Ÿäº§ç¯å¢ƒ
- `LOG_LEVEL`: æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤ä¸º"DEBUG"
- `LOG_FORMAT`: æ—¥å¿—æ ¼å¼ï¼Œé»˜è®¤ä¸º"default"
- `LOG_FILE`: æ—¥å¿—æ–‡ä»¶åï¼Œé»˜è®¤ä¸ºè‡ªåŠ¨ç”Ÿæˆ
- `LOG_DIR`: æ—¥å¿—ç›®å½•ï¼Œé»˜è®¤ä¸ºé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„logsç›®å½•
- `LOG_ROTATION_SIZE`: æ—¥å¿—æ–‡ä»¶è½®è½¬å¤§å°ï¼Œé»˜è®¤ä¸º"16 MB"
- `LOG_RETENTION_DAYS`: æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°ï¼Œé»˜è®¤ä¸º"30 days"

### é»˜è®¤é…ç½®

- æ—¥å¿—æ–‡ä»¶ä½ç½®: `é¡¹ç›®æ ¹ç›®å½•/logs/xt_YYYYMMDD.log`
- æ–‡ä»¶è½®è½¬å¤§å°: `16 MB`
- æ–‡ä»¶ä¿ç•™å¤©æ•°: `30 days`
- é»˜è®¤æ—¥å¿—çº§åˆ«: `DEBUG` (10)

## ç¤ºä¾‹

æŸ¥çœ‹ [examples](./examples) ç›®å½•è·å–æ›´å¤šç¤ºä¾‹ï¼š

- [åŸºæœ¬ç”¨æ³•](./examples/basic_usage.py)
- [é«˜çº§ç”¨æ³•](./examples/advanced_usage.py)

## æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ [docs](./docs) ç›®å½•ï¼š

- [ä½¿ç”¨æŒ‡å—](./docs/usage.md)

## å¼€å‘

### å®‰è£…å¼€å‘ä¾èµ–

```bash
pip install -e .[dev]
```

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

### ä»£ç æ£€æŸ¥

```bash
ruff check --fix --unsafe-fixes
```

### ç±»å‹æ£€æŸ¥

```bash
mypy .
```

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œè´¡çŒ®ä»£ç ï¼è¯·å‚é˜… [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md)ã€‚

## è®¸å¯è¯

MIT License

## ä½œè€…

sandorn <sandorn@live.cn>

GitHub: [http://github.com/sandorn/xtlog](http://github.com/sandorn/xtlog)