{% load unfold %}

<!-- Activity Tracker using reusable components -->
<div class="mt-8 w-full">
    {% include 'admin/components/section_header.html' with title='Activity Tracker' icon='timeline' icon_color='primary' %}
    
    {% component "unfold/components/card.html" with title="User Activity Heatmap" subtitle="Last 52 weeks of user activity" %}
        <div class="space-y-4">
            <!-- Legend -->
            <div class="flex items-center justify-between text-sm text-font-subtle-light dark:text-font-subtle-dark">
                <span>Less</span>
                <div class="flex items-center space-x-1">
                    <div class="w-3 h-3 bg-base-200 dark:bg-base-700 rounded-sm"></div>
                    <div class="w-3 h-3 bg-green-200 dark:bg-green-800 rounded-sm"></div>
                    <div class="w-3 h-3 bg-green-400 dark:bg-green-600 rounded-sm"></div>
                    <div class="w-3 h-3 bg-green-600 dark:bg-green-500 rounded-sm"></div>
                    <div class="w-3 h-3 bg-green-800 dark:bg-green-400 rounded-sm"></div>
                </div>
                <span>More</span>
            </div>
            
            <!-- Activity Tracker Grid -->
            <div class="overflow-x-auto">
                {% if activity_tracker %}
                    {% component "unfold/components/tracker.html" with data=activity_tracker %}
                    {% endcomponent %}
                {% else %}
                    <div class="flex items-center justify-center p-8 bg-base-50 dark:bg-base-800 rounded-lg border border-base-200 dark:border-base-700">
                        <div class="text-center">
                            <span class="material-icons text-4xl text-base-400 dark:text-base-500 mb-2">timeline</span>
                            <p class="text-font-subtle-light dark:text-font-subtle-dark">No activity data available</p>
                        </div>
                    </div>
                {% endif %}
            </div>
            
            <!-- Summary Stats -->
            <div class="grid grid-cols-3 gap-4 pt-4 border-t border-base-200 dark:border-base-700">
                <div class="text-center">
                    <div class="text-lg font-semibold text-font-default-light dark:text-font-default-dark">365</div>
                    <div class="text-xs text-font-subtle-light dark:text-font-subtle-dark">Days tracked</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-semibold text-green-600 dark:text-green-400">52</div>
                    <div class="text-xs text-font-subtle-light dark:text-font-subtle-dark">Weeks</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-semibold text-primary-600 dark:text-primary-400">{{ activity_tracker|length|default:"0" }}</div>
                    <div class="text-xs text-font-subtle-light dark:text-font-subtle-dark">Data points</div>
                </div>
            </div>
        </div>
    {% endcomponent %}
</div> 