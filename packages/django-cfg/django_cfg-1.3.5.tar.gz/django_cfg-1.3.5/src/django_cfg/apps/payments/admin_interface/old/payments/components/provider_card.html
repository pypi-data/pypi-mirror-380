{% comment %}
Provider Card Component with Material Icons

Usage:
{% include 'payments/components/provider_card.html' with provider=provider_data %}

Expected provider structure:
{
    'name': 'nowpayments',
    'display_name': 'NowPayments', 
    'webhook_url': 'https://...',
    'signature_header': 'x-nowpayments-sig',
    'signature_algorithm': 'HMAC-SHA512',
    'icon': 'payment' // Material icon name
}
{% endcomment %}

<div class="payment-card">
    <div class="payment-card-header">
        <div class="flex items-center">
            <div class="w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-3">
                <span class="material-icons-outlined text-blue-600 dark:text-blue-400 text-sm">
                    {{ provider.icon|default:'account_balance' }}
                </span>
            </div>
            <h4 class="font-medium text-gray-900 dark:text-white">{{ provider.display_name }}</h4>
        </div>
        <span class="status-badge success flex items-center">
            <span class="material-icons-outlined mr-1" style="font-size: 14px;">check_circle</span>
            Active
        </span>
    </div>
    
    <div class="payment-card-content">
        <div>
            <label class="text-gray-600 dark:text-gray-400 text-sm font-medium flex items-center">
                <span class="material-icons-outlined mr-1 text-sm">link</span>
                Webhook URL:
            </label>
            <div class="flex items-center mt-2 bg-gray-50 dark:bg-gray-700 rounded-lg p-2">
                <code class="flex-1 text-xs font-mono text-gray-800 dark:text-gray-200 break-all">{{ provider.webhook_url }}</code>
                <button onclick="PaymentSystem.Utils.copyToClipboard('{{ provider.webhook_url }}')" 
                        class="btn-icon ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"
                        title="Copy to clipboard">
                    <span class="material-icons-outlined text-sm">content_copy</span>
                </button>
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
            <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3">
                <label class="text-gray-600 dark:text-gray-400 text-sm font-medium flex items-center">
                    <span class="material-icons-outlined mr-1 text-sm">security</span>
                    Signature Header:
                </label>
                <code class="block mt-1 text-xs font-mono text-gray-800 dark:text-gray-200">{{ provider.signature_header }}</code>
            </div>
            <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3">
                <label class="text-gray-600 dark:text-gray-400 text-sm font-medium flex items-center">
                    <span class="material-icons-outlined mr-1 text-sm">enhanced_encryption</span>
                    Algorithm:
                </label>
                <code class="block mt-1 text-xs font-mono text-gray-800 dark:text-gray-200">{{ provider.signature_algorithm }}</code>
            </div>
        </div>
        
        <div class="flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-600">
            <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                <span class="material-icons-outlined mr-1 text-sm">schedule</span>
                Last checked: <span class="ml-1">{{ provider.last_check|default:'Never' }}</span>
            </div>
            <div class="flex space-x-2">
                <button onclick="checkProviderHealth('{{ provider.name }}')" 
                        class="btn-icon text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"
                        title="Check health">
                    <span class="material-icons-outlined text-sm">health_and_safety</span>
                </button>
                <button onclick="testProvider('{{ provider.name }}')" 
                        class="btn-icon text-gray-400 hover:text-green-600 dark:hover:text-green-400"
                        title="Test webhook">
                    <span class="material-icons-outlined text-sm">play_arrow</span>
                </button>
            </div>
        </div>
    </div>
</div>
