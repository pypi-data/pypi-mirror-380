<peek-admin-panel-header-for-tuple-loader-delegate
    [delegate]="delegate"
    [deleteEnabled]="false"
    [createMode]="createMode != null"
></peek-admin-panel-header-for-tuple-loader-delegate>
<peek-admin-content-tuple-data-loader [delegate]="delegate">
    <ng-container *ngIf="delegate.formGroup$ | async as formGroup">
        <nz-card class="settings-card">
            <div class="form-container" [formGroup]="formGroup">
                <!-- ID Field (Disabled) -->
                <nz-form-item>
                    <nz-form-label nzFor="id">ID</nz-form-label>
                    <nz-form-control>
                        {{ formGroup.controls["id"].value }}
                    </nz-form-control>
                </nz-form-item>

                <!-- Import Hash -->
                <nz-form-item>
                    <nz-form-label nzFor="importHash">
                        Import Hash (Key)
                    </nz-form-label>
                    <nz-form-control>
                        <ng-container
                            *ngIf="
                                formGroup.controls['id'].value === null;
                                else readOnlyImportHash
                            "
                        >
                            <input
                                nz-input
                                id="importHash"
                                formControlName="importHash"
                                placeholder="Enter import hash"
                            />
                        </ng-container>
                        <ng-template #readOnlyImportHash>
                            {{ formGroup.controls["importHash"].value }}
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="blockApiUpdate"
                        >Block API Update
                    </nz-form-label>
                    <nz-form-control>
                        <nz-switch
                            id="blockApiUpdate"
                            formControlName="blockApiUpdate"
                        ></nz-switch>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="parentId">
                        Parent Layer
                    </nz-form-label>
                    <nz-form-control>
                        <nz-select
                            id="parentId"
                            formControlName="parentId"
                            nzShowSearch
                            nzAllowClear
                            nzPlaceHolder="Select parent layer"
                        >
                            <nz-option
                                *ngFor="
                                    let layer of availableParentLayers$ | async
                                "
                                [nzValue]="layer.id"
                                [nzLabel]="layer.name"
                            >
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>

                <!-- Basic Information -->
                <nz-form-item>
                    <nz-form-label nzRequired nzFor="name">Name </nz-form-label>
                    <nz-form-control nzErrorTip="Please input a name">
                        <input
                            nz-input
                            id="name"
                            formControlName="name"
                            placeholder="Layer name"
                            required
                        />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="showForEdit"
                        >Show Option in Editor
                    </nz-form-label>
                    <nz-form-control>
                        <nz-switch
                            id="showForEdit"
                            formControlName="showForEdit"
                        ></nz-switch>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="editorEditable">
                        Editor Editable
                    </nz-form-label>
                    <nz-form-control>
                        <div class="checkbox-with-inherited">
                            <label
                                nz-checkbox
                                id="editorEditable"
                                [nzIndeterminate]="
                                    formGroup.controls['editorEditable']
                                        .value === null
                                "
                                [nzChecked]="
                                    formGroup.controls['editorEditable']
                                        .value === true
                                "
                                (nzCheckedChange)="
                                    onTriStateChange('editorEditable')
                                "
                            >
                            </label>
                            <span
                                *ngIf="
                                    formGroup.controls['editorEditable']
                                        .value === null
                                "
                                class="inherited-text"
                                >(inherited)</span
                            >
                        </div>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="editorVisible">
                        Editor Visible
                    </nz-form-label>
                    <nz-form-control>
                        <div class="checkbox-with-inherited">
                            <label
                                nz-checkbox
                                id="editorVisible"
                                [nzIndeterminate]="
                                    formGroup.controls['editorVisible']
                                        .value === null
                                "
                                [nzChecked]="
                                    formGroup.controls['editorVisible']
                                        .value === true
                                "
                                (nzCheckedChange)="
                                    onTriStateChange('editorVisible')
                                "
                            >
                            </label>
                            <span
                                *ngIf="
                                    formGroup.controls['editorVisible']
                                        .value === null
                                "
                                class="inherited-text"
                                >(inherited)</span
                            >
                        </div>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="order">Order</nz-form-label>
                    <nz-form-control>
                        <nz-input-number
                            id="order"
                            formControlName="order"
                        ></nz-input-number>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="selectable">
                        Viewer Selectable
                    </nz-form-label>
                    <nz-form-control>
                        <div class="checkbox-with-inherited">
                            <label
                                nz-checkbox
                                id="selectable"
                                [nzIndeterminate]="
                                    formGroup.controls['selectable'].value ===
                                    null
                                "
                                [nzChecked]="
                                    formGroup.controls['selectable'].value ===
                                    true
                                "
                                (nzCheckedChange)="
                                    onTriStateChange('selectable')
                                "
                            >
                            </label>
                            <span
                                *ngIf="
                                    formGroup.controls['selectable'].value ===
                                    null
                                "
                                class="inherited-text"
                                >(inherited)</span
                            >
                        </div>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="visible">
                        Viewer Visible
                    </nz-form-label>
                    <nz-form-control>
                        <div class="checkbox-with-inherited">
                            <label
                                nz-checkbox
                                id="visible"
                                [nzIndeterminate]="
                                    formGroup.controls['visible'].value === null
                                "
                                [nzChecked]="
                                    formGroup.controls['visible'].value === true
                                "
                                (nzCheckedChange)="onTriStateChange('visible')"
                            >
                            </label>
                            <span
                                *ngIf="
                                    formGroup.controls['visible'].value === null
                                "
                                class="inherited-text"
                                >(inherited)</span
                            >
                        </div>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="opacity"> Opacity </nz-form-label>
                    <nz-form-control>
                        <nz-input-number
                            id="opacity"
                            formControlName="opacity"
                            [nzMin]="0"
                            [nzMax]="1"
                            [nzStep]="0.1"
                        ></nz-input-number>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </nz-card>
    </ng-container>
</peek-admin-content-tuple-data-loader>
