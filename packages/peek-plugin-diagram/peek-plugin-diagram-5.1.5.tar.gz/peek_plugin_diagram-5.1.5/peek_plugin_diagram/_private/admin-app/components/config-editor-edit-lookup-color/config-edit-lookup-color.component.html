<peek-admin-panel-header-for-tuple-loader-delegate
    [delegate]="delegate"
    [deleteEnabled]="false"
    [createMode]="createMode != null"
></peek-admin-panel-header-for-tuple-loader-delegate>
<peek-admin-content-tuple-data-loader [delegate]="delegate">
    <ng-container *ngIf="delegate.formGroup$ | async as formGroup">
        <nz-card class="settings-card">
            <div class="form-container" [formGroup]="formGroup">
                <!-- ID Field (Disabled) -->
                <nz-form-item>
                    <nz-form-label nzFor="id">ID</nz-form-label>
                    <nz-form-control>
                        {{ formGroup.controls["id"].value }}
                    </nz-form-control>
                </nz-form-item>

                <!-- Import Hash -->
                <nz-form-item>
                    <nz-form-label nzFor="importHash">
                        Import Hash (Key)
                    </nz-form-label>
                    <nz-form-control>
                        <ng-container
                            *ngIf="
                                formGroup.controls['id'].value === null;
                                else readOnlyImportHash
                            "
                        >
                            <input
                                nz-input
                                id="importHash"
                                formControlName="importHash"
                                placeholder="Enter import hash"
                            />
                        </ng-container>
                        <ng-template #readOnlyImportHash>
                            {{ formGroup.controls["importHash"].value }}
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="blockApiUpdate"
                        >Block API Update
                    </nz-form-label>
                    <nz-form-control>
                        <nz-switch
                            id="blockApiUpdate"
                            formControlName="blockApiUpdate"
                        ></nz-switch>
                    </nz-form-control>
                </nz-form-item>

                <!-- Basic Information -->
                <nz-form-item>
                    <nz-form-label nzRequired nzFor="name">Name</nz-form-label>
                    <nz-form-control nzErrorTip="Please input a name">
                        <input
                            nz-input
                            id="name"
                            formControlName="name"
                            placeholder="Color name"
                            required
                        />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="showForEdit"
                        >Show Option in Editor
                    </nz-form-label>
                    <nz-form-control>
                        <nz-switch
                            id="showForEdit"
                            formControlName="showForEdit"
                        ></nz-switch>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="darkColor"
                        >Dark Mode Color
                    </nz-form-label>
                    <nz-form-control>
                        <input
                            nz-input
                            id="darkColor"
                            formControlName="darkColor"
                            placeholder="#000000"
                        />
                        <span
                            class="color-preview"
                            [style.backgroundColor]="
                                formGroup.controls['darkColor'].value
                            "
                        ></span>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label nzFor="lightColor"
                        >Light Mode Color
                    </nz-form-label>
                    <nz-form-control>
                        <input
                            nz-input
                            id="lightColor"
                            formControlName="lightColor"
                            placeholder="#FFFFFF"
                        />
                        <span
                            class="color-preview"
                            [style.backgroundColor]="
                                formGroup.controls['lightColor'].value
                            "
                        ></span>
                    </nz-form-control>
                </nz-form-item>

                <nz-divider
                    >Flashing Color Settings (Not Implemented)
                </nz-divider>

                <nz-form-item>
                    <nz-form-label nzFor="altColor"
                        >Alternate Color
                    </nz-form-label>
                    <nz-form-control>
                        <input
                            nz-input
                            id="altColor"
                            formControlName="altColor"
                            placeholder="#FFFFFF"
                        />
                        <span
                            *ngIf="formGroup.controls['altColor'].value"
                            class="color-preview"
                            [style.backgroundColor]="
                                formGroup.controls['altColor'].value
                            "
                        ></span>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="swapPeriod"
                        >Swap Period (seconds)
                    </nz-form-label>
                    <nz-form-control>
                        <nz-input-number
                            id="swapPeriod"
                            formControlName="swapPeriod"
                            [nzMin]="0"
                            [nzStep]="0.1"
                        ></nz-input-number>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="darkFillBase64Image"
                        >Dark Fill Image
                    </nz-form-label>
                    <nz-form-control>
                        <div class="file-upload-container">
                            <input
                                type="file"
                                id="darkFillImageUpload"
                                accept="image/*"
                                (change)="handleFileUpload($event, 'dark')"
                                class="file-input"
                            />
                            <button
                                nz-button
                                nzType="default"
                                (click)="clearImage('dark')"
                            >
                                Clear
                            </button>
                        </div>
                        <div *ngIf="imagePreviews.dark" class="image-preview">
                            <img
                                [src]="imagePreviews.dark"
                                alt="Dark mode image preview"
                            />
                        </div>
                        <input
                            type="hidden"
                            id="darkFillBase64Image"
                            formControlName="darkFillBase64Image"
                        />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label nzFor="lightFillBase64Image"
                        >Light Fill Image
                    </nz-form-label>
                    <nz-form-control>
                        <div class="file-upload-container">
                            <input
                                type="file"
                                id="lightFillImageUpload"
                                accept="image/*"
                                (change)="handleFileUpload($event, 'light')"
                                class="file-input"
                            />
                            <button
                                nz-button
                                nzType="default"
                                (click)="clearImage('light')"
                            >
                                Clear
                            </button>
                        </div>
                        <div *ngIf="imagePreviews.light" class="image-preview">
                            <img
                                [src]="imagePreviews.light"
                                alt="Light mode image preview"
                            />
                        </div>
                        <input
                            type="hidden"
                            id="lightFillBase64Image"
                            formControlName="lightFillBase64Image"
                        />
                    </nz-form-control>
                </nz-form-item>
            </div>
        </nz-card>
    </ng-container>
</peek-admin-content-tuple-data-loader>
