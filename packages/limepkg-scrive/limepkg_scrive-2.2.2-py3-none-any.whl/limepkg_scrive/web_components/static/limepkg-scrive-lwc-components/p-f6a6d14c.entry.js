import{r as i,h as t}from"./p-02a3464d.js";import{c as e,P as o,S as n,a as s}from"./p-ad7895b4.js";function l(i){const{limetype:t,id:e}=this.context;if(i[t])return i[t].find((i=>i.id===e))}var r=function(i,t,e,o){var n,s=arguments.length,l=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(i,t,e,o);else for(var r=i.length-1;r>=0;r--)(n=i[r])&&(l=(s<3?n(l):s>3?n(t,e,l):n(t,e))||l);return s>3&&l&&Object.defineProperty(t,e,l),l};const a=class{constructor(t){i(this,t),this.document={},this.isOpen=!1,this.allowedExtensions=Object.freeze(["PDF","DOC","DOCX"]),this.setCloneDocument=i=>{i.stopPropagation(),this.cloneDocument=i.detail},this.openDialog=()=>{this.isOpen=!0},this.closeDialog=()=>{this.isOpen=!1}}goToScrive(i,t){var e,o,n,s;const{scriveHost:l,includePerson:r,includeCoworker:a,target:c}=null===(e=this.config)||void 0===e?void 0:e.limepkg_scrive,d=[`limeDocId=${i}`,`lang=${this.session.language}`,`usePerson=${r}`,`useCoworker=${a}`,`cloneDocument=${null!==(o=this.cloneDocument)&&void 0!==o?o:null===(s=null===(n=this.config)||void 0===n?void 0:n.limepkg_scrive)||void 0===s?void 0:s.cloneDocument}`,`scriveDocId=${t}`,`parentType=${this.context.parent.limetype}`,`parentId=${this.context.parent.id}`];window.open(`${l}/public/?${d.join("&")}`,c)}files(){var i;const t=(null===(i=this.document)||void 0===i?void 0:i._files)||{};return Object.keys(t).map((i=>t[i]))}isSignable(i){return this.allowedExtensions.includes((i.extension||"").toUpperCase())}render(){var i,e,n;if("document"!==this.context.limetype)return;const s=this.files().filter(this.isSignable,this);if(0===s.length||s.length>1)return;const l=this.platform.get(o.Translate),r=l.get("limepkg_scrive.primary_action"),a=l.get("limepkg_scrive.clone_document"),c=l.get("limepkg_scrive.clone_hint"),d=l.get("limepkg_scrive.clone_info"),u=l.get("limepkg_scrive.ok");return t("section",null,t("limel-button",{id:"scrive_esign_button",label:r,outlined:!0,icon:"signature",onClick:()=>{var i;return this.goToScrive(this.context.id,null===(i=this.document)||void 0===i?void 0:i.scrive_document_id)}}),t("p",null,t("limel-flex-container",{justify:"start"},t("limel-checkbox",{label:a,checked:null!==(i=this.cloneDocument)&&void 0!==i?i:null===(n=null===(e=this.config)||void 0===e?void 0:e.limepkg_scrive)||void 0===n?void 0:n.cloneDocument,onChange:this.setCloneDocument}),t("limel-icon-button",{icon:"question_mark",label:c,onClick:this.openDialog}))),t("limel-dialog",{open:this.isOpen,onClose:this.closeDialog},t("p",null,d),t("limel-button",{label:u,onClick:this.closeDialog,slot:"button"})))}};r([function(i={}){const t={name:o.LimeObjectRepository};return i.map=[l,...i.map||[]],i.context=null,e(i,t)}()],a.prototype,"document",void 0),r([n()],a.prototype,"session",void 0),r([s({})],a.prototype,"config",void 0),a.style=".container{margin-left:1.25rem;margin-right:1.25rem}#scrive_esign_button{isolation:isolate;position:relative}#scrive_esign_button:after{content:\"\";display:block;width:1.5rem;height:1.5rem;position:absolute;z-index:1;top:0;left:0.25rem;bottom:0;margin:auto;background-image:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128.9 116.04'><defs><style>.cls-1{fill:none;}.cls-2{fill:%2327282d;}</style></defs><g id='Layer_2' data-name='Layer 2'><g id='S_Mark_Dark' data-name='S Mark Dark'><g id='S_Black' data-name='S Black'><rect class='cls-1' width='128.9' height='116.04'/><path class='cls-2' d='M65.51,65.48a29.87,29.87,0,0,1,7.76,2,7.3,7.3,0,0,1,3.62,3,8.64,8.64,0,0,1,1,4.35A10.34,10.34,0,0,1,76,80.71a12.35,12.35,0,0,1-4.64,3.53c-4.65,2.1-11.05,2.69-16.06,2.73A40.35,40.35,0,0,1,44,85.53,20.24,20.24,0,0,1,36.8,82,13.63,13.63,0,0,1,33,77.1,13.1,13.1,0,0,1,31.86,72H17.67A28.57,28.57,0,0,0,20.6,83a22,22,0,0,0,6.22,7.55,31.48,31.48,0,0,0,8.63,4.6,48.07,48.07,0,0,0,9.91,2.31,75.66,75.66,0,0,0,10.35.63c10.94,0,25-2.14,32.12-11.44A22.22,22.22,0,0,0,92.07,73.2a18,18,0,0,0-1.61-7.8A19.6,19.6,0,0,0,86,59.48a22.44,22.44,0,0,0-6.43-4,29.84,29.84,0,0,0-7.69-2.1C63.47,52.2,44.59,50.46,39.22,48A7.21,7.21,0,0,1,35.56,45a7.69,7.69,0,0,1-1-4.3,8.74,8.74,0,0,1,1.72-5.52,12.69,12.69,0,0,1,4.6-3.53,26.67,26.67,0,0,1,6.37-1.85,43.93,43.93,0,0,1,6.88-.55,34.38,34.38,0,0,1,12.25,2,17.4,17.4,0,0,1,7.35,5,11.88,11.88,0,0,1,2.67,7H90.64A27.58,27.58,0,0,0,87.9,33.17a24.4,24.4,0,0,0-6.73-8,31.92,31.92,0,0,0-11-5.19,60.15,60.15,0,0,0-15.84-1.92A52.27,52.27,0,0,0,36.22,21a25.4,25.4,0,0,0-11.67,8.24,20.92,20.92,0,0,0-4.17,13A18.17,18.17,0,0,0,26.49,56,22.45,22.45,0,0,0,32.92,60a29.63,29.63,0,0,0,7.61,2.06C48.91,63.23,57.21,64.37,65.51,65.48Z'/><path class='cls-2' d='M111.23,89.19a8.84,8.84,0,1,1-8.84-8.88A8.87,8.87,0,0,1,111.23,89.19Z'/></g></g></g></svg>\");background-color:var(--lime-elevated-surface-background-color);background-size:contain;background-repeat:no-repeat;background-position:center}";export{a as lwc_limepkg_scrive}