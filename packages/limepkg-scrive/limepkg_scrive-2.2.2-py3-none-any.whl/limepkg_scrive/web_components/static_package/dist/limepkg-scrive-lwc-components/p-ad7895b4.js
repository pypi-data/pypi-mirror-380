import{g as t}from"./p-02a3464d.js";const e={Route:"route"};function n(t){return"function"==typeof t}function s(t){const e=t((t=>{Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.LimeTypeRepository="state.limetypes";const r=s((t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map(((t,e)=>`${e+1}) ${t.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e}));function i(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class o{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const t of e)t.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(n(s))try{s()}catch(e){t=e instanceof r?e.errors:[e]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const e of i)try{a(e)}catch(e){t=null!=t?t:[],e instanceof r?t=[...t,...e.errors]:t.push(e)}}if(t)throw new r(t)}}add(t){var e;if(t&&t!==this)if(this.closed)a(t);else{if(t instanceof o){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&i(e,t)}remove(t){const{_finalizers:e}=this;e&&i(e,t),t instanceof o&&t._removeParent(this)}}o.EMPTY=(()=>{const t=new o;return t.closed=!0,t})();const c=o.EMPTY;function u(t){return t instanceof o||t&&"closed"in t&&n(t.remove)&&n(t.add)&&n(t.unsubscribe)}function a(t){n(t)?t():t.unsubscribe()}const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},l={setTimeout(t,e,...n){const{delegate:s}=l;return(null==s?void 0:s.setTimeout)?s.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=l;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function f(){}const d=b("C",void 0,void 0);function b(t,e,n){return{kind:t,value:e,error:n}}function v(t){t()}class p extends o{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,u(t)&&t.add(this)):this.destination=x}static create(t,e,n){return new g(t,e,n)}next(t){this.isStopped?E(function(t){return b("N",t,void 0)}(t),this):this._next(t)}error(t){this.isStopped?E(b("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?E(d,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const m=Function.prototype.bind;function y(t,e){return m.call(t,e)}class w{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(t){j(t)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(t){j(t)}else j(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(t){j(t)}}}class g extends p{constructor(t,e,s){let r;if(super(),n(t)||!t)r={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=s?s:void 0};else{let e;this&&h.useDeprecatedNextContext?(e=Object.create(t),e.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&y(t.next,e),error:t.error&&y(t.error,e),complete:t.complete&&y(t.complete,e)}):r=t}this.destination=new w(r)}}function j(t){var e;e=t,l.setTimeout((()=>{const{onUnhandledError:t}=h;if(!t)throw e;t(e)}))}function E(t,e){const{onStoppedNotification:n}=h;n&&l.setTimeout((()=>n(t,e)))}const x={closed:!0,next:f,error:function(t){throw t},complete:f},_="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(t){return t}class O{constructor(t){t&&(this._subscribe=t)}lift(t){const e=new O;return e.source=this,e.operator=t,e}subscribe(t,e,s){const r=(i=t)&&i instanceof p||function(t){return t&&n(t.next)&&n(t.error)&&n(t.complete)}(i)&&u(i)?t:new g(t,e,s);var i;return v((()=>{const{operator:t,source:e}=this;r.add(t?t.call(r,e):e?this._subscribe(r):this._trySubscribe(r))})),r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){t.error(e)}}forEach(t,e){return new(e=R(e))(((e,n)=>{const s=new g({next:e=>{try{t(e)}catch(t){n(t),s.unsubscribe()}},error:n,complete:e});this.subscribe(s)}))}_subscribe(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)}[_](){return this}pipe(...t){return(0===(e=t).length?S:1===e.length?e[0]:function(t){return e.reduce(((t,e)=>e(t)),t)})(this);var e}toPromise(t){return new(t=R(t))(((t,e)=>{let n;this.subscribe((t=>n=t),(t=>e(t)),(()=>t(n)))}))}}function R(t){var e;return null!==(e=null!=t?t:h.Promise)&&void 0!==e?e:Promise}O.create=t=>new O(t);const P=s((t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));class k extends O{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const e=new A(this,this);return e.operator=t,e}_throwIfClosed(){if(this.closed)throw new P}next(t){v((()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const e of this.currentObservers)e.next(t)}}))}error(t){v((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:e}=this;for(;e.length;)e.shift().error(t)}}))}complete(){v((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:e,isStopped:n,observers:s}=this;return e||n?c:(this.currentObservers=null,s.push(t),new o((()=>{this.currentObservers=null,i(s,t)})))}_checkFinalizedStatuses(t){const{hasError:e,thrownError:n,isStopped:s}=this;e?t.error(n):s&&t.complete()}asObservable(){const t=new O;return t.source=this,t}}k.create=(t,e)=>new A(t,e);class A extends k{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:c}}class N extends k{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}function T(t){return t}function C(t,e){return(n,s)=>{const r=function(t,e,n,s){let r=D.get(t);return r||(r=[],D.set(t,r)),r.push({options:n,name:e,optionFactory:s.optionFactory||T,service:{name:s.name,method:s.method||"subscribe"}}),r}(n,s,t,e);1===r.length&&function(t,e){t.connectedCallback=F(t.connectedCallback,e),t.componentWillLoad=function(t,e){return async function(...n){return!0===$.get(this)?(await z(this),t?t.apply(this,n):void 0):F(t,e).apply(this,n)}}(t.componentWillLoad,e),t.componentDidUnload=I(t.componentDidUnload),t.disconnectedCallback=I(t.disconnectedCallback)}(n,r)}}const D=new WeakMap,U=new WeakMap,$=new WeakMap;function F(e,n){return async function(...s){$.set(this,!0),U.set(this,[]),await z(this);const r=new N(this.context);if(function(e,n,s){const r=t(e),{get:i,set:o}=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(r),n);Object.defineProperty(r,n,{configurable:!0,get:i,set:function(t){o.call(this,t),s.next(t)}})}(this,"context",r),n.forEach((t=>{t.options=t.optionFactory(t.options,this),"context"in t.options&&(t.options.context=r),function(t,e){const n=function(t,e){const n=Object.assign({},e.options);var s,r;r=t,(s=n).filter&&(s.filter=s.filter.map((t=>t.bind(r)))),s.map&&(s.map=s.map.map((t=>t.bind(r))));const i=e.service.name,o=t.platform;if(!o.has(i))throw new Error(`Service ${i} does not exist`);return o.get(i)[e.service.method](function(t,e){return n=>{t[e]=n}}(t,e.name),n)}(t,e);U.get(t).push(n)}(this,t)})),e)return e.apply(this,s)}}function I(t){return async function(...e){let n;return t&&(n=t.apply(this,e)),U.get(this).forEach((t=>t())),U.set(this,[]),n}}function z(t){const e=[];return t.platform||e.push(M(t,"platform")),t.context||e.push(M(t,"context")),e.length?Promise.all(e):Promise.resolve()}function M(e,n){const s=t(e);return new Promise((t=>{Object.defineProperty(s,n,{configurable:!0,set:e=>{delete s[n],s[n]=e,t()}})}))}function W(t,e,n,s){var r,i=arguments.length,o=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}var q;function B(t){return e=>{!function(t,e){t.commandId=e}(e,t.id),function(t,e){Object.defineProperty(t,Symbol.hasInstance,{value:t=>function(t){let e,n=[],s=t;for(;e=G(s);)n=[...n,e],s=Object.getPrototypeOf(s);return Array.from(new Set(n))}(t).includes(e)})}(e,t.id)}}function G(t){return"string"==typeof t?t:t&&t.constructor&&t.constructor.commandId?t.constructor.commandId:t&&t.commandId?t.commandId:null}e.LimeObjectRepository="state.limeobjects","function"==typeof SuppressedError&&SuppressedError,function(t){t.Received="command.received",t.Handled="command.handled",t.Failed="command.failed"}(q||(q={})),e.CommandBus="commandBus";let H=class{constructor(){this.relations=[]}};H=W([B({id:"limeobject.bulk-create-dialog"})],H);let L=class{constructor(){this.route=!1}};L=W([B({id:"limeobject.create-dialog"})],L);let V=class{};V=W([B({id:"limeobject.delete-object"})],V);let Y=class{};Y=W([B({id:"limeobject.object-access"})],Y);let J=class{constructor(){this.route=!1}};var K;J=W([B({id:"limeobject.save-object"})],J),function(t){t.AND="AND",t.OR="OR",t.NOT="!",t.EQUALS="=",t.NOT_EQUALS="!=",t.GREATER=">",t.LESS="<",t.IN="IN",t.BEGINS="=?",t.LIKE="?",t.LESS_OR_EQUAL="<=",t.GREATER_OR_EQUAL=">=",t.ENDS="=$"}(K||(K={})),e.Query="query",e.Http="http",e.EventDispatcher="eventDispatcher",e.Translate="translate",e.Dialog="dialog",e.KeybindingRegistry="keybindingRegistry",e.Navigator="navigator";let Q=class{};var X,Z;function tt(t){return C(t,{name:e.ConfigRepository})}function et(t={}){const n={name:e.Application};return t.map=[nt,...t.map||[]],C(t,n)}function nt(t){return t.session}Q=W([B({id:"navigator.navigate"})],Q),e.Notification="notifications",e.RouteRegistry="routeRegistry",function(t){t.Pending="PENDING",t.Started="STARTED",t.Retry="RETRY",t.Success="SUCCESS",t.Failure="FAILURE"}(X||(X={})),function(t){t.Created="task.created",t.Success="task.success",t.Failed="task.failed"}(Z||(Z={})),e.TaskRepository="state.tasks",e.ConfigRepository="state.configs",e.Device="state.device",e.FilterRepository="state.filters",e.UserDataRepository="state.user-data",e.Application="state.application",e.UserPreferencesRepository="userPreferences",e.DateTimeFormatter="datetimeformatter",e.ConditionRegistry="conditionRegistry",e.ViewFactoryRegistry="viewFactoryRegistry",e.WebComponentRegistry="webComponentRegistry";export{B as C,K as O,e as P,et as S,tt as a,C as c}