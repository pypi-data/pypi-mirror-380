import{x as ee,y as te,z as ie,C as ae,a as b,D as P,E as X,H as ne,I as oe,d as K,c as r,o as t,b as i,w as a,g as T,aQ as le,e as p,i as N,av as se,ad as re,N as R,bE as me,M as U,bh as H,bi as F,n as W,u as y,q as d,bt as ue,aF as Z,bF as de,b3 as ce,b4 as B,t as m,b5 as L,bG as pe,bH as ye,aA as fe,F as x,r as z,s as q,be as ge,b0 as E,m as A,v as G,bs as be,bI as he,bC as ve,bJ as ke,bK as $e,bL as Ce,bM as _e,p as we,bN as Te,J as Ve,h as Ie}from"./index-LFx1jIjH.js";import{M as Y}from"./MediaItemThumb-cYqdWFcl.js";import{T as M}from"./Toolbar-iQxHKI_C.js";import{M as D,a as Le}from"./marquee_text_sync-AxiznPti.js";import{a as V,b as De}from"./VBtn-BYKkZzw0.js";import{V as Be}from"./VDialog-zNF2U_x9.js";import{c as Pe,m as Re}from"./layout-C6GuZOkj.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as ze}from"./Container-CuH2YNr5.js";import{L as Q}from"./ListItem-DhvO1M3C.js";const Ae=te({...oe(),...ne(),...Re()},"VLayout"),Se=ee()({name:"VLayout",props:Ae(),setup(C,c){let{slots:f}=c;const{layoutClasses:l,layoutStyles:g,getLayoutItem:_,items:I,layoutRef:h}=Pe(C),{dimensionStyles:v}=ie(C);return ae(()=>b("div",{ref:h,class:X([l.value,C.class]),style:P([v.value,g.value,C.style])},[f.default?.()])),{getLayoutItem:_,items:I}}}),He=K({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},loading:{type:Boolean,default:!0}},emits:["click","menu"],setup(C,{emit:c}){const f=c;return(l,g)=>(t(),r("div",{style:P(`width: ${l.width}px; height: 30px;`)},[i(V,{variant:"tonal",style:P(`
            width: ${l.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `),disabled:l.loading,onClick:g[0]||(g[0]=_=>f("menu"))},{default:a(()=>[i(T,{icon:"mdi-menu-down",size:"xx-large",style:P(`width: 20px; margin-left: ${l.width-42}px`)},null,8,["style"])]),_:1},8,["style","disabled"]),i(V,{color:"primary",flat:"",disabled:l.disabled||l.loading,style:P(`width: ${l.width-40}px; justify-content: left;`),text:l.text,onClick:g[1]||(g[1]=_=>f("click"))},le({_:2},[l.icon&&l.text.length<12||l.loading?{name:"prepend",fn:a(()=>[l.loading?(t(),p(De,{key:0,color:"grey-lighten-5",indeterminate:""})):(t(),p(T,{key:1,icon:l.icon,size:"x-large"},null,8,["icon"]))]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Fe={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center","flex-shrink":"0"}},Ne={key:0},Ue={key:1},Ee={style:{"min-width":"0"}},je=["src"],qe={style:{"padding-bottom":"10px"}},Ge=["onClick"],Ke={style:{color:"accent"}},Je={style:{color:"accent"}},Oe={style:{color:"primary"}},We={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},Ye=["innerHTML"],Qe={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Xe=K({__name:"InfoHeader",props:{item:{}},setup(C){const c=C,f=N(!1),l=N(),{mobile:g}=se(),_=N([]),I=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,h=new Le,v=ke();re(()=>c.item,async e=>{e?(l.value=H(e,F.FANART)||H(e,F.LANDSCAPE)||H(e,F.THUMB)||I,_.value=await Ce([e],e)):(l.value=I,_.value=[])},{immediate:!0});const S=function(e){v.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},j=function(e){v.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},n=function(){if(q.prevRoute){v.back();return}const e=v.currentRoute.value.name?.toString()||"";for(const s of["artist","album","track","playlist","radio"])if(e.includes(s)){v.push({name:`${s}s`});return}v.push({name:"home"})},k=function(e=!1){const s=document.getElementById("playbutton");$e(c.item,s.getBoundingClientRect().left,s.getBoundingClientRect().top+36,void 0,e)},o=R(()=>c.item?c.item.metadata&&c.item.metadata.description?c.item.metadata.description:c.item.metadata&&c.item.metadata.copyright?c.item.metadata.copyright:("artists"in c.item&&c.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),$=R(()=>me(o.value)),J=R(()=>{const e=g.value?160:300;return o.value.length>e?$.value.substring(0,e)+"...":$.value}),O=R(()=>{if(c.item&&c.item.media_type==U.ARTIST)return H(c.item,F.LOGO)});return(e,s)=>(t(),r("div",null,[i(W,{variant:"flat",img:y(I),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:a(()=>[e.item?d("",!0):(t(),p(ue,{key:0,indeterminate:""})),i(Z,{width:"100%",height:"100%",cover:"",class:"background-image",src:l.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),i(M,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":_.value,"enforce-overflow-menu":!0,"show-loading":!0,"icon-action":n},null,8,["menu-items"]),e.item?(t(),p(Se,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px",display:"flex",width:"100%"}},{default:a(()=>[e.$vuetify.display.mobile?d("",!0):(t(),r("div",Fe,[e.item.media_type&&e.item.media_type==y(U).ARTIST?(t(),r("div",Ne,[i(de,{size:"210",style:{"margin-bottom":"10%"}},{default:a(()=>[i(Y,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(t(),r("div",Ue,[i(Y,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),b("div",Ee,[O.value?(t(),r("img",{key:0,src:O.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,je)):(t(),p(ce,{key:1},{default:a(()=>[i(D,{sync:y(h)},{default:a(()=>[B(m(e.item.name),1)]),_:1},8,["sync"])]),_:1})),b("div",qe,["version"in e.item&&e.item.version?(t(),p(L,{key:0,class:"caption"},{default:a(()=>[B(m(e.item.version)+" ",1),i(pe,{location:"bottom"},{activator:a(({props:u})=>[y(ye)(e.item.metadata.explicit||!1)?(t(),p(T,fe({key:0},u,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):d("",!0)]),default:a(()=>[b("span",null,m(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):d("",!0),"artists"in e.item&&e.item.artists?(t(),p(L,{key:1,class:"title accent--text d-flex"},{default:a(()=>[i(T,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),i(D,{sync:y(h)},{default:a(()=>[(t(!0),r(x,null,z(e.item.artists,(u,w)=>(t(),r("span",{key:u.item_id},[b("a",{style:{color:"accent"},onClick:at=>j(u)},m(u.name),9,Ge),w+1<e.item.artists.length?(t(),r("span",{key:w,style:{color:"accent"}},m(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"authors"in e.item&&e.item.authors.length>0?(t(),p(L,{key:2,class:"title accent--text d-flex"},{default:a(()=>[i(T,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-edit"}),i(D,{sync:y(h)},{default:a(()=>[(t(!0),r(x,null,z(e.item.authors,(u,w)=>(t(),r("span",{key:u},[b("span",Ke,m(u),1),w+1<e.item.authors.length?(t(),r("span",{key:w,style:{color:"accent"}},m(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"narrators"in e.item&&e.item.narrators.length>0?(t(),p(L,{key:3,class:"title accent--text d-flex"},{default:a(()=>[i(T,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-voice"}),i(D,{sync:y(h)},{default:a(()=>[(t(!0),r(x,null,z(e.item.narrators,(u,w)=>(t(),r("span",{key:u},[b("span",Je,m(u),1),w+1<e.item.narrators.length?(t(),r("span",{key:w,style:{color:"accent"}},m(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"owner"in e.item&&e.item.owner?(t(),p(L,{key:4,class:"title d-flex"},{default:a(()=>[i(T,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),i(D,{sync:y(h)},{default:a(()=>[b("a",Oe,m(e.item.owner),1)]),_:1},8,["sync"])]),_:1})):d("",!0),"album"in e.item&&e.item.album?(t(),p(L,{key:5,class:"d-flex"},{default:a(()=>[i(T,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),i(D,{sync:y(h)},{default:a(()=>[b("a",{style:{color:"secondary"},onClick:s[0]||(s[0]=u=>S(e.item?.album))},m(e.item.album.name),1)]),_:1},8,["sync"])]),_:1})):d("",!0)]),b("div",We,[i(He,{id:"playbutton",width:220,icon:"mdi-play-circle-outline",text:y(ge)(e.$t("play"),14),disabled:!e.item,loading:y(q).playActionInProgress,"open-menu-on-click":!y(q).activePlayer,onClick:k,onMenu:s[1]||(s[1]=u=>k(!0))},null,8,["text","disabled","loading","open-menu-on-click"]),i(V,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[s[2]||(s[2]=u=>y(A).toggleFavorite(e.item)),s[3]||(s[3]=E(()=>{},["prevent"])),s[4]||(s[4]=E(()=>{},["stop"]))]},null,8,["icon","title"]),i(G,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),J.value?(t(),p(L,{key:2,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:s[5]||(s[5]=u=>f.value=!f.value)},{default:a(()=>[b("div",{innerHTML:J.value},null,8,Ye)]),_:1})):d("",!0),e.item&&e.item.metadata.genres?(t(),r("div",Qe,[(t(!0),r(x,null,z(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),u=>(t(),p(be,{key:u,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:a(()=>[B(m(u),1)]),_:2},1024))),128))])):d("",!0)])]),_:1})):d("",!0)]),_:1},8,["img"]),i(Be,{modelValue:f.value,"onUpdate:modelValue":s[7]||(s[7]=u=>f.value=u),"max-width":"975",width:"auto"},{default:a(()=>[i(W,null,{default:a(()=>[i(he,{innerHTML:$.value},null,8,["innerHTML"]),i(ve,null,{default:a(()=>[i(V,{color:"primary",block:"",onClick:s[6]||(s[6]=u=>f.value=!1)},{default:a(()=>[B(m(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),yt=xe(Xe,[["__scopeId","data-v-092bb089"]]),Ze={style:{"margin-bottom":"10px"}},Me={key:0},et=["title","onClick"],tt=["title"],it={class:"d-flex align-center ga-2"},ft=K({__name:"ProviderDetails",props:{itemDetails:{}},setup(C){const c=C,f=N(!1),l=function(n){window.open(n,"_blank")},g=_e({}),_=function(n){const k=`${n.provider_instance}.${n.item_id}`,o=g[k];if(o)o.load(),delete g[k];else{const $=new Audio(I(n.provider_instance,n.item_id));g[k]=$,$.play()}},I=function(n,k){return`${A.baseUrl}/preview?item_id=${encodeURIComponent(k)}&provider=${n}`},h=function(n){return`${A.getProvider(n.provider_instance)?.lookup_key}://${c.itemDetails.media_type}/${n.item_id}`},v=function(n){navigator.clipboard.writeText(n)},S=function(){f.value=!f.value},j=R(()=>[{label:"tooltip.collapse_expand",icon:f.value?"mdi-chevron-up":"mdi-chevron-down",action:S,overflowAllowed:!1}]);return(n,k)=>(t(),r("section",Ze,[i(M,{title:n.$t("mapped_providers"),"menu-items":j.value,onTitleClicked:S},null,8,["title","menu-items"]),i(we),f.value?(t(),p(ze,{key:0},{default:a(()=>[i(Ie,null,{default:a(()=>[(t(!0),r(x,null,z(n.itemDetails?.provider_mappings,o=>(t(),p(Q,{key:o.provider_instance,disabled:!o.available||!y(A).getProvider(o.provider_instance)},{prepend:a(()=>[i(G,{domain:o.provider_domain,size:30},null,8,["domain"])]),title:a(()=>[B(m(y(A).getProvider(o.provider_instance)?.name),1)]),subtitle:a(()=>[n.itemDetails.media_type==y(U).TRACK&&o.audio_format?(t(),r("span",Me,m(o.audio_format.content_type)+" | "+m(o.audio_format.sample_rate/1e3)+"kHz/"+m(o.audio_format.bit_depth)+" bits | ",1)):d("",!0),o.url&&!o.provider_domain.startsWith("file")?(t(),r("a",{key:1,style:{opacity:"0.4"},title:n.$t("tooltip.open_provider_link"),onClick:E($=>l(o.url),["prevent"])},m(h(o)),9,et)):(t(),r("span",{key:2,style:{opacity:"0.4"},title:n.$t("copy_uri")},m(h(o)),9,tt))]),append:a(()=>[o.audio_format&&o.audio_format.bit_depth>16?(t(),p(Z,{key:0,src:y(Te),width:"30",class:X(n.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):d("",!0),b("div",it,[y(Ve)("bp1")&&n.itemDetails.media_type==y(U).TRACK?(t(),p(V,{key:0,icon:g[`${o.provider_instance}.${o.item_id}`]?"mdi-pause":"mdi-play-circle",title:n.$t("tooltip.play_sample"),onClick:$=>_(o)},null,8,["icon","title","onClick"])):d("",!0),o.url&&!o.provider_domain.startsWith("file")?(t(),p(V,{key:1,icon:"mdi-open-in-new",title:n.$t("tooltip.open_provider_link"),onClick:E($=>l(o.url),["prevent"])},null,8,["title","onClick"])):d("",!0),i(V,{icon:"mdi-link",title:n.$t("tooltip.copy_uri"),onClick:$=>v(h(o))},null,8,["title","onClick"])])]),_:2},1032,["disabled"]))),128)),n.itemDetails.provider=="library"?(t(),p(Q,{key:0},{prepend:a(()=>[i(G,{domain:"library",size:30})]),title:a(()=>[B(m(n.$t("music_assistant_library")),1)]),subtitle:a(()=>[b("span",null,"library://"+m(n.itemDetails.media_type)+"/"+m(n.itemDetails.item_id),1)]),append:a(()=>[i(V,{icon:"mdi-link",title:n.$t("tooltip.copy_uri"),onClick:k[0]||(k[0]=o=>v(`library://${n.itemDetails.media_type}/${n.itemDetails.item_id}`))},null,8,["title"])]),_:1})):d("",!0)]),_:1})]),_:1})):d("",!0)]))}});export{yt as I,ft as _};
