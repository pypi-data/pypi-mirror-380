import{_ as ya,T as fa,V as Je}from"./Toolbar-iQxHKI_C.js";import{D as pa}from"./constants-BXWEQHoz.js";import{_ as ha,s as a,d as O,c as _,o as r,a as k,b as u,w as y,F as Y,r as ue,e as V,V as xe,f as _a,t as C,g as le,u as e,h as $e,i as A,j as we,k as Ce,l as Ae,m as M,M as F,P as Pt,n as Ne,$ as J,p as et,q as Q,v as Ze,A as ga,x as ce,y as de,z as ba,B as Ye,C as me,D as j,E as ie,G as Ve,H as wa,I as ke,J as G,K as ka,L as Pa,N as S,O as Xe,Q as ot,R as Re,S as nt,T as Ia,U as rt,W as Be,X as zt,Y as ut,Z as ct,a0 as je,a1 as U,a2 as Dt,a3 as dt,a4 as ge,a5 as Ca,a6 as mt,a7 as vt,a8 as Ot,a9 as yt,aa as Nt,ab as $a,ac as ve,ad as te,ae as Wt,af as Qa,ag as xa,ah as Ht,ai as Va,aj as Sa,ak as Ta,al as La,am as Ma,an as Ea,ao as Ge,ap as Ba,aq as Te,ar as ft,as as Aa,at as Ra,au as Fa,av as pt,aw as qa,ax as Ut,ay as za,az as Da,aA as K,aB as Oa,aC as Na,aD as Wa,aE as Ha,aF as We,aG as Ua,aH as Ya,aI as Xa,aJ as ja,aK as Ga,aL as It,aM as Ka,aN as Za,aO as Ja,aP as el,aQ as tl,aR as al,aS as Qe,aT as re,aU as Le,aV as tt,aW as ht,aX as Me,aY as Yt,aZ as He,a_ as ll,a$ as Fe,b0 as qe,b1 as Ue,b2 as at,b3 as Se,b4 as N,b5 as pe,b6 as Xt,b7 as jt,b8 as lt,b9 as Gt,ba as Ct,bb as $t,bc as il,bd as sl,be as ol,bf as De,bg as nl,bh as Qt,bi as xt,bj as Vt,bk as _e,bl as Kt,bm as rl,bn as ul,bo as cl,bp as dl}from"./index-LFx1jIjH.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ee}from"./MediaItemThumb-cYqdWFcl.js";import{V as Zt}from"./VDialog-zNF2U_x9.js";import{u as ml,c as vl,m as yl,a as _t,b as gt}from"./layout-C6GuZOkj.js";import{V as fl,a as pl}from"./VInfiniteScroll-DH2IK80_.js";import{z as hl,m as St,B as he}from"./Button-SUce42c3.js";import{V as _l,P as bt,g as gl,a as ze}from"./PlayerCard-CDAKLvCC.js";import{V as bl}from"./VSlider-B0DY4XNd.js";import{L as wl}from"./ListItem-DhvO1M3C.js";import{V as kl,a as be,m as Pl,b as Jt}from"./VBtn-BYKkZzw0.js";import{M as se,a as it}from"./marquee_text_sync-AxiznPti.js";import{_ as Il}from"./NowPlayingBadge.vue_vue_type_style_index_0_lang-B4veTxLS.js";import{V as Cl}from"./VToolbar-Dc2WDt1C.js";import{V as $l}from"./VVirtualScroll-DYZmdOFl.js";import{V as Ql,a as Tt,b as Lt,c as Mt}from"./VExpansionPanels-DUWI7Gyy.js";import"./VInput-B3Z2GK8Z.js";const xl=oe(ha,[["__scopeId","data-v-89a5b6dd"]]),ea=function(){const t=localStorage.getItem("frontend.settings.menu_items"),l=t?t.split(","):pa,i=[];for(const s of l)s==="home"&&i.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),s==="search"&&i.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),s==="artists"&&i.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),s==="albums"&&i.push({label:"albums",icon:"md:album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),s==="tracks"&&i.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),s==="playlists"&&i.push({label:"playlists",icon:"md:playlist_play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),s==="podcasts"&&i.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),s==="audiobooks"&&i.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),s==="radios"&&i.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),s==="browse"&&i.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),s==="settings"&&i.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return i},Vl={class:"sidebar"},Sl=O({__name:"Navigation",setup(t){const l=ea();return(i,s)=>(r(),_("nav",Vl,[s[0]||(s[0]=k("div",{class:"sidebar-header"},[k("img",{src:ya,alt:"Music Assistant",class:"sidebar-header-logo"}),k("div",{class:"sidebar-header-title"},"Music Assistant")],-1)),u($e,{class:"sidebar-list"},{default:y(()=>[(r(!0),_(Y,null,ue(e(l),o=>(r(),V(xe,{key:o.label,slim:"",nav:"",class:"menuButton",to:o.path},{prepend:y(()=>[u(le,{icon:o.icon,size:"24px"},null,8,["icon"])]),default:y(()=>[u(_a,{textContent:C(i.$t(o.label))},null,8,["textContent"])]),_:2},1032,["to"]))),128))]),_:1})]))}}),Tl=oe(Sl,[["__scopeId","data-v-032ea6d4"]]),Ll={class:"media-thumb"},Ml={style:{"margin-left":"-10px","padding-right":"5px"}},El=O({__name:"AddToPlaylistDialog",setup(t){const l=A(!1),i=A([]),s=A([]),o=A(),n=A([]);we(()=>{Ce.on("playlistdialog",async T=>{l.value=!0,n.value=T.items,o.value=T.parentItem,await c()}),Ae(()=>{Ce.off("playlistdialog")})});const c=async function(){i.value=[],s.value=[];const T=await M.getLibraryPlaylists();let w=n.value.length?n.value[0]:void 0;if(w){"provider_mappings"in w||(w=await M.getItem(w.media_type,w.item_id,w.provider));for(const d of T){if(!d.provider_mappings.filter(I=>I.available).length||!d.is_editable||o.value&&o.value.media_type===F.PLAYLIST&&d.item_id===o.value.item_id)continue;const $=M.providers[d.provider_mappings[0].provider_instance];$&&($.domain=="builtin"||$.is_streaming_provider||w?.provider_mappings.filter(I=>I.provider_instance==$.instance_id).length)&&i.value.push(d)}for(const d of Object.values(M.providers))d.supported_features.includes(Pt.PLAYLIST_CREATE)&&d.supported_features.includes(Pt.PLAYLIST_TRACKS_EDIT)&&(d.domain=="builtin"||d.is_streaming_provider||w?.provider_mappings.filter($=>$.provider_instance==d.instance_id).length)&&s.value.push(d.instance_id)}},m=async function(T){M.addPlaylistTracks(T.item_id,n.value.map(w=>w.uri)),v(),a.activeAlert={type:ga.INFO,message:J("background_task_added"),persistent:!1}},f=async function(T){const w=prompt(J("new_playlist_name"));if(!w)return;const d=await M.createPlaylist(w,T);m(d)},v=function(){l.value=!1};return(T,w)=>(r(),V(Zt,{modelValue:l.value,"onUpdate:modelValue":[w[0]||(w[0]=d=>l.value=d),w[1]||(w[1]=d=>{e(a).dialogActive=d})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[u(Ne,null,{default:y(()=>[u(fa,{icon:"mdi-playlist-plus",title:e(J)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:v}]},null,8,["title","menu-items"]),u(et),w[4]||(w[4]=k("br",null,null,-1)),u($e,null,{default:y(()=>[(r(!0),_(Y,null,ue(i.value,d=>(r(),_("div",{key:d.item_id},[u(xe,{onClick:$=>m(d)},{prepend:y(()=>[k("div",Ll,[u(Ee,{item:d,size:50},null,8,["item"])])]),title:y(()=>[k("div",null,C(d.name),1)]),subtitle:y(()=>[k("div",null,C(d.owner),1)]),append:y(()=>[d.provider_mappings?(r(),V(Ze,{key:0,domain:d.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):Q("",!0)]),_:2},1032,["onClick"])]))),128)),w[2]||(w[2]=k("div",{style:{height:"30px"}},null,-1)),u(et),w[3]||(w[3]=k("div",{style:{height:"30px"}},null,-1)),(r(!0),_(Y,null,ue(s.value,d=>(r(),_("div",{key:d},[u(xe,{onClick:$=>f(d)},{prepend:y(()=>[k("div",Ml,[u(Ze,{domain:e(M).providers[d].domain,size:50},null,8,["domain"])])]),title:y(()=>[k("div",null,C(e(J)("new_playlist")),1)]),subtitle:y(()=>[k("div",null,C(e(J)("create_playlist_on",[e(M).providers[d].name])),1)]),append:y(()=>[u(Ze,{domain:e(M).providers[d].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Bl=oe(El,[["__scopeId","data-v-bd014719"]]),Al=de({scrollable:Boolean,...ke(),...wa(),...Ve({tag:"main"})},"VMain"),Rl=ce()({name:"VMain",props:Al(),setup(t,l){let{slots:i}=l;const{dimensionStyles:s}=ba(t),{mainStyles:o}=ml(),{ssrBootStyles:n}=Ye();return me(()=>u(t.tag,{class:ie(["v-main",{"v-main--scrollable":t.scrollable},t.class]),style:j([o.value,n.value,s.value,t.style])},{default:()=>[t.scrollable?k("div",{class:"v-main__scroller"},[i.default?.()]):i.default?.()]})),{}}}),Fl={class:"content-section"},ql=O({__name:"View",setup(t){return(l,i)=>{const s=Pa("router-view");return r(),V(Rl,{id:"cont",class:"main-layout"},{default:y(()=>[e(G)({breakpoint:"tablet"})?Q("",!0):(r(),V(Tl,{key:0,class:"nav-section"})),k("div",Fl,[u(s,null,{default:y(({Component:o})=>[(r(),V(ka(o)))]),_:1}),u(Bl),u(xl),u(fl,{"model-value":e(a).activeAlert!==void 0,color:e(a).activeAlert?.type||"grey",text:e(a).activeAlert?.message,"close-on-content-click":"",position:"sticky",timeout:e(a).activeAlert?.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":i[0]||(i[0]=()=>e(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])])]),_:1})}}}),Et=oe(ql,[["__scopeId","data-v-dd4e46f3"]]),zl=t=>{const l=S(()=>{const{variant:n,width:c,height:m,staticWidth:f,staticHeight:v,maxWidth:T,maxHeight:w,minWidth:d,minHeight:$,badge:I,...E}=t,q={...E,size:t.size||f||void 0||v||void 0||(t.maxHeight?t.maxHeight:void 0)||(t.maxWidth?t.maxWidth:void 0)||"24px"};return hl(n).with("button",()=>({...q,class:t.class?`icon-button ${t.class}`:"icon-button"})).with("responsive",()=>({...q,class:t.class?`icon-responsive ${t.class}`:"icon-responsive"})).with("default",()=>({...q,class:t.class?`icon-default ${t.class}`:"icon-default"})).otherwise(()=>({...q,class:t.class?`icon-default ${t.class}`:"icon-default"}))}),i=S(()=>{const n={};if(t.staticWidth?n.width=t.staticWidth:t.width&&(n.width=t.width),t.staticHeight?n.height=t.staticHeight:t.height&&(n.height=t.height),t.maxWidth&&(n.maxWidth=t.maxWidth),t.maxHeight&&(n.maxHeight=t.maxHeight),t.minWidth&&(n.minWidth=t.minWidth),t.minHeight&&(n.minHeight=t.minHeight),typeof t.style=="object")Object.assign(n,t.style);else if(typeof t.style=="string"){const c=t.style.split(";").reduce((m,f)=>{const[v,T]=f.split(":").map(w=>w.trim());return v&&T&&(m[v]=T),m},{});Object.assign(n,c)}return n}),s=S(()=>St("icon-container",t.variant&&`icon-container--${t.variant}`,t.disabled&&"icon-container--disabled")),o=S(()=>St("icon",t.variant&&`icon--${t.variant}`));return{iconProps:l,containerStyle:i,containerClasses:s,iconClasses:o}},Dl={variant:"default",minWidth:"24px",minHeight:"24px",badge:!1,disabled:!1},Ol=de({...ke(),...nt(yl(),["fullHeight"]),...Re()},"VApp"),Nl=ce()({name:"VApp",props:Ol(),setup(t,l){let{slots:i}=l;const s=Xe(t),{layoutClasses:o,getLayoutItem:n,items:c,layoutRef:m}=vl({...t,fullHeight:!0}),{rtlClasses:f}=ot();return me(()=>k("div",{ref:m,class:ie(["v-application",s.themeClasses.value,o.value,f.value,t.class]),style:j([t.style])},[k("div",{class:"v-application__wrap"},[i.default?.()])])),{getLayoutItem:n,items:c,theme:s}}}),Wl=de({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...yt(),...ke(),...Ot(),...vt(),...mt(),...gt({name:"bottom-navigation"}),...Ve({tag:"header"}),...Ca({selectedClass:"v-btn--selected"}),...Re()},"VBottomNavigation"),Hl=ce()({name:"VBottomNavigation",props:Wl(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,l){let{slots:i}=l;const{themeClasses:s}=Ia(),{borderClasses:o}=rt(t),{backgroundColorClasses:n,backgroundColorStyles:c}=Be(()=>t.bgColor),{densityClasses:m}=zt(t),{elevationClasses:f}=ut(t),{roundedClasses:v}=ct(t),{ssrBootStyles:T}=Ye(),w=S(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),d=je(t,"active",t.active),{layoutItemStyles:$}=_t({id:t.name,order:S(()=>parseInt(t.order,10)),position:U(()=>"bottom"),layoutSize:U(()=>d.value?w.value:0),elementSize:w,active:d,absolute:U(()=>t.absolute)});return Dt(t,kl),dt({VBtn:{baseColor:U(()=>t.baseColor),color:U(()=>t.color),density:U(()=>t.density),stacked:U(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),me(()=>u(t.tag,{class:ie(["v-bottom-navigation",{"v-bottom-navigation--active":d.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},s.value,n.value,o.value,m.value,f.value,v.value,t.class]),style:j([c.value,$.value,{height:ge(w.value)},T.value,t.style])},{default:()=>[i.default&&k("div",{class:"v-bottom-navigation__content"},[i.default()])]})),{}}}),Ul=t=>{const{touchstartX:l,touchendX:i,touchstartY:s,touchendY:o}=t,n=.5,c=16;t.offsetX=i-l,t.offsetY=o-s,Math.abs(t.offsetY)<n*Math.abs(t.offsetX)&&(t.left&&i<l-c&&t.left(t),t.right&&i>l+c&&t.right(t)),Math.abs(t.offsetX)<n*Math.abs(t.offsetY)&&(t.up&&o<s-c&&t.up(t),t.down&&o>s+c&&t.down(t))};function Yl(t,l){const i=t.changedTouches[0];l.touchstartX=i.clientX,l.touchstartY=i.clientY,l.start?.({originalEvent:t,...l})}function Xl(t,l){const i=t.changedTouches[0];l.touchendX=i.clientX,l.touchendY=i.clientY,l.end?.({originalEvent:t,...l}),Ul(l)}function jl(t,l){const i=t.changedTouches[0];l.touchmoveX=i.clientX,l.touchmoveY=i.clientY,l.move?.({originalEvent:t,...l})}function Gl(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const l={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:i=>Yl(i,l),touchend:i=>Xl(i,l),touchmove:i=>jl(i,l)}}function Kl(t,l){const i=l.value,s=i?.parent?t.parentElement:t,o=i?.options??{passive:!0},n=l.instance?.$.uid;if(!s||n===void 0)return;const c=Gl(l.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[n]=c,Nt(c).forEach(m=>{s.addEventListener(m,c[m],o)})}function Zl(t,l){const i=l.value?.parent?t.parentElement:t,s=l.instance?.$.uid;if(!i?._touchHandlers||s===void 0)return;const o=i._touchHandlers[s];Nt(o).forEach(n=>{i.removeEventListener(n,o[n])}),delete i._touchHandlers[s]}const st={mounted:Kl,unmounted:Zl},ta=Symbol.for("vuetify:v-window"),aa=Symbol.for("vuetify:v-window-group"),la=de({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...ke(),...Ve(),...Re()},"VWindow"),Bt=ce()({name:"VWindow",directives:{vTouch:st},props:la(),emits:{"update:modelValue":t=>!0},setup(t,l){let{slots:i}=l;const{themeClasses:s}=Xe(t),{isRtl:o}=ot(),{t:n}=$a(),c=Dt(t,aa),m=A(),f=S(()=>o.value?!t.reverse:t.reverse),v=ve(!1),T=S(()=>{if(t.crossfade)return"v-window-crossfade-transition";const z=t.direction==="vertical"?"y":"x",p=(f.value?!v.value:v.value)?"-reverse":"";return`v-window-${z}${p}-transition`}),w=ve(0),d=A(void 0),$=S(()=>c.items.value.findIndex(z=>c.selected.value.includes(z.id)));te($,(z,g)=>{const p=c.items.value.length,x=p-1;p<=2?v.value=z<g:z===x&&g===0?v.value=!0:z===0&&g===x?v.value=!1:v.value=z<g}),xa(ta,{transition:T,isReversed:v,transitionCount:w,transitionHeight:d,rootRef:m});const I=U(()=>t.continuous||$.value!==0),E=U(()=>t.continuous||$.value!==c.items.value.length-1);function q(){I.value&&c.prev()}function X(){E.value&&c.next()}const ee=S(()=>{const z=[],g={icon:o.value?t.nextIcon:t.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:c.prev,"aria-label":n("$vuetify.carousel.prev")};z.push(I.value?i.prev?i.prev({props:g}):u(be,g,null):k("div",null,null));const p={icon:o.value?t.prevIcon:t.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:c.next,"aria-label":n("$vuetify.carousel.next")};return z.push(E.value?i.next?i.next({props:p}):u(be,p,null):k("div",null,null)),z}),W=S(()=>t.touch===!1?t.touch:{...{left:()=>{f.value?q():X()},right:()=>{f.value?X():q()},start:g=>{let{originalEvent:p}=g;p.stopPropagation()}},...t.touch===!0?{}:t.touch});return me(()=>Wt(u(t.tag,{ref:m,class:ie(["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover","v-window--vertical-arrows":!!t.verticalArrows,"v-window--crossfade":!!t.crossfade},s.value,t.class]),style:j([t.style,t.transitionDuration&&!Qa?{"--v-window-transition-duration":ge(t.transitionDuration,"ms")}:void 0])},{default:()=>[k("div",{class:"v-window__container",style:{height:d.value}},[i.default?.({group:c}),t.showArrows!==!1&&k("div",{class:ie(["v-window__controls",{"v-window__controls--left":t.verticalArrows==="left"||t.verticalArrows===!0},{"v-window__controls--right":t.verticalArrows==="right"}])},[ee.value])]),i.additional?.({group:c})]}),[[st,W.value]])),{group:c}}}),ia=de({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ke(),...Ea(),...Ma()},"VWindowItem"),At=ce()({name:"VWindowItem",directives:{vTouch:st},props:ia(),emits:{"group:selected":t=>!0},setup(t,l){let{slots:i}=l;const s=Ht(ta),o=Va(t,aa),{isBooted:n}=Ye();if(!s||!o)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const c=ve(!1),m=S(()=>n.value&&(s.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function f(){!c.value||!s||(c.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function v(){c.value||!s||(c.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=ge(s.rootRef.value?.clientHeight)),s.transitionCount.value+=1)}function T(){f()}function w(I){c.value&&Ge(()=>{!m.value||!c.value||!s||(s.transitionHeight.value=ge(I.clientHeight))})}const d=S(()=>{const I=s.isReversed.value?t.reverseTransition:t.transition;return m.value?{name:typeof I!="string"?s.transition.value:I,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:T,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:T,onEnter:w}:!1}),{hasContent:$}=Sa(t,o.isSelected);return me(()=>u(La,{transition:d.value,disabled:!n.value},{default:()=>[Wt(k("div",{class:ie(["v-window-item",o.selectedClass.value,t.class]),style:j(t.style)},[$.value&&i.default?.()]),[[Ta,o.isSelected.value]])]})),{groupItem:o}}}),Jl=de({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...yt(),...ke(),...vt(),...gt(),...mt(),...Ve({tag:"footer"}),...Re()},"VFooter"),ei=ce()({name:"VFooter",props:Jl(),setup(t,l){let{slots:i}=l;const s=A(),{themeClasses:o}=Xe(t),{backgroundColorClasses:n,backgroundColorStyles:c}=Be(()=>t.color),{borderClasses:m}=rt(t),{elevationClasses:f}=ut(t),{roundedClasses:v}=ct(t),T=ve(32),{resizeRef:w}=Ba($=>{$.length&&(T.value=$[0].target.clientHeight)}),d=S(()=>t.height==="auto"?T.value:parseInt(t.height,10));return Te(()=>t.app,()=>{const $=_t({id:t.name,order:S(()=>parseInt(t.order,10)),position:U(()=>"bottom"),layoutSize:d,elementSize:S(()=>t.height==="auto"?void 0:d.value),active:U(()=>t.app),absolute:U(()=>t.absolute)});ft(()=>{s.value=$.layoutItemStyles.value})}),me(()=>u(t.tag,{ref:w,class:ie(["v-footer",o.value,n.value,m.value,f.value,v.value,t.class]),style:j([c.value,t.app?s.value:{height:ge(t.height)},t.style])},i)),{}}});function ti(t){let{rootEl:l,isSticky:i,layoutItemStyles:s}=t;const o=ve(!1),n=ve(0),c=S(()=>{const v=typeof o.value=="boolean"?"top":o.value;return[i.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[v]:ge(n.value)}:{top:s.value.top}]});we(()=>{te(i,v=>{v?window.addEventListener("scroll",f,{passive:!0}):window.removeEventListener("scroll",f)},{immediate:!0})}),Ae(()=>{window.removeEventListener("scroll",f)});let m=0;function f(){const v=m>window.scrollY?"up":"down",T=l.value.getBoundingClientRect(),w=parseFloat(s.value.top??0),d=window.scrollY-Math.max(0,n.value-w),$=T.height+Math.max(n.value,w)-window.scrollY-window.innerHeight,I=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;T.height<window.innerHeight-w?(o.value="top",n.value=w):v==="up"&&o.value==="bottom"||v==="down"&&o.value==="top"?(n.value=window.scrollY+T.top-I,o.value=!0):v==="down"&&$<=0?(n.value=0,o.value="bottom"):v==="up"&&d<=0&&(I?o.value!=="top"&&(n.value=-d+I+w,o.value="top"):(n.value=T.top+d,o.value="top")),m=window.scrollY}return{isStuck:o,stickyStyles:c}}const ai=100,li=20;function Rt(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function Ft(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let l=0;for(let i=t.length-1;i>0;i--){if(t[i].t===t[i-1].t)continue;const s=Rt(l),o=(t[i].d-t[i-1].d)/(t[i].t-t[i-1].t);l+=(o-s)*Math.abs(o),i===t.length-1&&(l*=.5)}return Rt(l)*1e3}function ii(){const t={};function l(o){Array.from(o.changedTouches).forEach(n=>{(t[n.identifier]??(t[n.identifier]=new Aa(li))).push([o.timeStamp,n])})}function i(o){Array.from(o.changedTouches).forEach(n=>{delete t[n.identifier]})}function s(o){const n=t[o]?.values().reverse();if(!n)throw new Error(`No samples for touch id ${o}`);const c=n[0],m=[],f=[];for(const v of n){if(c[0]-v[0]>ai)break;m.push({t:v[0],d:v[1].clientX}),f.push({t:v[0],d:v[1].clientY})}return{x:Ft(m),y:Ft(f),get direction(){const{x:v,y:T}=this,[w,d]=[Math.abs(v),Math.abs(T)];return w>d&&v>=0?"right":w>d&&v<=0?"left":d>w&&T>=0?"down":d>w&&T<=0?"up":si()}}}return{addMovement:l,endTouch:i,getVelocity:s}}function si(){throw new Error}function oi(t){let{el:l,isActive:i,isTemporary:s,width:o,touchless:n,position:c}=t;we(()=>{window.addEventListener("touchstart",ee,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Ae(()=>{window.removeEventListener("touchstart",ee),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",z)});const m=S(()=>["left","right"].includes(c.value)),{addMovement:f,endTouch:v,getVelocity:T}=ii();let w=!1;const d=ve(!1),$=ve(0),I=ve(0);let E;function q(p,x){return(c.value==="left"?p:c.value==="right"?document.documentElement.clientWidth-p:c.value==="top"?p:c.value==="bottom"?document.documentElement.clientHeight-p:Ie())-(x?o.value:0)}function X(p){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const L=c.value==="left"?(p-I.value)/o.value:c.value==="right"?(document.documentElement.clientWidth-p-I.value)/o.value:c.value==="top"?(p-I.value)/o.value:c.value==="bottom"?(document.documentElement.clientHeight-p-I.value)/o.value:Ie();return x?Ra(L):L}function ee(p){if(n.value)return;const x=p.changedTouches[0].clientX,L=p.changedTouches[0].clientY,B=25,R=c.value==="left"?x<B:c.value==="right"?x>document.documentElement.clientWidth-B:c.value==="top"?L<B:c.value==="bottom"?L>document.documentElement.clientHeight-B:Ie(),b=i.value&&(c.value==="left"?x<o.value:c.value==="right"?x>document.documentElement.clientWidth-o.value:c.value==="top"?L<o.value:c.value==="bottom"?L>document.documentElement.clientHeight-o.value:Ie());(R||b||i.value&&s.value)&&(E=[x,L],I.value=q(m.value?x:L,i.value),$.value=X(m.value?x:L),w=I.value>-20&&I.value<80,v(p),f(p))}function W(p){const x=p.changedTouches[0].clientX,L=p.changedTouches[0].clientY;if(w){if(!p.cancelable){w=!1;return}const R=Math.abs(x-E[0]),b=Math.abs(L-E[1]);(m.value?R>b&&R>3:b>R&&b>3)?(d.value=!0,w=!1):(m.value?b:R)>3&&(w=!1)}if(!d.value)return;p.preventDefault(),f(p);const B=X(m.value?x:L,!1);$.value=Math.max(0,Math.min(1,B)),B>1?I.value=q(m.value?x:L,!0):B<0&&(I.value=q(m.value?x:L,!1))}function z(p){if(w=!1,!d.value)return;f(p),d.value=!1;const x=T(p.changedTouches[0].identifier),L=Math.abs(x.x),B=Math.abs(x.y);(m.value?L>B&&L>400:B>L&&B>3)?i.value=x.direction===({left:"right",right:"left",top:"down",bottom:"up"}[c.value]||Ie()):i.value=$.value>.5}const g=S(()=>d.value?{transform:c.value==="left"?`translateX(calc(-100% + ${$.value*o.value}px))`:c.value==="right"?`translateX(calc(100% - ${$.value*o.value}px))`:c.value==="top"?`translateY(calc(-100% + ${$.value*o.value}px))`:c.value==="bottom"?`translateY(calc(100% - ${$.value*o.value}px))`:Ie(),transition:"none"}:void 0);return Te(d,()=>{const p=l.value?.style.transform??null,x=l.value?.style.transition??null;ft(()=>{l.value?.style.setProperty("transform",g.value?.transform||"none"),l.value?.style.setProperty("transition",g.value?.transition||null)}),Fa(()=>{l.value?.style.setProperty("transform",p),l.value?.style.setProperty("transition",x)})}),{isDragging:d,dragProgress:$,dragStyles:g}}function Ie(){throw new Error}const ni=["start","end","left","right","top","bottom"],ri=de({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>ni.includes(t)},sticky:Boolean,...yt(),...ke(),...Ha(),...Wa({mobile:null}),...vt(),...gt(),...mt(),...Ve({tag:"nav"}),...Re()},"VNavigationDrawer"),ui=ce()({name:"VNavigationDrawer",props:ri(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,l){let{attrs:i,emit:s,slots:o}=l;const{isRtl:n}=ot(),{themeClasses:c}=Xe(t),{borderClasses:m}=rt(t),{backgroundColorClasses:f,backgroundColorStyles:v}=Be(()=>t.color),{elevationClasses:T}=ut(t),{displayClasses:w,mobile:d}=pt(t),{roundedClasses:$}=ct(t),I=qa(),E=je(t,"modelValue",null,H=>!!H),{ssrBootStyles:q}=Ye(),{scopeId:X}=Ut(),ee=A(),W=ve(!1),{runOpenDelay:z,runCloseDelay:g}=Oa(t,H=>{W.value=H}),p=S(()=>t.rail&&t.expandOnHover&&W.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),x=S(()=>za(t.location,n.value)),L=U(()=>t.persistent),B=S(()=>!t.permanent&&(d.value||t.temporary)),R=S(()=>t.sticky&&!B.value&&x.value!=="bottom");Te(()=>t.expandOnHover&&t.rail!=null,()=>{te(W,H=>s("update:rail",!H))}),Te(()=>!t.disableResizeWatcher,()=>{te(B,H=>!t.permanent&&Ge(()=>E.value=!H))}),Te(()=>!t.disableRouteWatcher&&!!I,()=>{te(I.currentRoute,()=>B.value&&(E.value=!1))}),te(()=>t.permanent,H=>{H&&(E.value=!0)}),t.modelValue==null&&!B.value&&(E.value=t.permanent||!d.value);const{isDragging:b,dragProgress:h}=oi({el:ee,isActive:E,isTemporary:B,width:p,touchless:U(()=>t.touchless),position:x}),P=S(()=>{const H=B.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):p.value;return b.value?H*h.value:H}),{layoutItemStyles:D,layoutItemScrimStyles:Z}=_t({id:t.name,order:S(()=>parseInt(t.order,10)),position:x,layoutSize:P,elementSize:p,active:Da(E),disableTransitions:U(()=>b.value),absolute:S(()=>t.absolute||R.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:ye}=ti({rootEl:ee,isSticky:R,layoutItemStyles:D}),ne=Be(()=>typeof t.scrim=="string"?t.scrim:null),fe=S(()=>({...b.value?{opacity:h.value*.2,transition:"none"}:void 0,...Z.value}));return dt({VList:{bgColor:"transparent"}}),me(()=>{const H=o.image||t.image;return k(Y,null,[u(t.tag,K({ref:ee,onMouseenter:z,onMouseleave:g,class:["v-navigation-drawer",`v-navigation-drawer--${x.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":W.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":B.value,"v-navigation-drawer--persistent":L.value,"v-navigation-drawer--active":E.value,"v-navigation-drawer--sticky":R.value},c.value,f.value,m.value,w.value,T.value,$.value,t.class],style:[v.value,D.value,q.value,ye.value,t.style]},X,i),{default:()=>[H&&k("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?u(Ua,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},o.image):u(We,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),o.prepend&&k("div",{class:"v-navigation-drawer__prepend"},[o.prepend?.()]),k("div",{class:"v-navigation-drawer__content"},[o.default?.()]),o.append&&k("div",{class:"v-navigation-drawer__append"},[o.append?.()])]}),u(Na,{name:"fade-transition"},{default:()=>[B.value&&(b.value||E.value)&&!!t.scrim&&k("div",K({class:["v-navigation-drawer__scrim",ne.backgroundColorClasses.value],style:[fe.value,ne.backgroundColorStyles.value],onClick:()=>{L.value||(E.value=!1)}},X),null)]})])}),{isStuck:ae}}}),wt=Symbol.for("vuetify:v-tabs"),sa=de({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...nt(Pl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Oe=ce()({name:"VTab",props:sa(),setup(t,l){let{slots:i,attrs:s}=l;const{textColorClasses:o,textColorStyles:n}=Ya(()=>t.sliderColor),c=A(),m=A(),f=S(()=>t.direction==="horizontal"),v=S(()=>c.value?.group?.isSelected.value??!1);function T(w){let{value:d}=w;if(d){const $=c.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),I=m.value;if(!$||!I)return;const E=getComputedStyle($).color,q=$.getBoundingClientRect(),X=I.getBoundingClientRect(),ee=f.value?"x":"y",W=f.value?"X":"Y",z=f.value?"right":"bottom",g=f.value?"width":"height",p=q[ee],x=X[ee],L=p>x?q[z]-X[z]:q[ee]-X[ee],B=Math.sign(L)>0?f.value?"right":"bottom":Math.sign(L)<0?f.value?"left":"top":"center",b=(Math.abs(L)+(Math.sign(L)<0?q[g]:X[g]))/Math.max(q[g],X[g])||0,h=q[g]/X[g]||0,P=1.5;ja(I,{backgroundColor:[E,"currentcolor"],transform:[`translate${W}(${L}px) scale${W}(${h})`,`translate${W}(${L/P}px) scale${W}(${(b-1)/P+1})`,"none"],transformOrigin:Array(3).fill(B)},{duration:225,easing:Ga})}}return me(()=>{const w=be.filterProps(t);return u(be,K({symbol:wt,ref:c,class:["v-tab",t.class],style:t.style,tabindex:v.value?0:-1,role:"tab","aria-selected":String(v.value),active:!1},w,s,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":T}),{...i,default:()=>k(Y,null,[i.default?.()??t.text,!t.hideSlider&&k("div",{ref:m,class:ie(["v-tab__slider",o.value]),style:j(n.value)},null)])})}),Xa({},c)}}),ci=de({...nt(la(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),di=ce()({name:"VTabsWindow",props:ci(),emits:{"update:modelValue":t=>!0},setup(t,l){let{slots:i}=l;const s=Ht(wt,null),o=je(t,"modelValue"),n=S({get(){return o.value!=null||!s?o.value:s.items.value.find(c=>s.selected.value.includes(c.id))?.value},set(c){o.value=c}});return me(()=>{const c=Bt.filterProps(t);return u(Bt,K({_as:"VTabsWindow"},c,{modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),i)}),{}}}),mi=de({...ia()},"VTabsWindowItem"),vi=ce()({name:"VTabsWindowItem",props:mi(),setup(t,l){let{slots:i}=l;return me(()=>{const s=At.filterProps(t);return u(At,K({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",t.class],style:t.style}),i)}),{}}});function yi(t){return t?t.map(l=>Ja(l)?l:{text:l,value:l}):[]}const fi=de({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Za(sa(),["spaced"]),...Ka({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ot(),...Ve()},"VTabs"),pi=ce()({name:"VTabs",props:fi(),emits:{"update:modelValue":t=>!0},setup(t,l){let{attrs:i,slots:s}=l;const o=je(t,"modelValue"),n=S(()=>yi(t.items)),{densityClasses:c}=zt(t),{backgroundColorClasses:m,backgroundColorStyles:f}=Be(()=>t.bgColor),{scopeId:v}=Ut();return dt({VTab:{color:U(()=>t.color),direction:U(()=>t.direction),stacked:U(()=>t.stacked),fixed:U(()=>t.fixedTabs),sliderColor:U(()=>t.sliderColor),hideSlider:U(()=>t.hideSlider)}}),me(()=>{const T=It.filterProps(t),w=!!(s.window||t.items.length>0);return k(Y,null,[u(It,K(T,{modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},c.value,m.value,t.class],style:[{"--v-tabs-height":ge(t.height)},f.value,t.style],role:"tablist",symbol:wt},v,i),{default:()=>[s.default?.()??n.value.map(d=>s.tab?.({item:d})??u(Oe,K(d,{key:d.text,value:d.value,spaced:t.spaced}),{default:s[`tab.${d.value}`]?()=>s[`tab.${d.value}`]?.({item:d}):void 0}))]}),w&&u(di,K({modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,key:"tabs-window"},v),{default:()=>[n.value.map(d=>s.item?.({item:d})??u(vi,{value:d.value},{default:()=>s[`item.${d.value}`]?.({item:d})})),s.window?.()]})])}),{}}}),hi=O({__name:"Icon",props:el({variant:{},width:{},height:{},staticWidth:{},staticHeight:{},maxWidth:{},maxHeight:{},minWidth:{},minHeight:{},icon:{},color:{},disabled:{type:Boolean},size:{},badge:{type:Boolean},class:{},style:{}},Dl),emits:["click"],setup(t,{emit:l}){const i=t,s=l,{iconProps:o,containerStyle:n,containerClasses:c,iconClasses:m}=zl(i),f=A(),v=A(),T=async()=>{if(!(i.variant!=="responsive"||!f.value||!v.value)){await Ge();try{const d=f.value.offsetWidth,$=f.value.offsetHeight,I=Math.min(d,$);v.value.$el&&(v.value.$el.style.fontSize=`${I}px`)}catch(d){console.error("Icon sizing adjustment failed:",d)}}},w=d=>{if(i.disabled){d.preventDefault(),d.stopPropagation();return}s("click",d)};return we(()=>{i.variant==="responsive"&&(T(),window.addEventListener("resize",T))}),Ae(()=>{i.variant==="responsive"&&window.removeEventListener("resize",T)}),(d,$)=>(r(),_("div",{ref_key:"iconContainer",ref:f,class:ie(e(c)),style:j(e(n)),onClick:w},[u(Je,{"model-value":d.badge===!0,color:"error",dot:""},{default:y(()=>[u(e(le),K({ref_key:"iconElement",ref:v},e(o),{class:e(m)}),tl({_:2},[ue(d.$slots,(I,E)=>({name:E,fn:y(()=>[al(d.$slots,E,{},void 0,!0)])}))]),1040,["class"])]),_:3},8,["model-value"])],6))}}),Pe=oe(hi,[["__scopeId","data-v-3db51b10"]]),oa=O({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(l,i)=>l.isVisible&&l.playerQueue?(r(),V(Pe,K({key:0},l.icon,{disabled:!l.playerQueue.active||l.playerQueue.items==0,color:e(Qe)(l.icon?.color,[[l.playerQueue.repeat_mode==e(re).OFF,null],[l.playerQueue.repeat_mode==e(re).ALL,"primary"],[l.playerQueue.repeat_mode==e(re).ONE,"primary"]]),icon:e(Qe)(l.icon?.icon,[[l.playerQueue.repeat_mode==e(re).OFF,"mdi-repeat-off"],[l.playerQueue.repeat_mode==e(re).ALL,"mdi-repeat"],[l.playerQueue.repeat_mode==e(re).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),variant:"button",onClick:i[0]||(i[0]=s=>e(M).queueCommandRepeat(l.playerQueue.queue_id||"",e(Qe)(null,[[l.playerQueue.repeat_mode==e(re).OFF,e(re).ONE],[l.playerQueue.repeat_mode==e(re).ALL,e(re).OFF],[l.playerQueue.repeat_mode==e(re).ONE,e(re).ALL]])))}),null,16,["disabled","color","icon"])):Q("",!0)}}),na=O({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const l=t,i=S(()=>l.playerQueue?.active?(l.playerQueue.current_index||0)<l.playerQueue.items-1:!1),s=S(()=>!l.player||l.playerQueue?.active||!l.player.current_media?!1:l.player.supported_features.includes(Le.NEXT_PREVIOUS));return(o,n)=>o.isVisible&&o.player?(r(),V(Pe,K({key:0},o.icon,{disabled:!i.value&&!s.value,icon:"mdi-skip-next-outline",variant:"button",onClick:n[0]||(n[0]=c=>e(M).playerCommandNext(o.player.player_id))}),null,16,["disabled"])):Q("",!0)}}),ra=O({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(t){const l=t,i=S(()=>l.playerQueue?l.playerQueue.items>0:!1),s=S(()=>!(!l.player||l.playerQueue?.active||!l.player.current_media)),o=S(()=>l.player?.playback_state==tt.PLAYING?"mdi-pause":"mdi-play");return(n,c)=>n.isVisible&&n.player?(r(),V(Pe,K({key:0},n.icon,{disabled:!i.value&&!s.value,icon:n.iconStyle?`${o.value}-${n.iconStyle}`:o.value,variant:"button",onClick:c[0]||(c[0]=m=>e(M).playerCommandPlayPause(n.player.player_id))}),null,16,["disabled","icon"])):Q("",!0)}}),ua=O({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const l=t,i=S(()=>!l.playerQueue?.active||!l.playerQueue?.items||!l.playerQueue.current_index?!1:l.playerQueue.current_index>0),s=S(()=>!l.player||l.playerQueue?.active||!l.player.current_media?!1:l.player.supported_features.includes(Le.NEXT_PREVIOUS));return(o,n)=>o.isVisible&&o.player?(r(),V(Pe,K({key:0},o.icon,{disabled:!i.value&&!s.value,icon:"mdi-skip-previous-outline",variant:"button",onClick:n[0]||(n[0]=c=>e(M).playerCommandPrevious(o.player.player_id))}),null,16,["disabled"])):Q("",!0)}}),ca=O({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(l,i)=>l.isVisible&&l.playerQueue?(r(),V(Pe,K({key:0},l.icon,{disabled:!l.playerQueue.active||l.playerQueue.items==0,color:e(Qe)(l.icon?.color,[[l.playerQueue.shuffle_enabled,"primary",""]]),icon:e(Qe)(l.icon?.icon,[[l.playerQueue.shuffle_enabled,"mdi-shuffle"],[l.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),variant:"button",onClick:i[0]||(i[0]=s=>e(M).queueCommandShuffle(l.playerQueue.queue_id,!l.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):Q("",!0)}}),_i={key:0,class:"player-controls"},gi={key:0,class:"player-controls-elements"},bi={key:1,class:"player-controls-elements"},wi={key:2},ki={key:3,class:"player-controls-elements"},Pi={key:4,class:"player-controls-elements"},qt=O({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(t){return(l,i)=>l.visibleComponents?(r(),_("div",_i,[l.visibleComponents&&l.visibleComponents.shuffle?.isVisible?(r(),_("div",gi,[u(ca,{"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:l.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):Q("",!0),l.visibleComponents&&l.visibleComponents.previous?.isVisible?(r(),_("div",bi,[u(ua,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:l.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):Q("",!0),l.visibleComponents&&l.visibleComponents.play?.isVisible?(r(),_("div",wi,[u(ra,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","icon-style":"circle",icon:l.visibleComponents.play.icon},null,8,["player","player-queue","icon"])])):Q("",!0),l.visibleComponents&&l.visibleComponents.next?.isVisible?(r(),_("div",ki,[u(na,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,icon:l.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):Q("",!0),l.visibleComponents&&l.visibleComponents.repeat?.isVisible?(r(),_("div",Pi,[u(oa,{"player-queue":e(a).activePlayerQueue,icon:l.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):Q("",!0)])):Q("",!0)}}),da=O({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const l=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(i,s)=>i.isVisible?(r(),V(Pe,K({key:0},i.icon,{disabled:!e(a).activePlayerId||e(a).showFullscreenPlayer&&!e(a).curQueueItem&&!e(a).showQueueItems,icon:"mdi-playlist-play",color:e(Qe)(i.icon?.color,[[e(a).showFullscreenPlayer&&e(a).showQueueItems,"primary",""]]),variant:"button",onClick:l}),null,16,["disabled","color"])):Q("",!0)}}),ma=O({__name:"SpeakerBtn",props:{color:{}},setup(t){return(l,i)=>(r(),V(he,{variant:"icon",ripple:!1,icon:"",onClick:i[0]||(i[0]=s=>e(a).showPlayersMenu=!0)},{default:y(()=>[u(le,{color:l.color?l.color:"",size:24,icon:e(a).activePlayer?.group_members.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]),_:1}))}}),Ii={key:0},Ci={key:0},$i={class:"text-caption"},Qi={key:1},xi=O({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(t){const l=t,i=A(!1);return(s,o)=>l.isVisible&&e(a).activePlayer?(r(),_("div",Ii,[u(ht,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=n=>i.value=n),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:s.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:n})=>[e(G)("bp6")||!s.responsiveVolumeSize?(r(),_("div",Ci,[u(bt,{style:"margin-right: 0px; margin-left: 0px;",width:s.volumeSize,"is-powered":!0,"model-value":e(a).activePlayer.group_members.length>0?Math.round(e(a).activePlayer?.group_volume||0):Math.round(e(a).activePlayer?.volume_level||0),"allow-wheel":!0,"onUpdate:modelValue":o[0]||(o[0]=c=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolume(e(a).activePlayer?.player_id||"",c):e(M).playerCommandVolumeSet(e(a).activePlayer?.player_id||"",c))},{prepend:y(()=>[u(he,K({variant:"icon",size:"48",ripple:!1},{...n}),{default:y(()=>[u(le,{color:l.color?s.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),k("div",$i,C(e(a).activePlayer.group_members.length>0?Math.round(e(a).activePlayer?.group_volume||0):Math.round(e(a).activePlayer?.volume_level||0)),1)]),_:1},16)]),_:2},1032,["width","model-value"])])):(r(),_("div",Qi,[u(he,K({...n},{size:"48",variant:"icon"}),{default:y(()=>[u(le,{color:l.color?s.color:"",icon:"mdi-volume-high"},null,8,["color"]),k("div",{class:"text-caption",style:j({color:l.color?s.color:""})},C(e(a).activePlayer.group_members.length>0?Math.round(e(a).activePlayer?.group_volume||0):Math.round(e(a).activePlayer?.volume_level||0)),5)]),_:1},16)]))]),default:y(()=>[u(Ne,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(a).activePlayer?(r(),V(_l,{key:0,player:e(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):Q("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):Q("",!0)}}),Vi=oe(xi,[["__scopeId","data-v-70c82677"]]),Si=O({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(t){return(l,i)=>(r(),_(Y,null,[l.player&&l.player.isVisible?(r(),V(ma,{key:0,color:l.player.color},null,8,["color"])):Q("",!0),l.queue&&l.queue.isVisible?(r(),V(da,{key:1,color:l.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):Q("",!0),l.volume&&l.volume.isVisible?(r(),V(Vi,{key:2,color:l.volume.color,"volume-size":l.volume.volumeSize,"responsive-volume-size":l.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):Q("",!0)],64))}}),Ti={style:{width:"auto",height:"24px"}},Li={key:0,style:{width:"100%"}},Mi=["onClick"],Ei={key:0,class:"time-text-row"},Bi={class:"text-caption time-text-right"},Ai=O({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(t){const l=A(!1),i=A(!0),s=A(!1),o=A(0),n=A(0),c=S(()=>a.curQueueItem?l.value?`-${Me(a.curQueueItem.duration-f.value)}`:`${Me(f.value)}`:"0:00"),m=S(()=>{if(!a.curQueueItem||!a.curQueueItem.duration||a.curQueueItem.media_item?.media_type==F.RADIO)return"";const $=a.curQueueItem.duration;return Me($)}),f=S(()=>s.value?(n.value=o.value,o.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),v=S(()=>{const $={};return a.curQueueItem?.media_item?.metadata?.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(I=>{$[I.start]=I.name}),$});te(f,$=>{s.value||(o.value=$)});const T=function(){s.value=!0},w=()=>{s.value=!1,!s.value&&a.activePlayer&&M.playerCommandSeek(a.activePlayer.player_id,Math.round(n.value))},d=function($){if(a.curQueueItem?.media_item?.metadata?.chapters){for(const I of a.curQueueItem.media_item.metadata.chapters)if(I.start==$){M.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,I.position.toString());return}}};return($,I)=>(r(),_("div",Ti,[e(a).activePlayerQueue?(r(),_("div",Li,[u(bl,{modelValue:o.value,"onUpdate:modelValue":I[0]||(I[0]=E=>o.value=E),disabled:!e(a).curQueueItem||!e(a).curQueueItem.media_item||!e(a).curQueueItem.duration||e(a).curQueueItem.media_item.media_type==e(F).RADIO||e(a).activePlayer?.powered==!1,style:{width:"100%"},min:0,max:e(a).curQueueItem?.duration,"hide-details":"","track-size":4,"thumb-size":i.value?0:10,"show-ticks":v.value?"always":!1,ticks:v.value,"tick-size":"4",color:$.color,onTouchstart:I[1]||(I[1]=E=>i.value=!1),onTouchend:I[2]||(I[2]=E=>i.value=!0),onMouseenter:I[3]||(I[3]=E=>i.value=!1),onMouseleave:I[4]||(I[4]=E=>i.value=!0),onStart:T,onEnd:w},{"tick-label":y(({tick:E})=>[$.showLabels&&!i.value&&Object.values(v.value).length<6?(r(),_("a",{key:0,class:"text-caption",onClick:q=>d(E.value)},C(E.label),9,Mi)):Q("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),$.showLabels?(r(),_("div",Ei,[k("div",{class:"text-caption time-text-left",onClick:I[5]||(I[5]=E=>l.value?l.value=!1:l.value=!0)},C(c.value),1),k("div",Bi,C(m.value),1)])):Q("",!0)])):Q("",!0)]))}}),va=oe(Ai,[["__scopeId","data-v-43d849c6"]]),Ri={class:"lyrics-container"},Fi={key:0,class:"lyrics-loading"},qi={key:1,class:"lyrics-empty"},zi={key:2,class:"lyrics-intro"},Di={class:"song-title"},Oi={class:"artist-name"},Ni={class:"lyrics-coming-soon"},Wi=O({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1}},setup(t){Yt(g=>({"01b425c1":g.textColor}));const l=t,i=(g,p=!0)=>{if(p&&!l.debugMode)return;(p?console.debug:console.log)(`[lyricSynch] ${g}`)},s=A([]),o=A(!1),n=A(-1),c=A(null),m=A(!1),f=A(0),v=A(0),T=S(()=>{if(!d.value||!s.value.length)return!1;const g=s.value[0].time,p=l.position||0;return n.value===-1&&p<g}),w=S(()=>{if(!l.mediaItem)return"";if("media_type"in l.mediaItem&&l.mediaItem.media_type==="track"){const g=l.mediaItem;if(g.artists?.length)return g.artists.map(p=>p.name).join(", ")}return"media_type"in l.mediaItem&&l.mediaItem.media_type==="artist"?l.mediaItem.name:""});S(()=>{const g=l.mediaItem?.metadata?.lyrics,p=l.mediaItem?.metadata?.lrc_lyrics;return!!g&&g.trim().length>0||!!p&&p.trim().length>0});const d=S(()=>{if(s.value.some(x=>x.time>0))return!0;const g=l.mediaItem?.metadata?.lrc_lyrics,p=l.mediaItem?.metadata?.lyrics;return!!(g&&g.includes("[")||p&&/\[\d+:\d+[.:]?\d*\]/.test(p))}),$=g=>{const p=g.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(p){const x=parseInt(p[1]);let L=parseInt(p[2]),B=0;if(p[3]){const h=p[3].replace(/[.:]/,".");B=Math.round(parseFloat(h)*1e3)}return{time:(x*60*1e3+L*1e3+B)/1e3,text:p[4].trim()||" "}}return{time:0,text:g.trim()||" "}},I=()=>{if(!l.mediaItem){s.value=[];return}o.value=!0;try{const g=l.mediaItem.metadata?.lrc_lyrics||"",p=l.mediaItem.metadata?.lyrics||"";let x="",L=!1;if(g?(x=g,L=!0):p&&/\[\d+:\d+[.:]?\d*\]/.test(p)?(x=p,L=!0):p&&(x=p,L=!1),L){const B=x.split(`
`).filter(R=>R.trim());s.value=B.map(R=>$(R)).filter(R=>R.text.trim()).sort((R,b)=>R.time-b.time),i(`Loaded ${s.value.length} synchronized lyrics lines`,!1)}else if(x){const B=x.split(`
`).filter(R=>R.trim());s.value=B.map(R=>({time:0,text:R.trim()})).filter(R=>R.text),i(`Loaded ${s.value.length} plain text lyrics lines`,!1)}else s.value=[]}catch(g){i(`Error processing lyrics: ${g}`,!1),s.value=[]}finally{o.value=!1}},E=g=>{const p=g;i(`Calculating look-ahead at ${g.toFixed(3)}s`);let x=-1,L=-1;for(let ne=0;ne<s.value.length;ne++)if(s.value[ne].time<=p)x=ne;else{L=ne;break}if(i(`Current lyric index: ${x}, Next lyric index: ${L}`),L===0){const fe=s.value[0].time-p;if(i(`Pre-lyrics intro: ${fe.toFixed(2)}s until first lyric`),fe>5){i("Long intro - using fixed look-ahead: 0.3s"),f.value=.3;return}else if(fe>2){const H=Math.min(1,fe*.15);i(`Medium intro - calculated look-ahead: ${H.toFixed(2)}s`),f.value=H;return}i("Short intro - using standard calculation")}if(L===-1||x===-1){i("Cannot determine appropriate look-ahead, using default: 0.3s"),f.value=.3;return}const B=s.value[x].time,R=s.value[L].time,b=R-B,h=f.value;i(`Gap analysis:
    - Current lyric time: ${B.toFixed(3)}s
    - Next lyric time: ${R.toFixed(3)}s
    - Gap between lyrics: ${b.toFixed(3)}s
    - Previous look-ahead: ${h.toFixed(3)}s`);let P;b<.5?(P=.3,i(`Very rapid lyrics detected (${b.toFixed(2)}s gap) - using 30% look-ahead`)):b<.8?(P=.1,i(`Fast lyrics detected (${b.toFixed(2)}s gap) - using 10% look-ahead`)):b<1.5?(P=.2,i(`Medium lyrics detected (${b.toFixed(2)}s gap) - using 20% look-ahead`)):b<3?(P=.3,i(`Slower lyrics detected (${b.toFixed(2)}s gap) - using 30% look-ahead`)):b>10?(P=.02,i(`Very slow lyrics detected (${b.toFixed(2)}s gap) - using 2% look-ahead`)):(P=.4,i(`Slow lyrics detected (${b.toFixed(2)}s gap) - using 40% look-ahead`));const D=Math.min(1.5,b*P);i(`Target look-ahead: ${D.toFixed(3)}s`);const Z=Math.abs(D-h),ae=Math.min(.8,.3+Z*.5),ye=h*(1-ae)+D*ae;i(`Smoothed look-ahead: ${ye.toFixed(3)}s (adaptation rate: ${(ae*100).toFixed(0)}%)`),Math.abs(ye-h)>.3&&i(`Look-ahead adjusted: ${h.toFixed(2)}s → ${ye.toFixed(2)}s`,!1),f.value=ye},q=g=>g===void 0||!s.value.length||!d.value||m.value,X=g=>{const p=Math.round((g+f.value)*1e3);let x=-1;for(let L=0;L<s.value.length&&Math.round(s.value[L].time*1e3)<=p;L++)x=L;return x},ee=(g,p)=>{g<0||g===n.value||(i(`Lyric activated: "${s.value[g].text}"`),i(`Activating lyric at ${p.toFixed(2)}s (adjusted: ${(p+f.value).toFixed(2)}s):
    - Index: ${g}
    - Lyric time: ${s.value[g].time.toFixed(2)}s`),i(`Transition details:
    - Raw position: ${p.toFixed(3)}s
    - Dynamic look-ahead: ${f.value.toFixed(3)}s
    - Adjusted position: ${(p+f.value).toFixed(3)}s`),g>0&&W(g,p),v.value=p,n.value=g,Ge(()=>z()))},W=(g,p)=>{const x=p-v.value,L=s.value[g].time-s.value[g-1].time;i(`Timing analysis:
    - Expected gap: ${L.toFixed(3)}s
    - Actual gap: ${x.toFixed(3)}s
    - Difference: ${(x-L).toFixed(3)}s`)},z=()=>{const g=document.querySelector(".lyrics-line.active"),p=c.value;g&&p&&g.scrollIntoView({behavior:"smooth",block:"center"})};return te(()=>l.mediaItem?.item_id,()=>{I()},{immediate:!0}),te(()=>l.position,g=>{if(q(g))return;const p=g??0;E(p);const x=X(p);x!==n.value&&ee(x,p)}),we(()=>{const g=c.value;g&&g.addEventListener("scroll",()=>{m.value=!0,setTimeout(()=>{m.value=!1},8e3)},{passive:!0})}),(g,p)=>(r(),_("div",Ri,[o.value?(r(),_("div",Fi,[u(Jt,{indeterminate:"",color:g.textColor},null,8,["color"]),k("div",null,C(e(J)("loading_lyrics")),1)])):s.value.length?T.value&&d.value?(r(),_("div",zi,[k("div",Di,C(l.mediaItem?.name),1),k("div",Oi,C(w.value),1),k("div",Ni,C(e(J)("lyrics_will_appear_soon")),1)])):(r(),_("div",{key:3,ref_key:"lyricsContainer",ref:c,class:ie(["lyrics-scroll-container",{"static-lyrics":!d.value}])},[(r(!0),_(Y,null,ue(s.value,(x,L)=>(r(),_("div",{key:L,class:ie(["lyrics-line",{active:n.value===L||!d.value}])},C(x.text),3))),128))],2)):(r(),_("div",qi,C(e(J)("no_lyrics_available")),1))]))}}),Hi=oe(Wi,[["__scopeId","data-v-9616f5d2"]]),Ui=["onClick"],Yi={class:"main"},Xi={key:0,class:"main-media-details"},ji={key:0,class:"main-media-details-image"},Gi={class:"main-media-details-track-info"},Ki={key:0},Zi={key:0},Ji={key:12,style:{margin:"auto","padding-top":"20px"}},es={key:1,class:"main-queue-items"},ts={class:"queue-items-scroll-box"},as={class:"media-thumb listitem-media-thumb"},ls={class:"title-row"},is={class:"d-flex"},ss={style:{"white-space":"nowrap"},class:"pr-1"},os={key:0},ns={key:0,style:{"margin-left":"50px"}},rs={key:0,class:"text-caption"},us={key:1,class:"lyrics-wrapper"},cs={key:2,class:"main-queue-items"},ds={class:"main-media-details-image main-media-details-image-alt"},ms={class:"player-bottom"},vs={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ys={class:"media-controls"},fs={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ps={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},hs=O({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(t){const{name:l}=pt(),i=t,s=new it,o=A(-1),n=new it,c=A([]),m=A(0),f=A(!1),v=S(()=>a.activePlayerQueue?c.value.slice(a.activePlayerQueue.current_index):[]),T=S(()=>a.activePlayerQueue?c.value.slice(0,a.activePlayerQueue.current_index).reverse():[]),w=S(()=>{const b=a.curQueueItem?.media_item?.metadata?.lyrics,h=a.curQueueItem?.media_item?.metadata?.lrc_lyrics;return!!b&&b.trim().length>0||!!h&&h.trim().length>0}),d=S(()=>{switch(l.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),$=S(()=>{switch(l.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),I=S(()=>He.display.height.value>800),E=function(b){a.showFullscreenPlayer=!1,Ct.push({name:b.media_type,params:{itemId:b.item_id,provider:b.provider}})},q=function(b){a.globalSearchTerm=b,Ct.push({name:"search"}),a.showFullscreenPlayer=!1},X=function(b,h){const P=c.value.indexOf(h),D=[{label:"play_now",labelArgs:[],action:()=>{W(h,"play_now")},icon:"mdi-play-circle-outline",disabled:P===a.activePlayerQueue?.current_index||P===a.activePlayerQueue?.index_in_buffer},{label:"play_next",labelArgs:[],action:()=>{W(h,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_up",labelArgs:[],action:()=>{W(h,"up")},icon:"mdi-arrow-up",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_down",labelArgs:[],action:()=>{W(h,"down")},icon:"mdi-arrow-down",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_delete",labelArgs:[],action:()=>{W(h,"delete")},icon:"mdi-delete",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)}];h?.media_item?.media_type==F.TRACK&&D.push({label:"show_info",labelArgs:[],action:()=>{E(h.media_item)},icon:"mdi-information-outline",disabled:!1}),Ce.emit("contextmenu",{items:D,posX:b.clientX,posY:b.clientY})},ee=function(b){a.activePlayer&&Ce.emit("contextmenu",{items:gl(a.activePlayer,a.activePlayerQueue),posX:b.clientX,posY:b.clientY})},W=function(b,h){!b||!a.activePlayerQueue||(h=="play_now"?M.queueCommandPlayIndex(a.activePlayerQueue?.queue_id,b.queue_item_id):h=="move_next"?M.queueCommandMoveNext(a.activePlayerQueue?.queue_id,b.queue_item_id):h=="up"?M.queueCommandMoveUp(a.activePlayerQueue?.queue_id,b.queue_item_id):h=="down"?M.queueCommandMoveDown(a.activePlayerQueue?.queue_id,b.queue_item_id):h=="delete"&&M.queueCommandDelete(a.activePlayerQueue?.queue_id,b.queue_item_id))},z=async function(){f.value=!0,c.value=[],await $t(100),f.value=!1},g=async function({done:b}){if(!a.activePlayerQueue||a.activePlayerQueue.items==0){b("empty");return}if(c.value.length>=a.activePlayerQueue?.items){b("empty");return}const h=c.value.length,P=(a.activePlayerQueue.current_index||0)+50,D=await M.getPlayerQueueItems(a.activePlayerQueue.queue_id,P,h);c.value.push(...D),D.length<50?b("empty"):b("ok")};we(()=>{const b=M.subscribe(ll.QUEUE_ITEMS_UPDATED,h=>{h.object_id==a.activePlayerQueue?.queue_id&&(h.data,z())});Ae(b)});const p=async function(b){if(!a.curQueueItem?.media_item)return;if(!a.curQueueItem.media_item.favorite){M.toggleFavorite(a.curQueueItem.media_item);return}let h=a.curQueueItem.media_item;(h.provider!="library"||!("provider_mappings"in h))&&[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(h.media_type)&&(h=await M.getLibraryItem(h.media_type,h.item_id,h.provider)||h);const P=[];"favorite"in h&&h.favorite&&h.provider=="library"&&[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(h.media_type)&&P.push({label:"favorites_remove",labelArgs:[],action:()=>{M.removeItemFromFavorites(h.media_type,h.item_id),h.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(h.media_type)&&P.push({label:"add_playlist",labelArgs:[],action:()=>{Ce.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Ce.emit("contextmenu",{items:P,posX:b.clientX,posY:b.clientY})},x=function(){f.value=!0,$t(100).then(()=>{f.value=!1})},L=function(b,h){M.playMedia(b.uri,il.PLAY,void 0,h.position.toString())};te(()=>a.activePlayerId,b=>{z()},{immediate:!0});const B=A(void 0),R=A(void 0);return ft(()=>{const b=Fe("white"),h=Fe("black"),P=5,D=.05,Z=He.theme.current.value.dark?i.colorPalette.darkColor||"#000":i.colorPalette.lightColor||"#fff";let ae=Fe(Z);const ye=b.contrast(ae),ne=h.contrast(ae),fe=ye>=ne;let H=fe?b:h,Ke=Math.max(ye,ne);if(Ke<P){let kt=D;for(;Ke<P&&kt<=.5;)fe?ae=ae.darken(D):ae=ae.lighten(D),Ke=Fe(H).contrast(ae),kt+=D}document.documentElement.style.setProperty("--text-color",H.hex()),B.value=H.hex(),R.value=ae.hex()}),(b,h)=>(r(),V(Zt,{modelValue:e(a).showFullscreenPlayer,"onUpdate:modelValue":h[13]||(h[13]=P=>e(a).showFullscreenPlayer=P),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[u(Ne,{color:R.value},{default:y(()=>[u(Cl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[u(he,{icon:"",onClick:h[0]||(h[0]=P=>e(a).showFullscreenPlayer=!1)},{default:y(()=>[u(le,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>[e(a).activePlayerQueue?.radio_source.length?(r(),V(ht,{key:0,scrim:""},{activator:y(({props:P})=>[u(he,K(P,{icon:""}),{default:y(()=>[u(le,{color:"accent",icon:"mdi-radio-tower"})]),_:1},16)]),default:y(()=>[u(Ne,{title:e(J)("queue_radio_enabled"),subtitle:e(J)("queue_radio_based_on")},{text:y(()=>[(r(!0),_(Y,null,ue(e(a).activePlayerQueue?.radio_source,P=>(r(),_("div",{key:P.uri},[k("a",{onClick:D=>E(P)},C(P.name),9,Ui)]))),128))]),_:1},8,["title","subtitle"])]),_:1})):Q("",!0),I.value?Q("",!0):(r(),V(ma,{key:1})),u(he,{icon:"",onClick:qe(ee,["stop"])},{default:y(()=>[u(le,{icon:"mdi-dots-vertical"})]),_:1})]),_:1}),k("div",Yi,[e(G)("bp7")||!e(a).showQueueItems?(r(),_("div",Xi,[b.$vuetify.display.height>600?(r(),_("div",ji,[e(a).activePlayer?.powered!=!1&&e(a).curQueueItem?(r(),V(Ee,{key:0,item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:b.$vuetify.theme.current.dark?e(Ue):e(at)},null,8,["item","fallback"])):e(a).activePlayer?.powered!=!1&&!e(a).curQueueItem?.image&&e(a).activePlayer?.current_media?.image_url?(r(),V(We,{key:1,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(a).activePlayer.current_media.image_url},null,8,["src"])):(r(),V(We,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:b.$vuetify.theme.current.dark?e(Ue):e(at)},null,8,["src"]))])):Q("",!0),k("div",Gi,[e(a).activePlayer?.powered==!1?(r(),V(Se,{key:0,style:j(`font-size: ${d.value};`)},{default:y(()=>[N(C(e(a).activePlayer?.name),1)]),_:1},8,["style"])):e(a).curQueueItem?.media_item?(r(),V(Se,{key:1,style:j(`font-size: ${d.value};cursor:pointer;`),onClick:h[1]||(h[1]=P=>E(e(a).curQueueItem.media_item))},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(r(),_("span",Ki,"("+C(e(a).curQueueItem.media_item.version)+")",1)):Q("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(a).activePlayerQueue&&e(a).activePlayer?.current_media?.title?(r(),V(Se,{key:2},{default:y(()=>[e(a).activePlayer?.current_media?.artist?(r(),_("div",Zi,[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).activePlayer?.current_media?.artist),1)]),_:1},8,["sync"])])):Q("",!0),e(a).activePlayer?.current_media?.title?(r(),_("div",{key:1,style:j(`font-size: ${$.value};`)},[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).activePlayer?.current_media?.title),1)]),_:1},8,["sync"])],4)):Q("",!0)]),_:1})):(r(),V(Se,{key:3,style:j(`font-size: ${d.value};cursor:pointer;`),onClick:h[2]||(h[2]=P=>e(a).showPlayersMenu=!0)},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).activePlayer?.name||e(J)("no_player")),1)]),_:1},8,["sync"])]),_:1},8,["style"])),e(a).activePlayer?.powered==!1?(r(),V(pe,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[N(C(e(J)("off")),1)]),_:1})):Q("",!0),e(a).curQueueItem?.streamdetails?.stream_metadata&&e(a).curQueueItem?.streamdetails?.stream_metadata.title&&e(a).curQueueItem?.streamdetails?.stream_metadata.artist?(r(),V(pe,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:h[3]||(h[3]=P=>q(`${e(a).curQueueItem?.streamdetails?.stream_metadata.artist} - ${e(a).curQueueItem?.streamdetails?.stream_metadata.title}`))},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).curQueueItem?.streamdetails?.stream_metadata.artist)+" - "+C(e(a).curQueueItem?.streamdetails?.stream_metadata.title),1)]),_:1},8,["sync"])]),_:1})):Q("",!0),e(a).curQueueItem?.streamdetails?.stream_metadata&&e(a).curQueueItem?.streamdetails?.stream_metadata.title?(r(),V(pe,{key:6,class:"text-h6 text-md-h5 text-lg-h4",onClick:h[4]||(h[4]=P=>q(e(a).curQueueItem?.streamdetails?.stream_metadata.title))},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).curQueueItem?.streamdetails?.stream_metadata.title),1)]),_:1},8,["sync"])]),_:1})):Q("",!0),e(a).curQueueItem?.media_item&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&e(a).activePlayer?.powered!=!1?(r(),V(pe,{key:7,style:j(`font-size: ${$.value};cursor:pointer;`),onClick:h[5]||(h[5]=P=>E(e(a).curQueueItem.media_item.album))},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):Q("",!0),e(a).curQueueItem?.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length&&e(a).activePlayer?.powered!=!1?(r(),V(pe,{key:8,style:j(`font-size: ${$.value};cursor:pointer;`),onClick:h[6]||(h[6]=P=>E(e(a).curQueueItem.media_item.artists[0]))},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):Q("",!0),e(a).curQueueItem?.media_item&&"podcast"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.podcast?(r(),V(pe,{key:9,style:j(`font-size: ${$.value};`)},{default:y(()=>[u(se,{sync:e(s)},{default:y(()=>[N(C(e(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):e(a).activePlayer&&e(a).activePlayer?.active_source!=e(a).activePlayer?.player_id&&e(a).activePlayer?.powered!=!1?(r(),V(pe,{key:10},{default:y(()=>[N(C(e(J)("external_source_active",[e(Xt)(e(a).activePlayer)])),1)]),_:1})):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0&&e(a).activePlayer?.powered!=!1?(r(),V(pe,{key:11,style:j(`font-size: ${$.value}`)},{default:y(()=>[N(C(e(J)("queue_empty")),1)]),_:1},8,["style"])):Q("",!0),e(a).activePlayer?.powered!=!1?(r(),_("div",Ji,[u(jt)])):Q("",!0)])])):Q("",!0),e(a).showQueueItems?(r(),_("div",es,[u(pi,{modelValue:m.value,"onUpdate:modelValue":h[7]||(h[7]=P=>m.value=P),"hide-slider":"",density:"compact",onClick:x},{default:y(()=>[u(Oe,{value:0},{default:y(()=>[N(C(e(J)("queue"))+" ",1),u(Je,{color:"grey",content:(e(a).activePlayerQueue?.items||0)-(e(a).activePlayerQueue?.current_index||0),inline:""},null,8,["content"])]),_:1}),u(Oe,{value:1},{default:y(()=>[N(C(e(J)("played"))+" ",1),u(Je,{color:"grey",content:e(a).activePlayerQueue?.current_index,inline:""},null,8,["content"])]),_:1}),w.value?(r(),V(Oe,{key:0,value:2},{default:y(()=>[N(C(e(J)("lyrics")),1)]),_:1})):Q("",!0)]),_:1},8,["modelValue"]),k("div",ts,[!f.value&&m.value!==2?(r(),V(pl,{key:0,onLoad:g,"empty-text":"",height:"100%"},{default:y(()=>[u($l,{"item-height":70,"max-height":"90%",items:m.value==0?v.value:T.value},{default:y(({item:P,index:D})=>[u(wl,{link:"","show-menu-btn":!0,disabled:!P.available,onClick:qe(Z=>X(Z,P),["stop"]),onMenu:qe(Z=>X(Z,P),["stop"]),onMouseenter:Z=>o.value=D,onMouseleave:h[8]||(h[8]=Z=>o.value=-1)},{prepend:y(()=>[k("div",as,[u(Ee,{size:"50",item:P},null,8,["item"])])]),title:y(()=>[k("div",ls,[u(se,{sync:D==0&&m.value==0?e(s):e(n),disabled:!(D==0&&m.value==0||o.value==D)},{default:y(()=>[k("span",{class:ie({"is-playing":P.queue_item_id===e(a).curQueueItem?.queue_item_id})},C(P.name),3)]),_:2},1032,["sync","disabled"])])]),subtitle:y(()=>[k("div",is,[k("span",ss,C(e(Me)(P.duration))+" | ",1),u(se,{sync:D==0&&m.value==0?e(s):e(n),disabled:!(D==0&&m.value==0||o.value==D)},{default:y(()=>[P.media_item&&"album"in P.media_item&&P.media_item.album?(r(),_("span",os,C(P.media_item.album.name),1)):Q("",!0)]),_:2},1032,["sync","disabled"])])]),append:y(()=>[P.queue_item_id===e(a).curQueueItem?.queue_item_id?(r(),V(Il,{key:0})):Q("",!0),P.available?Q("",!0):(r(),V(le,{key:1},{default:y(()=>[...h[14]||(h[14]=[N("mdi-alert",-1)])]),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),P.queue_item_id==e(a).curQueueItem?.queue_item_id&&P.media_item?.metadata?.chapters?.length?(r(),_("div",ns,[(r(!0),_(Y,null,ue(P.media_item.metadata?.chapters,Z=>(r(),V(xe,{key:Z.position,onClick:qe(ae=>L(P.media_item,Z),["stop"])},{title:y(()=>[k("div",null,C(Z.name),1)]),append:y(()=>[Z.end?(r(),_("span",rs,C(e(Me)(Z.end-Z.start)),1)):Q("",!0)]),_:2},1032,["onClick"]))),128))])):Q("",!0)]),_:1},8,["items"])]),_:1})):Q("",!0),m.value===2?(r(),_("div",us,[u(Hi,{"media-item":e(a).curQueueItem?.media_item,position:e(a).activePlayerQueue?.elapsed_time,duration:e(a).curQueueItem?.duration,"stream-details":e(a).curQueueItem?.streamdetails,"text-color":B.value},null,8,["media-item","position","duration","stream-details","text-color"])])):Q("",!0)])])):Q("",!0),!e(a).showQueueItems&&b.$vuetify.display.height<=600?(r(),_("div",cs,[k("div",ds,[u(Ee,{item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):Q("",!0)]),k("div",ms,[k("div",vs,[u(va,{"show-labels":!0,color:B.value},null,8,["color"])]),k("div",ys,[e(a).activePlayerQueue?(r(),V(Pe,{key:0,disabled:!e(a).curQueueItem?.media_item,icon:e(a).curQueueItem?.media_item?.favorite?"mdi-heart":"mdi-heart-outline",title:e(J)("tooltip.favorite"),variant:"button",class:"media-controls-item","max-height":"30px",onClick:p},null,8,["disabled","icon","title"])):Q("",!0),b.$vuetify.display.mdAndUp?(r(),V(ca,{key:1,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):Q("",!0),u(ua,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),u(ra,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"70px"},null,8,["player","player-queue"]),u(na,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),b.$vuetify.display.mdAndUp?(r(),V(oa,{key:2,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):Q("",!0),e(a).activePlayerQueue?(r(),V(da,{key:3,class:"media-controls-item","max-height":"30px"})):Q("",!0)]),e(a).activePlayer&&e(a).activePlayer.volume_control!=e(lt)?(r(),_("div",fs,[u(bt,{width:"100%","is-powered":e(a).activePlayer?.powered!=!1,disabled:!e(a).activePlayer||!e(a).activePlayer?.available,"model-value":Math.round(e(a).activePlayer?.group_volume||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:B.value,"allow-wheel":!0,"onUpdate:modelValue":h[9]||(h[9]=P=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolume(e(a).activePlayerId,P):e(M).playerCommandVolumeSet(e(a).activePlayerId,P)),"onClick:prepend":h[10]||(h[10]=P=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolumeDown(e(a).activePlayerId):e(M).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":h[11]||(h[11]=P=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolumeUp(e(a).activePlayerId):e(M).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):Q("",!0),I.value?(r(),_("div",ps,[u(be,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:h[12]||(h[12]=P=>e(a).showPlayersMenu=!0)},{default:y(()=>[u(le,{icon:e(a).activePlayer?.icon||"mdi-speaker"},null,8,["icon"]),N(" "+C(e(a).activePlayer?e(Gt)(e(a).activePlayer):""),1)]),_:1})])):Q("",!0)])]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),_s=oe(hs,[["__scopeId","data-v-53f0cf4b"]]),gs={key:1},bs={key:2,class:"icon-thumb"},ws={key:0},ks={key:2},Ps={key:3},Is={key:4},Cs={key:0,class:"pl-4"},$s={key:0},Qs={key:1},xs={key:2},Vs={key:3},Ss={key:4},Ts={key:5},Ls={key:6,class:"line-clamp-1"},Ms={key:7},Es={key:8,class:"line-clamp-1"},Bs={key:9,class:"line-clamp-1"},As={key:0},Rs=O({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(t){const l=new it,i=t,s=S(()=>a.activePlayerQueue?.current_item?.streamdetails);return(o,n)=>(r(),_(Y,null,[u(xe,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>[k("div",{class:"media-thumb player-media-thumb",style:j(`cursor: pointer;height: ${e(G)({breakpoint:"phone"})?60:64}px; width: ${e(G)({breakpoint:"phone"})?60:64}px; `),onClick:n[0]||(n[0]=c=>e(a).showFullscreenPlayer=!0)},[e(a).activePlayer?.powered!=!1&&e(a).curQueueItem?(r(),V(Ee,{key:0,item:e(a).curQueueItem,fallback:e(Ue)},null,8,["item","fallback"])):e(a).activePlayer?.powered!=!1&&e(a).activePlayer?.current_media?.image_url?(r(),_("div",gs,[u(We,{class:"media-thumb",style:{"border-radius":"4px"},size:"60",src:e(a).activePlayer.current_media.image_url},null,8,["src"])])):(r(),_("div",bs,[u(le,{size:"24",icon:e(a).activePlayer?.type==e(De).PLAYER&&e(a).activePlayer?.group_members.length?"mdi-speaker-multiple":e(a).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))],4)]),title:y(()=>[k("div",{style:j({cursor:"pointer",color:o.primaryColor})},[e(a).activePlayer?.powered==!1?(r(),_("div",{key:0,onClick:n[1]||(n[1]=c=>e(a).showPlayersMenu=!0)},C(e(a).activePlayer?.name),1)):e(a).curQueueItem?.media_item?(r(),_("div",{key:1,onClick:n[2]||(n[2]=c=>e(a).showFullscreenPlayer=!0)},[u(se,{sync:e(l)},{default:y(()=>[N(C(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(r(),_("span",ws,"("+C(e(a).curQueueItem.media_item.version)+")",1)):Q("",!0)]),_:1},8,["sync"])])):e(a).curQueueItem?(r(),_("div",ks,C(e(a).curQueueItem.name),1)):!e(a).activePlayerQueue&&e(a).activePlayer?.current_media?.title?(r(),_("div",Ps,C(e(a).activePlayer.current_media.title),1)):e(a).activePlayer?(r(),_("div",Is,C(e(a).activePlayer?.name),1)):(r(),_("div",{key:5,onClick:n[3]||(n[3]=c=>e(a).showPlayersMenu=!0)},C(o.$t("no_player")),1))],4)]),append:y(()=>[s.value?.audio_format.content_type&&!e(G)({breakpoint:"phone"})&&o.showQualityDetailsBtn?(r(),_("div",Cs,[u(jt)])):Q("",!0)]),subtitle:y(()=>[k("div",{style:j({cursor:"pointer",color:o.primaryColor}),class:"line-clamp-1",onClick:n[4]||(n[4]=c=>e(a).showFullscreenPlayer=!0)},[u(se,{sync:e(l)},{default:y(()=>[e(a).activePlayer?.powered==!1?(r(),_("div",$s,C(o.$t("off")),1)):e(a).curQueueItem&&e(a).curQueueItem.media_item?.media_type==e(F).TRACK&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&!i.showOnlyArtist?(r(),_("div",Qs,C(e(sl)(e(a).curQueueItem.media_item.artists))+" • "+C(e(a).curQueueItem.media_item.album.name),1)):e(a).curQueueItem?.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length>0?(r(),_("div",xs,C(e(a).curQueueItem.media_item.artists[0].name),1)):e(a).curQueueItem?.media_item&&"podcast"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.podcast?.name?(r(),_("div",Vs,C(e(a).curQueueItem.media_item.podcast.name),1)):e(a).curQueueItem?.streamdetails?.stream_metadata&&e(a).curQueueItem?.streamdetails?.stream_metadata.title&&e(a).curQueueItem?.streamdetails?.stream_metadata.artist?(r(),_("div",Ss,C(e(a).curQueueItem?.streamdetails?.stream_metadata.artist)+" - "+C(e(a).curQueueItem?.streamdetails?.stream_metadata.title),1)):e(a).curQueueItem?.streamdetails?.stream_metadata&&e(a).curQueueItem?.streamdetails?.stream_metadata.title?(r(),_("div",Ts,C(e(a).curQueueItem?.streamdetails?.stream_metadata.title),1)):e(a).curQueueItem?.media_item?.metadata.description?(r(),_("div",Ls,C(e(ol)(e(a).curQueueItem.media_item.metadata.description,100)),1)):!e(a).activePlayerQueue&&e(a).activePlayer?.active_source&&e(a).activePlayer?.current_media?.artist?(r(),_("div",Ms,C(e(a).activePlayer.current_media.artist),1)):!e(a).activePlayerQueue&&e(a).activePlayer?.active_source?(r(),_("div",Es,C(o.$t("external_source_active",[e(Xt)(e(a).activePlayer)])),1)):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0?(r(),_("div",Bs,C(o.$t("queue_empty")),1)):Q("",!0)]),_:1},8,["sync"]),e(a).activePlayer&&e(a).activePlayer?.powered!=!1?(r(),_("div",As,C(e(Gt)(e(a).activePlayer)),1)):Q("",!0)],4)]),_:1}),u(_s,{"show-fullscreen":e(a).showFullscreenPlayer,"color-palette":o.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Fs=oe(Rs,[["__scopeId","data-v-4af10a97"]]),qs=["data-floating"],zs=["data-mobile"],Ds={class:"mediacontrols-left"},Os={class:"mediacontrols-bottom-center"},Ns={class:"mediacontrols-bottom-right"},Ws={key:0,class:"volume-slider"},Hs=O({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(t){Yt(n=>({"0920870d":o.value}));const{mobile:l}=pt({mobileBreakpoint:576}),i=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),s=new Image;s.src=He.theme.current.value.dark?Ue:at,s.crossOrigin="Anonymous",s.addEventListener("load",function(){i.value=nl(s)});const o=S(()=>He.theme.current.value.dark?i.value&&i.value.darkColor?i.value.darkColor:"#CCCCCC26":i.value&&i.value.lightColor?i.value.lightColor:"#CCCCCC26");return te(()=>a.curQueueItem?.queue_item_id,()=>{a.curQueueItem?.media_item?s.src=Qt(a.curQueueItem.media_item,xt.THUMB)||"":a.curQueueItem?s.src=Qt(a.curQueueItem,xt.THUMB)||"":s.src=""}),(n,c)=>(r(),_(Y,null,[k("div",{class:"mediacontrols-bg","data-floating":n.useFloatingPlayer},null,8,qs),k("div",{class:"mediacontrols","data-mobile":e(l)},[k("div",Ds,[u(Fs,{"show-quality-details-btn":!!e(G)("bp8"),"show-only-artist":!e(G)("bp7"),"color-palette":i.value,"primary-color":n.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),k("div",Os,[u(qt,{"visible-components":{repeat:{isVisible:e(G)("bp3")},shuffle:{isVisible:e(G)("bp3")},play:{isVisible:!0,icon:{staticWidth:"48px",staticHeight:"48px"}},previous:{isVisible:e(G)("bp3")},next:{isVisible:e(G)("bp3")}}},null,8,["visible-components"]),e(G)("bp6")?(r(),V(va,{key:0,"is-progress-bar":!1,disabled:!e(a).activePlayerQueue?.active||e(a).activePlayerQueue?.current_item?.media_item?.media_type!==e(F).TRACK},null,8,["disabled"])):Q("",!0)]),k("div",Ns,[k("div",null,[u(Si,{queue:{isVisible:e(G)("bp3"),color:n.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:n.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(l)&&(e(a).activePlayer?.volume_control!=e(lt)||e(a).activePlayer?.group_members.length>0),color:n.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),u(qt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(G)({breakpoint:"bp3",condition:"lt"}),icon:{staticWidth:"40px",staticHeight:"40px",color:n.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,zs),e(l)&&(e(a).activePlayer?.volume_control!=e(lt)||e(a).activePlayer?.group_members.length>0)?(r(),_("div",Ws,[u(bt,{width:"100%",color:"secondary","is-powered":e(a).activePlayer?.powered!=!1,disabled:!e(a).activePlayer||!e(a).activePlayer?.available,"model-value":Math.round(e(a).activePlayer?.group_volume||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":c[0]||(c[0]=m=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolume(e(a).activePlayerId,m):e(M).playerCommandVolumeSet(e(a).activePlayerId,m)),"onClick:prepend":c[1]||(c[1]=m=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolumeDown(e(a).activePlayerId):e(M).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":c[2]||(c[2]=m=>e(a).activePlayer.group_members.length>0?e(M).playerCommandGroupVolumeUp(e(a).activePlayerId):e(M).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):Q("",!0)],64))}}),Us=oe(Hs,[["__scopeId","data-v-f0b417b2"]]),Ys={class:"menuButton"},Xs={class:"menuButton"},js=O({__name:"BottomNavigation",props:{height:{}},setup(t){const l=ea(),i=A(!1);return(s,o)=>(r(),V(Hl,{height:s.height,"bg-color":"default",grow:"",role:"navigation"},{default:y(()=>[(r(!0),_(Y,null,ue(e(l).filter(n=>!n.isLibraryNode),n=>(r(),V(be,{key:n.label,to:n.path,"aria-label":s.$t(n.label),tabindex:"0",variant:"text","active-color":"fg","base-color":"grey"},{default:y(()=>[u(le,{size:"xx-large"},{default:y(()=>[N(C(n.icon),1)]),_:2},1024),k("span",Ys,C(s.$t(n.label)),1)]),_:2},1032,["to","aria-label"]))),128)),u(ht,null,{activator:y(({props:n})=>[u(be,K(n,{"aria-haspopup":"true","aria-expanded":i.value.toString(),"aria-label":"Open library menu","base-color":"grey"}),{default:y(()=>[u(le,{size:"xx-large"},{default:y(()=>[...o[0]||(o[0]=[N("mdi-bookshelf",-1)])]),_:1}),k("span",Xs,C(s.$t("library")),1)]),_:1},16,["aria-expanded"])]),default:y(()=>[u($e,null,{default:y(()=>[(r(!0),_(Y,null,ue(e(l).filter(n=>n.isLibraryNode),n=>(r(),V(xe,{key:n.label,title:s.$t(n.label),"prepend-icon":n.icon,to:n.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["height"]))}}),Gs=O({__name:"Footer",setup(t){const l=S(()=>a.isInStandaloneMode?100:80);return(i,s)=>(r(),_(Y,null,[e(G)({breakpoint:"tablet"})?(r(),_("div",{key:0,class:ie(i.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:`
      position: fixed;
      width: 100%;
      height: 180px;
      bottom: 0px;
      z-index: 999;
    `},null,2)):Q("",!0),e(G)({breakpoint:"tablet"})?(r(),V(js,{key:1,height:l.value},null,8,["height"])):Q("",!0),u(ei,{app:"",color:"default",class:ie(`py-0 px-0 ${e(G)({breakpoint:"tablet"})?"mediacontrols-player-float":"mediacontrols-player-default"}`)},{default:y(()=>[u(Us,{"use-floating-player":e(G)({breakpoint:"tablet"})},null,8,["use-floating-player"])]),_:1},8,["class"])],64))}}),Ks={style:{float:"right","margin-right":"-20px"}},Zs=O({__name:"PlayerSelect",setup(t){const l=A(!1),i=A(null),s=S(()=>Object.values(M.players).filter(m=>Vt(m)).filter(m=>m.player_id!==_e.player_id).sort((m,f)=>m.name.toUpperCase()>f.name?.toUpperCase()?1:-1));te(()=>a.activePlayerId,m=>{m&&localStorage.setItem("mass.LastPlayerId",m)}),te(()=>M.players,m=>{m&&!a.activePlayer&&n()},{deep:!0}),te(()=>M.state,m=>{m.value!=ul.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function o(m,f=!1){a.activePlayerId==m.player_id?l.value=!l.value:(l.value=!1,a.activePlayerId=m.player_id),f&&(a.showPlayersMenu=!1)}we(()=>{n()});const n=function(){if(a.activePlayer&&Vt(a.activePlayer))return;const m=c();m&&(a.activePlayerId=m)},c=function(){const m=localStorage.getItem("mass.LastPlayerId");if(m&&m in M.players&&M.players[m].available)return m};return(m,f)=>(r(),_(Y,null,[u(Kt,{modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=v=>e(a).showPlayersMenu=v)},null,8,["modelValue"]),e(a).showPlayersMenu?(r(),V(ui,{key:0,modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":f[4]||(f[4]=v=>e(a).showPlayersMenu=v),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999",color:"background"},{default:y(()=>[k("div",null,[u(Se,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[k("b",null,C(m.$t("players")),1),k("div",Ks,[u(he,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[u(le,{size:"30"},{default:y(()=>[...f[5]||(f[5]=[N("mdi-cog-outline",-1)])]),_:1})]),_:1}),u(he,{variant:"icon",onClick:f[1]||(f[1]=v=>e(a).showPlayersMenu=!1)},{default:y(()=>[u(le,{size:"30"},{default:y(()=>[...f[6]||(f[6]=[N("mdi-window-close",-1)])]),_:1})]),_:1})])]),_:1}),u(et),u($e,{flat:"",style:{margin:"0px 10px",padding:"0"}},{default:y(()=>[e(_e).mode===e(rl).BUILTIN&&e(_e).player_id&&e(M).players[e(_e).player_id]?(r(),V(ze,{key:0,id:e(_e).player_id,style:{margin:"10px 0px"},player:e(M).players[e(_e).player_id],"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,"allow-power-control":!0,onClick:f[2]||(f[2]=v=>o(e(M).players[e(_e).player_id]))},null,8,["id","player"])):Q("",!0),(r(!0),_(Y,null,ue(s.value.filter(v=>[e(tt).PLAYING,e(tt).PAUSED].includes(v.playback_state)||e(M).queues[v.player_id]?.items>0&&v.powered!=!1),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"10px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),u(Ql,{modelValue:i.value,"onUpdate:modelValue":f[3]||(f[3]=v=>i.value=v),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[u(Tt,{style:{padding:"0"}},{default:y(()=>[u(Lt,null,{default:y(()=>[k("h3",null,C(m.$t("all_players")),1)]),_:1}),u(Mt,{style:{padding:"0"}},{default:y(()=>[u($e,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(r(!0),_(Y,null,ue(s.value.filter(v=>v.type!=e(De).GROUP),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"5px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),s.value.filter(v=>v.type==e(De).GROUP).length?(r(),V(Tt,{key:0,style:{padding:"0"}},{default:y(()=>[u(Lt,null,{default:y(()=>[k("h3",null,C(m.$t("all_groups")),1)]),_:1}),u(Mt,{style:{padding:"0"}},{default:y(()=>[u($e,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(r(!0),_(Y,null,ue(s.value.filter(v=>v.type==e(De).GROUP),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"5px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):Q("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):Q("",!0)],64))}}),Js=oe(Zs,[["__scopeId","data-v-cc077ef3"]]);function eo(t={}){const{immediate:l=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:o,onRegisteredSW:n,onRegisterError:c}=t;let m,f,v;const T=async(d=!0)=>{await f,v?.()};async function w(){if("serviceWorker"in navigator){if(m=await cl(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:d}},[],import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{c?.(d)}),!m)return;v=()=>{m?.messageSkipWaiting()};{let d=!1;const $=()=>{d=!0,m?.addEventListener("controlling",I=>{I.isUpdate&&window.location.reload()}),i?.()};m.addEventListener("installed",I=>{typeof I.isUpdate>"u"?typeof I.isExternal<"u"&&I.isExternal?$():!d&&s?.():I.isUpdate||s?.()}),m.addEventListener("waiting",$)}m.register({immediate:l}).then(d=>{n?n("./sw.js",d):o?.(d)}).catch(d=>{c?.(d)})}}return f=w(),T}function to(t={}){const{immediate:l=!0,onNeedRefresh:i,onOfflineReady:s,onRegistered:o,onRegisteredSW:n,onRegisterError:c}=t,m=A(!1),f=A(!1);return{updateServiceWorker:eo({immediate:l,onNeedRefresh(){m.value=!0,i?.()},onOfflineReady(){f.value=!0,s?.()},onRegistered:o,onRegisteredSW:n,onRegisterError:c}),offlineReady:f,needRefresh:m}}const ao={key:0,class:"pwa-toast",role:"alert"},lo={class:"message"},io={key:0},so={key:1},oo=O({__name:"ReloadPrompt",setup(t){const{offlineReady:l,needRefresh:i,updateServiceWorker:s}=to(),o=async()=>{l.value=!1,i.value=!1};return(n,c)=>e(l)||e(i)?(r(),_("div",ao,[k("div",lo,[e(l)?(r(),_("span",io," App ready to work offline ")):(r(),_("span",so," New content available, click on reload button to update. "))]),e(i)?(r(),_("button",{key:0,onClick:c[0]||(c[0]=m=>e(s)())},"Reload")):Q("",!0),k("button",{onClick:o},"Close")])):Q("",!0)}}),no=O({__name:"Default",setup(t){const l=dl();return te([()=>l.query.player,()=>Object.keys(M.players).length],([i])=>{if(!i)return;const s=i.toString().toLowerCase(),o=Object.values(M.players).find(n=>n.player_id.toLowerCase()===s||n.name.toLowerCase()===s)?.player_id;o&&(a.activePlayerId=o)},{immediate:!0}),te(()=>l.query.showFullscreenPlayer,i=>{a.showFullscreenPlayer=!!i},{immediate:!0}),te(()=>l.query.frameless,i=>{i&&(a.frameless=!0)},{immediate:!0}),(i,s)=>(r(),_(Y,null,[e(a).connected?(r(),V(Nl,{key:0},{default:y(()=>[e(a).frameless?(r(),V(Et,{key:0})):(r(),_(Y,{key:1},[u(Js),u(Et),u(Gs)],64))]),_:1})):(r(),V(Kt,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(a).connected},{default:y(()=>[k("div",null,[u(Jt,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(a).isInStandaloneMode?(r(),V(oo,{key:2})):Q("",!0)],64))}}),xo=oe(no,[["__scopeId","data-v-3dcdb3ba"]]);export{xo as default};
