{"version":3,"sources":["docassemble_webapp/docassemble/webapp/static/app/manage_api.js"],"sourcesContent":["Object.defineProperty(String.prototype, \"daSprintf\", {\n  value: function () {\n    var args = Array.from(arguments),\n      i = 0;\n    function defaultNumber(iValue) {\n      return iValue != undefined && !isNaN(iValue) ? iValue : \"0\";\n    }\n    function defaultString(iValue) {\n      return iValue == undefined ? \"\" : \"\" + iValue;\n    }\n    return this.replace(\n      /%%|%([+\\-])?([^1-9])?(\\d+)?(\\.\\d+)?([deEfhHioQqs])/g,\n      function (match, sign, filler, scale, precision, type) {\n        var strOut, space, value;\n        var asNumber = false;\n        if (match == \"%%\") return \"%\";\n        if (i >= args.length) return match;\n        value = args[i];\n        while (Array.isArray(value)) {\n          args.splice(i, 1);\n          for (var j = i; value.length > 0; j++)\n            args.splice(j, 0, value.shift());\n          value = args[i];\n        }\n        i++;\n        if (filler == undefined) filler = \" \"; // default\n        if (scale == undefined && !isNaN(filler)) {\n          scale = filler;\n          filler = \" \";\n        }\n        if (sign == undefined) sign = \"sqQ\".indexOf(type) >= 0 ? \"+\" : \"-\"; // default\n        if (scale == undefined) scale = 0; // default\n        if (precision == undefined) precision = \".0\"; // default\n        scale = parseInt(scale);\n        precision = parseInt(precision.substr(1));\n        switch (type) {\n          case \"d\":\n          case \"i\":\n            // decimal integer\n            asNumber = true;\n            strOut = parseInt(defaultNumber(value));\n            if (precision > 0) strOut += \".\" + \"0\".repeat(precision);\n            break;\n          case \"e\":\n          case \"E\":\n            // float in exponential notation\n            asNumber = true;\n            strOut = parseFloat(defaultNumber(value));\n            if (precision == 0) strOut = strOut.toExponential();\n            else strOut = strOut.toExponential(precision);\n            if (type == \"E\") strOut = strOut.replace(\"e\", \"E\");\n            break;\n          case \"f\":\n            // decimal float\n            asNumber = true;\n            strOut = parseFloat(defaultNumber(value));\n            if (precision != 0) strOut = strOut.toFixed(precision);\n            break;\n          case \"o\":\n          case \"h\":\n          case \"H\":\n            // Octal or Hexagesimal integer notation\n            strOut =\n              \"\\\\\" +\n              (type == \"o\" ? \"0\" : type) +\n              parseInt(defaultNumber(value)).toString(type == \"o\" ? 8 : 16);\n            break;\n          case \"q\":\n            // single quoted string\n            strOut = \"'\" + defaultString(value) + \"'\";\n            break;\n          case \"Q\":\n            // double quoted string\n            strOut = '\"' + defaultString(value) + '\"';\n            break;\n          default:\n            // string\n            strOut = defaultString(value);\n            break;\n        }\n        if (typeof strOut != \"string\") strOut = \"\" + strOut;\n        if ((space = strOut.length) < scale) {\n          if (asNumber) {\n            if (sign == \"-\") {\n              if (strOut.indexOf(\"-\") < 0)\n                strOut = filler.repeat(scale - space) + strOut;\n              else\n                strOut =\n                  \"-\" + filler.repeat(scale - space) + strOut.replace(\"-\", \"\");\n            } else {\n              if (strOut.indexOf(\"-\") < 0)\n                strOut = \"+\" + filler.repeat(scale - space - 1) + strOut;\n              else\n                strOut =\n                  \"-\" + filler.repeat(scale - space) + strOut.replace(\"-\", \"\");\n            }\n          } else {\n            if (sign == \"-\") strOut = filler.repeat(scale - space) + strOut;\n            else strOut = strOut + filler.repeat(scale - space);\n          }\n        } else if (asNumber && sign == \"+\" && strOut.indexOf(\"-\") < 0)\n          strOut = \"+\" + strOut;\n        return strOut;\n      },\n    );\n  },\n});\nObject.defineProperty(window, \"daSprintf\", {\n  value: function (str, ...rest) {\n    if (typeof str == \"string\")\n      return String.prototype.daSprintf.apply(str, rest);\n    return \"\";\n  },\n});\nfunction flash(message, priority, clear) {\n  if (priority == null) {\n    priority = \"info\";\n  }\n  if (!$(\"#daflash\").length) {\n    $(\"body\").append(daSprintf(daNotificationContainer, \"\"));\n  }\n  if (clear) {\n    $(\"#daflash\").empty();\n  }\n  if (message != null) {\n    var newElement = $(daSprintf(daNotificationMessage, priority, message));\n    $(\"#daflash\").append(newElement);\n    if (priority == \"success\") {\n      setTimeout(function () {\n        newElement.hide(300, function () {\n          $(this).remove();\n        });\n      }, 3000);\n    }\n  }\n}\nfunction daCopyToClipboard() {\n  const apiKeyElement = document.getElementById(\"daApiKey\");\n  const selection = window.getSelection();\n  const range = document.createRange();\n  range.selectNodeContents(apiKeyElement);\n  selection.removeAllRanges();\n  selection.addRange(range);\n  document.execCommand(\"copy\");\n  selection.removeAllRanges();\n  flash(daApiKeyCopied, \"success\");\n}\nfunction remove_constraint(elem) {\n  $(elem).parents(\".daconstraintlist div\").remove();\n  fix_constraints();\n}\nfunction fix_constraints() {\n  var empty;\n  var filled_exist = 0;\n  var empty_exist = 0;\n  if ($(\"#method\").val() == \"none\") {\n    $(\".daconstraintlist\").hide();\n    return;\n  } else {\n    $(\".daconstraintlist\").show();\n  }\n  $(\".daconstraintlist input\").each(function () {\n    if ($(this).val() == \"\") {\n      empty_exist = 1;\n    } else {\n      filled_exist = 1;\n    }\n    if (!$(this).next().length) {\n      var new_button = $(\"<button>\");\n      var new_i = $(\"<i>\");\n      $(new_button).addClass(\"btn btn-outline-secondary\");\n      $(new_i).addClass(\"fa-solid fa-times\");\n      $(new_button).append(new_i);\n      $(new_button).on(\"click\", function () {\n        remove_constraint(this);\n      });\n      $(this).parent().append(new_button);\n    }\n  });\n  if (empty_exist == 0) {\n    var new_div = $(\"<div>\");\n    var new_input = $(\"<input>\");\n    $(new_div).append(new_input);\n    $(new_div).addClass(\"input-group\");\n    $(new_input).addClass(\"form-control\");\n    $(new_input).attr(\"type\", \"text\");\n    if ($(\"#method\").val() == \"ip\") {\n      $(new_input).attr(\"placeholder\", daIpPlaceholder);\n    } else {\n      $(new_input).attr(\"placeholder\", daHostnamePlaceholder);\n    }\n    $(new_input).on(\"change\", fix_constraints);\n    $(new_input).on(\"keyup\", fix_constraints);\n    $(\".daconstraintlist\").append(new_div);\n    var new_button = $(\"<button>\");\n    var new_i = $(\"<i>\");\n    $(new_button).addClass(\"btn btn-outline-secondary\");\n    $(new_i).addClass(\"fa-solid fa-times\");\n    $(new_button).append(new_i);\n    $(new_button).on(\"click\", function () {\n      remove_constraint(this);\n    });\n    $(new_div).append(new_button);\n  }\n}\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  $(document).ready(function () {\n    $(\".daconstraintlist input\").on(\"change\", fix_constraints);\n    $(\"#method\").on(\"change\", function () {\n      $(\".daconstraintlist div.input-group\").remove();\n      fix_constraints();\n    });\n    $(\"#submit\").on(\"click\", function () {\n      var the_constraints = [];\n      $(\".daconstraintlist input\").each(function () {\n        if ($(this).val() != \"\") {\n          the_constraints.push($(this).val());\n        }\n      });\n      $(\"#security\").val(JSON.stringify(the_constraints));\n    });\n    fix_constraints();\n  });\n});\n"],"names":["Object","defineProperty","String","prototype","value","args","Array","from","arguments","i","defaultNumber","iValue","undefined","isNaN","defaultString","this","replace","match","sign","filler","scale","precision","type","strOut","space","asNumber","length","isArray","splice","j","shift","indexOf","parseInt","substr","repeat","parseFloat","toExponential","toFixed","toString","window","str","rest","daSprintf","apply","flash","message","priority","clear","$","append","daNotificationContainer","empty","newElement","daNotificationMessage","setTimeout","hide","remove","daCopyToClipboard","apiKeyElement","document","getElementById","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","execCommand","daApiKeyCopied","remove_constraint","elem","parents","fix_constraints","filled_exist","empty_exist","val","show","each","next","new_button","new_i","addClass","on","parent","new_div","new_input","attr","daIpPlaceholder","daHostnamePlaceholder","addEventListener","ready","the_constraints","push","JSON","stringify"],"mappings":"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"}