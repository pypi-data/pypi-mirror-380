{"version":3,"sources":["docassemble_webapp/docassemble/webapp/static/bootstrap-combobox/js/bootstrap-combobox.js"],"sourcesContent":["/* =============================================================\n * bootstrap-combobox.js v1.1.8\n * =============================================================\n * Copyright 2012 Daniel Farrell\n * Modified 2018 for docassemble by Jonathan Pyle\n * Modified 2022 for docassemble by Bryce Willey\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n(function ($) {\n  \"use strict\";\n\n  /* COMBOBOX PUBLIC CLASS DEFINITION\n   * ================================ */\n\n  var Combobox = function (element, options) {\n    this.options = $.extend({}, $.fn.combobox.defaults, options);\n    this.template = this.options.template || this.template;\n    this.$source = $(element);\n    if (this.$source.hasClass(\"da-combobox-floating\")) {\n      this.$label = this.$source.next(\"label\");\n    } else {\n      this.$label = null;\n    }\n    this.$container = this.setup();\n    this.$element = this.$container.find(\"input[type=text]\");\n    this.$target = this.$container.find(\"input[type=hidden]\");\n    this.mousedover = false;\n    if (this.$source.attr(\"disabled\") !== undefined) {\n      this.$target.prop(\"disabled\", true);\n    }\n    this.$button = this.$container.find(\".dacomboboxtoggle\");\n    if (this.$float) {\n      this.$menu = $(this.options.menu).insertAfter(this.$float);\n    } else {\n      this.$menu = $(this.options.menu).insertAfter(this.$element);\n    }\n    this.matcher = this.options.matcher || this.matcher;\n    this.sorter = this.options.sorter || this.sorter;\n    this.highlighter = this.options.highlighter || this.highlighter;\n    this.clearIfNoMatch = this.options.clearIfNoMatch;\n    this.shown = false;\n    this.selected = false;\n    this.refresh();\n    this.transferAttributes();\n    this.listen();\n  };\n\n  Combobox.prototype = {\n    constructor: Combobox,\n\n    setup: function () {\n      //console.log('setup');\n      var combobox = $(this.template());\n      this.$source.before(combobox);\n      this.$source.hide();\n      if (this.$label) {\n        this.$float = $('<div class=\"form-floating\"></div>');\n        var innerText = this.$label.text();\n        var inputElement = combobox.find('input[type=\"text\"]');\n        inputElement.attr(\"placeholder\", innerText);\n        inputElement.detach();\n        this.$label.detach();\n        this.$float.append(inputElement, this.$label);\n        this.$float.insertAfter(inputElement);\n      } else {\n        this.$float = null;\n      }\n      return combobox;\n    },\n\n    template: function () {\n      //console.log('template');\n      if (this.options.showButton) {\n        if (this.options.functionalButton) {\n          return (\n            '<div class=\"combobox-container\"> <input type=\"hidden\" /> ' +\n            '<div class=\"input-group\"> <input type=\"text\" alt=\"' +\n            this.options.inputBox +\n            '\" role=\"combobox\" aria-autocomplete=\"list\" aria-expanded=\"false\" aria-activedescendant=\"\" autocomplete=\"off\" /> ' +\n            '<button class=\"btn btn-outline-secondary dacomboboxtoggle\" type=\"button\" tabindex=\"-1\" aria-label=\"' +\n            this.options.buttonLabel +\n            '\" aria-expanded=\"false\" aria-controls=\"id_controls\">' +\n            '<span class=\"fa-solid fa-caret-down\"></span><span class=\"fa-solid fa-xmark\"></span>' +\n            \"</button></div> </div>\"\n          );\n        } else {\n          return (\n            '<div class=\"combobox-container\"> <input type=\"hidden\" /> ' +\n            '<div class=\"input-group\"> <input type=\"text\" alt=\"' +\n            this.options.inputBox +\n            '\" role=\"combobox\" aria-autocomplete=\"list\" aria-expanded=\"false\" aria-activedescendant=\"\" autocomplete=\"off\" /> ' +\n            '<button class=\"btn btn-outline-secondary\" type=\"button\" disabled tabindex=\"-1\">' +\n            '<span class=\"fa-solid fa-caret-down\"></span>' +\n            \"</button></div> </div>\"\n          );\n        }\n      } else {\n        return (\n          '<div class=\"combobox-container\"> <input type=\"hidden\" /> ' +\n          '<input type=\"text\" alt=\"' +\n          this.options.inputBox +\n          '\" role=\"combobox\" aria-autocomplete=\"list\" aria-expanded=\"false\" aria-activedescendant=\"\" autocomplete=\"off\" /></div>'\n        );\n      }\n    },\n\n    disable: function () {\n      this.$element.prop(\"disabled\", true);\n      this.$button.attr(\"disabled\", true);\n      this.$target.prop(\"disabled\", true);\n      this.$source.prop(\"disabled\", true);\n      this.disabled = true;\n      this.$container.addClass(\"combobox-disabled\");\n    },\n\n    enable: function () {\n      this.$element.prop(\"disabled\", false);\n      this.$button.attr(\"disabled\", false);\n      this.$target.prop(\"disabled\", false);\n      this.$source.prop(\"disabled\", false);\n      this.disabled = false;\n      this.$container.removeClass(\"combobox-disabled\");\n    },\n    parse: function () {\n      //console.log('parse');\n      var that = this,\n        map = {},\n        revMap = {},\n        source = [],\n        selected = false,\n        selectedValue = \"\";\n      this.$source.find(\"option\").each(function () {\n        var option = $(this);\n        if (option.val() === \"\") {\n          that.options.placeholder = option.text();\n          return;\n        }\n        map[option.text()] = option.val();\n        revMap[option.val()] = option.text();\n        source.push(option.text());\n        if (option.prop(\"selected\")) {\n          selected = option.text();\n          selectedValue = option.val();\n        }\n      });\n      this.map = map;\n      this.revMap = revMap;\n      if (selected) {\n        var triggerElement = false;\n        var triggerTarget = false;\n        var oldVal;\n        oldVal = this.$element.val();\n        if (oldVal !== selected) {\n          this.$element.val(selected);\n          triggerElement = true;\n        }\n        oldVal = this.$target.val();\n        if (oldVal !== selectedValue) {\n          this.$target.val(selectedValue);\n          triggerTarget = true;\n        }\n        this.$container.addClass(\"combobox-selected\");\n        this.selected = true;\n        if (triggerTarget) {\n          this.$target.trigger(\"change\");\n        }\n        if (triggerElement) {\n          this.$element.trigger(\"change\");\n        }\n      } else {\n        this.$container.removeClass(\"combobox-selected\");\n        this.selected = false;\n      }\n      return source;\n    },\n\n    transferAttributes: function () {\n      //console.log('transferAttributes');\n      this.options.placeholder =\n        this.$source.attr(\"data-placeholder\") || this.options.placeholder;\n      if (this.options.appendId !== \"undefined\") {\n        // keep the source id on the input, otherwise the label (which refers to it by id) will be lost\n        this.$element.attr(\"id\", this.$source.attr(\"id\"));\n        this.$source.attr(\n          \"id\",\n          this.$source.attr(\"id\") + this.options.appendId,\n        );\n        daComboBoxes[this.$element.attr(\"id\")] = this;\n      }\n      this.$menu.attr(\"id\", this.$element.attr(\"id\") + \"menu\");\n      // Set aria-controls now that things have ids\n      this.$element.attr(\"aria-controls\", this.$menu.attr(\"id\"));\n      this.$element.attr(\"aria-owns\", this.$menu.attr(\"id\"));\n      this.$button.attr(\"aria-controls\", this.$menu.attr(\"id\"));\n      this.$button.attr(\"aria-label\", this.$source.attr(\"aria-label\"));\n      if (this.$source.attr(\"aria-labelledby\")) {\n        this.$element.attr(\n          \"aria-labelledby\",\n          this.$source.attr(\"aria-labelledby\"),\n        );\n      } else {\n        this.$source.attr(\"aria-labelledby\", \"daMainQuestion\");\n      }\n      this.$button.attr(\n        \"aria-labelledby\",\n        this.$source.attr(\"aria-labelledby\"),\n      );\n      this.$button.attr(\n        \"aria-describedby\",\n        this.$source.attr(\"aria-describedby\"),\n      );\n      this.$element.attr(\"placeholder\", this.options.placeholder);\n      this.$target.prop(\"name\", this.$source.prop(\"name\"));\n      this.$target.val(this.$source.val());\n      this.$source.removeAttr(\"name\"); // Remove from source otherwise form will pass parameter twice.\n      this.$element.attr(\"required\", this.$source.attr(\"required\"));\n      this.$element.attr(\"rel\", this.$source.attr(\"rel\"));\n      this.$element.attr(\"title\", this.$source.attr(\"title\"));\n      this.$element.attr(\"class\", this.$source.attr(\"class\"));\n      if (this.$element.hasClass(\"daspaceafter\")) {\n        this.$element.removeClass(\"daspaceafter\");\n        this.$container.addClass(\"daspaceafter\");\n      }\n      this.$element.attr(\"tabindex\", this.$source.attr(\"tabindex\"));\n      this.$source.removeAttr(\"tabindex\");\n      if (!this.$target.val() && this.$source.data(\"default\")) {\n        var defaultVal = this.$source.data(\"default\");\n        this.$element.val(defaultVal);\n        this.$target.val(defaultVal);\n      }\n      this.$element.addClass(\"danovalidation\");\n      this.$source.addClass(\"danovalidation\");\n      if (this.$source.attr(\"disabled\") !== undefined) this.disable();\n    },\n\n    select: function () {\n      //console.log(\"select\");\n      var val = this.$menu.find(\".active\").attr(\"data-value\");\n      var oldVal;\n      var triggerElement = false;\n      var triggerTarget = false;\n      var triggerSource = false;\n      this.$container.parent().find(\".da-has-error\").remove();\n      oldVal = this.$element.val();\n      var newVal = this.updater(val);\n      if (oldVal !== newVal) {\n        this.$element.val(newVal);\n        triggerElement = true;\n      }\n      oldVal = this.$target.val();\n      if (oldVal !== this.map[val]) {\n        this.$target.val(this.map[val]); //.trigger(\"change\");\n        triggerTarget = true;\n      }\n      oldVal = this.$source.val();\n      if (oldVal !== this.map[val]) {\n        this.$source.val(this.map[val]);\n        triggerSource = true;\n      }\n      this.$container.addClass(\"combobox-selected\");\n      this.selected = true;\n      this.hide();\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      if (triggerElement) {\n        this.$element.trigger(\"change\");\n      }\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n      return;\n    },\n\n    manualSelect: function (val) {\n      //console.log(\"manualSelect\");\n      var oldVal;\n      var found = false;\n      var triggerSource = false;\n      var triggerTarget = false;\n      this.$container.parent().find(\".da-has-error\").remove();\n      if (val !== \"\" && this.revMap[val] !== undefined) {\n        this.$element.val(this.revMap[val]);\n        found = true;\n      } else {\n        this.$element.val(val);\n      }\n      oldVal = this.$target.val();\n      if (oldVal !== val) {\n        this.$target.val(val);\n        triggerTarget = true;\n      }\n      oldVal = this.$source.val();\n      if (oldVal !== val) {\n        this.$source.val(val);\n        triggerSource = true;\n      }\n      if (val !== \"\" && found) {\n        this.$container.addClass(\"combobox-selected\");\n        this.selected = true;\n      }\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      this.$element.trigger(\"change\");\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n      return;\n    },\n\n    updater: function (item) {\n      //console.log('updater');\n      return item;\n    },\n\n    show: function () {\n      //console.log(\"show\");\n      var pos = $.extend({}, this.$element.position(), {\n        height: this.$element[0].offsetHeight,\n      });\n      this.$menu\n        .insertAfter(this.$element)\n        .css({\n          top: pos.top + pos.height,\n          left: pos.left,\n        })\n        .show();\n\n      this.hidden = false;\n\n      this.$element.attr(\"aria-expanded\", true);\n      this.$button.attr(\"aria-expanded\", true);\n\n      this.shown = true;\n      return this;\n    },\n\n    hide: function () {\n      //console.log('hide');\n      this.$menu.hide();\n      this.hidden = true;\n      this.$element.on(\"blur\", $.proxy(this.blur, this));\n      this.$element.attr(\"aria-expanded\", false);\n      this.$button.attr(\"aria-expanded\", false);\n      this.shown = false;\n      return this;\n    },\n\n    lookup: function (event) {\n      //console.log(\"lookup\");\n      this.query = this.$element.val();\n      this.process(this.source);\n    },\n\n    process: function (items) {\n      var that = this;\n\n      items = $.grep(items, function (item) {\n        return that.matcher(item);\n      });\n\n      items = this.sorter(items);\n\n      if (!items.length) {\n        return this.shown ? this.hide() : this;\n      }\n\n      return this.render(items.slice(0, this.options.items)).show();\n    },\n\n    matcher: function (item) {\n      //console.log('matcher');\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase());\n    },\n\n    sorter: function (items) {\n      //console.log('sorter');\n      var beginswith = [],\n        caseSensitive = [],\n        caseInsensitive = [],\n        item;\n\n      while ((item = items.shift())) {\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) {\n          beginswith.push(item);\n        } else if (~item.indexOf(this.query)) {\n          caseSensitive.push(item);\n        } else {\n          caseInsensitive.push(item);\n        }\n      }\n\n      return beginswith.concat(caseSensitive, caseInsensitive);\n    },\n\n    highlighter: function (item) {\n      //console.log('highlighter');\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n      if (!query) {\n        return item;\n      }\n      return item.replace(\n        new RegExp(\"(\" + query + \")\", \"ig\"),\n        function ($1, match) {\n          return \"<b>\" + match + \"</b>\";\n        },\n      );\n    },\n\n    render: function (items) {\n      //console.log('render');\n      var that = this;\n\n      items = $(items).map(function (i, item) {\n        i = $(that.options.item)\n          .attr(\"data-value\", item)\n          .attr(\"aria-label\", item);\n        i.attr(\"id\", that.$element.attr(\"id\") + \"-option-\" + item);\n        i.html(that.highlighter(item));\n        return i[0];\n      });\n\n      this.setActive(items.first());\n      this.$menu.html(items);\n      return this;\n    },\n\n    setActive: function (elem) {\n      elem.addClass(\"active\").attr(\"aria-selected\", true);\n      this.$element.attr(\"aria-activedescendant\", elem.attr(\"id\"));\n    },\n\n    swapActive: function (oldElem, newElem) {\n      oldElem.removeClass(\"active\").attr(\"aria-selected\", false);\n      this.setActive(newElem);\n    },\n\n    next: function (event) {\n      //console.log('next');\n      var active = this.$menu.find('[aria-selected=\"true\"]');\n      var next = active.next();\n\n      if (!next.length) {\n        next = $(this.$menu.find(\"li\")[0]);\n      }\n\n      this.swapActive(active, next);\n    },\n\n    prev: function (event) {\n      //console.log('prev');\n      var active = this.$menu.find('[aria-selected=\"true\"]');\n      var prev = active.prev();\n\n      if (!prev.length) {\n        prev = this.$menu.find(\"li\").last();\n      }\n\n      this.swapActive(active, prev);\n    },\n\n    toggle: function (e) {\n      //console.log(\"toggle\");\n      if (!this.disabled) {\n        if (this.$container.hasClass(\"combobox-selected\")) {\n          this.clearAll();\n          this.$element.attr(\"aria-expanded\", false);\n          this.$button.attr(\"aria-expanded\", false);\n        } else {\n          if (this.shown) {\n            this.$element.attr(\"aria-expanded\", false);\n            this.$button.attr(\"aria-expanded\", false);\n            this.hide();\n          } else {\n            this.$element.attr(\"aria-expanded\", true);\n            this.$button.attr(\"aria-expanded\", true);\n            this.clearElement();\n            this.lookup();\n          }\n        }\n      }\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      return false;\n    },\n\n    clearAll: function () {\n      //console.log('clearAll');\n      var triggerElement = false;\n      var triggerSource = false;\n      var triggerTarget = false;\n      var oldVal;\n      oldVal = this.$element.val();\n      if (oldVal !== \"\") {\n        this.$element.val(\"\");\n        triggerElement = true;\n      }\n      oldVal = this.$source.val();\n      if (oldVal !== \"\") {\n        this.$source.val(\"\");\n        triggerSource = true;\n      }\n      oldVal = this.$target.val();\n      if (oldVal !== \"\") {\n        this.$target.val(\"\");\n        triggerTarget = true;\n      }\n      this.$container.removeClass(\"combobox-selected\");\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      if (triggerElement) {\n        this.$element.trigger(\"change\");\n      }\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n    },\n\n    clearElement: function () {\n      //console.log('clearElement');\n      this.$element.val(\"\").focus();\n    },\n\n    clearTarget: function () {\n      //console.log('clearTarget');\n      this.$source.val(\"\");\n      this.$target.val(\"\");\n      this.$container.removeClass(\"combobox-selected\");\n      this.selected = false;\n    },\n\n    refresh: function () {\n      //console.log('refresh');\n      this.source = this.parse();\n      this.options.items = this.source.length;\n    },\n\n    listen: function () {\n      //console.log('listen');\n      this.$element\n        .on(\"focus\", $.proxy(this.focus, this))\n        .on(\"change\", $.proxy(this.change, this))\n        .on(\"blur\", $.proxy(this.blur, this))\n        .on(\"keypress\", $.proxy(this.keypress, this))\n        .on(\"keyup\", $.proxy(this.keyup, this));\n\n      if (this.eventSupported(\"keydown\")) {\n        this.$element.on(\"keydown\", $.proxy(this.keydown, this));\n      }\n\n      this.$menu\n        .on(\"click\", $.proxy(this.click, this))\n        .on(\"mouseenter\", \"li\", $.proxy(this.mouseenter, this))\n        .on(\"mouseleave\", \"li\", $.proxy(this.mouseleave, this))\n        .on(\"mousedown\", \"li\", $.proxy(this.mousedown, this));\n\n      if (this.options.showButton && this.options.functionalButton) {\n        this.$button.on(\"click touchend\", $.proxy(this.toggle, this));\n      }\n    },\n\n    eventSupported: function (eventName) {\n      //console.log('eventSupported');\n      var isSupported = eventName in this.$element;\n      if (!isSupported) {\n        this.$element.setAttribute(eventName, \"return;\");\n        isSupported = typeof this.$element[eventName] === \"function\";\n      }\n      return isSupported;\n    },\n\n    move: function (e) {\n      //console.log(\"move\");\n      if (!this.shown) {\n        return;\n      }\n\n      switch (e.keyCode) {\n        case 9: // tab\n        case 13: // enter\n        case 27: // escape\n          e.preventDefault();\n          break;\n\n        case 38: // up arrow\n          e.preventDefault();\n          this.prev();\n          this.fixMenuScroll();\n          break;\n\n        case 40: // down arrow\n          e.preventDefault();\n          this.next();\n          this.fixMenuScroll();\n          break;\n      }\n      e.stopPropagation();\n    },\n\n    fixMenuScroll: function () {\n      //console.log('fixMenuScroll');\n      var active = this.$menu.find(\".active\");\n      if (active.length) {\n        this.$element.attr(\"aria-activedescendant\", active.attr(\"id\"));\n        var top = active.position().top;\n        var bottom = top + active.height();\n        var scrollTop = this.$menu.scrollTop();\n        var menuHeight = this.$menu.height();\n        if (bottom > menuHeight) {\n          this.$menu.scrollTop(scrollTop + bottom - menuHeight);\n        } else if (top < 0) {\n          this.$menu.scrollTop(scrollTop + top);\n        }\n      }\n    },\n\n    setActiveDescendant: function (e) {\n      if (this.mousedover) {\n        this.swapActive(this.$menu.find(\".active\"), $(e.currentTarget));\n      }\n    },\n\n    keydown: function (e) {\n      //console.log('keyDown');\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40, 38, 9, 13, 27]);\n      this.move(e);\n    },\n\n    keypress: function (e) {\n      //console.log('keyPress');\n      if (this.suppressKeyPressRepeat) {\n        return;\n      }\n      this.move(e);\n    },\n\n    keyup: function (e) {\n      //console.log(\"keyUp\");\n      switch (e.keyCode) {\n        case 40: // down arrow\n          if (!this.shown) {\n            this.toggle();\n          }\n          break;\n        case 39: // right arrow\n        case 38: // up arrow\n        case 37: // left arrow\n        case 36: // home\n        case 35: // end\n        case 16: // shift\n        case 17: // ctrl\n        case 18: // alt\n          break;\n\n        case 9: // tab\n        case 13: // enter\n          if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n          }\n          daFetchAjaxTimeoutFetchAfter = false;\n          daFetchAcceptIncoming = false;\n          if (!this.shown) {\n            return;\n          }\n          if (!this.selected) {\n            this.select();\n          } else {\n            var val = this.$element.val();\n            var opts = this.$menu.find(\"li\");\n            var n = opts.length;\n            for (var i = 0; i < n; ++i) {\n              if ($(opts[i]).attr(\"data-value\") == val) {\n                e.stopPropagation();\n                e.preventDefault();\n                $(opts[i]).click();\n                return false;\n              }\n            }\n          }\n          break;\n\n        case 27: // escape\n          if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n          }\n          daFetchAjaxTimeoutFetchAfter = false;\n          daFetchAcceptIncoming = false;\n          if (!this.shown) {\n            return;\n          }\n          this.hide();\n          break;\n\n        default:\n          if (this.options.lookupWhileTyping) {\n            this.clearTarget();\n            this.$target.val(this.$element.val());\n            this.lookup();\n          } else {\n            this.query = this.$element.val();\n          }\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n    },\n\n    focus: function (e) {\n      //console.log('focus');\n      this.focused = true;\n    },\n\n    blur: function (e) {\n      //console.log('blur');\n      var that = this;\n      this.focused = false;\n      var val = this.$element.val();\n      if (this.shown) {\n        var opts = this.$menu.find(\"li\");\n        var n = opts.length;\n        for (var i = 0; i < n; ++i) {\n          if ($(opts[i]).attr(\"data-value\") == val) {\n            $(opts[i]).click();\n            return;\n          }\n        }\n      }\n      var oldVal;\n      var triggerElement = false;\n      var triggerSource = false;\n      var triggerTarget = false;\n      if (this.clearIfNoMatch && !this.selected && val !== \"\") {\n        oldVal = this.$element.val();\n        if (oldVal !== \"\") {\n          this.$element.val(\"\");\n          triggerElement = true;\n        }\n        oldVal = this.$source.val();\n        if (oldVal !== \"\") {\n          this.$source.val(\"\");\n          triggerSource = true;\n        }\n        oldVal = this.$target.val();\n        if (oldVal !== \"\") {\n          this.$target.val(\"\"); //.trigger(\"change\");\n          triggerTarget = true;\n        }\n      }\n      if (!this.selected) {\n        oldVal = this.$target.val();\n        if (oldVal !== val) {\n          this.$target.val(val); //.trigger(\"change\");\n          triggerTarget = true;\n        }\n      }\n      if (triggerTarget) {\n        this.$target.trigger(\"change\");\n      }\n      if (triggerElement) {\n        this.$element.trigger(\"change\");\n      }\n      if (triggerSource) {\n        this.$source.trigger(\"change\");\n      }\n      if (!this.mousedover && this.shown) {\n        setTimeout(function () {\n          that.hide();\n        }, 200);\n      }\n    },\n\n    click: function (e) {\n      //console.log(\"click\");\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      daFetchAjaxTimeoutFetchAfter = false;\n      daFetchAcceptIncoming = false;\n      this.select();\n      this.$element.focus();\n    },\n\n    mouseenter: function (e) {\n      //console.log('mouseenter');\n      this.mousedover = true;\n      this.setActiveDescendant(e);\n    },\n\n    mousedown: function (e) {\n      this.mousedover = true;\n      this.setActiveDescendant(e);\n      this.mousedover = false;\n      if (!this.hidden) {\n        if (e.target.tagName == \"UL\") {\n          this.$element.off(\"blur\");\n        }\n      }\n    },\n\n    mouseleave: function (e) {\n      //console.log('mouseleave');\n      this.mousedover = false;\n      this.setActiveDescendant(e);\n    },\n  };\n\n  /* COMBOBOX PLUGIN DEFINITION\n   * =========================== */\n  $.fn.combobox = function (option) {\n    return this.each(function () {\n      var $this = $(this),\n        data = $this.data(\"combobox\"),\n        options = typeof option == \"object\" && option;\n      if (!data) {\n        $this.data(\"combobox\", (data = new Combobox(this, options)));\n      }\n      if (typeof option == \"string\") {\n        data[option]();\n      }\n    });\n  };\n\n  $.fn.combobox.defaults = {\n    bsVersion: \"5\",\n    menu: '<ul role=\"listbox\" class=\"typeahead typeahead-long dropdown-menu\"></ul>',\n    item: '<li role=\"option\" class=\"dropdown-item dapointer\"></li>',\n    appendId: \"combobox\",\n    buttonLabel: \"dropdown\",\n    clearIfNoMatch: false,\n    showButton: true,\n    functionalButton: true,\n    inputBox: \"Input box\",\n    lookupWhileTyping: true,\n  };\n\n  $.fn.combobox.Constructor = Combobox;\n})(window.jQuery);\n"],"names":["$","Combobox","element","options","this","extend","fn","combobox","defaults","template","$source","hasClass","$label","next","$container","setup","$element","find","$target","mousedover","attr","undefined","prop","$button","$float","$menu","menu","insertAfter","matcher","sorter","highlighter","clearIfNoMatch","shown","selected","refresh","transferAttributes","listen","prototype","constructor","before","hide","innerText","text","inputElement","detach","append","showButton","functionalButton","inputBox","buttonLabel","disable","disabled","addClass","enable","removeClass","parse","that","map","revMap","source","selectedValue","each","option","val","placeholder","push","triggerElement","triggerTarget","oldVal","trigger","appendId","daComboBoxes","removeAttr","data","defaultVal","select","triggerSource","parent","remove","newVal","updater","manualSelect","found","item","show","pos","position","height","offsetHeight","css","top","left","hidden","on","proxy","blur","lookup","event","query","process","items","grep","length","render","slice","toLowerCase","indexOf","beginswith","caseSensitive","caseInsensitive","shift","concat","replace","RegExp","$1","match","i","html","setActive","first","elem","swapActive","oldElem","newElem","active","prev","last","toggle","e","clearAll","clearElement","preventDefault","stopPropagation","focus","clearTarget","change","keypress","keyup","eventSupported","keydown","click","mouseenter","mouseleave","mousedown","eventName","isSupported","setAttribute","move","keyCode","fixMenuScroll","bottom","scrollTop","menuHeight","setActiveDescendant","currentTarget","suppressKeyPressRepeat","inArray","daFetchAjaxTimeoutFetchAfter","daFetchAcceptIncoming","opts","n","lookupWhileTyping","focused","setTimeout","target","tagName","off","$this","bsVersion","Constructor","window","jQuery"],"mappings":"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"}