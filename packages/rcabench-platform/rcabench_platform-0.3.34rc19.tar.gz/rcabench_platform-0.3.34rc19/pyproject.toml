[project]
name = "rcabench-platform"
version = "0.3.34rc19"
description = "An experiment framework for Root Cause Analysis"
readme = "README.md"
authors = [ #
    { name = "Nugine", email = "xuyangwang@link.cuhk.edu.cn" },
    { name = "Lincyaw", email = "814750204@qq.com" },
    { name = "rainystevn1", email = "rainystevn1@gmail.com" },
    { name = "YifanYang6", email = "yifanyang6@link.cuhk.edu.cn" },
]
requires-python = ">=3.10"
dependencies = [ #
    "altair>=5.5.0",
    "backports-strenum>=1.3.1 ; python_full_version < '3.11'",
    "clickhouse-connect>=0.8.18",
    "drain3>=0.9.11",
    "graphviz>=0.21",
    "huggingface-hub>=0.33.4",
    "kaleido>=1.0.0",
    "kubernetes>=33.1.0",
    "loguru>=0.7.3",
    "matplotlib>=3.10.5",
    "minio>=7.2.15",
    "neo4j>=5.28.1",
    "networkx>=3.4.2",
    "numpy>=2.2.6",
    "pandas>=2.3.1",
    "plotly>=6.2.0",
    "polars>=1.31.0",
    "pyarrow>=20.0.0",
    "python-dotenv>=1.1.1",
    "rcabench>=1.1.39",
    "requests>=2.32.4",
    "scikit-learn>=1.7.0",
    "scipy>=1.15.0",
    "tomli>=2.2.1",
    "tqdm>=4.67.1",
    "typer>=0.16.0",
    "vega-datasets>=0.9.0",
    "vegafusion>=2.0.2",
    "duckdb>=1.3.2",
    "duckdb>=1.3.2",
]

[project.scripts]
rca = "rcabench_platform.v2.cli.online:main"
label = "rcabench_platform.v2.tools.label.app:run_streamlit"

[project.optional-dependencies]
analysis = [
    "graphviz>=0.20.3",
    "matplotlib>=3.10.3",
    "networkx>=3.4.2",
    "python-dateutil>=2.9.0.post0",
    "pyvis>=0.3.2",
    "sqlalchemy>=2.0.43",
    "streamlit>=1.49.0",
]

[dependency-groups]
dev = [ #
    "ipykernel>=6.29.5",
    "ipywidgets>=8.1.7",
    "marimo[recommended]>=0.14.10",
    "kubernetes-stubs-elephant-fork>=33.1.0",
    "plotly>=6.2.0",
    "pyqt6>=6.9.1",
    "pyright>=1.1.403",
    "ruff>=0.12.3",
    "vegafusion>=2.0.2",
    "vl-convert-python>=1.8.0",
    "uv-bump>=0.1.2",
    "black>=25.1.0",
]

[build-system]
requires = ["uv_build>=0.7.12,<0.8.0"]
build-backend = "uv_build"


[tool.ruff]
cache-dir = ".cache/ruff"
line-length = 120

[tool.ruff.lint]
select = [
    "E",  # https://docs.astral.sh/ruff/rules/#error-e
    "F",  # https://docs.astral.sh/ruff/rules/#pyflakes-f
    "I",  # https://docs.astral.sh/ruff/rules/#isort-i
    "UP", # https://docs.astral.sh/ruff/rules/#pyupgrade-up
]
ignore = ["F401", "UP038"]

[tool.pyright]
exclude = [ #
    ".git",
    "**/__pycache__",
    ".cache",
    ".idea",
    ".vscode",
    ".venv",
    ".devbox",
    "db/",
    "data/",
    "temp/",
    "logs/",
    "vendor/",
    "output/",
]

[tool.marimo.runtime]
output_max_bytes = 50_000_000
