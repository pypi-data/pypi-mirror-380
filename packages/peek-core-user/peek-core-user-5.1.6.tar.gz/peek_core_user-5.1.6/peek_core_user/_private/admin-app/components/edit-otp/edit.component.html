
<nz-card nzTitle="Edit One-time Password Settings">
    <div class="card-content">
        <p *ngIf="(items$ | async)?.length === 0" class="empty-message">
            There are no OTP Settings, Please create one with the Add button
        </p>

        <nz-table 
            #basicTable 
            [nzData]="items$ | async"
            
            [nzFrontPagination]="false">
            <thead>
                <tr>
                    <th>Number of Words</th>
                    <th>Number of Candidates</th>
                    <th>Valid Period in Seconds</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of basicTable.data">
                    <td>
                        <nz-input-number
                            [(ngModel)]="item.otpNumberOfWords"
                            (ngModelChange)="updateConfidenceStat(item)"
                            [nzMin]="1"
                            [nzMax]="item.otpNumberOfCandidates"
                            [nzStep]="1">
                        </nz-input-number>
                    </td>
                    <td>
                        <nz-input-number
                            [(ngModel)]="item.otpNumberOfCandidates"
                            (ngModelChange)="updateConfidenceStat(item)"
                            [nzMin]="1"
                            [nzStep]="1">
                        </nz-input-number>
                    </td>
                    <td>
                        <nz-input-number
                            [(ngModel)]="item.otpValidSeconds"
                            (ngModelChange)="updateConfidenceStat(item)"
                            [nzMin]="60"
                            [nzStep]="60">
                        </nz-input-number>
                    </td>
                </tr>
            </tbody>
        </nz-table>

        <nz-divider></nz-divider>

        <nz-statistic
            [nzValue]="(otpSettingConfidenceStatistics$ | async)?.confidence | number:'1.0-6'"
            [nzTitle]="'Strength of One-time Password Settings'"
            [nzSuffix]="'%'"
            [nzValueStyle]="(otpSettingConfidenceStatistics$ | async)?.style">
        </nz-statistic>

        <div class="table-footer">
            <nz-space>
                <button *nzSpaceItem nz-button nzType="primary" (click)="save()">
                    <i nz-icon nzType="save"></i>
                    Save
                </button>
                <button *nzSpaceItem nz-button nzType="default" (click)="loader.load()">
                    <i nz-icon nzType="reload"></i>
                    Reset
                </button>
            </nz-space>
        </div>
    </div>
</nz-card>