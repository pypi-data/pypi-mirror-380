<ng-template #showUserLogin>
    <peek-core-user-field-login-simple></peek-core-user-field-login-simple>
</ng-template>

<ng-container
    *ngIf="
        (userLoginWizardService.setting$ | async).showUsersAsList;
        else showUserLogin
    "
>
    <div class="peek-nav-section">
        <div class="btn-group">
            <button
                nz-button
                nzSize="large"
                nzType="default"
                (click)="gotoPreviousLoginStepIndex()"
                [disabled]="
                    (loginStepIndex$ | async) <= LoginStep.STEP_SELECT_USER
                "
            >
                <span nz-icon nzType="left"></span>
                Back
            </button>
        </div>
    </div>

    <div class="plugin-user">
        <div class="login-steps-header">
            <nz-steps [nzCurrent]="loginStepIndex$ | async" nzProgressDot>
                <nz-step nzTitle="Select User"></nz-step>
                <nz-step nzTitle="Authenticate"></nz-step>
                <nz-step nzTitle="Vehicle"></nz-step>
            </nz-steps>
        </div>

        <div [ngSwitch]="loginStepIndex$ | async">
            <ng-container *ngSwitchCase="LoginStep.STEP_SELECT_USER">
                <peek-core-user-field-login-step-user></peek-core-user-field-login-step-user>
            </ng-container>

            <ng-container *ngSwitchCase="LoginStep.STEP_ENTER_VEHICLE">
                <peek-core-user-field-login-step-vehicle></peek-core-user-field-login-step-vehicle>
            </ng-container>

            <ng-container *ngSwitchCase="LoginStep.STEP_AUTHENTICATE">
                <peek-core-user-field-login-step-authenticate></peek-core-user-field-login-step-authenticate>
            </ng-container>
        </div>
    </div>
</ng-container>
