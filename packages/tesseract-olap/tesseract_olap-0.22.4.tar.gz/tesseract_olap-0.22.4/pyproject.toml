[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[project]
name = "tesseract-olap"
version = "0.22.4"
description = "A semantic layer for your data."
requires-python = ">=3.9, <4.0"
dynamic = [ "classifiers" ]
readme = "PACKAGE.md"
authors = [
    {name = "Francisco Abarzua", email = "francisco@datawheel.us"},
    {name = "Jelmy Hermosilla", email = "jelmy@datawheel.us"},
    {name = "Samuel Osorio", email = "samuel@datawheel.us"},
]
maintainers = [
    {name = "Francisco Abarzua", email = "francisco@datawheel.us"},
]
license = { text = "Proprietary" }
dependencies = [
    "fnv-c (~=0.2)",
    "httpx (~=0.18)",
    "immutables (~=0.16)",
    "lfudacache (==0.0.2)",
    "lxml (>=4.6)",
    "orjson (~=3.8)",
    "polars (~=1.24)",
    "pydantic (~=2.11)",
    "pyparsing (==3.2.3)",
    "PyPika (~=0.48.0)",
    "python-dateutil (>=2.9.0.post0, <3.0)",
    "strenum (~=0.4)",
    "typing-extensions (>=4.5)",
    "xlsxwriter (~=3.2)",
    "xmlschema (~=3.3)",
]

[project.optional-dependencies]
clickhouse = [
    "clickhouse-cityhash (>=1.0.2.4)",
    "clickhouse-connect (>=0.8.16)",
    "clickhouse-driver[lz4] (>=0.2.0)",
]
redis = [
    "redis (>=5.0, <6.0)",
]

[project.urls]
repository = "https://github.com/Datawheel/tesseract-olap"

[tool.poetry]
requires-poetry = ">=2.0"
classifiers = [
    "Topic :: Software Development :: Libraries :: Python Modules"
]

[tool.poetry.group.dev.dependencies]
sqlparse = "^0.5.0"
types-lxml = "^2024.11.8"
uvicorn = { extras = ["standard"], version = "^0.34.0" }

[tool.poetry.group.test.dependencies]
logiclayer = "^0.4.0"
pytest = "^8.0.0"
pytest-asyncio = "^0.20.0"
tomli = "^2.0.1"

[tool.poetry.scripts]
bump_version = "scripts.version:bump_version"
etch_version = "scripts.version:write_in_library"

[tool.pyright]
pythonVersion = "3.9"
venv = ".venv"
venvPath = "."
reportPrivateImportUsage = false

[tool.ruff]
target-version = "py39"

[tool.ruff.lint]
ignore = ["ANN003", "D107", "FA100", "N818", "RET504"]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["ANN201", "D103", "S101"]
"tesseract_olap/query/requests.py" = ["ANN206", "TRY004"]

[tool.ruff.lint.flake8-bugbear]
extend-immutable-calls = [
    "fastapi.Depends", "fastapi.params.Depends",
    "fastapi.Query", "fastapi.params.Query",
    "fastapi.Header", "fastapi.params.Header",
]

[tool.ruff.lint.pydocstyle]
ignore-decorators = ["typing.overload"]
