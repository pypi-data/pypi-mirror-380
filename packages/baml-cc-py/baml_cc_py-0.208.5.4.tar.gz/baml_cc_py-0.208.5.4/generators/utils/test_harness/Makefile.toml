#---------------------------------
# Integration test tasks
#---------------------------------
[tasks.add-go-test]
script = [
    "echo \"Adding test: ${@}\"",
    "cd ../../data/",
    "if [ ! -d \"${@}\" ]; then",
    "    mkdir -p ${@}",
    "fi",
    "cd ${@}",
    "if [ ! -d \"baml_src\" ]; then",
    "    mkdir -p baml_src",
    "    touch baml_src/main.baml",
    "fi",
    "mkdir -p go",
    "echo \"Creating Go main file...\"",
    "cat > go/main.go << 'EOF'\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello from test\")\n}\nEOF",
    "echo \"Added test for ${@}!\""
]

[tasks.add-python-test]
script = [
    "echo \"Adding test: ${@}\"",
    "cd ../../data/",
    "if [ ! -d \"${@}\" ]; then",
    "    mkdir -p ${@}",
    "fi",
    "cd ${@}",
    "if [ ! -d \"baml_src\" ]; then",
    "    mkdir -p baml_src",
    "    touch baml_src/main.baml",
    "fi",
    "mkdir -p py",
    "echo \"Creating Python main file...\"",
    "cat > py/main.py << 'EOF'\nprint(\"Hello from test\")\nEOF",
    "echo \"Added test for ${@}!\""
]