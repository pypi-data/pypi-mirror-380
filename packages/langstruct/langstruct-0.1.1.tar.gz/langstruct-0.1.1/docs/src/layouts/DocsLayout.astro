---
import Layout from './Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'

export interface Props {
	title: string
	description?: string
}

const { title, description } = Astro.props

// Navigation structure
const navigation = [
	{
		title: "Getting Started",
		items: [
			{ title: "Introduction", href: "/" },
			{ title: "Installation", href: "/installation/" },
			{ title: "Quick Start", href: "/quickstart/" },
			{ title: "Getting Started", href: "/getting-started/" }
		]
	},
	{
		title: "Core Concepts", 
		items: [
			{ title: "Optimization", href: "/optimization/" },
			{ title: "Source Grounding", href: "/source-grounding/" }
		]
	},
	{
		title: "Examples",
		items: [
			{ title: "Overview", href: "/examples/" },
			{ title: "Financial Documents", href: "/examples/financial-documents/" },
			{ title: "Medical Records", href: "/examples/medical-records/" }
		]
	}
]

const pathname = new URL(Astro.request.url).pathname
---

<Layout title={title} description={description}>
	<Header />
	
	<div class="flex min-h-screen bg-gray-50 dark:bg-gray-900">
		<!-- Sidebar -->
		<aside class="hidden lg:flex w-64 flex-col fixed inset-y-0 left-0 pt-16 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700">
			<div class="flex-1 overflow-y-auto px-4 py-6">
				<nav class="space-y-6">
					{navigation.map((section) => (
						<div key={section.title}>
							<h3 class="text-xs font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-3">
								{section.title}
							</h3>
							<ul class="space-y-1">
								{section.items.map((item) => (
									<li key={item.href}>
										<a 
											href={item.href}
											class={`block px-3 py-2 text-sm rounded-md transition-colors duration-200 ${
												pathname === item.href 
													? 'bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 font-medium border-l-2 border-primary-500 dark:border-primary-400'
													: 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700'
											}`}
										>
											{item.title}
										</a>
									</li>
								))}
							</ul>
						</div>
					))}
				</nav>
			</div>
		</aside>

		<!-- Main content -->
		<main class="flex-1 lg:pl-64">
			<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
				<article class="prose prose-lg dark:prose-dark max-w-none">
					<slot />
				</article>
			</div>
		</main>
	</div>

	<Footer />
</Layout>