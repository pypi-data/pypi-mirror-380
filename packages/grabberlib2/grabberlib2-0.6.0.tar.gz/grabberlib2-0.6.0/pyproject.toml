[project]
name = "grabberlib2"
version = "0.6.0"
description = ""
readme = "README.md"
requires-python = ">=3.10,<4.0"
dependencies = [
    "aerich==0.7.2",
    "aiogram==3.22.0",
    "aiograph>=0.2",
    "aiosqlite>=0.20.0",
    "alive-progress==3.1.5",
    "beautifulsoup4==4.12.3",
    "boltons>=24.1.0",
    "boto3==1.35.38",
    "casefy==0.1.7",
    "cement==3.0.12",
    "colorama==0.4.6",
    "colorlog==6.8.2",
    "crawlee[all,beautifulsoup,parsel,playwright]==0.6.9",
    "defusedxml==0.7.1",
    "environs==14.1.1",
    "httpx[http2]==0.28.1",
    "jinja2==3.1.3",
    "lxml==5.2.1",
    "olefile==0.47",
    "patool==2.1.1",
    "pgcli>=4.1.0",
    "pillow==10.3.0",
    "pybypass==2.0.1",
    "python-telegram-bot[callback-data,job-queue,rate-limiter,webhooks]>=21.7",
    "requests-html==0.10.0",
    "requests==2.31.0",
    "rich==13.7.1",
    "selenium-stealth>=1.0.6",
    "selenium==4.24.0",
    "streamlit-extras==0.4.3",
    "streamlit==1.35.0",
    "telegraph==2.2.0",
    "tenacity==8.2.3",
    "tortoise-orm[asyncpg,psycopg]>=0.22.1",
    "tqdm==4.66.4",
    "undetected-chromedriver>=3.5.5",
    "unipath==1.1",
    "webdriver-manager==4.0.2",
    "nest-asyncio>=1.6.0",
    "url-parser>=3.0.3",
    "ada-url>=1.15.3",
    "you-get>=0.4.1730",
    "unidecode>=1.3.8",
    "telethon>=1.39.0",
    "pydoll-python>=1.5.1",
    "cloudscraper>=1.2.71",
    "yt-dlp>=2025.8.11",
    "browser-cookie3>=0.20.1",
    "tweepy>=4.16.0",
]

[tool.uv]
dev-dependencies = [
    "ipython==8.28.0",
    "mypy>=1.15.0",
    "nest-asyncio==1.6.0",
    "pendulum==3.0.0",
    "ruff==0.11.9",
    "types-beautifulsoup4==4.12.0.20250516",
    "types-boltons==25.0.0.20250516",
    "types-tqdm==4.67.0.20250516",
]
python-preference = "only-system"
concurrent-builds = 10
concurrent-downloads = 10
concurrent-installs = 10
package = true

[tool.aerich]
tortoise_orm = "src.database.config.TORTOISE_CONFIG"
location = "./migrations"
src_folder = "./."

[project.scripts]
grabber = "grabber:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

# [tool.hatch.build.targets.sdist]
# include = [
#     "src/grabber/**/*.py",
#     "assets/**/*",
#     "./*.py",
# ]
# artifacts = [
#     ".env",
#     ".in",
#     "bin/"
# ]
#
[tool.hatch.build.targets.wheel]
packages = [
    "src/",
    "src/grabber",
    # "assets/**/*",
    # "./*.py",
]
[tool.ruff]
target-version = "py310"
line-length = 120
fix = true
exclude = ["migrations", ".venv"]

[tool.ruff.lint]
select = [
  # flake8-2020
  "YTT",
  # flake8-bandit
  "S",
  # flake8-bugbear
  "B",
  # flake8-builtins
  "A",
  # flake8-comprehensions
  "C4",
  # flake8-debugger
  "T10",
  # flake8-simplify
  "SIM",
  # isort
  "I",
  # mccabe
  "C90",
  # pycodestyle
  "E", "W",
  # pyflakes
  "F",
  # pygrep-hooks
  "PGH",
  # pyupgrade
  "UP",
  # ruff
  "RUF",
  # tryceratops
  "TRY",
]
ignore = [
  "D100",
  "D101",
  "D102",
  "D103",
  "D104",
  "D106",
  "D203",
  "D212",
  # LineTooLong
  "E501",
  # DoNotAssignLambda
  "E731",
  "D",  # Missing or badly formatted docstrings
  "E501",  # Let the formatter handle long lines
  "TRY003"  # Ignore passing long messages to exceptions
]

[tool.ruff.lint.per-file-ignores]
"**/{tests}/*" = ["S101", "S106", "S603"]
# Ignore `E402` (import violations) in all `__init__.py` files, and in selected subdirectories.
"__init__.py" = ["E402"]
# Ignore star imports in Django settings modules
# "**/settings.py" = ["F403", "F405"]
# "service_hub/apps/core/widgets.py" = ["S308"]

[tool.ruff.lint.isort]
section-order = ["future", "standard-library", "third-party", "first-party", "local-folder"]


[tool.mypy]
check_untyped_defs = false
disallow_any_generics = true
disallow_any_unimported = false
disallow_incomplete_defs = false
disallow_untyped_calls = true
disallow_untyped_decorators = true
disallow_untyped_defs = false
files = ['**/*.py']
ignore_errors = false
ignore_missing_imports = true
implicit_reexport = false
no_implicit_optional = true
python_version = "3.13"
show_error_codes = true
strict_equality = true
strict_optional = true
warn_no_return = true
warn_redundant_casts = true
warn_return_any = true
warn_unreachable = true
warn_unused_configs = true
warn_unused_ignores = true
exclude = '''(?x)(
  /tests/plugins/
  | /bin/
  | /\.cache/
  | /config/
  | /_local$
  | /\.mypy_cache/
  | /\.pytest_cache/
  | /\.logfire/
  | /\.github/
  | /\.coverage/
  | /\.dockerignore$
  | /\.git/
  | /\.gitignore$
  | /\.editorconfig$
  | /Makefile$
  | \.yml$
  | \.yaml$
  | \.toml$
  | \.json$
  | \.md$
  | \.lock$
  | \.xml$
  | \.pyi$
  | \.pyc$
  | /__pycache__/
)'''
# Parallel execution
incremental = true
# Cache config
cache_dir = ".mypy_cache"

[[tool.mypy.overrides]]
module = ["telegraph", "url_parser"]
ignore_missing_imports = true

