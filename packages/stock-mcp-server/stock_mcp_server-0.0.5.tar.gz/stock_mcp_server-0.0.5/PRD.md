# Stock MCP Server - 产品需求文档 (PRD)

## 1. 项目概述

### 1.1 项目背景
本项目旨在开发一个基于Model Context Protocol (MCP)的股票数据服务器，为AI助手提供全面的中国A股市场数据分析能力。通过MCP协议，AI助手可以直接调用本服务获取上证指数、市场数据、技术指标、新闻分析和投资建议。

### 1.2 项目目标
- 提供完整的A股市场数据查询接口（指数、价格、成交量、技术指标等）
- 实时抓取和分析当日重要股市新闻
- 基于数据和新闻情绪生成智能投资建议
- 通过uvx配置，实现即插即用的MCP服务
- 发布到PyPI，方便用户安装和使用

### 1.3 目标用户
- AI开发者：需要为AI助手添加股市数据分析能力
- 量化交易开发者：需要快速获取市场数据和分析
- 个人投资者：通过AI助手获取投资建议
- 金融从业者：需要快速获取市场概况和分析报告

## 2. 功能需求

### 2.1 核心功能模块

#### 2.1.1 上证指数数据模块
**优先级：P0（必须实现）**

功能描述：
- 获取上证指数(000001.SH)全方位数据

##### A. 基础行情数据
- **实时行情**：
  - 当前点位、开盘价、收盘价、最高价、最低价
  - 昨收价、涨跌额、涨跌幅、涨跌幅百分比
  - 振幅、量比、换手率
  - 成交量（手）、成交额（元）
  - 60日平均成交额
  
- **历史K线**：
  - 日K线、周K线、月K线、季K线、年K线
  - 5分钟、15分钟、30分钟、60分钟K线
  - 前复权、后复权、不复权数据
  - OHLCV数据（开高低收成交量）

##### B. 市场宽度指标（Market Breadth）
- **涨跌统计**：
  - 上涨家数、下跌家数、平盘家数
  - 涨停家数、跌停家数
  - 连续涨停家数、连续跌停家数
  - 破板家数（打开涨停/跌停）
  
- **振幅分布**：
  - 涨幅超5%家数、跌幅超5%家数
  - 涨幅超7%家数、跌幅超7%家数
  - 创60日新高家数、创60日新低家数
  - 创历史新高家数、创历史新低家数

##### C. 成交结构分析
- **成交分布**：
  - 大单买入/卖出（>50万）
  - 中单买入/卖出（10-50万）
  - 小单买入/卖出（<10万）
  - 超大单买入/卖出（>100万）
  
- **盘口数据**：
  - 委比（委买委卖比例）
  - 委差（委买委卖差额）
  - 内盘、外盘
  - 内外盘比

##### D. 市场估值指标
- **整体估值**：
  - 加权平均市盈率（PE）
  - 中位数市盈率
  - 加权平均市净率（PB）
  - 中位数市净率
  - 平均股息率
  - 平均市销率（PS）
  - 平均市现率（PCF）
  
- **市场规模**：
  - 总市值
  - 流通市值
  - 平均流通市值
  - 自由流通市值占比

##### E. 资金流向数据
- **北向资金（沪股通）**：
  - 今日流入/流出金额
  - 今日净买入额
  - 历史累计净买入
  - 持股市值
  - 持股占比
  
- **主力资金**：
  - 主力净流入
  - 超大单净流入
  - 大单净流入
  - 中单净流入
  - 小单净流入
  - 主力资金流入/流出榜
  
- **融资融券**：
  - 融资余额
  - 融资买入额
  - 融资偿还额
  - 融券余额
  - 融券卖出量
  - 融券偿还量
  - 融资融券余额
  - 融资融券净买入

##### F. 市场情绪相关
- **成交情绪**：
  - 两市总成交额
  - 两市成交额占GDP比例
  - 破净股数量
  - 破发股数量
  - ST股数量
  
- **新股相关**：
  - 新股申购数据
  - 新股上市数据
  - IPO募资金额
  - 新股首日涨幅统计

##### G. 特色数据
- **龙虎榜**：
  - 上榜股票数量
  - 上榜原因统计
  - 机构买入/卖出金额
  - 游资买入/卖出金额
  
- **大宗交易**：
  - 大宗交易笔数
  - 大宗交易总额
  - 折溢价率统计
  
- **限售解禁**：
  - 本周解禁市值
  - 本月解禁市值
  - 解禁股数量

MCP Tools定义：
```python
# Tool 1: get_market_data
# 综合获取市场数据（整合了实时行情、历史K线、市场宽度、估值、成交结构）
# 输入：
#   - data_type: 数据类型（realtime/history/breadth/valuation/turnover/all）
#   - index_code: 指数代码（默认"000001"上证指数）
#   - date: 日期（可选）
#   - period: K线周期（1m/5m/15m/30m/60m/d/w/m/q/y）
#   - adjust: 复权方式（qfq/hfq/none）
# 输出：根据data_type返回对应的市场数据
```

#### 2.1.2 技术指标分析模块
**优先级：P0（必须实现）**

功能描述：
- 计算全方位技术指标（50+指标）

##### A. 趋势类指标（Trend Indicators）
- **移动平均线**：
  - SMA（简单移动平均）：5/10/20/30/60/120/250日
  - EMA（指数移动平均）：12/26/50日
  - WMA（加权移动平均）
  - DEMA（双指数移动平均）
  - TEMA（三重指数移动平均）
  - ZLEMA（零延迟指数移动平均）
  
- **趋势指标**：
  - MACD（移动平均收敛散度）：DIF、DEA、MACD柱
  - DMI/ADX（动向指标/平均趋向指数）：+DI、-DI、ADX、ADXR
  - TRIX（三重指数平滑移动平均）
  - DMA（平行线差指标）
  - EXPMA（指数平滑移动平均）
  - VHF（纵横指标）
  - Aroon（阿隆指标）：AroonUp、AroonDown
  - CCI（顺势指标）
  - Supertrend（超级趋势）
  - Parabolic SAR（抛物线指标）
  - Ichimoku Cloud（一目均衡表）：转换线、基准线、先行带A/B

##### B. 动量类指标（Momentum Indicators）
- **振荡指标**：
  - RSI（相对强弱指标）：6/12/24日
  - KDJ（随机指标）：K、D、J值
  - Stochastic（随机摆动指标）：%K、%D
  - Williams %R（威廉指标）
  - ROC（变动率指标）
  - Momentum（动量指标）
  - TSI（真实强弱指标）
  - Ultimate Oscillator（终极震荡指标）
  - Awesome Oscillator（动量震荡指标）
  
- **压力支撑**：
  - Pivot Points（枢轴点）：R1/R2/R3、S1/S2/S3
  - Fibonacci Retracement（斐波那契回调）
  - Support & Resistance（支撑与阻力位）

##### C. 波动类指标（Volatility Indicators）
- **波动率指标**：
  - BOLL（布林带）：上轨、中轨、下轨、带宽
  - ATR（真实波动幅度）
  - Keltner Channel（肯特纳通道）
  - Donchian Channel（唐奇安通道）
  - Standard Deviation（标准差）
  - Historical Volatility（历史波动率）
  - Envelope（包络线）
  - Chandelier Exit（吊灯止损）

##### D. 成交量类指标（Volume Indicators）
- **量能指标**：
  - VOL（成交量）：5/10/20日均量
  - OBV（能量潮）
  - MFI（资金流量指标）
  - CMF（蔡金资金流量）
  - EMV（简易波动指标）
  - VWAP（成交量加权平均价）
  - VWMA（成交量加权移动平均）
  - AD Line（累积派发线）
  - ADL（累积/派发线）
  - PVT（价量趋势指标）
  - Force Index（力量指数）
  - Elder's Force Index（艾尔德力度指数）
  - NVI（负成交量指标）
  - PVI（正成交量指标）

##### E. 市场强度指标（Market Strength）
- **买卖力道**：
  - BRAR（人气意愿指标）：BR、AR
  - CR（能量指标）：CR、MA1、MA2、MA3、MA4
  - VR（成交量比率）
  - PSY（心理线）
  - BIAS（乖离率）：5日、10日、20日
  - MASS（梅斯线）
  - Elder Ray（艾尔德射线）：Bull Power、Bear Power

##### F. 趋势强度指标
- **趋势确认**：
  - ADX（平均趋向指数）
  - Trend Intensity Index（趋势强度指数）
  - Directional Movement（方向性移动）
  - Vortex Indicator（涡流指标）
  - Know Sure Thing（KST）
  - QStick（蜡烛图震荡指标）

##### G. 综合类指标
- **综合分析**：
  - MTM（动量指标）
  - WVAD（威廉变异离散量）
  - Coppock Curve（估波曲线）
  - Elder's Force Index（艾尔德强力指数）
  - Price Channel（价格通道）
  - Linear Regression（线性回归）
  - Hurst Exponent（赫斯特指数）

##### H. 特色指标
- **中国特色**：
  - 涨速（分时涨速）
  - 量比
  - 委比、委差
  - 五档盘口分析
  - 主力成本分布
  - 筹码分布
  - 资金博弈指标

MCP Tools定义：
```python
# Tool 2: calculate_indicators
# 计算技术指标（整合所有技术指标计算功能）
# 输入：
#   - indicators: 指标列表（ma/ema/macd/rsi/kdj/boll/dmi等，支持多个）
#   - category: 指标类别（trend/momentum/volatility/volume/all）
#   - params: 参数配置（如周期、敏感度等）
#   - period: 计算周期（d/w/m）
#   - start_date, end_date: 日期范围
# 输出：
#   - 技术指标计算结果
#   - 指标信号（金叉/死叉/超买/超卖等）
#   - 综合买卖建议
```

#### 2.1.3 市场情绪指数模块
**优先级：P1（重要实现）**

功能描述：
- 多维度市场情绪分析系统

##### A. 综合情绪指数
- **核心情绪指标**：
  - 综合情绪指数（0-100分）
  - 情绪等级：极度恐慌/恐慌/中性/乐观/极度乐观
  - 情绪变化趋势
  - 历史情绪对比

##### B. 成交量情绪
- **量能对比**：
  - 成交量/20日均量比值
  - 成交额/20日均额比值
  - 量比指标
  - 换手率水平
  - 放量/缩量统计
  
##### C. 涨跌情绪
- **市场结构**：
  - 上涨家数占比
  - 涨停家数占比
  - 连板股数量
  - 破板率
  - 跌停家数占比
  - 创新高/新低家数对比

##### D. 振幅情绪
- **波动分析**：
  - 平均振幅
  - 超5%涨跌幅占比
  - VIX恐慌指数（中国版）
  - 跳空缺口统计
  
##### E. 资金情绪
- **资金流向**：
  - 北向资金净流入
  - 主力资金净流入
  - 融资买入占比
  - 融资余额变化
  - 大单净流入

##### F. 新闻情绪
- **舆情分析**：
  - 新闻正面/负面比例
  - 政策友好度
  - 监管态度
  - 媒体热度
  - 社交媒体情绪

##### G. 市场特征情绪
- **微观结构**：
  - 破净股占比
  - 破发股占比
  - ST股活跃度
  - 新股活跃度
  - 退市风险股数量

##### H. 机构情绪
- **机构行为**：
  - 机构调研频率
  - 机构持仓变化
  - 基金仓位指数
  - 公募基金申购/赎回
  - 私募基金仓位

##### I. 技术情绪
- **技术面情绪**：
  - 趋势多头/空头比例
  - 均线多头排列占比
  - 金叉/死叉统计
  - 超买/超卖占比

MCP Tools定义：
```python
# Tool 3: get_money_flow
# 获取资金流向数据（北向资金、融资融券、主力资金）
# 输入：
#   - date: 日期（可选）
#   - flow_type: 资金类型（north/margin/main/all）
# 输出：
#   - 北向资金流入流出、净买入
#   - 融资融券余额、买入卖出额
#   - 主力资金、超大单、大中小单净流入

# Tool 4: get_sentiment_analysis
# 市场情绪分析（整合情绪指数、趋势、极端情绪分析）
# 输入：
#   - date: 日期（可选，默认今天）
#   - dimension: 维度（all/volume/money/news/technical）
#   - days: 历史趋势天数（默认30天）
#   - include_trend: 是否包含趋势分析（true/false）
# 输出：
#   - 综合情绪指数值（0-100分）
#   - 各维度得分详情
#   - 情绪等级和解读
#   - 历史情绪趋势（可选）
#   - 极端情绪分析
```

#### 2.1.4 新闻抓取与分析模块
**优先级：P0（必须实现）**

功能描述：
- 全方位新闻采集与智能分析

##### A. 新闻数据源
- **财经媒体**：
  - 东方财富网：实时快讯、要闻
  - 新浪财经：7×24小时滚动新闻
  - 证券时报网：权威财经新闻
  - 第一财经：深度报道
  - 财新网：高质量财经新闻
  - 21世纪经济报道：专业财经新闻
  - 每日经济新闻：市场动态
  
- **官方渠道**：
  - 上交所公告：上市公司公告
  - 证监会公告：监管政策
  - 央行公告：货币政策
  - 统计局：经济数据发布

##### B. 新闻分类
- **按重要性**：
  - 重大政策（利率调整、监管政策）
  - 市场事件（大涨大跌、熔断）
  - 公司公告（业绩预警、重组）
  - 行业动态（行业政策、趋势）
  - 国际要闻（外盘影响、地缘政治）
  
- **按影响方向**：
  - 重大利好
  - 一般利好
  - 中性消息
  - 一般利空
  - 重大利空

##### C. 新闻处理
- **内容提取**：
  - 标题
  - 摘要/正文
  - 发布时间
  - 新闻来源
  - 相关股票/板块
  - 关键词标签
  
- **智能分析**：
  - 情感分析（正面/中性/负面）
  - 重要性评分（0-10分）
  - 影响范围（全市场/行业/个股）
  - 时效性判断（长期/中期/短期）
  - 真实性验证

##### D. 新闻聚合
- **主题聚类**：
  - 相同主题新闻聚合
  - 事件发展脉络追踪
  - 市场反应跟踪
  
- **热点发现**：
  - 热搜话题统计
  - 关注度排行
  - 讨论热度趋势

##### E. 舆情监测
- **社交媒体**：
  - 雪球热门话题
  - 东方财富股吧热度
  - 微博财经热搜
  
- **情绪指标**：
  - 看多看空比例
  - 讨论活跃度
  - 情绪极值预警

MCP Tools定义：
```python
# Tool 5: get_news
# 获取和分析股市新闻（整合新闻获取、情感分析、热点话题、影响追踪）
# 输入：
#   - limit: 返回新闻数量（默认10条）
#   - category: 新闻类别（policy/market/company/industry/international/all）
#   - importance: 重要性过滤（>=指定分数，0-10）
#   - include_sentiment: 是否包含情感分析（true/false）
#   - include_hot_topics: 是否包含热点话题（true/false）
#   - sentiment_method: 分析方法（snownlp/llm）
# 输出：
#   - 新闻列表（标题、摘要、时间、情感倾向、重要性、来源）
#   - 整体情绪分析结果
#   - 热点话题榜（可选）
#   - 新闻影响评估
```

#### 2.1.5 板块与行业数据模块
**优先级：P0（必须实现）**

功能描述：
- 全市场板块行业数据分析

##### A. 行业板块
- **申万行业分类**：
  - 一级行业（28个）涨跌幅排行
  - 二级行业（104个）表现
  - 三级行业详细数据
  - 行业轮动分析
  - 行业资金流向
  - 行业龙头股表现
  
##### B. 概念板块
- **热门概念**：
  - 概念板块涨跌幅排行
  - 概念活跃度统计
  - 概念资金流向
  - 概念龙头股
  - 概念新闻跟踪
  - 概念炒作周期分析
  
##### C. 地域板块
- **区域市场**：
  - 省份板块表现
  - 城市板块数据
  - 自贸区板块
  - 经济特区板块
  
##### D. 风格板块
- **市场风格**：
  - 大盘股/中盘股/小盘股
  - 价值股/成长股
  - 高股息股
  - 低估值股
  - 绩优股/绩差股

MCP Tools定义：
```python
# Tool 6: get_sector_data
# 获取板块数据（整合板块表现、轮动分析、龙头股）
# 输入：
#   - sector_type: 板块类型（industry/concept/region/style/all）
#   - sort_by: 排序方式（change/turnover/money_flow）
#   - limit: 返回数量
#   - include_rotation: 是否包含轮动分析（true/false）
#   - include_leaders: 是否包含龙头股（true/false）
#   - rotation_days: 轮动分析周期（默认30天）
# 输出：
#   - 板块排行榜（涨跌幅、资金流向）
#   - 板块轮动规律（可选）
#   - 各板块龙头股（可选）
```

#### 2.1.6 宏观经济数据模块
**优先级：P1（重要实现）**

功能描述：
- 宏观经济指标数据

##### A. 国内宏观数据
- **经济增长**：
  - GDP增速
  - 工业增加值
  - 固定资产投资
  - 社会消费品零售总额
  
- **价格指数**：
  - CPI（居民消费价格指数）
  - PPI（工业生产者出厂价格指数）
  - PMI（采购经理人指数）
  
- **货币金融**：
  - M0/M1/M2货币供应量
  - 社会融资规模
  - 存款准备金率
  - 贷款市场报价利率（LPR）
  - 存贷款基准利率
  
- **对外经济**：
  - 进出口总额
  - 贸易顺差/逆差
  - 外汇储备
  - 人民币汇率

##### B. 国际市场数据
- **全球股市**：
  - 美股三大指数（道琼斯、纳斯达克、标普500）
  - 欧洲主要股指
  - 亚太主要股指
  - 香港恒生指数
  
- **大宗商品**：
  - 原油价格（WTI、Brent）
  - 黄金价格
  - 铜、铝等工业金属
  - 农产品价格
  
- **汇率市场**：
  - 美元指数
  - 主要货币对
  - 离岸人民币汇率

MCP Tools定义：
```python
# Tool 7: get_macro_data
# 获取宏观经济和国际市场数据（整合宏观指标、全球市场、影响分析）
# 输入：
#   - data_type: 数据类型（macro/global/all）
#   - indicators: 宏观指标（gdp/cpi/pmi/m2等，支持多个）
#   - markets: 国际市场（us_stock/commodity/forex等）
#   - period: 周期（monthly/quarterly/yearly）
#   - include_impact: 是否包含影响分析（true/false）
# 输出：
#   - 宏观数据时间序列、同比环比
#   - 全球主要市场行情
#   - 宏观数据对A股影响分析（可选）
```

#### 2.1.7 衍生品数据模块
**优先级：P2（可选实现）**

功能描述：
- 股指期货、期权等衍生品数据

##### A. 股指期货
- **主要合约**：
  - 上证50股指期货（IH）
  - 沪深300股指期货（IF）
  - 中证500股指期货（IC）
  - 中证1000股指期货（IM）
  
- **期货数据**：
  - 主力合约价格
  - 基差（期货-现货）
  - 升贴水率
  - 持仓量、成交量
  - 多空持仓比

##### B. ETF期权
- **50ETF期权**：
  - 认购/认沽期权价格
  - 隐含波动率
  - PCR（看跌看涨比）
  - 持仓量分布
  
##### C. 其他衍生品
- **可转债**：
  - 可转债指数
  - 转股溢价率
  - 到期收益率

MCP Tools定义：
```python
# Tool 8: get_special_data
# 获取特色数据（整合龙虎榜、大宗交易、解禁、新股、期货、期权、可转债）
# 输入：
#   - data_type: 数据类型（longhu/block_trade/unlock/new_stock/futures/options/convertible_bond）
#   - contract: 期货合约（IH/IF/IC/IM）
#   - underlying: 期权标的（50ETF/300ETF）
#   - sort_by: 排序方式
#   - limit: 返回数量
# 输出：
#   - 龙虎榜：上榜股票、机构/游资买卖
#   - 大宗交易：交易笔数、折溢价率
#   - 限售解禁：解禁市值、解禁股数
#   - 新股数据：IPO、首日涨幅
#   - 期货数据：行情、基差、持仓（可选）
#   - 期权数据：期权链、隐含波动率、PCR（可选）
#   - 可转债：列表、溢价率排行（可选）
```

#### 2.1.8 投资建议生成模块
**优先级：P1（重要实现）**

功能描述：
- 基于多维度数据生成投资建议
- 分析维度：
  - 技术面：趋势方向、超买超卖、支撑压力位
  - 基本面：成交量变化、市场情绪、估值水平
  - 消息面：当日重要新闻影响、政策导向
  - 资金面：北向资金、融资融券、主力动向
  - 板块面：热点板块、行业轮动
  - 宏观面：经济数据、货币政策
- 建议内容：
  - 市场观点（看多/看空/震荡）
  - 操作建议（积极/谨慎/观望）
  - 仓位建议（重仓/半仓/轻仓/空仓）
  - 风险提示
  - 关注要点
  - 操作策略

MCP Tools定义：
```python
# Tool 9: generate_advice
# 生成投资建议（整合投资建议、风险评估、策略回测）
# 输入：
#   - analysis_depth: 分析深度（simple/normal/detailed）
#   - focus_area: 关注领域（technical/fundamental/all）
#   - include_risk: 是否包含风险评估（true/false）
#   - include_backtest: 是否包含策略回测（true/false）
#   - strategy_params: 策略参数（可选）
# 输出：
#   - 市场观点（看多/看空/震荡）
#   - 操作建议（积极/谨慎/观望）
#   - 仓位建议（重仓/半仓/轻仓/空仓）
#   - 技术面、基本面、消息面、资金面分析
#   - 风险评估（可选）：风险等级、风险因素
#   - 策略回测（可选）：历史表现、胜率、收益率
#   - 关注要点和操作策略

# Tool 10: get_market_overview
# 获取市场全景概览（综合所有数据的快速摘要）
# 输入：
#   - date: 日期（可选，默认今天）
#   - include_details: 是否包含详细数据（true/false）
# 输出：
#   - 指数行情摘要
#   - 市场宽度统计
#   - 资金流向概况
#   - 情绪指数
#   - 板块热点
#   - 重要新闻TOP5
#   - 今日核心观点
```

### 2.2 MCP Resources定义

提供可读取的数据资源：

```python
# Resource 1: market-summary
# URI: market://summary/{date}
# 描述：市场概要（指数、涨跌家数、成交额、市场宽度）

# Resource 2: technical-analysis
# URI: market://analysis/technical/{date}
# 描述：技术分析报告（趋势、指标信号、支撑压力）

# Resource 3: sentiment-report
# URI: market://sentiment/{date}
# 描述：情绪分析报告（综合情绪指数、各维度分析）

# Resource 4: daily-briefing
# URI: market://briefing/{date}
# 描述：每日简报（数据+新闻+建议的综合报告）

# Resource 5: news-digest
# URI: market://news/{date}
# 描述：新闻摘要（重要新闻汇总及情感分析）

# Resource 6: money-flow-report
# URI: market://moneyflow/{date}
# 描述：资金流向报告（北向、主力、融资融券）

# Resource 7: sector-heatmap
# URI: market://sectors/heatmap/{date}
# 描述：板块热力图数据

# Resource 8: market-indicators
# URI: market://indicators/all/{date}
# 描述：所有市场指标汇总

# Resource 9: risk-report
# URI: market://risk/{date}
# 描述：风险评估报告

# Resource 10: macro-calendar
# URI: market://macro/calendar
# 描述：宏观经济数据发布日历
```

### 2.3 MCP Tools 汇总

**核心10个Tools**：

| 序号 | Tool名称 | 功能说明 | 优先级 |
|-----|---------|---------|--------|
| 1 | get_market_data | 综合市场数据（实时行情、历史K线、市场宽度、估值、成交结构） | P0 |
| 2 | calculate_indicators | 技术指标计算（50+指标，含信号分析） | P0 |
| 3 | get_money_flow | 资金流向（北向资金、融资融券、主力资金） | P0 |
| 4 | get_sentiment_analysis | 市场情绪分析（综合情绪指数、多维度分析、趋势） | P0 |
| 5 | get_news | 新闻获取与分析（新闻、情感分析、热点话题） | P0 |
| 6 | get_sector_data | 板块数据（板块表现、轮动分析、龙头股） | P0 |
| 7 | get_macro_data | 宏观经济和国际市场（宏观指标、全球市场、影响分析） | P1 |
| 8 | get_special_data | 特色数据（龙虎榜、大宗交易、解禁、新股、期货、期权、可转债） | P1 |
| 9 | generate_advice | 投资建议生成（多维度分析、风险评估、策略回测） | P0 |
| 10 | get_market_overview | 市场全景概览（快速摘要所有关键信息） | P0 |

**工具特点**：
- ✅ **高度整合**：每个工具整合多个子功能，通过参数控制
- ✅ **灵活调用**：支持简单查询和详细分析两种模式
- ✅ **按需返回**：通过include_xxx参数控制返回内容，减少不必要的数据传输
- ✅ **覆盖全面**：10个工具覆盖原29个工具的所有功能

## 3. 技术方案

### 3.1 技术栈选择

#### 3.1.1 核心框架
- **Python版本**: Python 3.10+
- **MCP SDK**: `mcp` Python SDK (官方)
- **包管理**: `uv` (用于依赖管理和uvx运行)

#### 3.1.2 数据获取
- **AKShare**: 免费开源的金融数据接口库
  - 优势：免费、数据全面、更新及时、无需API密钥
  - 用途：获取上证指数实时和历史数据
  
```python
# 主要使用的AKShare接口
import akshare as ak

# 实时行情
ak.stock_zh_index_spot()  # 指数实时行情
ak.stock_zh_index_daily(symbol="sh000001")  # 历史日K线

# 市场概况
ak.stock_zh_a_spot_em()  # A股实时行情（用于计算涨跌家数）
```

#### 3.1.3 技术指标计算
- **pandas-ta**: 技术分析指标库
- **talib**: 传统技术分析库(可选)
- **pandas/numpy**: 数据处理

#### 3.1.4 新闻爬取
- **requests**: HTTP请求
- **beautifulsoup4**: HTML解析
- **lxml**: XML/HTML解析器

#### 3.1.5 情感分析
- **SnowNLP**: 中文情感分析库
- **jieba**: 中文分词
- 可选：调用通义千问/文心一言API进行更准确的情感分析

#### 3.1.6 数据存储
- **SQLite**: 本地轻量级数据库（缓存历史数据）
- **pickle/json**: 临时缓存

### 3.2 系统架构

```
┌─────────────────────────────────────────────┐
│           MCP Client (AI Assistant)         │
│        (Claude, GPT, etc.)                  │
└──────────────────┬──────────────────────────┘
                   │ MCP Protocol
                   │ (stdio/SSE)
┌──────────────────┴──────────────────────────┐
│            Stock MCP Server                 │
│  ┌──────────────────────────────────────┐  │
│  │        MCP Protocol Layer            │  │
│  │  - 10 Tools Registry                 │  │
│  │  - 10 Resources Registry             │  │
│  │  - Request Handler                   │  │
│  └──────────────┬───────────────────────┘  │
│                 │                            │
│  ┌──────────────┴───────────────────────┐  │
│  │      Tools Layer (10个核心工具)      │  │
│  │  ┌────────────────────────────────┐  │  │
│  │  │  1. get_market_data            │  │  │
│  │  │  2. calculate_indicators       │  │  │
│  │  │  3. get_money_flow             │  │  │
│  │  │  4. get_sentiment_analysis     │  │  │
│  │  │  5. get_news                   │  │  │
│  │  └────────────────────────────────┘  │  │
│  │  ┌────────────────────────────────┐  │  │
│  │  │  6. get_sector_data            │  │  │
│  │  │  7. get_macro_data             │  │  │
│  │  │  8. get_special_data           │  │  │
│  │  │  9. generate_advice            │  │  │
│  │  │ 10. get_market_overview        │  │  │
│  │  └────────────────────────────────┘  │  │
│  └──────────────┬───────────────────────┘  │
│                 │                            │
│  ┌──────────────┴───────────────────────┐  │
│  │      Service Layer (服务层)          │  │
│  │  - AKShare Service (数据获取)        │  │
│  │  - News Service (新闻爬取)           │  │
│  │  - Cache Service (缓存管理)          │  │
│  └──────────────┬───────────────────────┘  │
│                 │                            │
│  ┌──────────────┴───────────────────────┐  │
│  │      Data Layer (数据层)             │  │
│  │  - AKShare API                       │  │
│  │  - Web Scraper                       │  │
│  │  - SQLite Cache                      │  │
│  └──────────────────────────────────────┘  │
└─────────────────────────────────────────────┘
```

### 3.3 项目结构

```
stock-mcp-server/
├── src/
│   └── stock_mcp_server/
│       ├── __init__.py
│       ├── server.py              # MCP服务器入口
│       ├── tools/
│       │   ├── __init__.py
│       │   ├── market_data.py     # Tool 1: 市场数据
│       │   ├── indicators.py      # Tool 2: 技术指标
│       │   ├── money_flow.py      # Tool 3: 资金流向
│       │   ├── sentiment.py       # Tool 4: 情绪分析
│       │   ├── news.py            # Tool 5: 新闻分析
│       │   ├── sector.py          # Tool 6: 板块数据
│       │   ├── macro.py           # Tool 7: 宏观数据
│       │   ├── special.py         # Tool 8: 特色数据
│       │   ├── advice.py          # Tool 9: 投资建议
│       │   └── overview.py        # Tool 10: 市场概览
│       ├── resources/
│       │   ├── __init__.py
│       │   └── market_resources.py # MCP Resources实现
│       ├── services/
│       │   ├── __init__.py
│       │   ├── akshare_service.py # AKShare数据服务
│       │   ├── news_service.py    # 新闻爬取服务
│       │   └── cache_service.py   # 缓存服务
│       ├── utils/
│       │   ├── __init__.py
│       │   ├── logger.py          # 日志工具
│       │   ├── date_utils.py      # 日期工具
│       │   └── calculator.py      # 计算工具
│       └── models/
│           ├── __init__.py
│           └── schemas.py         # 数据模型
├── tests/
│   ├── __init__.py
│   ├── test_tools/
│   ├── test_services/
│   └── test_utils/
├── pyproject.toml                 # 项目配置（PEP 621）
├── uv.lock                        # uv锁文件
├── README.md                      # 项目说明（中文）
├── README_EN.md                   # 英文说明
├── LICENSE                        # MIT许可证
├── .gitignore
└── PRD.md                         # 本文档
```

### 3.4 配置方式

#### 3.4.1 uvx运行配置

在`pyproject.toml`中配置：

```toml
[project]
name = "stock-mcp-server"
version = "0.1.0"
description = "A comprehensive MCP server for Chinese A-share stock market data and analysis"

[project.scripts]
stock-mcp-server = "stock_mcp_server.server:main"

[project.entry-points."mcp.servers"]
stock-mcp = "stock_mcp_server.server:create_server"
```

用户可通过以下方式使用：

```bash
# 方式1: 通过uvx直接运行（推荐）
uvx stock-mcp-server

# 方式2: 安装后运行
pip install stock-mcp-server
stock-mcp-server

# 方式3: 使用uv run（开发时）
uv run stock-mcp-server
```

#### 3.4.2 Claude Desktop配置

用户在`claude_desktop_config.json`中添加：

```json
{
  "mcpServers": {
    "stock-mcp": {
      "command": "uvx",
      "args": ["stock-mcp-server"]
    }
  }
}
```

或使用本地开发版本：

```json
{
  "mcpServers": {
    "stock-mcp": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/stock-mcp-server",
        "run",
        "stock-mcp-server"
      ]
    }
  }
}
```

## 4. 数据源详细设计

### 4.1 AKShare数据接口

#### 4.1.1 指数数据
```python
# 实时数据
df = ak.stock_zh_index_spot()
# 筛选上证指数：df[df['代码'] == '000001']

# 历史数据
df = ak.stock_zh_index_daily(symbol="sh000001")
# 返回：日期、开盘、收盘、最高、最低、成交量、成交额
```

#### 4.1.2 市场宽度数据
```python
# A股实时行情（用于计算涨跌家数）
df = ak.stock_zh_a_spot_em()
# 统计涨跌家数比例
```

### 4.2 新闻数据源

#### 4.2.1 东方财富网
- URL: `https://finance.eastmoney.com/news/`
- 爬取字段：标题、时间、摘要、链接

#### 4.2.2 新浪财经
- URL: `https://finance.sina.com.cn/stock/`
- 爬取字段：标题、时间、摘要、链接

#### 4.2.3 缓存策略
- 新闻缓存时长：30分钟
- 指数数据缓存：5分钟（交易时间）
- 历史数据缓存：24小时

## 5. 情绪指数计算方法

### 5.1 计算公式

```
综合情绪指数 = W1 * 成交量指数 + W2 * 涨跌指数 + W3 * 振幅指数 + W4 * 新闻情绪指数

默认权重：W1=0.25, W2=0.35, W3=0.15, W4=0.25
```

### 5.2 各维度指数计算

#### 5.2.1 成交量指数（0-100）
```
成交量指数 = (今日成交量 / 近20日平均成交量) * 50
归一化到 0-100
```

#### 5.2.2 涨跌指数（0-100）
```
涨跌指数 = (上涨家数 / 总家数) * 100
```

#### 5.2.3 振幅指数（0-100）
```
振幅指数 = ((最高价 - 最低价) / 昨收盘) * 1000
归一化到 0-100
```

#### 5.2.4 新闻情绪指数（0-100）
```
对每条新闻进行情感分析得分（-1到1）
新闻情绪指数 = (平均情感得分 + 1) * 50
```

### 5.3 情绪等级划分

| 分数范围 | 等级 | 市场状态 |
|---------|------|---------|
| 0-20 | 极度恐慌 | 极度悲观，可能超跌反弹 |
| 21-40 | 恐慌 | 悲观情绪，谨慎观望 |
| 41-60 | 中性 | 情绪平稳，震荡为主 |
| 61-80 | 乐观 | 市场活跃，谨慎乐观 |
| 81-100 | 极度乐观 | 情绪高涨，警惕过热 |

## 6. 投资建议生成逻辑

### 6.1 分析框架

```
投资建议 = f(技术面分析, 市场情绪, 新闻面分析)
```

### 6.2 技术面分析规则

#### 6.2.1 趋势判断
- 短期趋势：5日均线 vs 10日均线
- 中期趋势：10日均线 vs 20日均线
- 长期趋势：20日均线 vs 60日均线

#### 6.2.2 超买超卖
- RSI < 30：超卖，可能反弹
- RSI > 70：超买，可能回调
- RSI 30-70：正常区间

#### 6.2.3 MACD信号
- 金叉：MACD线上穿信号线，看多信号
- 死叉：MACD线下穿信号线，看空信号

### 6.3 建议生成模板

```markdown
# 上证指数投资建议 - {日期}

## 一、市场概况
- 当前点位：{current_price} ({change_percent})
- 成交额：{volume}
- 市场情绪：{sentiment_level} ({sentiment_score}分)

## 二、技术面分析
- 短期趋势：{short_trend} (5日均线{ma5} vs 10日均线{ma10})
- 中期趋势：{mid_trend}
- RSI指标：{rsi} ({rsi_status})
- MACD：{macd_status}

## 三、情绪面分析
- 涨跌家数：{up_count}涨 / {down_count}跌
- 成交量对比：{volume_ratio}（较20日均量）
- 新闻情绪：{news_sentiment}

## 四、今日要闻
{news_list}

## 五、操作建议
**总体观点**：{overall_view}

**具体建议**：
{specific_advice}

**风险提示**：
{risk_warning}

**关键关注点**：
{key_points}

---
*本建议仅供参考，不构成投资依据。投资有风险，入市需谨慎。*
```

## 7. 开发计划

### 7.1 阶段划分

#### Phase 1: 基础框架搭建（1周）
- [x] 项目初始化
- [x] MCP服务器框架搭建
- [x] 基础工具类开发（日志、缓存、数据库）
- [x] AKShare数据接口集成

**里程碑**：可以通过MCP协议获取基础的上证指数数据

#### Phase 2: 核心功能开发（2周）
- [ ] 实时/历史数据查询功能
- [ ] 技术指标计算功能
- [ ] 新闻爬取功能
- [ ] 情绪指数计算功能
- [ ] 缓存机制实现

**里程碑**：完成7个MCP Tools和4个Resources的实现

#### Phase 3: 投资建议模块（1周）
- [ ] 技术面分析逻辑
- [ ] 情绪面分析逻辑
- [ ] 新闻面分析逻辑
- [ ] 建议生成模板
- [ ] 规则引擎实现

**里程碑**：可以生成完整的投资建议报告

#### Phase 4: 测试与优化（1周）
- [ ] 单元测试覆盖
- [ ] 集成测试
- [ ] 性能优化（缓存策略、并发处理）
- [ ] 错误处理优化
- [ ] 日志完善

**里程碑**：测试覆盖率 > 80%，响应时间 < 2秒

#### Phase 5: 文档与发布（3天）
- [ ] README文档编写
- [ ] API文档生成
- [ ] 使用示例编写
- [ ] PyPI打包配置
- [ ] 发布到PyPI

**里程碑**：正式发布v1.0.0到PyPI

### 7.2 总体时间表

| 阶段 | 时间 | 负责人 | 状态 |
|------|------|--------|------|
| Phase 1 | Week 1 | TBD | Pending |
| Phase 2 | Week 2-3 | TBD | Pending |
| Phase 3 | Week 4 | TBD | Pending |
| Phase 4 | Week 5 | TBD | Pending |
| Phase 5 | Week 5 (后3天) | TBD | Pending |

**预计完成时间**：5周

## 8. 依赖包清单

### 8.1 生产依赖

```toml
[project.dependencies]
python = "^3.10"
mcp = "^1.0.0"                    # MCP SDK
akshare = "^1.13.0"               # 金融数据源
pandas = "^2.2.0"                 # 数据处理
pandas-ta = "^0.3.14b"            # 技术指标库
numpy = "^1.26.0"                 # 数值计算
requests = "^2.31.0"              # HTTP请求
beautifulsoup4 = "^4.12.0"        # HTML解析
lxml = "^5.1.0"                   # XML/HTML解析
snownlp = "^0.12.3"               # 中文情感分析
jieba = "^0.42.1"                 # 中文分词
sqlalchemy = "^2.0.0"             # ORM
pydantic = "^2.6.0"               # 数据验证
python-dotenv = "^1.0.0"          # 环境变量
loguru = "^0.7.2"                 # 日志
aiohttp = "^3.9.0"                # 异步HTTP
asyncio = "^3.4.3"                # 异步IO
cachetools = "^5.3.2"             # 缓存工具
redis = "^5.0.1"                  # Redis缓存（可选）
apscheduler = "^3.10.4"           # 定时任务
pytz = "^2024.1"                  # 时区处理
```

### 8.2 开发依赖

```toml
[project.optional-dependencies]
dev = [
    "pytest>=8.0.0",              # 测试框架
    "pytest-cov>=4.1.0",          # 测试覆盖率
    "pytest-asyncio>=0.23.0",     # 异步测试
    "black>=24.0.0",              # 代码格式化
    "ruff>=0.2.0",                # 代码检查
    "mypy>=1.8.0",                # 类型检查
]
```

## 9. 非功能需求

### 9.1 性能要求
- **响应时间**：
  - 实时数据查询：< 2秒
  - 历史数据查询：< 3秒
  - 技术指标计算：< 5秒
  - 新闻抓取：< 10秒
  - 投资建议生成：< 5秒

- **并发能力**：
  - 支持至少10个并发请求
  - 通过缓存机制减少重复计算

### 9.2 可靠性要求
- **数据准确性**：与数据源保持一致
- **容错性**：
  - API失败自动重试（最多3次）
  - 网络异常优雅降级
  - 提供详细的错误信息
- **可用性**：在交易时间内保持99%可用性

### 9.3 可维护性要求
- **代码质量**：
  - 遵循PEP 8规范
  - 类型注解覆盖率 > 90%
  - 代码注释完善
- **日志记录**：
  - 关键操作记录日志
  - 错误堆栈完整保存
  - 支持日志级别配置

### 9.4 安全性要求
- **数据安全**：
  - 不存储用户个人信息
  - API密钥通过环境变量配置
- **输入验证**：
  - 所有外部输入进行验证
  - 防止注入攻击

### 9.5 兼容性要求
- **Python版本**：支持Python 3.10+
- **操作系统**：支持Windows、macOS、Linux
- **MCP客户端**：兼容Claude Desktop、Continue等主流MCP客户端

## 10. 风险与应对

### 10.1 数据源风险

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|---------|
| AKShare API不稳定 | 高 | 中 | 1. 实现重试机制 2. 添加备用数据源 3. 本地缓存 |
| 数据延迟 | 中 | 低 | 1. 显示数据时间戳 2. 设置合理的缓存时间 |
| 数据格式变化 | 高 | 低 | 1. 版本锁定 2. 添加数据验证 3. 异常处理 |

### 10.2 技术风险

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|---------|
| MCP协议变更 | 高 | 低 | 1. 关注MCP SDK更新 2. 保持向后兼容 |
| 依赖包冲突 | 中 | 中 | 1. 使用uv管理依赖 2. 固定版本号 |
| 性能瓶颈 | 中 | 中 | 1. 性能测试 2. 优化算法 3. 增加缓存 |

### 10.3 合规风险

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|---------|
| 爬虫被封禁 | 高 | 中 | 1. 遵守robots.txt 2. 控制请求频率 3. 使用官方API |
| 投资建议合规 | 高 | 低 | 1. 添加免责声明 2. 明确仅供参考 |

## 11. 成功指标

### 11.1 技术指标
- [x] 代码测试覆盖率 > 80%
- [x] 所有核心功能正常运行
- [x] 响应时间满足性能要求
- [x] 成功发布到PyPI

### 11.2 用户指标
- [ ] PyPI下载量 > 1000次/月
- [ ] GitHub Star > 50
- [ ] 活跃用户反馈 > 10条
- [ ] 用户满意度 > 4/5

### 11.3 质量指标
- [ ] 无P0级别Bug
- [ ] P1级别Bug < 5个
- [ ] 文档完整性 > 90%
- [ ] 代码可维护性指数 > B级

## 12. 未来扩展方向

### 12.1 V1.0 (MVP)
- 上证指数数据查询
- 基础技术指标
- 新闻抓取和情感分析
- 投资建议生成

### 12.2 V1.1
- 支持深证成指、创业板指等其他指数
- 增加更多技术指标（KDJ、BOLL等）
- 优化新闻数据源
- 增加历史建议准确性统计

### 12.3 V2.0
- 支持个股分析
- 行业板块分析
- 资金流向分析
- 量化策略回测

### 12.4 V3.0
- AI驱动的智能分析（接入LLM）
- 实时预警推送
- 投资组合管理
- 社区版策略分享

## 13. 参考资料

### 13.1 技术文档
- MCP协议规范: https://modelcontextprotocol.io/
- MCP Python SDK: https://github.com/modelcontextprotocol/python-sdk
- AKShare文档: https://akshare.akfamily.xyz/
- pandas-ta文档: https://github.com/twopirllc/pandas-ta

### 13.2 数据源
- AKShare: https://github.com/akfamily/akshare
- 东方财富网: https://www.eastmoney.com/
- 新浪财经: https://finance.sina.com.cn/
- 证券时报网: https://www.stcn.com/

### 13.3 相关项目
- ashare-mcp: A股市场数据MCP服务器
- hstock-mcp: 基于Flask的A股行情服务器
- technical-analysis-mcp: 技术指标分析MCP服务器

## 14. 版本历史

| 版本 | 日期 | 作者 | 变更说明 |
|------|------|------|---------|
| v0.1 | 2025-09-30 | AI Assistant | 初始PRD文档创建 |

---

## 附录

### A. 完整数据指标总览

#### A.1 基础行情数据（17项）
| 序号 | 指标名称 | 说明 | 数据类型 |
|-----|---------|------|---------|
| 1 | 当前点位 | 指数实时价格 | float |
| 2 | 开盘价 | 当日开盘价格 | float |
| 3 | 收盘价 | 当日收盘价格 | float |
| 4 | 最高价 | 当日最高价格 | float |
| 5 | 最低价 | 当日最低价格 | float |
| 6 | 昨收价 | 前一交易日收盘价 | float |
| 7 | 涨跌额 | 当前价-昨收价 | float |
| 8 | 涨跌幅 | 涨跌额/昨收价 | float |
| 9 | 振幅 | (最高-最低)/昨收 | float |
| 10 | 量比 | 当前成交量/5日均量 | float |
| 11 | 换手率 | 成交量/流通股本 | float |
| 12 | 成交量 | 成交股数（手） | int |
| 13 | 成交额 | 成交金额（元） | float |
| 14 | 60日均成交额 | 近60日平均成交额 | float |
| 15 | 委比 | 委买委卖比例 | float |
| 16 | 内盘 | 主动卖出成交 | int |
| 17 | 外盘 | 主动买入成交 | int |

#### A.2 市场宽度指标（15项）
| 序号 | 指标名称 | 说明 |
|-----|---------|------|
| 18 | 上涨家数 | 全市场上涨股票数 |
| 19 | 下跌家数 | 全市场下跌股票数 |
| 20 | 平盘家数 | 涨跌幅为0的股票数 |
| 21 | 涨停家数 | 涨停板股票数 |
| 22 | 跌停家数 | 跌停板股票数 |
| 23 | 连续涨停家数 | 连续2天以上涨停 |
| 24 | 连续跌停家数 | 连续2天以上跌停 |
| 25 | 破板家数 | 打开涨跌停的股票数 |
| 26 | 涨幅>5%家数 | 涨幅超过5%的股票 |
| 27 | 跌幅>5%家数 | 跌幅超过5%的股票 |
| 28 | 涨幅>7%家数 | 涨幅超过7%的股票 |
| 29 | 跌幅>7%家数 | 跌幅超过7%的股票 |
| 30 | 创60日新高家数 | 创近60日新高的股票 |
| 31 | 创60日新低家数 | 创近60日新低的股票 |
| 32 | 创历史新高/新低 | 创历史极值的股票数 |

#### A.3 技术指标（50+项）
| 类别 | 指标 | 数量 |
|-----|------|------|
| 趋势类 | MA, EMA, WMA, DEMA, TEMA, MACD, DMI, ADX, TRIX, DMA, EXPMA, Aroon, CCI, SAR, Ichimoku | 15个 |
| 动量类 | RSI, KDJ, Stochastic, Williams %R, ROC, Momentum, TSI, Ultimate Oscillator, Pivot Points | 9个 |
| 波动类 | BOLL, ATR, Keltner Channel, Donchian Channel, Volatility, Envelope | 6个 |
| 成交量类 | VOL, OBV, MFI, CMF, EMV, VWAP, VWMA, AD Line, PVT, Force Index, NVI, PVI | 12个 |
| 强度类 | BRAR, CR, VR, PSY, BIAS, MASS, Elder Ray | 7个 |
| 其他 | MTM, WVAD, Coppock, Price Channel, Linear Regression | 5个 |

#### A.4 资金流向指标（15项）
| 序号 | 指标名称 | 说明 |
|-----|---------|------|
| 33 | 北向资金流入 | 沪股通资金流入额 |
| 34 | 北向资金流出 | 沪股通资金流出额 |
| 35 | 北向净买入 | 流入-流出 |
| 36 | 主力资金净流入 | 大单资金净流入 |
| 37 | 超大单净流入 | >100万单子净流入 |
| 38 | 大单净流入 | 50-100万单子净流入 |
| 39 | 中单净流入 | 10-50万单子净流入 |
| 40 | 小单净流入 | <10万单子净流入 |
| 41 | 融资余额 | 融资买入未偿还余额 |
| 42 | 融资买入额 | 当日融资买入金额 |
| 43 | 融资偿还额 | 当日融资偿还金额 |
| 44 | 融券余额 | 融券卖出未偿还余额 |
| 45 | 融券卖出量 | 当日融券卖出量 |
| 46 | 融券偿还量 | 当日融券偿还量 |
| 47 | 融资融券余额 | 融资+融券总余额 |

#### A.5 估值指标（8项）
| 序号 | 指标名称 | 说明 |
|-----|---------|------|
| 48 | 加权PE | 加权平均市盈率 |
| 49 | 中位数PE | 市盈率中位数 |
| 50 | 加权PB | 加权平均市净率 |
| 51 | 中位数PB | 市净率中位数 |
| 52 | 平均股息率 | 全市场平均股息率 |
| 53 | 总市值 | 全市场总市值 |
| 54 | 流通市值 | 全市场流通市值 |
| 55 | 自由流通占比 | 自由流通股比例 |

#### A.6 情绪指标（20+项）
| 维度 | 具体指标 |
|-----|---------|
| 综合情绪 | 综合情绪指数(0-100)、情绪等级 |
| 成交情绪 | 量比、换手率、成交额比 |
| 涨跌情绪 | 涨跌家数比、涨停占比、连板数 |
| 振幅情绪 | 平均振幅、VIX指数 |
| 资金情绪 | 北向流入、融资占比 |
| 新闻情绪 | 正负面比例、政策友好度 |
| 市场特征 | 破净占比、ST活跃度 |
| 机构情绪 | 基金仓位、调研频率 |
| 技术情绪 | 多头排列占比、金叉比例 |

#### A.7 板块数据（100+项）
| 类别 | 数量 | 说明 |
|-----|------|------|
| 申万一级行业 | 28个 | 行业分类标准 |
| 申万二级行业 | 104个 | 细分行业 |
| 概念板块 | 200+个 | 市场热点概念 |
| 地域板块 | 34个 | 省市板块 |
| 风格板块 | 10+个 | 大中小盘、价值成长 |

#### A.8 宏观经济指标（30+项）
| 类别 | 具体指标 |
|-----|---------|
| 经济增长 | GDP、工业增加值、固投、社零 |
| 价格指数 | CPI、PPI、PMI |
| 货币金融 | M0/M1/M2、社融、LPR、准备金率 |
| 对外经济 | 进出口、外汇储备、汇率 |
| 国际市场 | 美股、欧股、亚太股指、大宗商品 |

#### A.9 特色数据（10+项）
| 序号 | 数据类型 | 说明 |
|-----|---------|------|
| 56 | 龙虎榜 | 上榜股票、机构/游资 |
| 57 | 大宗交易 | 交易笔数、折溢价率 |
| 58 | 限售解禁 | 解禁市值、解禁股数 |
| 59 | 新股数据 | IPO、首日涨幅 |
| 60 | 公司公告 | 业绩预告、重组公告 |

### B. 术语表

- **MCP**: Model Context Protocol，模型上下文协议
- **uvx**: uv工具的包运行器，类似于npx
- **上证指数**: 上海证券交易所综合指数，代码000001.SH
- **OHLCV**: Open High Low Close Volume，开高低收成交量
- **RSI**: Relative Strength Index，相对强弱指标
- **MACD**: Moving Average Convergence Divergence，移动平均收敛散度
- **MA**: Moving Average，移动平均线
- **EMA**: Exponential Moving Average，指数移动平均
- **KDJ**: Stochastics，随机指标
- **BOLL**: Bollinger Bands，布林带
- **ATR**: Average True Range，真实波动幅度
- **OBV**: On Balance Volume，能量潮
- **MFI**: Money Flow Index，资金流量指标
- **DMI**: Directional Movement Index，动向指标
- **ADX**: Average Directional Index，平均趋向指数
- **TRIX**: Triple Exponential Average，三重指数平滑移动平均
- **CCI**: Commodity Channel Index，顺势指标
- **SAR**: Stop And Reverse，抛物线指标
- **北向资金**: 通过沪股通/深股通流入A股的境外资金
- **融资融券**: 证券信用交易，包括融资买入和融券卖出
- **龙虎榜**: 交易异常股票的公开信息披露
- **大宗交易**: 单笔交易数量、金额较大的交易
- **申万行业**: 申银万国证券研究所的行业分类标准
- **VIX指数**: Volatility Index，波动率指数，恐慌指数
- **LPR**: Loan Prime Rate，贷款市场报价利率

### C. 联系方式

- 项目仓库: (待发布)
- PyPI页面: (待发布)
- 问题反馈: GitHub Issues
- 讨论社区: GitHub Discussions

---

**统计总结**：
- 📊 **数据维度**: 8大类
- 🔢 **数据指标**: 200+ 个指标
- 🛠 **MCP Tools**: 10个核心工具（高度整合）
- 📚 **MCP Resources**: 10个资源
- 💹 **技术指标**: 50+ 个
- 📰 **新闻来源**: 7+ 个财经媒体
- 🏢 **板块分类**: 400+ 个板块
- 🎯 **项目名称**: stock-mcp-server

*本PRD文档最后更新于: 2025-09-30*
