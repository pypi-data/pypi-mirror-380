<div class="settings-container">
    <nz-spin [nzSpinning]="isLoading$ | async">
        <div class="table-container">
            <nz-table
                #settingsTable
                [nzData]="items$ | async"
                [nzShowSizeChanger]="true"
                nzSize="middle"
                [nzBordered]="true"
            >
                <thead>
                    <tr>
                        <th nzWidth="40%">Name</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of settingsTable.data">
                        <td>
                            <span nz-typography>{{ item.key }}</span>
                        </td>
                        <td [ngSwitch]="item.type">
                            <!-- Boolean Value -->
                            <ng-container *ngSwitchCase="'boolean'">
                                <nz-switch
                                    [ngModel]="item.boolean_value"
                                    (ngModelChange)="handleBooleanChange(item)"
                                    [nzCheckedChildren]="'True'"
                                    [nzUnCheckedChildren]="'False'"
                                >
                                </nz-switch>
                            </ng-container>

                            <!-- Integer Value -->
                            <ng-container *ngSwitchCase="'integer'">
                                <nz-input-number
                                    [(ngModel)]="item.int_value"
                                    [nzStep]="1"
                                    [nzSize]="'default'"
                                    [nzMin]="-999999999"
                                    [nzMax]="999999999"
                                >
                                </nz-input-number>
                            </ng-container>

                            <!-- String Value -->
                            <ng-container *ngSwitchCase="'string'">
                                <input
                                    nz-input
                                    [(ngModel)]="item.char_value"
                                    [type]="
                                        isPasswordField(item.key)
                                            ? 'password'
                                            : 'text'
                                    "
                                    [name]="item.key"
                                />
                            </ng-container>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </div>

        <div class="button-container">
            <button
                nz-button
                nzType="primary"
                (click)="handleSave()"
                [nzLoading]="isLoading$ | async"
            >
                Save
            </button>
            <button
                nz-button
                nzType="default"
                (click)="handleReset()"
                [nzLoading]="isLoading$ | async"
            >
                Reset
            </button>
        </div>
    </nz-spin>
</div>
