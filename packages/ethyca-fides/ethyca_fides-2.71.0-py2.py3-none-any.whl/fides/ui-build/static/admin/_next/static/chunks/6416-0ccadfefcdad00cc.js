"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6416],{77213:function(e,t,i){i.d(t,{Z:function(){return f}});var n=i(24246),o=i(96306),s=i(88038),a=i.n(s),r=i(86677);i(27378);var l=i(25980),u=i(90867),d=i(42478),c=i(77830),g=()=>{let e=(0,r.useRouter)();return(0,n.jsx)(o.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(o.xuv,{children:[(0,n.jsxs)(o.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(o.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(o.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,n.jsxs)(o.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:i,padded:s=!0,mainProps:c}=e,f=(0,l.hz)(),v=(0,r.useRouter)(),p="/privacy-requests"===v.pathname||"/datastore-connection"===v.pathname,m=!(f.flags.messagingConfiguration&&p),{data:y}=(0,d.JE)(void 0,{skip:m}),{data:h}=(0,u.PW)(void 0,{skip:m}),C=f.flags.messagingConfiguration&&(!y||!h)&&p;return(0,n.jsxs)(o.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,n.jsxs)(a(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(o.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[C?(0,n.jsx)(g,{}):null,t]})]})}},71248:function(e,t,i){i.d(t,{A:function(){return l}});var n=i(24246),o=i(34090),s=i(46782),a=i(97181),r=i(40324);let l=e=>{var t,i;let{name:l,fieldSchema:u,isRequired:d,layout:c="stacked",secretsSchema:g,validate:f}=e,v=(null===(i=u.allOf)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.$ref)&&u.allOf[0].$ref!==s.j?null==g?void 0:g.definitions[u.allOf[0].$ref.replace("#/definitions/","")]:void 0,p=!!(null==v?void 0:v.enum)||u.options,m="boolean"===u.type,y=()=>{var e;if((null===(e=u.allOf)||void 0===e?void 0:e[0].$ref)===s.j)return"Enter dataset.collection.field"};return(0,n.jsx)(o.gN,{id:l,name:l,validate:f,children:e=>{let{field:t}=e;if(p){var i,o,s;let e=null!==(s=null==v?void 0:null===(i=v.enum)||void 0===i?void 0:i.map(e=>({label:e,value:e})))&&void 0!==s?s:null===(o=u.options)||void 0===o?void 0:o.map(e=>({label:e,value:e}));return(0,n.jsx)(a.d,{name:t.name,id:t.name,label:u.title,isRequired:d,tooltip:u.description,layout:c,options:e,mode:u.multiselect?"multiple":void 0},t.name)}return m?(0,n.jsx)(a.d,{name:t.name,id:t.name,label:u.title,isRequired:d,tooltip:u.description,layout:c,options:[{label:"False",value:"false"},{label:"True",value:"true"}]},t.name):(0,n.jsx)(r.j0,{...t,label:u.title,tooltip:u.description,isRequired:d,type:u.sensitive?"password":"text",placeholder:y(),autoComplete:"off",color:"gray.700",variant:c})}},l)}},46782:function(e,t,i){i.d(t,{j:function(){return s},l:function(){return a}});var n=i(30454),o=i.n(n);let s="#/definitions/FidesDatasetReference",a=e=>{let t=(e,t,i)=>{let n;return(void 0===t||""===t||void 0===t)&&(n="".concat(e," is required")),i===s&&((null==t?void 0:t.includes("."))?t.split(".").length<3&&(n="Dataset reference must include at least three parts"):n="Dataset reference must be dot delimited"),n},i=t=>{var i,n;return null!==(n=null==e?void 0:null===(i=e.required)||void 0===i?void 0:i.includes(t))&&void 0!==n&&n};return{validateField:t,isRequiredField:i,getFieldValidation:(e,n)=>{if(i(e))return e=>{var i;return t(n.title,e,null===(i=n.allOf)||void 0===i?void 0:i[0].$ref)}},preprocessValues:t=>{let i=o()(t);return e&&Object.keys(e.properties).forEach(t=>{var n,o;if((null===(n=e.properties[t].allOf)||void 0===n?void 0:n[0].$ref)===s){let e=null===(o=i.secrets[t])||void 0===o?void 0:o.split(".");e&&(i.secrets[t]={dataset:e.shift(),field:e.join("."),direction:"from"})}"WebsiteSchema"!==e.title||"URL"!==e.properties[t].title||i.secrets[t].startsWith("http://")||i.secrets[t].startsWith("https://")||(i.secrets[t]="https://".concat(i.secrets[t])),"integer"===e.properties[t].type&&"string"==typeof i.secrets[t]&&""===i.secrets[t].trim()&&(i.secrets[t]=void 0)}),i}}}},41337:function(e,t,i){var n=i(24246),o=i(96306);i(27378);var s=i(88337),a=i(16394),r=i(14746);let l=r.Ny+r.iW.get(s.R.WEBSITE),u=e=>void 0!==e.connection_type,d=e=>void 0!==e.encoded_icon,c=e=>(null==e?void 0:e.connection_type)===s.R.WEBSITE,g=e=>(null==e?void 0:e.connection_type)===s.R.SAAS;t.Z=e=>{let{data:t,...i}=e;return(0,n.jsx)(o.Eep,{boxSize:"32px",objectFit:"cover",src:(()=>{var e,i;let n;if(d(t)&&t.encoded_icon)return"data:image/svg+xml;base64,".concat(t.encoded_icon);if(c(t)){let i=null===(e=t.secrets)||void 0===e?void 0:e.url;if(!i)return l;let n=(0,a.ge)(i);return(0,a.tl)(n,100)}if(u(t)){if(g(t)&&(null===(i=t.saas_config)||void 0===i?void 0:i.type)){let e=t.saas_config.type,i=r.LN.get(e);return i?r.Ny+i:r.Ny+r.iW.get(s.R.SAAS)}n=[...r.iW].find(e=>{let[i]=e;return t.connection_type.toString()===i.toString()})}else if(d(t)){let{identifier:e}=t;n=[...r.iW].find(t=>{let[i]=t;return i.toLowerCase()===e.toLowerCase()})}return n?r.Ny+n[1]:r.VD})(),fallbackSrc:c(t)?l:r.VD,alt:(()=>{if(u(t)){var e;return null!==(e=t.name)&&void 0!==e?e:t.key}return d(t)?t.human_readable:t})(),...i})}},19812:function(e,t,i){i.d(t,{t:function(){return r}});var n=i(17245),o=i(14207),s=i(27378),a=i(41966);let r=e=>{var t,i,r;let{connectionConfig:l}=e,[u]=(0,o.S6)(),{data:d}=(0,o.Eg)(null!==(i=null==l?void 0:l.key)&&void 0!==i?i:""),c=null!==(r=null==d?void 0:null===(t=d.items)||void 0===t?void 0:t.map(e=>e.fides_key))&&void 0!==r?r:[],g=c.map(e=>({label:e,value:e})),{data:f}=(0,a.LH)({onlyUnlinkedDatasets:!0,minimal:!0}),v=(0,s.useMemo)(()=>{var e;return null!==(e=null==f?void 0:f.map(e=>({value:e.fides_key,label:"".concat(e.name," (").concat(e.fides_key,")")||0})))&&void 0!==e?e:[]},[f]),{errorAlert:p,successAlert:m}=(0,n.VY)();return{dropdownOptions:[...g,...v],initialDatasets:c,patchConnectionDatasetConfig:async function(e,t){var i,n,o;let{showSuccessAlert:s=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!==(o=null===(i=e.dataset)||void 0===i?void 0:i.map(e=>({fides_key:e,ctl_dataset_fides_key:e})))&&void 0!==o?o:[],r=await u({connection_key:t,dataset_pairs:a}).unwrap();(null===(n=r.failed)||void 0===n?void 0:n.length)>0?p(r.failed[0].message):s&&m("Dataset successfully updated!")}}}},42478:function(e,t,i){i.d(t,{FU:function(){return u},JE:function(){return o},Ki:function(){return c},SU:function(){return g},W:function(){return f},h9:function(){return s},jc:function(){return n},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:n,useGetActiveMessagingProviderQuery:o,useCreateMessagingConfigurationMutation:s,useCreateMessagingConfigurationSecretsMutation:a,useGetMessagingConfigurationDetailsQuery:r,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=i(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,i,n)=>{let o=await n({url:"messaging/default/active"});return o.error&&404===o.error.status?{data:null}:o},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})}}]);