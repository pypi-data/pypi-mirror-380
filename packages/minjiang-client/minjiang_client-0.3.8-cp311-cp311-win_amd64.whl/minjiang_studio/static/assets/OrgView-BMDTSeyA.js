import{d as L,e as q,f as E,h as b,cS as Y,b as A,c as ke,C as N,o as Z,i as t,B as D,w as o,t as _,l as e,N as te,z as F,s as w,O as J,ae as Me,cT as Ue,r as g,E as T,L as oe,M as Q,v as ne,k as se,m as ae,n as ge,p as W,$ as G,cU as Re,cP as ze,bQ as Oe,ab as $e,H as le,cV as Ee,cW as ee,Q as V,cI as ve,a4 as re,U as ie,aY as X,cX as Ve,cY as Ie,cZ as Le,c_ as ce,a2 as ue,a6 as he,c$ as be,d0 as qe,d1 as _e,d2 as De,d3 as Se,d4 as me,a3 as Be,aa as Pe,d5 as Ae,d6 as Te,d7 as Ne,a as Ge,j as je}from"./index-CvCv8tjC.js";import{C as He}from"./ChevronBack-C7yhpAg4.js";import{U as ye}from"./UserMultiple-DRmqOSrm.js";import{A as pe}from"./Add-DSV7m2CF.js";import{_ as de}from"./Popconfirm-DNmDyeOO.js";import{N as we}from"./Switch-1B_VZ16h.js";import{a as xe,b as Ce}from"./Tabs-CqcYRKXl.js";import{i as Ke}from"./json-editor-vue-BvJIz9SG.js";import"./Add-D6uUqg2u.js";import"./debounce-D4NDO7dG.js";const Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},Ze=L({name:"Checkmark12Regular",render:function(f,s){return E(),q("svg",Fe,s[0]||(s[0]=[b("g",{fill:"none"},[b("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),Qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ye=L({name:"Devices",render:function(f,s){return E(),q("svg",Qe,s[0]||(s[0]=[b("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),b("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),We={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},fe=L({name:"Settings",render:function(f,s){return E(),q("svg",We,s[0]||(s[0]=[b("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),b("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Je=L({name:"TwoFactorAuthentication",render:function(f,s){return E(),q("svg",Xe,s[0]||(s[0]=[b("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),b("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),b("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),e0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},t0=L({name:"UserSettings",render:function(f,s){return E(),q("svg",e0,s[0]||(s[0]=[b("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),b("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),b("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),o0={class:"flex items-center justify-start gap-2"},n0={class:"flex flex-1 justify-center items-center gap-5"},s0={class:"text-2xl flex items-center justify-center gap-1"},a0={key:0,class:"flex items-center gap-1"},l0={class:"flex items-center gap-1"},r0={class:"flex items-center gap-1"},i0=L({__name:"OrgInfo",setup(I){const f=Y(),{t:s}=A(),p=ke(),l=N(),r=async()=>{const M=l.query.id;if(!M)return;const[v,y]=await Ue({org_id:+M});!v&&(y==null?void 0:y.status)===0&&f.$patch({info:y.data})},U=()=>{p.push({name:"orgList"})};return Z(()=>{r()}),(M,v)=>{var O;const y=te,R=D,x=Me;return E(),q("div",o0,[t(R,{onClick:U,quaternary:""},{icon:o(()=>[t(y,{size:"26"},{default:o(()=>[t(e(He))]),_:1})]),default:o(()=>[b("span",null,_(e(s)("org.backOrgList")),1)]),_:1}),b("div",n0,[b("div",s0,[t(y,{component:e(J)},null,8,["component"]),w(" "+_((O=e(f).info)==null?void 0:O.organization_name),1)]),e(f).info?(E(),q("div",a0,[t(x,{bordered:!1,size:"small",type:"success"},{default:o(()=>[w(" ID "+_(+e(l).query.id),1)]),_:1}),t(x,{bordered:!1,type:"warning",size:"small"},{default:o(()=>{var $;return[b("div",l0,[t(y,{component:e(ye)},null,8,["component"]),w(" "+_(($=e(f).info)==null?void 0:$.member_count)+" "+_(e(s)("org.cmember")),1)])]}),_:1}),t(x,{bordered:!1,type:"info",size:"small"},{default:o(()=>{var $;return[b("div",r0,[t(y,{component:e(J)},null,8,["component"]),w(" "+_(($=e(f).info)==null?void 0:$.device_count)+" "+_(e(s)("org.cdevice")),1)])]}),_:1})])):F("",!0)])])}}}),c0={class:"flex justify-end"},u0=L({__name:"InsertMember",props:{type:{}},emits:["success"],setup(I,{expose:f,emit:s}){const p=Y(),l=g(),{t:r}=A(),U=N(),M=s,v=[{label:r("org.admin"),value:"ORG_ADMIN"},{label:r("org.member"),value:"ORG_MEMBER"}],y=g(!1),R=g(!1),x=()=>{R.value=!1,z.value={user_name:void 0,org_role:void 0}},O=()=>{R.value=!0},$=g({user_name:{required:!0,message:r("common.required")},org_role:{required:!0,message:r("common.required")}}),C=g(null),z=g({user_name:void 0,org_role:void 0}),u=()=>{var c;(c=C.value)==null||c.validate(async a=>{if(a)return;const[d,i]=await Re({...z.value,org_id:+U.query.id});!d&&(i==null?void 0:i.status)===0&&(M("success"),x())})},h=async()=>{var d;const[c,a]=await ze();!c&&(a==null?void 0:a.status)===0&&(l.value=(d=a.data)==null?void 0:d.map(i=>({...i,label:i.user_name,value:i.user_id})))};return Z(()=>{h()}),f({open:O,close:x}),(c,a)=>{const d=ae,i=ge,n=W,m=se,k=D,P=G,j=ne,H=oe;return E(),T(H,{show:e(R),"onUpdate:show":a[2]||(a[2]=S=>Q(R)?R.value=S:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(j,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(m,{ref_key:"formRef",ref:C,model:e(z),rules:e($),size:"small"},{default:o(()=>[t(d,{label:e(r)("org.orgName"),path:"name"},{default:o(()=>{var S;return[w(_((S=e(p).info)==null?void 0:S.organization_name),1)]}),_:1},8,["label"]),t(d,{label:e(r)("org.username"),path:"user_name"},{default:o(()=>[t(i,{value:e(z).user_name,"onUpdate:value":a[0]||(a[0]=S=>e(z).user_name=S)},null,8,["value"])]),_:1},8,["label"]),t(d,{label:e(r)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(n,{value:e(z).org_role,"onUpdate:value":a[1]||(a[1]=S=>e(z).org_role=S),options:v},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",c0,[t(P,null,{default:o(()=>[t(k,{onClick:x,loading:e(y)},{default:o(()=>[w(_(e(r)("common.cancel")),1)]),_:1},8,["loading"]),t(k,{type:"primary",onClick:u,loading:e(y)},{default:o(()=>[w(_(e(r)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),d0={class:"flex justify-end"},_0={class:"my-10 text-center"},m0={class:"flex justify-end"},p0=L({__name:"InsertUser",props:{type:{}},emits:["success"],setup(I,{expose:f,emit:s}){const p=Y(),{t:l}=A(),r=N(),U=s,M=[{label:l("org.admin"),value:"ORG_ADMIN"},{label:l("org.member"),value:"ORG_MEMBER"}],v=g(!1),y=g(!1),R=()=>{y.value=!1,C.value={user_name:void 0,org_role:void 0}},x=()=>{y.value=!0},O=g({user_name:{required:!0,message:l("common.required")},org_role:{required:!0,message:l("common.required")}}),$=g(null),C=g({user_name:void 0,org_role:void 0}),z=g(""),u=g(!1),h=()=>{u.value=!1,z.value=""},c=()=>{var a;(a=$.value)==null||a.validate(async d=>{var m;if(d)return;const[i,n]=await Ee({...C.value,org_id:+r.query.id});!i&&(n==null?void 0:n.status)===0&&(u.value=!0,z.value=(m=n.data)==null?void 0:m.token,U("success"),R())})};return Oe(()=>{z.value=""}),f({open:x,close:R}),(a,d)=>{const i=ae,n=ge,m=W,k=se,P=G,j=ne,H=oe,S=le;return E(),q($e,null,[t(H,{show:e(y),"onUpdate:show":d[2]||(d[2]=B=>Q(y)?y.value=B:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(j,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(k,{ref_key:"formRef",ref:$,model:e(C),rules:e(O),size:"small"},{default:o(()=>[t(i,{label:e(l)("org.orgName"),path:"name"},{default:o(()=>{var B;return[w(_((B=e(p).info)==null?void 0:B.organization_name),1)]}),_:1},8,["label"]),t(i,{label:e(l)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(n,{value:e(C).user_name,"onUpdate:value":d[0]||(d[0]=B=>e(C).user_name=B)},null,8,["value"])]),_:1},8,["label"]),t(i,{label:e(l)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(m,{value:e(C).org_role,"onUpdate:value":d[1]||(d[1]=B=>e(C).org_role=B),options:M},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",d0,[t(P,null,{default:o(()=>[t(e(D),{onClick:R,loading:e(v)},{default:o(()=>[w(_(e(l)("common.cancel")),1)]),_:1},8,["loading"]),t(e(D),{type:"primary",onClick:c,loading:e(v)},{default:o(()=>[w(_(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"]),t(H,{show:e(u),"onUpdate:show":d[3]||(d[3]=B=>Q(u)?u.value=B:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(j,{bordered:!1,"content-class":"!px-5",style:{width:"500px"}},{default:o(()=>[t(S,{type:"info"},{default:o(()=>[w(_(e(l)("org.omtab.tokenTips")),1)]),_:1}),b("div",_0,_(e(z)),1),b("div",m0,[t(P,null,{default:o(()=>[t(e(D),{type:"primary",onClick:h,loading:e(v)},{default:o(()=>[w(_(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}}),f0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",g0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",v0=L({__name:"OMember",setup(I){Y();const f=g(!1),{t:s}=A(),p=N(),l=ee("insertMemberRef"),r=ee("insertUserRef"),U=g(!1),M=g(!1),v=()=>{U.value=!0,X(()=>{var n;(n=l.value)==null||n.open()})},y=()=>{M.value=!0,X(()=>{var n;(n=r.value)==null||n.open()})},R=()=>{i()},x=()=>{i()},O=g(),$=async n=>{const[m,k]=await Ve({user_id:n,org_id:+p.query.id});!m&&(k==null?void 0:k.status)===0&&i()},C=g(),z=[{label:s("org.admin"),value:"ORG_ADMIN"},{label:s("org.member"),value:"ORG_MEMBER"}],u=n=>{const m=Ie[n.value].color;return V("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:m,borderColor:m}},n.label)},h=(n,m)=>{C.value={userId:n,value:m}},c=n=>{C.value={...C.value,value:n}},a=async()=>{var k,P;const[n,m]=await Le({org_id:+p.query.id,user_id:(k=C.value)==null?void 0:k.userId,org_role:(P=C.value)==null?void 0:P.value});!n&&(m==null?void 0:m.status)===0&&(C.value={userId:void 0,value:void 0},i())},d=[{title:"ID",key:"user_id",width:"20%"},{title:s("org.omtab.name"),key:"user_name",width:"25%"},{title:s("org.omtab.role"),key:"org_role",width:"30%",render(n){var m;return((m=C.value)==null?void 0:m.userId)===n.user_id?V("div",{class:"flex items-center gap-2"},[V(W,{options:z,renderLabel:u,defaultValue:C.value.value,onUpdateValue:c,style:{width:"200px"}}),V(D,{size:"small",onClick:()=>C.value={userId:void 0,value:void 0}},{default:()=>"x"}),V(D,{size:"small",onClick:a},{icon:()=>V(Ze)})]):V(ve,{role:n.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:s("org.omtab.options"),key:"options",width:"25%",render(n){return V("div",{class:"flex items-center gap-2"},[V("img",{src:f0,class:"w-[30px] cursor-pointer",onClick:()=>h(n.user_id,n.org_role)}),V(de,{onPositiveClick:()=>$(n.user_id)},{default:()=>s("groupDetail.parameterManager.removeConfirm"),trigger:()=>V("img",{src:g0,class:"w-[30px] cursor-pointer"})})])}}],i=async()=>{if(f.value)return;f.value=!0;const n=+p.query.id;if(!n){f.value=!1;return}const[m,k]=await ce({organization_id:n});f.value=!1,!m&&(k==null?void 0:k.status)===0&&(O.value=k.data)};return re(()=>+p.query.id,n=>{n&&i()}),Z(()=>{i()}),(n,m)=>{const k=G,P=ie;return E(),q("div",null,[t(k,null,{default:o(()=>[t(e(D),{type:"primary",onClick:v},{icon:o(()=>[t(e(pe))]),default:o(()=>[w(" "+_(e(s)("org.omtab.insertMember")),1)]),_:1}),t(e(D),{type:"primary",onClick:y},{icon:o(()=>[t(e(pe))]),default:o(()=>[w(" "+_(e(s)("org.omtab.insertUser")),1)]),_:1})]),_:1}),e(U)?(E(),T(u0,{key:0,ref_key:"insertMemberRef",ref:l,type:"insert",onSuccess:R},null,512)):F("",!0),e(M)?(E(),T(p0,{key:1,ref_key:"insertUserRef",ref:r,type:"insert",onSuccess:x},null,512)):F("",!0),t(P,{lading:e(f),class:"mt-5",columns:d,data:e(O)},null,8,["lading","data"])])}}}),h0={class:"flex items-center my-4"},b0={class:"flex items-center gap-2 mr-4"},y0=L({__name:"AuthByMember",setup(I){const f=ue(),{t:s}=A(),p=N(),l=g(!1),r=g(),U=u=>{r.value=u},M=async(u,h)=>{if(l.value)return;l.value=!0;const[c,a]=await be({org_id:+p.query.id,user_id:r.value,device_group_id:h,permission:u?"EDIT":"READ"});!c&&(a==null?void 0:a.status)===0?O():l.value=!1},v=[{title:s("org.oatab.device"),key:"device",render(u){return V("div",{class:""},[V("div",{class:"text-lg"},u.device_group_name),V("div",{class:""},`${s("org.deviceGroup")}: ${u.device_group_id}`)])}},{title:s("org.oatab.auth"),key:"auth",render(u){return V(we,{railStyle:({checked:h})=>{const c={};return h?c.background="#638EE2":c.background="#7964E3",c},value:u.permission==="EDIT",onUpdateValue:h=>M(h,u.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],y=g(),R=async()=>{const[u,h]=await ce({organization_id:+p.query.id});!u&&(h==null?void 0:h.status)===0&&h.data&&(y.value=h.data.map(c=>({...c,label:c.user_name,value:c.user_id})))},x=g(),O=async()=>{l.value=!0;const[u,h]=await qe({organization_id:+p.query.id,user_id:r.value});l.value=!1,!u&&h&&h.status===0&&(x.value=h.data.device_group_list)},$=async()=>{if(l.value)return;l.value=!0;const[u,h]=await _e({org_id:+p.query.id,user_id:r.value,permission:"EDIT"});!u&&(h==null?void 0:h.status)===0?O():l.value=!1},C=async()=>{if(l.value)return;l.value=!0;const[u,h]=await _e({org_id:+p.query.id,user_id:r.value,permission:"READ"});!u&&(h==null?void 0:h.status)===0?O():l.value=!1},z=()=>{};return Z(()=>{R()}),re(r,u=>{u&&O()}),(u,h)=>{const c=le,a=W,d=D,i=de,n=G,m=ie;return E(),q("div",null,[t(c,{type:"info",class:"my-4"},{default:o(()=>[w(_(e(s)("org.oatab.tips")),1)]),_:1}),b("div",h0,[b("div",b0,[b("div",{style:he({color:e(f).primaryColor})},_(e(s)("org.oatab.selectUser"))+": ",5),t(a,{style:{width:"200px"},onUpdateValue:U,options:e(y)},null,8,["options"])]),t(n,null,{default:o(()=>[t(i,{onPositiveClick:$,onNegativeClick:z,disabled:!e(r)},{trigger:o(()=>[t(d,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[w(_(e(s)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+_(e(s)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(i,{onPositiveClick:C,onNegativeClick:z,disabled:!e(r)},{trigger:o(()=>[t(d,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[w(_(e(s)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+_(e(s)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(m,{loading:e(l),columns:v,data:e(x)},null,8,["loading","data"])])}}}),w0={class:"flex items-center my-2"},x0={class:"flex items-center gap-2 mr-4"},C0=L({__name:"AuthByDevice",setup(I){const f=ue(),{t:s}=A(),p=g(!1),l=N(),r=g(),U=c=>{r.value=c},M=g(),v=async(c,a)=>{if(p.value)return;p.value=!0;const[d,i]=await be({org_id:+l.query.id,user_id:a,device_group_id:r.value,permission:c?"EDIT":"READ"});!d&&(i==null?void 0:i.status)===0?$():p.value=!1},y=[{title:s("org.oatab.member"),key:"user_name"},{title:s("org.oatab.role"),key:"role",render(c){return V(ve,{role:c.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:s("org.oatab.auth"),key:"auth",render(c){return V(we,{railStyle:({checked:a})=>{const d={};return a?d.background="#638EE2":d.background="#7964E3",d},value:c.permission==="EDIT",onUpdateValue:a=>v(a,c.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],R=g(),x=async()=>{const[c,a]=await De({organization_id:+l.query.id});!c&&(a==null?void 0:a.status)===0&&a.data&&(R.value=a.data.map(d=>({...d,label:d.device_group_name,value:d.device_group_id})))},O=g(),$=async()=>{p.value=!0;const[c,a]=await Se({organization_id:+l.query.id,device_group_id:r.value});p.value=!1,!c&&a&&a.status===0&&(O.value=a.data.user_list.map(d=>{var i,n;return{...d,org_role:(n=(i=M.value)==null?void 0:i.find(m=>m.user_id===d.user_id))==null?void 0:n.org_role}}))},C=async()=>{if(p.value)return;p.value=!0;const[c,a]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"EDIT"});!c&&(a==null?void 0:a.status)===0?$():p.value=!1},z=async()=>{if(p.value)return;p.value=!0;const[c,a]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"READ"});!c&&(a==null?void 0:a.status)===0?$():p.value=!1},u=()=>{},h=async()=>{const[c,a]=await ce({organization_id:+l.query.id});!c&&(a==null?void 0:a.status)===0&&(M.value=a.data)};return Z(()=>{x(),h()}),re(r,c=>{c&&$()}),(c,a)=>{const d=W,i=D,n=de,m=G,k=ie;return E(),q("div",null,[b("div",w0,[b("div",x0,[b("div",{style:he({color:e(f).primaryColor})},_(e(s)("org.oatab.selectDevice"))+": ",5),t(d,{style:{width:"200px"},onUpdateValue:U,options:e(R)},null,8,["options"])]),t(m,null,{default:o(()=>[t(n,{onPositiveClick:C,onNegativeClick:u,disabled:!e(r)},{trigger:o(()=>[t(i,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[w(_(e(s)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+_(e(s)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(n,{onPositiveClick:z,onNegativeClick:u,disabled:!e(r)},{trigger:o(()=>[t(i,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[w(_(e(s)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+_(e(s)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(k,{loading:e(p),columns:y,data:e(O)},null,8,["loading","data"])])}}}),k0={class:"flex items-center gap-1"},M0={class:"flex items-center gap-1"},U0=L({__name:"OAuth",setup(I){const{t:f}=A();return(s,p)=>{const l=te,r=Ce,U=xe;return E(),q("div",null,[t(U,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(r,{name:"byuser"},{tab:o(()=>[b("div",k0,[t(l,{component:e(t0)},null,8,["component"]),w(" "+_(e(f)("org.oatab.tab1")),1)])]),default:o(()=>[t(y0)]),_:1}),t(r,{name:"bydevice"},{tab:o(()=>[b("div",M0,[t(l,{component:e(Ye)},null,8,["component"]),w(" "+_(e(f)("org.oatab.tab2")),1)])]),default:o(()=>[t(C0)]),_:1})]),_:1})])}}}),R0={class:"w-full"},z0={class:"flex justify-end"},O0=L({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(I,{expose:f,emit:s}){const p=I,l=s,r=ue(),U=Be(),M=Y(),{t:v}=A(),y=N(),R=g(!1),x=g(!1),O=()=>{x.value=!1,X(()=>{setTimeout(()=>{u.value={if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}},200)}),l("close")},$=()=>{x.value=!0},C=g({user_id:{required:!0,message:v("common.required")},org_role:{required:!0,message:v("common.required")}}),z=g(null),u=g({if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}),h=()=>{var i;(i=z.value)==null||i.validate(async n=>{if(n)return;const[m,k]=await Ae({...u.value,if_global:p.isGlobal,organization_id:+y.query.id});!m&&(k==null?void 0:k.status)===0&&(U.success(v("org.ootab.successfully")),O())})},c=i=>{i||O()},a=async()=>{const[i,n]=await Te({organization_id:+y.query.id});if(!i&&(n==null?void 0:n.status)===0){const m=n.data.auth_text;u.value={...u.value,auth_text:m}}},d=async()=>{const[i,n]=await Ne();if(!i&&(n==null?void 0:n.status)===0){const m=n.data.auth_text;u.value={...u.value,if_global:!0,auth_text:m}}};return Z(()=>{p.isGlobal?d():a()}),f({open:$,close:O}),(i,n)=>{const m=ae,k=le,P=se,j=D,H=G,S=ne,B=oe;return E(),T(B,{show:e(x),"onUpdate:show":n[1]||(n[1]=K=>Q(x)?x.value=K:null),"close-on-esc":!1,onUpdateShow:c},{default:o(()=>[t(S,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(P,{ref_key:"formRef",ref:z,model:e(u),rules:e(C),size:"small"},{default:o(()=>[e(u).if_global?F("",!0):(E(),T(m,{key:0,label:e(v)("org.orgName"),path:"name"},{default:o(()=>{var K;return[w(_((K=e(M).info)==null?void 0:K.organization_name),1)]}),_:1},8,["label"])),t(m,{label:e(v)(`org.ootab.${i.isGlobal?"globalCfg":"orgCfg"}`),path:"auth_text"},{default:o(()=>[b("div",R0,[t(k,{type:"info",title:e(v)("org.ootab.osstips"),class:"whitespace-pre-line w-full"},{default:o(()=>n[2]||(n[2]=[w(_(`{
                    "host": "oss.example.com",
                    "bucket": "minjiang",
                    "access_key": "AK",
                    "secret_key": "SK",
                    "secure": true,
                    "region": "cn-shanghai"
                }`))])),_:1},8,["title"]),t(e(Ke),{class:Pe(["!w-full mt-5",[e(r).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"300px"},modelValue:e(u).auth_text,"onUpdate:modelValue":n[0]||(n[0]=K=>e(u).auth_text=K),mode:"text"},null,8,["class","modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",z0,[t(H,null,{default:o(()=>[t(j,{type:"primary",onClick:h,loading:e(R)},{default:o(()=>[w(_(e(v)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),$0=L({__name:"OOrg",setup(I){const f=Ge(),s=ee("ossRef"),{t:p}=A(),l=g(!1),r=g(!1),U=(M=!1)=>{l.value=!0,r.value=M,X(()=>{setTimeout(()=>{var v;(v=s.value)==null||v.open()},100)})};return(M,v)=>{const y=D,R=G;return E(),q("div",null,[t(R,null,{default:o(()=>{var x;return[t(y,{type:"primary",onClick:v[0]||(v[0]=()=>U())},{icon:o(()=>[t(e(fe))]),default:o(()=>[w(" "+_(e(p)("org.ootab.setOss")),1)]),_:1}),(x=e(f).info)!=null&&x.is_sys_admin?(E(),T(y,{key:0,type:"primary",onClick:v[1]||(v[1]=()=>U(!0))},{icon:o(()=>[t(e(fe))]),default:o(()=>[w(" "+_(e(p)("org.ootab.setGlobalOss")),1)]),_:1})):F("",!0)]}),_:1}),e(l)?(E(),T(O0,{key:0,ref_key:"ossRef",ref:s,"is-global":e(r),onClose:v[2]||(v[2]=x=>l.value=!1)},null,8,["is-global"])):F("",!0)])}}}),E0={class:"flex items-center gap-1"},V0={class:"flex items-center gap-1"},I0={class:"flex items-center gap-1"},j0=L({__name:"OrgView",setup(I){const{t:f}=A(),s=g("member");return(p,l)=>{const r=je,U=te,M=Ce,v=xe;return E(),q("div",null,[t(i0),t(r),t(v,{type:"line",value:e(s),"onUpdate:value":l[0]||(l[0]=y=>Q(s)?s.value=y:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(M,{name:"member"},{tab:o(()=>[b("div",E0,[t(U,{component:e(ye)},null,8,["component"]),w(" "+_(e(f)("org.omember")),1)])]),default:o(()=>[t(v0)]),_:1}),t(M,{name:"auth"},{tab:o(()=>[b("div",V0,[t(U,{component:e(Je)},null,8,["component"]),w(" "+_(e(f)("org.oauth")),1)])]),default:o(()=>[t(U0)]),_:1}),t(M,{name:"organization"},{tab:o(()=>[b("div",I0,[t(U,{component:e(J)},null,8,["component"]),w(" "+_(e(f)("org.oorganization")),1)])]),default:o(()=>[t($0)]),_:1})]),_:1},8,["value"])])}}});export{j0 as default};
