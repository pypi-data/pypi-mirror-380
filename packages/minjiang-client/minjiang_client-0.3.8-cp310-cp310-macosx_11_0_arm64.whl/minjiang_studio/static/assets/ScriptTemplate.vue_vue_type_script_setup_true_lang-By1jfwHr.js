import{am as A,bP as kt,d as Y,Q as r,bc as Me,as as Rt,aH as z,r as T,bQ as xt,bR as St,bE as Ct,bS as Mt,aB as $e,aC as Tt,bT as Nt,aE as Te,J as p,bU as de,bV as Oe,aD as Pt,bW as _t,bX as he,bY as We,bZ as Ge,be as Ye,aU as Ft,b_ as Ot,b$ as Kt,c0 as Lt,c1 as Bt,c2 as Je,c3 as It,ap as fe,bb as je,aq as xe,ao as E,c4 as Vt,c5 as At,c6 as zt,c7 as De,c8 as Ce,ar as $t,ax as Xe,c9 as jt,ca as Dt,aG as Ue,cb as Ut,cc as Et,a4 as Ee,aY as Ht,au as qt,cd as Qt,ce as Wt,aA as Gt,cf as Yt,aM as ee,cg as Jt,ch as Xt,e as Ze,f as et,h as He,b as Zt,o as en,i as tn,l as qe,bG as nn,B as ln,ag as an,al as on}from"./index-CvCv8tjC.js";import{r as rn}from"./exp-BIf1sWJ4.js";const sn=A("base-menu-mask",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 text-align: center;
 padding: 14px;
 overflow: hidden;
`,[kt()]),un=Y({name:"BaseMenuMask",props:{clsPrefix:{type:String,required:!0}},setup(t){Rt("-base-menu-mask",sn,z(t,"clsPrefix"));const o=T(null);let l=null;const a=T(!1);return xt(()=>{l!==null&&window.clearTimeout(l)}),Object.assign({message:o,show:a},{showOnce(g,y=1500){l&&window.clearTimeout(l),a.value=!0,o.value=g,l=window.setTimeout(()=>{a.value=!1,o.value=null},y)}})},render(){return r(Me,{name:"fade-in-transition"},{default:()=>this.show?r("div",{class:`${this.clsPrefix}-base-menu-mask`},this.message):null})}}),ve=St("n-cascader"),Qe=Y({name:"NCascaderOption",props:{tmNode:{type:Object,required:!0}},setup(t){const{expandTriggerRef:o,remoteRef:l,multipleRef:a,mergedValueRef:d,checkedKeysRef:g,indeterminateKeysRef:y,hoverKeyPathRef:m,keyboardKeyRef:b,loadingKeySetRef:k,cascadeRef:f,mergedCheckStrategyRef:R,onLoadRef:I,mergedClsPrefixRef:N,mergedThemeRef:H,labelFieldRef:q,showCheckboxRef:te,renderPrefixRef:w,renderSuffixRef:M,updateHoverKey:_,updateKeyboardKey:P,addLoadingKey:V,deleteLoadingKey:$,closeMenu:ne,doCheck:J,doUncheck:me,renderLabelRef:c}=Te(ve),x=p(()=>t.tmNode.key),O=p(()=>{const{value:F}=o,{value:U}=l;return!U&&F==="hover"}),L=p(()=>{if(O.value)return re}),Q=p(()=>{if(O.value)return ge}),j=de(()=>{const{value:F}=a;return F?g.value.includes(x.value):d.value===x.value}),le=de(()=>a.value?y.value.includes(x.value):!1),Ne=de(()=>m.value.includes(x.value)),Pe=de(()=>{const{value:F}=b;return F===null?!1:F===x.value}),W=de(()=>l.value?k.value.has(x.value):!1),ae=p(()=>t.tmNode.isLeaf),oe=p(()=>t.tmNode.disabled),D=p(()=>t.tmNode.rawNode[q.value]),G=p(()=>t.tmNode.shallowLoaded);function X(F){if(oe.value)return;const{value:U}=l,{value:B}=k,{value:be}=I,{value:K}=x,{value:ye}=ae,{value:we}=G;Oe(F,"checkbox")||(U&&!we&&!B.has(K)&&be&&(V(K),be(t.tmNode.rawNode).then(()=>{$(K)}).catch(()=>{$(K)})),_(K),P(K)),ye&&pe()}function re(){if(!O.value||oe.value)return;const{value:F}=x;_(F),P(F)}function ge(){O.value&&re()}function ue(){const{value:F}=ae;F||pe()}function pe(){const{value:F}=a,{value:U}=x;F?le.value||j.value?me(U):J(U):(J(U),ne(!0))}return{checkStrategy:R,multiple:a,cascade:f,checked:j,indeterminate:le,hoverPending:Ne,keyboardPending:Pe,isLoading:W,showCheckbox:te,isLeaf:ae,disabled:oe,label:D,mergedClsPrefix:N,mergedTheme:H,handleClick:X,handleCheckboxUpdateValue:ue,mergedHandleMouseEnter:L,mergedHandleMouseMove:Q,renderLabel:c,renderPrefix:w,renderSuffix:M}},render(){const{mergedClsPrefix:t,showCheckbox:o,renderLabel:l,renderPrefix:a,renderSuffix:d}=this;let g=null;if(o||a){const b=this.showCheckbox?r(Ct,{focusable:!1,"data-checkbox":!0,disabled:this.disabled,checked:this.checked,indeterminate:this.indeterminate,theme:this.mergedTheme.peers.Checkbox,themeOverrides:this.mergedTheme.peerOverrides.Checkbox,onUpdateChecked:this.handleCheckboxUpdateValue}):null;g=r("div",{class:`${t}-cascader-option__prefix`},a?a({option:this.tmNode.rawNode,checked:this.checked,node:b}):b)}let y=null;const m=r("div",{class:`${t}-cascader-option-icon-placeholder`},this.isLeaf?this.checkStrategy==="child"&&!(this.multiple&&this.cascade)?r(Me,{name:"fade-in-scale-up-transition"},{default:()=>this.checked?r($e,{clsPrefix:t,class:`${t}-cascader-option-icon ${t}-cascader-option-icon--checkmark`},{default:()=>r(Nt,null)}):null}):null:r(Mt,{clsPrefix:t,scale:.85,strokeWidth:24,show:this.isLoading,class:`${t}-cascader-option-icon`},{default:()=>r($e,{clsPrefix:t,key:"arrow",class:`${t}-cascader-option-icon ${t}-cascader-option-icon--arrow`},{default:()=>r(Tt,null)})}));return y=r("div",{class:`${t}-cascader-option__suffix`},d?d({option:this.tmNode.rawNode,checked:this.checked,node:m}):m),r("div",{class:[`${t}-cascader-option`,this.keyboardPending||this.hoverPending&&`${t}-cascader-option--pending`,this.disabled&&`${t}-cascader-option--disabled`,this.showCheckbox&&`${t}-cascader-option--show-prefix`],onMouseenter:this.mergedHandleMouseEnter,onMousemove:this.mergedHandleMouseMove,onClick:this.handleClick},g,r("span",{class:`${t}-cascader-option__label`},l?l(this.tmNode.rawNode,this.checked):this.label),y)}}),cn=Y({name:"CascaderSubmenu",props:{depth:{type:Number,required:!0},tmNodes:{type:Array,required:!0}},setup(){const{virtualScrollRef:t,mergedClsPrefixRef:o,mergedThemeRef:l,optionHeightRef:a}=Te(ve),d=T(null),g=T(null),y={scroll(m,b){var k,f;t.value?(k=g.value)===null||k===void 0||k.scrollTo({index:m}):(f=d.value)===null||f===void 0||f.scrollTo({index:m,elSize:b})}};return Object.assign({mergedClsPrefix:o,mergedTheme:l,scrollbarInstRef:d,vlInstRef:g,virtualScroll:t,itemSize:p(()=>he(a.value)),handleVlScroll:()=>{var m;(m=d.value)===null||m===void 0||m.sync()},getVlContainer:()=>{var m;return(m=g.value)===null||m===void 0?void 0:m.listElRef},getVlContent:()=>{var m;return(m=g.value)===null||m===void 0?void 0:m.itemsElRef}},y)},render(){const{mergedClsPrefix:t,mergedTheme:o,virtualScroll:l}=this;return r("div",{class:[l&&`${t}-cascader-submenu--virtual`,`${t}-cascader-submenu`]},r(Pt,{ref:"scrollbarInstRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,container:l?this.getVlContainer:void 0,content:l?this.getVlContent:void 0},{default:()=>l?r(_t,{items:this.tmNodes,itemSize:this.itemSize,onScroll:this.handleVlScroll,showScrollbar:!1,ref:"vlInstRef"},{default:({item:a})=>r(Qe,{key:a.key,tmNode:a})}):this.tmNodes.map(a=>r(Qe,{key:a.key,tmNode:a}))}))}}),dn=Y({name:"NCascaderMenu",props:{value:[String,Number,Array],placement:{type:String,default:"bottom-start"},show:Boolean,menuModel:{type:Array,required:!0},loading:Boolean,onFocus:{type:Function,required:!0},onBlur:{type:Function,required:!0},onKeydown:{type:Function,required:!0},onMousedown:{type:Function,required:!0},onTabout:{type:Function,required:!0}},setup(t){const{localeRef:o,isMountedRef:l,mergedClsPrefixRef:a,syncCascaderMenuPosition:d,handleCascaderMenuClickOutside:g,mergedThemeRef:y,getColumnStyleRef:m}=Te(ve),b=[],k=T(null),f=T(null);function R(){d()}Lt(f,R);function I(w){var M;const{value:{loadingRequiredMessage:_}}=o;(M=k.value)===null||M===void 0||M.showOnce(_(w))}function N(w){g(w)}function H(w){const{value:M}=f;M&&(M.contains(w.relatedTarget)||t.onFocus(w))}function q(w){const{value:M}=f;M&&(M.contains(w.relatedTarget)||t.onBlur(w))}return Object.assign({isMounted:l,mergedClsPrefix:a,selfElRef:f,submenuInstRefs:b,maskInstRef:k,mergedTheme:y,getColumnStyle:m,handleFocusin:H,handleFocusout:q,handleClickOutside:N},{scroll(w,M,_){const P=b[w];P&&P.scroll(M,_)},showErrorMessage:I})},render(){const{submenuInstRefs:t,mergedClsPrefix:o,mergedTheme:l}=this;return r(Me,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.show?We(r("div",{tabindex:"0",ref:"selfElRef",class:`${o}-cascader-menu`,onMousedown:this.onMousedown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeydown:this.onKeydown},this.menuModel[0].length?r("div",{class:`${o}-cascader-submenu-wrapper`},this.menuModel.map((a,d)=>{var g;return r(cn,{style:(g=this.getColumnStyle)===null||g===void 0?void 0:g.call(this,{level:d}),ref:y=>{y&&(t[d]=y)},key:d,tmNodes:a,depth:d+1})}),r(un,{clsPrefix:o,ref:"maskInstRef"})):r("div",{class:`${o}-cascader-menu__empty`},Ye(this.$slots.empty,()=>[r(Ft,{theme:l.peers.Empty,themeOverrides:l.peerOverrides.Empty})])),Ot(this.$slots.action,a=>a&&r("div",{class:`${o}-cascader-menu-action`,"data-action":!0},a)),r(Kt,{onFocus:this.onTabout})),[[Ge,this.handleClickOutside,void 0,{capture:!0}]]):null})}});function Se(t){return t?t.map(o=>o.rawNode):null}function fn(t,o,l,a){const d=[],g=[];function y(m){for(const b of m){if(b.disabled)continue;const{rawNode:k}=b;g.push(k),(b.isLeaf||!o)&&d.push({label:Ke(b,a,l),value:b.key,rawNode:b.rawNode,path:Array.from(g)}),!b.isLeaf&&b.children&&y(b.children),g.pop()}}return y(t),d}function Ke(t,o,l){const a=[];for(;t;)a.push(t.rawNode[l]),t=t.parent;return a.reverse().join(o)}const hn=Y({name:"NCascaderSelectMenu",props:{value:{type:[String,Number,Array],default:null},show:Boolean,pattern:{type:String,default:""},multiple:Boolean,tmNodes:{type:Array,default:()=>[]},filter:Function,labelField:{type:String,required:!0},separator:{type:String,required:!0}},setup(t){const{isMountedRef:o,mergedValueRef:l,mergedClsPrefixRef:a,mergedThemeRef:d,mergedCheckStrategyRef:g,slots:y,syncSelectMenuPosition:m,closeMenu:b,handleSelectMenuClickOutside:k,doUncheck:f,doCheck:R,clearPattern:I}=Te(ve),N=T(null),H=p(()=>fn(t.tmNodes,g.value==="child",t.labelField,t.separator)),q=p(()=>{const{filter:c}=t;if(c)return c;const{labelField:x}=t;return(O,L,Q)=>Q.some(j=>j[x]&&~j[x].toLowerCase().indexOf(O.toLowerCase()))}),te=p(()=>{const{pattern:c}=t,{value:x}=q;return(c?H.value.filter(O=>x(c,O.rawNode,O.path)):H.value).map(O=>({value:O.value,label:O.label}))}),w=p(()=>Je(te.value,It("value","children")));function M(){m()}function _(c){P(c)}function P(c){if(t.multiple){const{value:x}=l;Array.isArray(x)?x.includes(c.key)?f(c.key):R(c.key):x===null&&R(c.key),I()}else R(c.key),b(!0)}function V(){var c;(c=N.value)===null||c===void 0||c.prev()}function $(){var c;(c=N.value)===null||c===void 0||c.next()}function ne(){var c;if(N){const x=(c=N.value)===null||c===void 0?void 0:c.getPendingTmNode();return x&&P(x),!0}return!1}function J(c){k(c)}return Object.assign({isMounted:o,mergedTheme:d,mergedClsPrefix:a,menuInstRef:N,selectTreeMate:w,handleResize:M,handleToggle:_,handleClickOutside:J,cascaderSlots:y},{prev:V,next:$,enter:ne})},render(){const{mergedClsPrefix:t,isMounted:o,mergedTheme:l,cascaderSlots:a}=this;return r(Me,{name:"fade-in-scale-up-transition",appear:o},{default:()=>this.show?We(r(Bt,{ref:"menuInstRef",onResize:this.handleResize,clsPrefix:t,class:`${t}-cascader-menu`,autoPending:!0,themeOverrides:l.peerOverrides.InternalSelectMenu,theme:l.peers.InternalSelectMenu,treeMate:this.selectTreeMate,multiple:this.multiple,value:this.value,onToggle:this.handleToggle},{empty:()=>Ye(a["not-found"],()=>[])}),[[Ge,this.handleClickOutside,void 0,{capture:!0}]]):null})}}),vn=fe([A("cascader-menu",`
 outline: none;
 position: relative;
 margin: 4px 0;
 display: flex;
 flex-flow: column nowrap;
 border-radius: var(--n-menu-border-radius);
 overflow: hidden;
 box-shadow: var(--n-menu-box-shadow);
 color: var(--n-option-text-color);
 background-color: var(--n-menu-color);
 `,[je({transformOrigin:"inherit",duration:"0.2s"}),xe("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),A("scrollbar",`
 width: 100%;
 `),A("base-menu-mask",`
 background-color: var(--n-menu-mask-color);
 `),A("base-loading",`
 color: var(--n-loading-color);
 `),A("cascader-submenu-wrapper",`
 position: relative;
 display: flex;
 flex-wrap: nowrap;
 `),A("cascader-submenu",`
 height: var(--n-menu-height);
 min-width: var(--n-column-width);
 position: relative;
 `,[E("virtual",`
 width: var(--n-column-width);
 `),A("scrollbar-content",`
 position: relative;
 `),fe("&:first-child",`
 border-top-left-radius: var(--n-menu-border-radius);
 border-bottom-left-radius: var(--n-menu-border-radius);
 `),fe("&:last-child",`
 border-top-right-radius: var(--n-menu-border-radius);
 border-bottom-right-radius: var(--n-menu-border-radius);
 `),fe("&:not(:first-child)",`
 border-left: 1px solid var(--n-menu-divider-color);
 `)]),A("cascader-menu-action",`
 box-sizing: border-box;
 padding: 8px;
 border-top: 1px solid var(--n-menu-divider-color);
 `),A("cascader-option",`
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 padding: 0 0 0 18px;
 box-sizing: border-box;
 min-width: 182px;
 background-color: #0000;
 display: flex;
 align-items: center;
 white-space: nowrap;
 position: relative;
 cursor: pointer;
 transition:
 background-color .2s var(--n-bezier),
 color 0.2s var(--n-bezier);
 `,[E("show-prefix",`
 padding-left: 0;
 `),xe("label",`
 flex: 1 0 0;
 overflow: hidden;
 text-overflow: ellipsis;
 `),xe("prefix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),xe("suffix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),A("cascader-option-icon-placeholder",`
 line-height: 0;
 position: relative;
 width: 16px;
 height: 16px;
 font-size: 16px;
 `,[A("cascader-option-icon",[E("checkmark",`
 color: var(--n-option-check-mark-color);
 `,[je({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})]),E("arrow",`
 color: var(--n-option-arrow-color);
 `)])]),E("selected",`
 color: var(--n-option-text-color-active);
 `),E("active",`
 color: var(--n-option-text-color-active);
 background-color: var(--n-option-color-hover);
 `),E("pending",`
 background-color: var(--n-option-color-hover);
 `),fe("&:hover",`
 background-color: var(--n-option-color-hover);
 `),E("disabled",`
 color: var(--n-option-text-color-disabled);
 background-color: #0000;
 cursor: not-allowed;
 `,[A("cascader-option-icon",[E("arrow",`
 color: var(--n-option-text-color-disabled);
 `)])])])]),A("cascader",`
 z-index: auto;
 position: relative;
 width: 100%;
 `)]),mn=Object.assign(Object.assign({},Xe.props),{allowCheckingNotLoaded:Boolean,to:Ce.propTo,bordered:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},value:[String,Number,Array],defaultValue:{type:[String,Number,Array],default:null},placeholder:String,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},disabledField:{type:String,default:"disabled"},expandTrigger:{type:String,default:"click"},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},remote:Boolean,onLoad:Function,separator:{type:String,default:" / "},filter:Function,placement:{type:String,default:"bottom-start"},cascade:{type:Boolean,default:!0},leafOnly:Boolean,showPath:{type:Boolean,default:!0},show:{type:Boolean,default:void 0},maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,menuProps:Object,filterMenuProps:Object,virtualScroll:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},valueField:{type:String,default:"value"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},renderLabel:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onBlur:Function,onFocus:Function,getColumnStyle:Function,renderPrefix:Function,renderSuffix:Function,onChange:[Function,Array]}),gn=Y({name:"Cascader",props:mn,slots:Object,setup(t,{slots:o}){const{mergedBorderedRef:l,mergedClsPrefixRef:a,namespaceRef:d,inlineThemeDisabled:g}=$t(t),y=Xe("Cascader","-cascader",vn,jt,t,a),{localeRef:m}=Dt("Cascader"),b=T(t.defaultValue),k=p(()=>t.value),f=Ue(k,b),R=p(()=>t.leafOnly?"child":t.checkStrategy),I=T(""),N=Ut(t),{mergedSizeRef:H,mergedDisabledRef:q,mergedStatusRef:te}=N,w=T(null),M=T(null),_=T(null),P=T(null),V=T(null),$=T(new Set),ne=T(null),J=T(null),me=Ce(t),c=T(!1),x=e=>{$.value.add(e)},O=e=>{$.value.delete(e)},L=p(()=>{const{valueField:e,childrenField:n,disabledField:i}=t;return Je(t.options,{getDisabled(h){return h[i]},getKey(h){return h[e]},getChildren(h){return h[n]}})}),Q=p(()=>{const{cascade:e,multiple:n}=t;return n&&Array.isArray(f.value)?L.value.getCheckedKeys(f.value,{cascade:e,allowNotLoaded:t.allowCheckingNotLoaded}):{checkedKeys:[],indeterminateKeys:[]}}),j=p(()=>Q.value.checkedKeys),le=p(()=>Q.value.indeterminateKeys),Ne=p(()=>{const{treeNodePath:e,treeNode:n}=L.value.getPath(V.value);let i;return n===null?i=[L.value.treeNodes]:(i=e.map(h=>h.siblings),!n.isLeaf&&!$.value.has(n.key)&&n.children&&i.push(n.children)),i}),Pe=p(()=>{const{keyPath:e}=L.value.getPath(V.value);return e}),W=p(()=>y.value.self.optionHeight);Et(t.options)&&Ee(t.options,(e,n)=>{e!==n&&(V.value=null,P.value=null)});const ae=T(!1);function oe(e){const{onUpdateShow:n,"onUpdate:show":i}=t;n&&ee(n,e),i&&ee(i,e),ae.value=e}function D(e,n,i){const{onUpdateValue:h,"onUpdate:value":s,onChange:S}=t,{nTriggerFormInput:u,nTriggerFormChange:C}=N;h&&ee(h,e,n,i),s&&ee(s,e,n,i),S&&ee(S,e,n,i),b.value=e,u(),C()}function G(e){P.value=e}function X(e){V.value=e}function re(e){const{value:{getNode:n}}=L;return e.map(i=>{var h;return((h=n(i))===null||h===void 0?void 0:h.rawNode)||null})}function ge(e){var n;const{cascade:i,multiple:h,filterable:s}=t,{value:{check:S,getNode:u,getPath:C}}=L;if(h)try{const{checkedKeys:v}=S(e,Q.value.checkedKeys,{cascade:i,checkStrategy:R.value,allowNotLoaded:t.allowCheckingNotLoaded});D(v,re(v),v.map(se=>{var ce;return Se((ce=C(se))===null||ce===void 0?void 0:ce.treeNodePath)})),s&&_e(),P.value=e,V.value=e}catch(v){if(v instanceof Jt){if(w.value){const se=u(e);se!==null&&w.value.showErrorMessage(se.rawNode[t.labelField])}}else throw v}else if(R.value==="child"){const v=u(e);if(v!=null&&v.isLeaf)D(e,v.rawNode,Se(C(e).treeNodePath));else return!1}else{const v=u(e);D(e,(v==null?void 0:v.rawNode)||null,Se((n=C(e))===null||n===void 0?void 0:n.treeNodePath))}return!0}function ue(e){const{cascade:n,multiple:i}=t;if(i){const{value:{uncheck:h,getNode:s,getPath:S}}=L,{checkedKeys:u}=h(e,Q.value.checkedKeys,{cascade:n,checkStrategy:R.value,allowNotLoaded:t.allowCheckingNotLoaded});D(u,u.map(C=>{var v;return((v=s(C))===null||v===void 0?void 0:v.rawNode)||null}),u.map(C=>{var v;return Se((v=S(C))===null||v===void 0?void 0:v.treeNodePath)})),P.value=e,V.value=e}}const pe=p(()=>{if(t.multiple){const{showPath:e,separator:n,labelField:i,cascade:h}=t,{getCheckedKeys:s,getNode:S}=L.value;return s(j.value,{cascade:h,checkStrategy:R.value,allowNotLoaded:t.allowCheckingNotLoaded}).checkedKeys.map(C=>{const v=S(C);return v===null?{label:String(C),value:C}:{label:e?Ke(v,n,i):v.rawNode[i],value:v.key}})}else return[]}),F=p(()=>{const{multiple:e,showPath:n,separator:i,labelField:h}=t,{value:s}=f;if(!e&&!Array.isArray(s)){const{getNode:S}=L.value;if(s===null)return null;const u=S(s);return u===null?{label:String(s),value:s}:{label:n?Ke(u,i,h):u.rawNode[h],value:u.key}}else return null}),U=z(t,"show"),B=Ue(U,ae),be=p(()=>{const{placeholder:e}=t;return e!==void 0?e:m.value.placeholder}),K=p(()=>!!(t.filterable&&I.value));Ee(B,e=>{if(!e||t.multiple)return;const{value:n}=f;!Array.isArray(n)&&n!==null?(P.value=n,V.value=n,Ht(()=>{var i;if(!B.value)return;const{value:h}=V;if(f.value!==null){const s=L.value.getNode(h);s&&((i=w.value)===null||i===void 0||i.scroll(s.level,s.index,he(W.value)))}})):(P.value=null,V.value=null)},{immediate:!0});function ye(e){const{onBlur:n}=t,{nTriggerFormBlur:i}=N;n&&ee(n,e),i()}function we(e){const{onFocus:n}=t,{nTriggerFormFocus:i}=N;n&&ee(n,e),i()}function _e(){var e;(e=_.value)===null||e===void 0||e.focusInput()}function tt(){var e;(e=_.value)===null||e===void 0||e.focus()}function ke(){q.value||(I.value="",oe(!0),t.filterable&&_e())}function Z(e=!1){e&&tt(),oe(!1),I.value=""}function Le(e){var n;K.value||B.value&&(!((n=_.value)===null||n===void 0)&&n.$el.contains(Xt(e))||Z())}function nt(e){K.value&&Le(e)}function Be(){t.clearFilterAfterSelect&&(I.value="")}function Re(e){var n,i,h;const{value:s}=P,{value:S}=L;switch(e){case"prev":if(s!==null){const u=S.getPrev(s,{loop:!0});u!==null&&(G(u.key),(n=w.value)===null||n===void 0||n.scroll(u.level,u.index,he(W.value)))}break;case"next":if(s===null){const u=S.getFirstAvailableNode();u!==null&&(G(u.key),(i=w.value)===null||i===void 0||i.scroll(u.level,u.index,he(W.value)))}else{const u=S.getNext(s,{loop:!0});u!==null&&(G(u.key),(h=w.value)===null||h===void 0||h.scroll(u.level,u.index,he(W.value)))}break;case"child":if(s!==null){const u=S.getNode(s);if(u!==null)if(u.shallowLoaded){const C=S.getChild(s);C!==null&&(X(s),G(C.key))}else{const{value:C}=$;if(!C.has(s)){x(s),X(s);const{onLoad:v}=t;v&&v(u.rawNode).then(()=>{O(s)}).catch(()=>{O(s)})}}}break;case"parent":if(s!==null){const u=S.getParent(s);if(u!==null){G(u.key);const C=u.getParent();X(C===null?null:C.key)}}break}}function Ie(e){var n,i;switch(e.key){case" ":case"ArrowDown":case"ArrowUp":if(t.filterable&&B.value)break;e.preventDefault();break}if(!Oe(e,"action"))switch(e.key){case" ":if(t.filterable)return;case"Enter":if(!B.value)ke();else{const{value:h}=K,{value:s}=P;if(h)M.value&&M.value.enter()&&Be();else if(s!==null)if(j.value.includes(s)||le.value.includes(s))ue(s);else{const S=ge(s);!t.multiple&&S&&Z(!0)}}break;case"ArrowUp":e.preventDefault(),B.value&&(K.value?(n=M.value)===null||n===void 0||n.prev():Re("prev"));break;case"ArrowDown":e.preventDefault(),B.value?K.value?(i=M.value)===null||i===void 0||i.next():Re("next"):ke();break;case"ArrowLeft":e.preventDefault(),B.value&&!K.value&&Re("parent");break;case"ArrowRight":e.preventDefault(),B.value&&!K.value&&Re("child");break;case"Escape":B.value&&(Yt(e),Z(!0))}}function lt(e){Ie(e)}function at(e){e.stopPropagation(),t.multiple?D([],[],[]):D(null,null,null)}function ot(e){var n;!((n=w.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(c.value=!0,we(e))}function rt(e){var n;!((n=w.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(c.value=!1,ye(e),Z())}function it(e){var n;!((n=_.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(c.value=!0,we(e))}function st(e){var n;!((n=_.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(c.value=!1,ye(e))}function ut(e){Oe(e,"action")||t.multiple&&t.filter&&(e.preventDefault(),_e())}function ct(){Z(!0)}function dt(){t.filterable?ke():B.value?Z(!0):ke()}function ft(e){I.value=e.target.value}function ht(e){const{multiple:n}=t,{value:i}=f;n&&Array.isArray(i)&&e.value!==void 0?ue(e.value):D(null,null,null)}function Ve(){var e;(e=ne.value)===null||e===void 0||e.syncPosition()}function Ae(){var e;(e=J.value)===null||e===void 0||e.syncPosition()}function vt(){B.value&&(K.value?Ve():Ae())}const Fe=p(()=>!!(t.multiple&&t.cascade||R.value!=="child"));qt(ve,{slots:o,mergedClsPrefixRef:a,mergedThemeRef:y,mergedValueRef:f,checkedKeysRef:j,indeterminateKeysRef:le,hoverKeyPathRef:Pe,mergedCheckStrategyRef:R,showCheckboxRef:Fe,cascadeRef:z(t,"cascade"),multipleRef:z(t,"multiple"),keyboardKeyRef:P,hoverKeyRef:V,remoteRef:z(t,"remote"),loadingKeySetRef:$,expandTriggerRef:z(t,"expandTrigger"),isMountedRef:Qt(),onLoadRef:z(t,"onLoad"),virtualScrollRef:z(t,"virtualScroll"),optionHeightRef:W,localeRef:m,labelFieldRef:z(t,"labelField"),renderLabelRef:z(t,"renderLabel"),getColumnStyleRef:z(t,"getColumnStyle"),renderPrefixRef:z(t,"renderPrefix"),renderSuffixRef:z(t,"renderSuffix"),syncCascaderMenuPosition:Ae,syncSelectMenuPosition:Ve,updateKeyboardKey:G,updateHoverKey:X,addLoadingKey:x,deleteLoadingKey:O,doCheck:ge,doUncheck:ue,closeMenu:Z,handleSelectMenuClickOutside:nt,handleCascaderMenuClickOutside:Le,clearPattern:Be});const mt={focus:()=>{var e;(e=_.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=_.value)===null||e===void 0||e.blur()},getCheckedData:()=>{if(Fe.value){const e=j.value;return{keys:e,options:re(e)}}return{keys:[],options:[]}},getIndeterminateData:()=>{if(Fe.value){const e=le.value;return{keys:e,options:re(e)}}return{keys:[],options:[]}}},ze=p(()=>{const{self:{optionArrowColor:e,optionTextColor:n,optionTextColorActive:i,optionTextColorDisabled:h,optionCheckMarkColor:s,menuColor:S,menuBoxShadow:u,menuDividerColor:C,menuBorderRadius:v,menuHeight:se,optionColorHover:ce,optionHeight:gt,optionFontSize:pt,loadingColor:bt,columnWidth:yt},common:{cubicBezierEaseInOut:wt}}=y.value;return{"--n-bezier":wt,"--n-menu-border-radius":v,"--n-menu-box-shadow":u,"--n-menu-height":se,"--n-column-width":yt,"--n-menu-color":S,"--n-menu-divider-color":C,"--n-option-height":gt,"--n-option-font-size":pt,"--n-option-text-color":n,"--n-option-text-color-disabled":h,"--n-option-text-color-active":i,"--n-option-color-hover":ce,"--n-option-check-mark-color":s,"--n-option-arrow-color":e,"--n-menu-mask-color":Wt(S,{alpha:.75}),"--n-loading-color":bt}}),ie=g?Gt("cascader",void 0,ze,t):void 0;return Object.assign(Object.assign({},mt),{handleTriggerResize:vt,mergedStatus:te,selectMenuFollowerRef:ne,cascaderMenuFollowerRef:J,triggerInstRef:_,selectMenuInstRef:M,cascaderMenuInstRef:w,mergedBordered:l,mergedClsPrefix:a,namespace:d,mergedValue:f,mergedShow:B,showSelectMenu:K,pattern:I,treeMate:L,mergedSize:H,mergedDisabled:q,localizedPlaceholder:be,selectedOption:F,selectedOptions:pe,adjustedTo:me,menuModel:Ne,handleMenuTabout:ct,handleMenuFocus:it,handleMenuBlur:st,handleMenuKeydown:lt,handleMenuMousedown:ut,handleTriggerFocus:ot,handleTriggerBlur:rt,handleTriggerClick:dt,handleClear:at,handleDeleteOption:ht,handlePatternInput:ft,handleKeydown:Ie,focused:c,optionHeight:W,mergedTheme:y,cssVars:g?void 0:ze,themeClass:ie==null?void 0:ie.themeClass,onRender:ie==null?void 0:ie.onRender})},render(){const{mergedClsPrefix:t}=this;return r("div",{class:`${t}-cascader`},r(Vt,null,{default:()=>[r(At,null,{default:()=>r(zt,{onResize:this.handleTriggerResize,ref:"triggerInstRef",status:this.mergedStatus,clsPrefix:t,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,focused:this.focused,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onClear:this.handleClear,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onKeydown:this.handleKeydown},{arrow:()=>{var o,l;return(l=(o=this.$slots).arrow)===null||l===void 0?void 0:l.call(o)}})}),r(De,{key:"cascaderMenu",ref:"cascaderMenuFollowerRef",show:this.mergedShow&&!this.showSelectMenu,containerClass:this.namespace,placement:this.placement,width:this.options.length?void 0:"target",teleportDisabled:this.adjustedTo===Ce.tdkey,to:this.adjustedTo},{default:()=>{var o;(o=this.onRender)===null||o===void 0||o.call(this);const{menuProps:l}=this;return r(dn,Object.assign({},l,{ref:"cascaderMenuInstRef",class:[this.themeClass,l==null?void 0:l.class],value:this.mergedValue,show:this.mergedShow&&!this.showSelectMenu,menuModel:this.menuModel,style:[this.cssVars,l==null?void 0:l.style],onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onMousedown:this.handleMenuMousedown,onTabout:this.handleMenuTabout}),{action:()=>{var a,d;return(d=(a=this.$slots).action)===null||d===void 0?void 0:d.call(a)},empty:()=>{var a,d;return(d=(a=this.$slots).empty)===null||d===void 0?void 0:d.call(a)}})}}),r(De,{key:"selectMenu",ref:"selectMenuFollowerRef",show:this.mergedShow&&this.showSelectMenu,containerClass:this.namespace,width:"target",placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ce.tdkey},{default:()=>{var o;(o=this.onRender)===null||o===void 0||o.call(this);const{filterMenuProps:l}=this;return r(hn,Object.assign({},l,{ref:"selectMenuInstRef",class:[this.themeClass,l==null?void 0:l.class],value:this.mergedValue,show:this.mergedShow&&this.showSelectMenu,pattern:this.pattern,multiple:this.multiple,tmNodes:this.treeMate.treeNodes,filter:this.filter,labelField:this.labelField,separator:this.separator,style:[this.cssVars,l==null?void 0:l.style]}))}})]}))}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},bn=Y({name:"Question24Regular",render:function(o,l){return et(),Ze("svg",pn,l[0]||(l[0]=[He("g",{fill:"none"},[He("path",{d:"M12 4C9.236 4 7 6.236 7 9a.75.75 0 0 0 1.5 0c0-1.936 1.564-3.5 3.5-3.5s3.5 1.564 3.5 3.5c0 .852-.222 1.42-.529 1.86c-.324.463-.767.823-1.302 1.232l-.138.105c-1.01.768-2.281 1.734-2.281 3.803v.25a.75.75 0 0 0 1.5 0V16c0-1.317.714-1.863 1.785-2.682l.046-.035c.527-.403 1.147-.887 1.62-1.564c.49-.701.799-1.57.799-2.719c0-2.764-2.236-5-5-5zm0 17a1 1 0 1 0 0-2a1 1 0 0 0 0 2z",fill:"currentColor"})],-1)]))}}),yn={class:"min-w-72 w-full"},Rn=Y({__name:"ScriptTemplate",emits:["update:value"],setup(t,{emit:o}){const{t:l}=Zt(),a=o,d=T(),g=(k,f)=>{on(k,(R,I)=>{let N={...R,label:R.title,value:I};R.children&&(N.children=[],g(R.children,N.children)),f.push(N)})},y=async()=>{const[k,f]=await rn();if(!k&&(f==null?void 0:f.status)===0){const R=[];g(f.data,R),d.value=R}},m=k=>r("div",{class:"flex items-center gap-2 pr-2 w-full"},[[r(nn,{trigger:"hover",style:"white-space: pre-line"},{default:()=>r("div",k.desc),trigger:()=>r(ln,{size:"small",class:"!relative !mt-1 !w-5 !h-5",circle:!0,type:"info"},{icon:()=>r(bn)})}),r("div",r(an,{style:"max-width: 170px"},{default:()=>k.label}))]]),b=(k,f)=>{a("update:value",f==null?void 0:f.script)};return en(()=>{y()}),(k,f)=>{const R=gn;return et(),Ze("div",yn,[tn(R,{class:"w-full","check-strategy":"child",placeholder:qe(l)("expInfo.chooseTpl"),clearable:!0,"show-path":!1,options:qe(d),"render-label":m,onUpdateValue:b},null,8,["placeholder","options"])])}}});export{bn as Q,Rn as _};
