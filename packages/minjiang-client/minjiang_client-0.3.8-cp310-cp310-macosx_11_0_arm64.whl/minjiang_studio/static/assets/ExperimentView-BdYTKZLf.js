import{d as N,e as C,f as m,h as i,aN as Pt,al as qe,a8 as ke,r as V,E as U,w as r,i as n,v as Re,U as Bt,l as t,M as j,L as Ve,a2 as kt,j as Ct,a7 as Ut,aa as jt,a1 as Ft,b as zt,a3 as At,C as Mt,c as qt,o as Et,a4 as Rt,a_ as Vt,aY as Y,a5 as Ht,D as St,ab as gt,H as Qt,z as R,N as Q,O as Gt,t as d,F as Jt,ae as Wt,s as q,B as Kt,a$ as Yt,Y as Xt,a6 as Zt,b6 as vt,af as ht,ak as K,n as ea,b0 as ta,b1 as aa,I as sa,b2 as be,b3 as wt,Q as c}from"./index-CvCv8tjC.js";import{b as na,c as oa,e as la,f as ia,s as ra,h as ca,i as pa,d as da,j as ua,k as _a,g as fa}from"./exp-BIf1sWJ4.js";import{A as yt,d as It,f as ma,F as bt}from"./FileSaver.min-BaVpKNFY.js";import{u as xa}from"./useInterval-BHEiX-wJ.js";import{u as Ce,n as ga}from"./exp-CMCdJMb9.js";import{u as va}from"./groupDetail-NvvmkxSe.js";import{o as Me,P as ha}from"./index-ByeaBQVL.js";import{D as wa,R as ya,E as Ia}from"./ExpsTpl-BHXuKP2W.js";import{i as ba}from"./json-editor-vue-BvJIz9SG.js";import{A as ka}from"./Add-DSV7m2CF.js";import{_ as Ca}from"./Badge-BXgZv_X1.js";import{_ as za,a as Ma}from"./Tabs-CqcYRKXl.js";import"./index-D5YeMwg8.js";import"./Copy16Filled-cQpDZe19.js";import"./HandRight24Filled-Bscs9-Ei.js";import"./Popconfirm-DNmDyeOO.js";import"./Reload-CiqI3T8w.js";import"./Switch-1B_VZ16h.js";import"./task-BzTCKWl0.js";import"./DynamicForm.vue_vue_type_script_setup_true_lang-Ijfe0G_0.js";import"./InputNumber-C_LhnbBs.js";import"./Add-D6uUqg2u.js";import"./debounce-D4NDO7dG.js";const qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ea=N({name:"AttachArrowRight20Filled",render:function(_,l){return m(),C("svg",qa,l[0]||(l[0]=[i("g",{fill:"none"},[i("path",{d:"M5.28 10.609l5.304-5.304a2.75 2.75 0 0 1 4.064 3.697a5.487 5.487 0 0 1 1.611.285a4.252 4.252 0 0 0-6.736-5.042L4.22 9.548a.75.75 0 0 0 1.06 1.06zm2.829 4.95l.893-.894a5.48 5.48 0 0 0 .349 1.773l-.182.181A2.75 2.75 0 0 1 5.28 12.73l5.657-5.657a.75.75 0 1 1 1.06 1.06l-5.656 5.658a1.25 1.25 0 0 0 1.768 1.768zM19 14.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0zm-2.147.354l.003-.003a.499.499 0 0 0 .144-.348v-.006a.5.5 0 0 0-.146-.35l-2-2a.5.5 0 0 0-.708.707L15.293 14H12.5a.5.5 0 0 0 0 1h2.793l-1.147 1.146a.5.5 0 0 0 .708.708l2-2z",fill:"currentColor"})],-1)]))}}),Ra={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Va=N({name:"BookDatabase20Regular",render:function(_,l){return m(),C("svg",Ra,l[0]||(l[0]=[i("g",{fill:"none"},[i("path",{d:"M4 4v12a2 2 0 0 0 2 2h9.5a.5.5 0 0 0 0-1H6a1 1 0 0 1-1-1h10a1 1 0 0 0 1-1V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2zm10-1a1 1 0 0 1 1 1v11H5V4a1 1 0 0 1 1-1h8zM8.483 6.345C8.126 6.552 8 6.787 8 7c0 .213.126.448.483.655C8.841 7.863 9.374 8 10 8c.626 0 1.159-.137 1.517-.345c.357-.207.483-.442.483-.655c0-.213-.126-.448-.483-.655C11.159 6.137 10.626 6 10 6c-.626 0-1.159.137-1.517.345zM12 8.531c-.544.31-1.254.469-2 .469c-.747 0-1.456-.16-2-.47V11c0 .123.107.365.496.607c.367.228.9.393 1.504.393s1.137-.165 1.504-.393c.389-.242.496-.484.496-.607V8.53zM7 7c0-.687.434-1.202.981-1.52C8.528 5.163 9.245 5 10 5c.755 0 1.472.163 2.019.48c.547.318.981.833.981 1.52v4c0 .627-.452 1.135-.968 1.456c-.538.334-1.256.544-2.032.544s-1.494-.21-2.032-.544C7.452 12.136 7 11.627 7 11V7z",fill:"currentColor"})],-1)]))}}),Sa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},La=N({name:"Play24Regular",render:function(_,l){return m(),C("svg",Sa,l[0]||(l[0]=[i("g",{fill:"none"},[i("path",{d:"M7.608 4.615a.75.75 0 0 0-1.108.659v13.452a.75.75 0 0 0 1.108.659l12.362-6.726a.75.75 0 0 0 0-1.318L7.608 4.615zM5 5.274c0-1.707 1.826-2.792 3.325-1.977l12.362 6.726c1.566.853 1.566 3.101 0 3.953L8.325 20.702C6.826 21.518 5 20.432 5 18.726V5.274z",fill:"currentColor"})],-1)]))}}),$a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Da=N({name:"QuadrantPlot",render:function(_,l){return m(),C("svg",$a,l[0]||(l[0]=[Pt('<path d="M30 15H17V2h-2v13H2v2h13v13h2V17h13v-2z" fill="currentColor"></path><path d="M5 30a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3zm0-4a1 1 0 1 0 1 1a1.001 1.001 0 0 0-1-1z" fill="currentColor"></path><path d="M8 8a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3zm0-4a1 1 0 1 0 1 1a1.001 1.001 0 0 0-1-1z" fill="currentColor"></path><path d="M22 13a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3zm0-4a1 1 0 1 0 1 1a1.001 1.001 0 0 0-1-1z" fill="currentColor"></path><circle cx="11" cy="11" r="2" fill="currentColor"></circle><circle cx="11" cy="21" r="2" fill="currentColor"></circle><circle cx="21" cy="21" r="2" fill="currentColor"></circle><circle cx="22" cy="28" r="2" fill="currentColor"></circle><circle cx="28" cy="24" r="2" fill="currentColor"></circle><circle cx="4" cy="11" r="2" fill="currentColor"></circle><circle cx="28" cy="4" r="2" fill="currentColor"></circle>',11)]))}}),Na={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Oa=N({name:"ScriptReference",render:function(_,l){return m(),C("svg",Na,l[0]||(l[0]=[i("path",{d:"M4 20v2h4.586L2 28.586L3.414 30L10 23.414V28h2v-8H4z",fill:"currentColor"},null,-1),i("path",{d:"M27.17 26l-2.58 2.58L26 30l4-4l-4-4l-1.42 1.41L27.17 26z",fill:"currentColor"},null,-1),i("path",{d:"M18.83 26l2.58-2.58L20 22l-4 4l4 4l1.42-1.41L18.83 26z",fill:"currentColor"},null,-1),i("path",{d:"M25.7 9.3l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v12h2V4h8v6a2.006 2.006 0 0 0 2 2h6v6h2v-8a.91.91 0 0 0-.3-.7zM18 10V4.4l5.6 5.6z",fill:"currentColor"},null,-1)]))}}),Ta={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Pa=N({name:"BellOutlined",render:function(_,l){return m(),C("svg",Ta,l[0]||(l[0]=[i("path",{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z",fill:"currentColor"},null,-1)]))}}),Ba={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ua=N({name:"ExperimentTwotone",render:function(_,l){return m(),C("svg",Ba,l[0]||(l[0]=[i("path",{d:"M551.9 513c19.6 0 35.9-14.2 39.3-32.8A40.02 40.02 0 0 1 552 512a40 40 0 0 1-40-39.4v.5c0 22 17.9 39.9 39.9 39.9zM752 687.8l-.3-.3c-29-17.5-62.3-26.8-97-26.8c-44.9 0-87.2 15.7-121 43.8a256.27 256.27 0 0 1-164.9 59.9c-41.2 0-81-9.8-116.7-28L210.5 844h603l-59.9-155.2l-1.6-1z","fill-opacity":".15",fill:"currentColor"},null,-1),i("path",{d:"M879 824.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1c0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3c33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8c-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 0 1-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.6-107.6l.1-.2c35.7 18.1 75.4 27.8 116.6 27.8c61.2 0 119.2-21.5 165.3-60c33.9-28.2 76.3-43.9 121.3-43.9c35 0 68.4 9.5 97.6 27.1l.6 1.6L813.5 844h-603z",fill:"currentColor"},null,-1),i("path",{d:"M552 512c19.3 0 35.4-13.6 39.2-31.8c.6-2.7.8-5.4.8-8.2c0-22.1-17.9-40-40-40s-40 17.9-40 40v.6a40 40 0 0 0 40 39.4z",fill:"currentColor"},null,-1)]))}});function Ee(g){var y,o,M,e,I,z,S,O,k,T,F,ne,oe,le,ie,G,re,ce,pe,de,ue,_e,fe,me,xe;const _=Ce();_.expInfo=g.data,_.program={waveform_script:(o=(y=g.data)==null?void 0:y.exp)==null?void 0:o.waveform_script,space_parameter_script:(e=(M=g.data)==null?void 0:M.exp)==null?void 0:e.space_parameter_script},_.running={formValue:{title:(z=(I=g.data)==null?void 0:I.exp)==null?void 0:z.title,desc:(O=(S=g.data)==null?void 0:S.exp)==null?void 0:O.desc,...(T=(k=g.data)==null?void 0:k.exp)==null?void 0:T.options},paramsList:[]};const l=JSON.parse(JSON.stringify(_.allQubits));let b=[];qe((oe=(ne=(F=g.data)==null?void 0:F.exp)==null?void 0:ne.wave_circuit)==null?void 0:oe.gates,A=>{b=b.concat(A.entity)}),b.length>0&&l.forEach(A=>{b.includes(A.value)?A.visible=!0:A.visible=!1}),_.allQubits=l,ke((G=(ie=(le=g.data)==null?void 0:le.exp)==null?void 0:ie.wave_circuit)==null?void 0:G.gates)||(_.gates=(pe=(ce=(re=g.data)==null?void 0:re.exp)==null?void 0:ce.wave_circuit)==null?void 0:pe.gates),ke((_e=(ue=(de=g.data)==null?void 0:de.exp)==null?void 0:ue.wave_circuit)==null?void 0:_e.layers)||(_.layers=Object.values((xe=(me=(fe=g.data)==null?void 0:fe.exp)==null?void 0:me.wave_circuit)==null?void 0:xe.layers))}const ja=N({__name:"MsgView",setup(g,{expose:_}){const l=Ce(),b=V(!1),y=[{title:"Message Id",key:"message_id",width:100},{title:"Sub Process Id",key:"sub_process_id",width:130},{title:"Message Level",key:"message_level",width:130},{title:"Message",key:"message"},{title:"Timestamp",key:"timestamp",width:180,render:e=>e.timestamp?new Date(e.timestamp).toLocaleString():""}],o=e=>{e||M()},M=()=>{b.value=!1};return _({open:()=>b.value=!0,close:M}),(e,I)=>{const z=Bt,S=Re,O=Ve;return m(),U(O,{show:t(b),"onUpdate:show":I[0]||(I[0]=k=>j(b)?b.value=k:null),"on-update:show":o},{default:r(()=>[n(S,{style:{width:"80vw"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0"},{default:r(()=>{var k,T;return[n(z,{columns:y,data:(T=(k=t(l))==null?void 0:k.expInfo)==null?void 0:T.exp_msg,pagination:!1,"scroll-x":1e3,"max-height":"500px"},null,8,["data"])]}),_:1})]),_:1},8,["show"])}}}),Fa=N({__name:"TemplateData",props:{templateData:{}},setup(g,{expose:_}){const l=V(),b=kt(),y=V(!1);return _({open:()=>{y.value=!0}}),(M,e)=>{const I=Ct,z=Ut,S=Re,O=Ve;return m(),U(O,{show:t(y),"onUpdate:show":e[0]||(e[0]=k=>j(y)?y.value=k:null)},{default:r(()=>[n(S,{style:{width:"700px"},"aria-hidden":""},{default:r(()=>[e[1]||(e[1]=i("div",{class:"text-xl text-center"},"Template Data",-1)),n(I,{class:"!my-2"}),n(z,{style:{"max-height":"600px","min-height":"200px"}},{default:r(()=>[n(t(ba),{class:jt(["w-full",[t(b).baseColor==="#000"?"jse-theme-dark":""]]),"model-value":M.templateData,mode:"text",ref_key:"jsonEditorRef",ref:l},null,8,["class","model-value"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),Aa={class:"min-h-[98px] flex justify-between"},Ha={key:0,class:"flex flex-col pr-4 mr-5",style:{"border-right":"1px solid rgba(56, 137, 197, 0.35)"}},Qa={class:"text-xl font-bold mr-2"},Ga={class:"text-xl font-bold"},Ja={class:"text-sm font-light mt-2 opacity-60"},Wa={class:"flex-1 flex"},Ka={class:"flex flex-col gap-1.5 min-w-[260px] pr-5 mr-5",style:{"border-right":"1px solid rgba(56, 137, 197, 0.35)"}},Ya={class:"flex"},Xa={class:"inline-block pr-1"},Za={class:"font-bold"},es={class:"inline-flex items-center"},ts={class:"flex-1 flex gap-1.5 min-w-[260px]"},as={class:"flex flex-col gap-1.5 flex-1"},ss={class:"flex"},ns={key:0,class:"pr-1"},os={class:"font-bold"},ls={class:"flex items-center"},is={key:0,class:"italic opacity-70 pr-1 text-xs"},rs={key:1,class:"italic pr-1 text-xs"},cs={key:2,class:"ml-1"},ps={class:"flex"},ds={key:1,class:"flex flex-col gap-2 min-w-52"},us={class:"flex gap-4 justify-between"},_s={key:1},fs={class:"flex gap-2"},ms={class:"flex items-center gap-2"},xs={class:"text-lg mb-4 flex justify-between"},gs={class:"text-lg mb-4 flex justify-between"},vs={class:"relative"},hs=N({__name:"ExpInfoView",setup(g){const _=Ft(),{t:l}=zt(),b=kt(),y=At(),o=Mt(),M=qt(),e=Ce(),I=va(),z=V(),S=V(),O=()=>{var s,a,p;(a=(s=e.expInfo)==null?void 0:s.exp)!=null&&a.template&&((p=S.value)==null||p.open())},k=V(),T=async()=>{const s=o.query.device_group_name;if(!s)return;const[a,p]=await sa({device_group_name:s});if(!a&&(p==null?void 0:p.status)===0){const{space_list:f,...u}=p.data;I.groupInfo=u,I.spaceList=f.map(v=>({...v,label:v.space_name,value:v.space_id}))}},F=async()=>{var p;if(o.query.exp_id===void 0||o.query.exp_id==="")return;const[s,a]=await fa({exp_id:o.query.exp_id,device_group_name:o.query.device_group_name,space_id:o.query.space_id});!s&&(a==null?void 0:a.status)===0&&((p=a.data)!=null&&p.data&&(a.data.data=JSON.parse(a.data.data)),e.result=a.data)},ne=async()=>{e.loading=!0;const{device_group_name:s,exp_id:a}=o.query;if(!s||!a){e.loading=!1;return}const[p,f]=await ua({device_group_name:s,exp_id:a});e.loading=!1,!p&&(f==null?void 0:f.status)===0&&(Ee(f),Y(()=>{o.query.dup&&(_e(),Y(()=>{setTimeout(()=>{M.replace({name:"expSettings",query:Me(o.query,"dup")})},300)}))}),F())},oe=async()=>{var p;if((p=e==null?void 0:e.expInfo)!=null&&p.status&&[K.COMPLETE,K.CANCELED,K.ERROR].includes(e.expInfo.status)){G();return}if(!o.query.exp_id){G();return}const[s,a]=await _a({device_group_name:o.query.device_group_name,exp_id:o.query.exp_id});!s&&(a==null?void 0:a.status)===0&&(e.expInfo={...e.expInfo,...a.data||{}})},le=async()=>{var p,f;const[s,a]=await na();if(!s&&(a==null?void 0:a.status)===0){const u={};Object.keys(a.data).forEach(E=>{u[E]=a.data[E].default?a.data[E].default:void 0});const v=(f=(p=e.expInfo)==null?void 0:p.exp)==null?void 0:f.options;e.expOptions=a.data,e.running={...e.running,formValue:{...e.running.formValue,...ke(v)?u:{}}}}},{start:ie,stop:G}=xa(oe,{isManual:!0,duration:3*1e3}),re=async()=>{const[s,a]=await oa();!s&&(a==null?void 0:a.status)===0&&(e.waveCompiler=a.data)},ce=async()=>{const[s,a]=await la();!s&&(a==null?void 0:a.status)===0&&(e.waveFunctions=a.data)},pe=async()=>{const[s,a]=await ia({device_group_name:o.query.device_group_name,space_id:o.query.space_id});if(!s&&(a==null?void 0:a.status)===0){let p=[];if(qe(a.data,(f,u)=>{p=p.concat(f.map((v,E)=>({id:ga(),value:v,visible:E<10,type:u})))}),e.allQubits=p,!o.query.exp_id){const f=JSON.parse(JSON.stringify(e.allQubits));let u=[];qe(e==null?void 0:e.gates,v=>{u=u.concat(v.entity)}),u.length>0&&f.forEach(v=>{u.includes(v.value)?v.visible=!0:v.visible=!1}),e.allQubits=f;return}Y(()=>{ne(),ie()})}},de=()=>{var s;(s=k.value)==null||s.open()},ue=()=>{const s=new URLSearchParams({device_group_name:o.query.device_group_name,task_id:o.query.task_id,task_title:o.query.task_title,space_id:o.query.space_id,exp_id:o.query.exp_id,dup:String(1)});window.open(`/experiment/expSettings?${s.toString()}`,_.expOpenForm)},_e=()=>{const s=JSON.parse(JSON.stringify(e.expInfo));delete s.exp_id,delete s.progress,delete s.status,delete s.exp_msg,e.expInfo=s,e.result=void 0,Y(()=>{y.success("Duplicated successfully"),M.replace({name:"expSettings",query:Me(o.query,["exp_id"])})})},fe=async()=>{const[s,a]=await ra({exp_id:o.query.exp_id});!s&&(a==null?void 0:a.status)===0&&y.success("实验终止成功")},me=()=>{var s;(s=z.value)==null||s.open()};Et(()=>{le(),pe(),T(),setTimeout(()=>{re(),ce()},100)}),Rt(o,s=>{if(s.query.create=="1"){const a=Vt("t");a&&(Ee(a),Y(()=>{setTimeout(()=>{M.replace({name:"expSettings",query:Me(o.query,"create")}).then(()=>{localStorage.removeItem("t")})},200)}))}},{immediate:!0});const xe=async()=>{var ge,ve,he,te,J,W,we,w,L,$,D,P,B,ae;if(e.showPlotParamsModal)return;e.showPlotParamsModal=!0;const s={};(ge=e==null?void 0:e.layers)==null||ge.forEach((ye,Ie)=>{s[String(Ie)]=ye});const{title:a,desc:p,...f}=(ve=e.running)==null?void 0:ve.formValue,u={template_name:(te=(he=e==null?void 0:e.expInfo)==null?void 0:he.exp)==null?void 0:te.template.split("/")[1],device_group_name:o.query.device_group_name,space_id:o.query.space_id,task_id:(J=e==null?void 0:e.expInfo)==null?void 0:J.task_id,experiment_json:{...(e==null?void 0:e.expInfo)||{},title:a,desc:p,template:(we=(W=e==null?void 0:e.expInfo)==null?void 0:W.exp)==null?void 0:we.template,template_data:(L=(w=e==null?void 0:e.expInfo)==null?void 0:w.exp)==null?void 0:L.template_data,wave_circuit:{gates:(e==null?void 0:e.gates)||{},layers:s},waveform_script:(($=e==null?void 0:e.program)==null?void 0:$.waveform_script)||[],space_parameter_script:((D=e==null?void 0:e.program)==null?void 0:D.space_parameter_script)||[],options:f}};(P=u==null?void 0:u.experiment_json)!=null&&P.exp&&((B=u==null?void 0:u.experiment_json)==null||delete B.exp),(ae=u==null?void 0:u.experiment_json)==null||delete ae.nr;const[v,E]=await ca(u);e.showPlotParamsModal=!1,!v&&(E==null?void 0:E.status)===0&&(y.success("Experiment Running"),M.replace({name:"finalSetting",query:{...o.query,exp_id:E.data.exp_id}}).then(()=>{window.location.reload()}))};Ht(G);const A=async()=>{var p,f;const[s,a]=await pa({group_name:o.query.device_group_name,exp_id:String((p=e==null?void 0:e.expInfo)==null?void 0:p.exp_id)});!s&&(a==null?void 0:a.status)===0&&bt.saveAs(`${be(location.origin)}/${be((f=a==null?void 0:a.data)==null?void 0:f.filename)}`,wt(a.data.filename))},Lt=async()=>{var p,f;const[s,a]=await da({group_name:o.query.device_group_name,space_id:o.query.space_id,version:String((p=e.expInfo)==null?void 0:p.space_timestamp)});!s&&(a==null?void 0:a.status)===0&&bt.saveAs(`${be(location.origin)}/${be((f=a==null?void 0:a.data)==null?void 0:f.filename)}`,wt(a.data.filename))},X=V(!1),$t=s=>{s||(X.value=!1)},ze=V(),H=V(),Dt=()=>{var s;(s=ze.value)==null||s.refresh()},Se=()=>{X.value=!0},Z=V(!1),Nt=s=>{s||(Z.value=!1,H.value="")},ee=V(!1),Ot=s=>{s||(ee.value=!1)},Tt=()=>{var s;(s=e.expInfo)!=null&&s.exp_id?ee.value=!0:Z.value=!0};return(s,a)=>{const p=Q,f=St("router-link"),u=Wt,v=Kt,E=Yt,ge=Xt,ve=Ca,he=Qt,te=Ct,J=Re,W=Ve,we=ea;return m(),C(gt,null,[n(he,{type:"info","show-icon":!1},{default:r(()=>{var w,L,$,D,P,B,ae,ye,Ie,Le,$e,De,Ne,Oe,Te,Pe,Be,Ue,je,Fe,Ae,He,Qe,Ge,Je,We,Ke,Ye,Xe,Ze,et,tt,at,st,nt,ot,lt,it,rt,ct,pt,dt,ut,_t,ft,mt;return[i("div",Aa,[(w=t(I))!=null&&w.groupInfo?(m(),C("div",Ha,[n(f,{class:"underline underline-offset-4 inline-flex items-end gap-2",to:{name:"deviceGroup",query:{org:($=(L=t(I))==null?void 0:L.groupInfo)==null?void 0:$.organization_id}}},{default:r(()=>{var x;return[n(p,{size:"24",component:t(Gt)},null,8,["component"]),i("span",Qa,d((x=t(I).groupInfo)==null?void 0:x.organization_name),1)]}),_:1},8,["to"]),n(f,{class:"underline underline-offset-4 inline-flex items-end gap-2 mt-2",to:{name:"taskList",query:{device_group_name:t(o).query.device_group_name}}},{default:r(()=>{var x,h;return[n(p,{component:t(Jt),size:"24"},null,8,["component"]),i("span",Ga,d((h=(x=t(I))==null?void 0:x.groupInfo)==null?void 0:h.device_group_name),1)]}),_:1},8,["to"]),i("span",Ja,d((P=(D=t(I))==null?void 0:D.groupInfo)==null?void 0:P.description),1)])):R("",!0),i("div",Wa,[(B=t(e))!=null&&B.expInfo?(m(),C(gt,{key:0},[i("div",Ka,[i("div",Ya,[i("span",Xa,[n(u,{type:"success",size:"small",color:{color:"#ff5722",textColor:"#fff"}},{default:r(()=>{var x,h;return[q(d(t(l)("expInfo.task"))+" "+d((h=(x=t(e))==null?void 0:x.expInfo)==null?void 0:h.task_id),1)]}),_:1})]),n(f,{to:{name:"experimentList",query:{device_group_name:t(o).query.device_group_name,task_id:(ye=(ae=t(e))==null?void 0:ae.expInfo)==null?void 0:ye.task_id,task_title:(Le=(Ie=t(e))==null?void 0:Ie.expInfo)==null?void 0:Le.task_title,space_id:t(o).query.space_id}},class:"underline underline-offset-4"},{default:r(()=>{var x,h;return[i("span",Za,d((h=(x=t(e))==null?void 0:x.expInfo)==null?void 0:h.task_title),1)]}),_:1},8,["to"]),n(v,{type:"primary",size:"small",class:"!ml-2 !h-[22px]",onClick:me},{icon:r(()=>[n(t(ka))]),default:r(()=>[q(" "+d(t(l)("expInfo.create")),1)]),_:1})]),i("div",null,[i("span",es,[q(d(t(l)("expInfo.space"))+"： ",1),n(u,{size:"small",class:"!cursor-pointer",type:"warning",onClick:Tt},{default:r(()=>{var x,h,se,xt;return[q(d((h=(x=t(e))==null?void 0:x.expInfo)==null?void 0:h.space_name)+" ( "+d((xt=(se=t(e))==null?void 0:se.expInfo)==null?void 0:xt.space_time_str)+" ) ",1)]}),_:1}),n(E,{trigger:"hover"},{trigger:r(()=>[n(v,{type:"info",class:"!ml-1",size:"tiny",onClick:Lt},{icon:r(()=>[n(t(yt))]),_:1})]),default:r(()=>[q(" "+d(t(l)("expInfo.downloadSpaceParams")),1)]),_:1})])]),i("div",null,d((De=($e=t(e))==null?void 0:$e.expInfo)==null?void 0:De.task_desc),1)]),i("div",ts,[(Ne=t(e).result)!=null&&Ne.small_picture_url?(m(),U(ge,{key:0,src:t(vt)((Oe=t(e).result)==null?void 0:Oe.small_picture_url,"t",String(+new Date)),"preview-src":((Te=t(e).result)==null?void 0:Te.big_picture_url)||t(vt)((Pe=t(e).result)==null?void 0:Pe.small_picture_url,"t",String(+new Date)),alt:"",class:"mr-2 h-fit p-[1px] w-[100px]",style:Zt({border:`1px solid ${t(b).dividerColor}`})},null,8,["src","preview-src","style"])):R("",!0),i("div",as,[i("div",ss,[(Ue=(Be=t(e))==null?void 0:Be.expInfo)!=null&&Ue.exp_id?(m(),C("span",ns,[n(u,{color:{color:"#7816ff",textColor:"#fff"},size:"small"},{default:r(()=>{var x,h;return[q(d(t(l)("expInfo.exp"))+" "+d((h=(x=t(e))==null?void 0:x.expInfo)==null?void 0:h.exp_id),1)]}),_:1})])):R("",!0),i("span",os,d((Fe=(je=t(e))==null?void 0:je.expInfo)==null?void 0:Fe.exp_title),1)]),i("div",ls,[(Ae=t(e).expInfo)!=null&&Ae.exp_id?(m(),C("span",is,d((Qe=(He=t(e))==null?void 0:He.expInfo)==null?void 0:Qe.create_time),1)):(m(),C("span",rs,[n(u,{size:"small",bordered:!1,color:{color:"#f00",textColor:"#fff"}},{default:r(()=>[q(d(t(l)("expInfo.unsumbit")),1)]),_:1})])),i("span",null,[n(u,{type:"warning",size:"small",onClick:O,class:"!cursor-pointer"},{default:r(()=>{var x,h,se;return[q(d(((se=(h=(x=t(e))==null?void 0:x.expInfo)==null?void 0:h.exp)==null?void 0:se.template)||t(l)("expInfo.notpl")),1)]}),_:1})]),(Je=(Ge=t(e))==null?void 0:Ge.expInfo)!=null&&Je.source?(m(),C("span",cs,[n(u,{type:"info",size:"small",class:"!cursor-pointer"},{default:r(()=>{var x,h;return[q(d(t(l)("expInfo.source"))+": "+d((h=(x=t(e))==null?void 0:x.expInfo)==null?void 0:h.source),1)]}),_:1})])):R("",!0),(We=t(e).expInfo)!=null&&We.exp_id?(m(),U(E,{key:3,trigger:"hover"},{trigger:r(()=>[n(v,{type:"info",class:"!ml-1",size:"tiny",onClick:A},{icon:r(()=>[n(t(yt))]),_:1})]),default:r(()=>[q(" "+d(t(l)("expInfo.downloadExp")),1)]),_:1})):R("",!0)]),i("div",ps,d((Ye=(Ke=t(e))==null?void 0:Ke.expInfo)==null?void 0:Ye.exp_desc),1)])])],64)):R("",!0)]),(Xe=t(e))!=null&&Xe.expInfo?(m(),C("div",ds,[i("div",us,[(et=(Ze=t(e))==null?void 0:Ze.expInfo)!=null&&et.status?(m(),U(u,{key:0,color:{color:t(ht)[t(e).expInfo.status].color,textColor:"#fff"},size:"small"},{default:r(()=>[q(d(t(l)(t(ht)[t(e).expInfo.status].text)),1)]),_:1},8,["color"])):R("",!0),(at=(tt=t(e))==null?void 0:tt.expInfo)!=null&&at.progress?(m(),C("span",_s,d((nt=(st=t(e))==null?void 0:st.expInfo)==null?void 0:nt.progress),1)):R("",!0),n(ve,{value:(lt=(ot=t(e).expInfo)==null?void 0:ot.exp_msg)==null?void 0:lt.length,max:15,class:"cursor-pointer",onClick:de},{default:r(()=>[n(p,{size:22},{default:r(()=>[n(t(Pa))]),_:1})]),_:1},8,["value"])]),i("div",fs,[n(v,{type:"info",size:"small",class:"flex-1",onClick:ue,disabled:((ct=(rt=(it=t(e))==null?void 0:it.expInfo)==null?void 0:rt.exp)==null?void 0:ct.exp_mode)==="batch_circuit"||!t(o).query.exp_id},{icon:r(()=>[n(t(wa))]),default:r(()=>[q(d(t(l)("expInfo.duplicate"))+" ",1)]),_:1},8,["disabled"]),n(v,{type:"info",size:"small",class:"flex-1",disabled:![t(K).SERVICE_QUEUING,t(K).RUNNING,t(K).HOST_DOWNLOADED].includes((pt=t(e).expInfo)==null?void 0:pt.status),onClick:fe},{icon:r(()=>[n(t(ya))]),default:r(()=>[q(d(t(l)("expInfo.stop"))+" ",1)]),_:1},8,["disabled"])]),i("div",ms,[n(v,{class:"flex-1",type:"primary",size:"small",loading:t(e).showPlotParamsModal,onClick:xe,disabled:!!((ut=(dt=t(e))==null?void 0:dt.expInfo)!=null&&ut.exp_id)},{icon:r(()=>[n(t(La))]),default:r(()=>[q(d(t(l)("expInfo.run"))+" ",1)]),_:1},8,["loading","disabled"])])])):R("",!0),n(ja,{ref_key:"msgViewRef",ref:k},null,512)]),n(Ia,{ref_key:"expsTplRef",ref:z},null,512),n(Fa,{ref_key:"tempalteDataRef",ref:S,"template-data":(mt=(ft=(_t=t(e))==null?void 0:_t.expInfo)==null?void 0:ft.exp)==null?void 0:mt.template_data},null,8,["template-data"])]}),_:1}),n(W,{show:t(ee),"onUpdate:show":[a[0]||(a[0]=w=>j(ee)?ee.value=w:null),Ot],size:"huge"},{default:r(()=>[n(J,{style:{"min-height":"82vh",overflow:"auto",width:"1200px","min-width":"500px"}},{default:r(()=>{var w,L,$,D,P,B;return[i("div",xs,[i("div",null,d(t(l)("expInfo.space"))+"： "+d((L=(w=t(e))==null?void 0:w.expInfo)==null?void 0:L.space_name)+" ( "+d((D=($=t(e))==null?void 0:$.expInfo)==null?void 0:D.space_time_str)+" ) ",1)]),n(te,{class:"!my-4"}),t(o).query.space_id?(m(),U(It,{key:0,ref_key:"paramsLatestRef",ref:ze,"max-height":"65vh","read-only":"",version:(B=(P=t(e))==null?void 0:P.expInfo)==null?void 0:B.space_timestamp,"space-id":+t(o).query.space_id},null,8,["version","space-id"])):R("",!0)]}),_:1})]),_:1},8,["show"]),n(W,{show:t(Z),"onUpdate:show":[a[2]||(a[2]=w=>j(Z)?Z.value=w:null),Nt],size:"huge"},{default:r(()=>[n(J,{style:{"min-height":"82vh",overflow:"auto",width:"1200px","min-width":"500px"}},{default:r(()=>{var w,L,$,D;return[i("div",gs,[i("div",null,d(t(l)("expInfo.space"))+"： "+d((L=(w=t(e))==null?void 0:w.expInfo)==null?void 0:L.space_name)+" ( "+d((D=($=t(e))==null?void 0:$.expInfo)==null?void 0:D.space_time_str)+" ) ",1),i("div",vs,[n(we,{style:{width:"310px","padding-right":"20px"},value:t(H),"onUpdate:value":a[1]||(a[1]=P=>j(H)?H.value=P:null),valueModifiers:{trim:!0},onKeyup:ta(Se,["enter"]),placeholder:t(l)("groupDetail.parameterManager.searchPlaceholder")},null,8,["value","placeholder"]),i("div",{class:"absolute -right-4 top-1/2 -translate-1/2 h-full w-8 flex items-center justify-center cursor-pointer",onClick:Se},[n(p,{color:t(b).primaryColor,component:t(aa)},null,8,["color","component"])])])]),n(te,{class:"!my-4"}),t(o).query.space_id?(m(),U(It,{key:0,ref_key:"paramsLatestRef",ref:ze,"max-height":"65vh","space-id":+t(o).query.space_id},null,8,["space-id"])):R("",!0)]}),_:1})]),_:1},8,["show"]),n(W,{show:t(X),"onUpdate:show":a[4]||(a[4]=w=>j(X)?X.value=w:null),size:"huge",onUpdateShow:$t},{default:r(()=>[n(J,{style:{"min-height":"82vh",overflow:"auto",width:"1300px","max-width":"95vw","min-width":"500px"}},{default:r(()=>[t(o).query.space_id?(m(),U(ma,{key:0,search:"","space-id":+t(o).query.space_id,"hide-history-option":"",modelValue:t(H),"onUpdate:modelValue":a[3]||(a[3]=w=>j(H)?H.value=w:null),onRefresh:Dt},null,8,["space-id","modelValue"])):R("",!0)]),_:1})]),_:1},8,["show"])],64)}}}),ws={class:"flex mt-5"},ys={class:"ml-5 flex-1"},Hs=N({__name:"ExperimentView",setup(g){const{t:_}=zt(),l=Mt(),b=qt(),y=Ce(),o=V(),M=e=>{b.push({name:e,query:l.query})};return Rt(l,e=>{o.value=e.name},{deep:!0,immediate:!0}),Et(()=>{const e=Vt("t");ke(e)||(y.reset(),Y(()=>{Ee(e),localStorage.removeItem("t")}))}),(e,I)=>{const z=za,S=Ma,O=St("router-view");return m(),C("div",null,[n(hs),i("div",ws,[n(S,{type:"card",animated:"",placement:"left",class:"!h-full !w-auto",value:t(o),"onUpdate:value":I[0]||(I[0]=k=>j(o)?o.value=k:null),onUpdateValue:M},{default:r(()=>{var k,T,F;return[n(z,{name:"expSettings",tab:c("div",{class:"flex items-center gap-2"},[c("div",{class:"flex items-center"},c(t(Q),{size:20},{default:()=>c(t(Ua))})),c("div",[c("div",{class:"font-bold"},t(_)("expInfo.expSettings"))])])},null,8,["tab"]),n(z,{name:"waveforms",tab:c("div",{class:"flex items-center gap-2"},[c("div",{class:"flex items-center"},c(t(Q),{size:20},{default:()=>c(t(ha))})),c("div",[c("div",{class:"font-bold"},t(_)("expInfo.waveforms"))])])},null,8,["tab"]),n(z,{name:"program",tab:c("div",{class:"flex items-center gap-2"},[c("div",{class:"flex items-center"},c(t(Q),{size:20},{default:()=>c(t(Oa))})),c("div",[c("div",{class:"font-bold"},t(_)("expInfo.program"))])])},null,8,["tab"]),n(z,{name:"finalSetting",disabled:!((k=t(y).expInfo)!=null&&k.exp_id),tab:c("div",{class:"flex items-center gap-2"},[c("div",{class:"flex items-center"},c(t(Q),{size:20},{default:()=>c(t(Da))})),c("div",[c("div",{class:"font-bold"},t(_)("expInfo.plotter"))])])},null,8,["disabled","tab"]),n(z,{name:"result",disabled:!((T=t(y).expInfo)!=null&&T.exp_id),tab:c("div",{class:"flex items-center gap-2"},[c("div",{class:"flex items-center"},c(t(Q),{size:20},{default:()=>c(t(Va))})),c("div",[c("div",{class:"font-bold"},t(_)("expInfo.fitting"))])])},null,8,["disabled","tab"]),n(z,{name:"attachment",disabled:!((F=t(y).expInfo)!=null&&F.exp_id),tab:c("div",{class:"flex items-center gap-2"},[c("div",{class:"flex items-center"},c(t(Q),{size:20},{default:()=>c(t(Ea))})),c("div",[c("div",{class:"font-bold"},t(_)("expInfo.attachment"))])])},null,8,["disabled","tab"])]}),_:1},8,["value"]),i("div",ys,[n(O)])])])}}});export{Hs as default};
