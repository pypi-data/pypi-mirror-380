import{d as J,b as O,a2 as j,r as f,R as D,a4 as E,al as x,aY as I,aP as s,E as i,f as u,k as R,l as t,w as _,e as T,ab as q,ac as z,m as A,z as p,H as F,s as P,t as H,p as L,ci as Y,aa as G,n as K}from"./index-CvCv8tjC.js";import{i as M}from"./json-editor-vue-BvJIz9SG.js";import{N as Q}from"./InputNumber-C_LhnbBs.js";import{N as W}from"./Switch-1B_VZ16h.js";const ee=J({__name:"DynamicForm",props:{cfgs:{},disabled:{type:Boolean}},setup(b,{expose:h}){const U=b,{t:w}=O(),N=j(),y=f(null),l=D({}),c=f(),V=()=>new Promise((r,o)=>{var m;(m=y.value)==null||m.validate(d=>{if(d)o(null);else{const a=JSON.parse(JSON.stringify(l));r(a)}})});return E(()=>U.cfgs,r=>{if(r){const o=JSON.parse(JSON.stringify(r)),m={};x(l,(d,a)=>{delete l[a]}),I(()=>{x(o,(d,a)=>{m[a]={required:d.dtype!==s.text&&!!d.necessary,message:w("common.required")},o[a].default!==null&&(o[a].multi_choose?l[o[a].field]=Array.isArray(o[a].default)?o[a].default:[o[a].default]:l[o[a].field]=o[a].default)}),c.value=m})}},{deep:!0,immediate:!0}),h({submit:V}),(r,o)=>{const m=F,d=L,a=K,v=Q,k=W,S=A,C=R;return u(),i(C,{model:t(l),rules:t(c),ref_key:"formRef",ref:y,disabled:r.disabled},{default:_(()=>[(u(!0),T(q,null,z(r.cfgs,(e,B)=>(u(),i(S,{key:B,label:e.dtype===t(s).text?"":e.title,path:e.field},{default:_(()=>[e.dtype===t(s).text?(u(),i(m,{key:0,class:"w-full",type:"info","show-icon":!1},{default:_(()=>[P(H(e==null?void 0:e.title),1)]),_:2},1024)):p("",!0),e.dtype===t(s).enum&&e.options?(u(),i(d,{key:1,value:t(l)[e.field],"onUpdate:value":n=>t(l)[e.field]=n,options:t(Y)(e.options),clearable:"",filterable:"",multiple:e.multi_choose},null,8,["value","onUpdate:value","options","multiple"])):p("",!0),e.dtype===t(s).dict||e.dtype===t(s).list?(u(),i(t(M),{key:2,class:G(["w-full",[t(N).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:t(l)[e.field],"onUpdate:modelValue":n=>t(l)[e.field]=n,mode:"text"},null,8,["class","modelValue","onUpdate:modelValue"])):p("",!0),e.dtype===t(s).str&&e.multi_line?(u(),i(a,{key:3,value:t(l)[e.field],"onUpdate:value":n=>t(l)[e.field]=n,clearable:"",maxlength:e.max_length,type:"textarea"},null,8,["value","onUpdate:value","maxlength"])):e.dtype===t(s).str?(u(),i(a,{key:4,value:t(l)[e.field],"onUpdate:value":n=>t(l)[e.field]=n,clearable:"",maxlength:e.max_length},null,8,["value","onUpdate:value","maxlength"])):p("",!0),e.dtype===t(s).int?(u(),i(v,{key:5,min:e.min,max:e.max,precision:0,class:"w-full",value:t(l)[e.field],"onUpdate:value":n=>t(l)[e.field]=n},null,8,["min","max","value","onUpdate:value"])):p("",!0),e.dtype===t(s).float?(u(),i(v,{key:6,min:e.min,max:e.max,value:t(l)[e.field],"onUpdate:value":n=>t(l)[e.field]=n,class:"w-full"},null,8,["min","max","value","onUpdate:value"])):p("",!0),e.dtype===t(s).bool?(u(),i(k,{key:7,value:t(l)[e.field],"onUpdate:value":n=>t(l)[e.field]=n},null,8,["value","onUpdate:value"])):p("",!0)]),_:2},1032,["label","path"]))),128))]),_:1},8,["model","rules","disabled"])}}});export{ee as _};
