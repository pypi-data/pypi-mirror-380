import{ap as Oe,am as N,cj as Dr,ck as Rr,ao as ie,aq as Qe,bb as ta,cl as Lr,d as ue,Q,c4 as kr,c5 as zr,be as Tr,c7 as Or,c8 as Ot,bc as Pr,ar as Er,ax as Ba,cm as Nr,r as H,cb as Hr,J as W,aH as $r,aG as Br,a4 as he,aY as se,bQ as Fr,aA as aa,cd as Gr,aM as et,cn as tt,co as at,e as ae,f as G,h as de,bj as Ft,bk as ct,al as dt,E as ne,l as k,cp as Ne,a9 as Gt,w as re,ab as gt,ac as Ut,ad as Kt,z as me,a8 as te,i as ee,t as _e,p as Fa,a1 as Ue,a2 as ke,o as ze,bC as mt,a5 as Ke,aa as We,a6 as xe,bD as Ur,M as He,s as $e,bE as Kr,ae as Wr,b as Xr,C as Yr,aT as ra,bo as ia,bF as na,a7 as Zr,ai as jr,B as qr,v as Jr,ak as ge}from"./index-CvCv8tjC.js";import{t as oa}from"./exp-BIf1sWJ4.js";import{_ as Qr}from"./Tree-DUoMBoa6.js";import{_ as q,L as yt,s as B,M as _t,N as Wt,P as Xt,O as sa,o as ei,e as le,m as Te,Q as Pt,T as Ga,U as ht,V as Fe,W as ti,X as ai,Y as la,$ as Re,a0 as ri,g as Xe,a1 as Yt,a2 as Zt,a3 as Ua,R as Le,a4 as jt,a5 as Et,a6 as Ka,a7 as ii,a8 as ni,a9 as Wa,aa as oi,ab as si,ac as li,ad as ui,ae as ci,af as di,ag as hi,ah as pi,ai as pt,aj as Xa,ak as vi,A as Se,al as fi,am as oe,k as gi,i as we,l as Ya,an as Ct,ao as Vt,ap as fe,aq as mi,ar as yi,as as Me,at as _i,au as bi,av as At,aw as ua,ax as Za,ay as xi,az as Si,aA as wi,q as Mi,aB as Ii,aC as ja,aD as ca,C as Ci,aE as Vi,aF as Ai,b as Di,a as Ri,Z as Be,c as lt,aG as Nt,aH as Li,aI as ki,aJ as zi,aK as Dt,aL as Rt,aM as Ti,aN as Oi,aO as Pi,aP as Ei,aQ as Ni,aR as da,aS as Hi,aT as $i,B as bt,D as xt,E as St,F as qa,G as qt,H as wt,J as Bi,K as Ja,I as Fi}from"./installCanvasRenderer-DQ3trSBi.js";import{u as Gi}from"./exp-CMCdJMb9.js";const Ui=Oe([N("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[ie("reverse",[N("slider-handles",[N("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),N("slider-dots",[N("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),ie("vertical",[N("slider-handles",[N("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),N("slider-marks",[N("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),N("slider-dots",[N("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),ie("vertical",`
 box-sizing: content-box;
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[N("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[N("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),N("slider-rail",`
 height: 100%;
 `,[Qe("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),ie("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),N("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[N("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),N("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[N("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),ie("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[N("slider-handle",`
 cursor: not-allowed;
 `)]),ie("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),Oe("&:hover",[N("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Qe("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),N("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),ie("active",[N("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Qe("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),N("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),N("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[N("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),N("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[Qe("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),N("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[N("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[N("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[Oe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),Oe("&:focus",[N("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[Oe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),N("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[ie("transition-disabled",[N("slider-dot","transition: none;")]),N("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[ie("active","border: var(--n-dot-border-active);")])])]),N("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[ta()]),N("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[ie("top",`
 margin-bottom: 12px;
 `),ie("right",`
 margin-left: 12px;
 `),ie("bottom",`
 margin-top: 12px;
 `),ie("left",`
 margin-right: 12px;
 `),ta()]),Dr(N("slider",[N("slider-dot","background-color: var(--n-dot-color-modal);")])),Rr(N("slider",[N("slider-dot","background-color: var(--n-dot-color-popover);")]))]);function ha(i){return window.TouchEvent&&i instanceof window.TouchEvent}function pa(){const i=new Map,a=e=>t=>{i.set(e,t)};return Lr(()=>{i.clear()}),[i,a]}const Ki=0,Wi=Object.assign(Object.assign({},Ba.props),{to:Ot.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onDragstart:[Function],onDragend:[Function]}),Xi=ue({name:"Slider",props:Wi,slots:Object,setup(i){const{mergedClsPrefixRef:a,namespaceRef:e,inlineThemeDisabled:t}=Er(i),r=Ba("Slider","-slider",Ui,Nr,i,a),o=H(null),[n,s]=pa(),[l,c]=pa(),d=H(new Set),u=Hr(i),{mergedDisabledRef:h}=u,p=W(()=>{const{step:y}=i;if(Number(y)<=0||y==="mark")return 0;const S=y.toString();let A=0;return S.includes(".")&&(A=S.length-S.indexOf(".")-1),A}),f=H(i.defaultValue),g=$r(i,"value"),m=Br(g,f),v=W(()=>{const{value:y}=m;return(i.range?y:[y]).map(Ie)}),M=W(()=>v.value.length>2),I=W(()=>i.placement===void 0?i.vertical?"right":"top":i.placement),z=W(()=>{const{marks:y}=i;return y?Object.keys(y).map(Number.parseFloat):null}),V=H(-1),b=H(-1),x=H(-1),R=H(!1),w=H(!1),C=W(()=>{const{vertical:y,reverse:S}=i;return y?S?"top":"bottom":S?"right":"left"}),_=W(()=>{if(M.value)return;const y=v.value,S=Ce(i.range?Math.min(...y):i.min),A=Ce(i.range?Math.max(...y):y[0]),{value:$}=C;return i.vertical?{[$]:`${S}%`,height:`${A-S}%`}:{[$]:`${S}%`,width:`${A-S}%`}}),D=W(()=>{const y=[],{marks:S}=i;if(S){const A=v.value.slice();A.sort((J,Z)=>J-Z);const{value:$}=C,{value:U}=M,{range:X}=i,pe=U?()=>!1:J=>X?J>=A[0]&&J<=A[A.length-1]:J<=A[0];for(const J of Object.keys(S)){const Z=Number(J);y.push({active:pe(Z),key:Z,label:S[J],style:{[$]:`${Ce(Z)}%`}})}}return y});function O(y,S){const A=Ce(y),{value:$}=C;return{[$]:`${A}%`,zIndex:S===V.value?1:0}}function L(y){return i.showTooltip||x.value===y||V.value===y&&R.value}function T(y){return R.value?!(V.value===y&&b.value===y):!0}function F(y){var S;~y&&(V.value=y,(S=n.get(y))===null||S===void 0||S.focus())}function E(){l.forEach((y,S)=>{L(S)&&y.syncPosition()})}function P(y){const{"onUpdate:value":S,onUpdateValue:A}=i,{nTriggerFormInput:$,nTriggerFormChange:U}=u;A&&et(A,y),S&&et(S,y),f.value=y,$(),U()}function Y(y){const{range:S}=i;if(S){if(Array.isArray(y)){const{value:A}=v;y.join()!==A.join()&&P(y)}}else Array.isArray(y)||v.value[0]!==y&&P(y)}function K(y,S){if(i.range){const A=v.value.slice();A.splice(S,1,y),Y(A)}else Y(y)}function ce(y,S,A){const $=A!==void 0;A||(A=y-S>0?1:-1);const U=z.value||[],{step:X}=i;if(X==="mark"){const Z=Ye(y,U.concat(S),$?A:void 0);return Z?Z.value:S}if(X<=0)return S;const{value:pe}=p;let J;if($){const Z=Number((S/X).toFixed(pe)),ye=Math.floor(Z),Mt=Z>ye?ye:ye-1,It=Z<ye?ye:ye+1;J=Ye(S,[Number((Mt*X).toFixed(pe)),Number((It*X).toFixed(pe)),...U],A)}else{const Z=lr(y);J=Ye(y,[...U,Z])}return J?Ie(J.value):S}function Ie(y){return Math.min(i.max,Math.max(i.min,y))}function Ce(y){const{max:S,min:A}=i;return(y-A)/(S-A)*100}function sr(y){const{max:S,min:A}=i;return A+(S-A)*y}function lr(y){const{step:S,min:A}=i;if(Number(S)<=0||S==="mark")return y;const $=Math.round((y-A)/S)*S+A;return Number($.toFixed(p.value))}function Ye(y,S=z.value,A){if(!(S!=null&&S.length))return null;let $=null,U=-1;for(;++U<S.length;){const X=S[U]-y,pe=Math.abs(X);(A===void 0||X*A>0)&&($===null||pe<$.distance)&&($={index:U,distance:pe,value:S[U]})}return $}function Jt(y){const S=o.value;if(!S)return;const A=ha(y)?y.touches[0]:y,$=S.getBoundingClientRect();let U;return i.vertical?U=($.bottom-A.clientY)/$.height:U=(A.clientX-$.left)/$.width,i.reverse&&(U=1-U),sr(U)}function ur(y){if(h.value||!i.keyboard)return;const{vertical:S,reverse:A}=i;switch(y.key){case"ArrowUp":y.preventDefault(),Ze(S&&A?-1:1);break;case"ArrowRight":y.preventDefault(),Ze(!S&&A?-1:1);break;case"ArrowDown":y.preventDefault(),Ze(S&&A?1:-1);break;case"ArrowLeft":y.preventDefault(),Ze(!S&&A?1:-1);break}}function Ze(y){const S=V.value;if(S===-1)return;const{step:A}=i,$=v.value[S],U=Number(A)<=0||A==="mark"?$:$+A*y;K(ce(U,$,y>0?1:-1),S)}function cr(y){var S,A;if(h.value||!ha(y)&&y.button!==Ki)return;const $=Jt(y);if($===void 0)return;const U=v.value.slice(),X=i.range?(A=(S=Ye($,U))===null||S===void 0?void 0:S.index)!==null&&A!==void 0?A:-1:0;X!==-1&&(y.preventDefault(),F(X),dr(),K(ce($,v.value[X]),X))}function dr(){R.value||(R.value=!0,i.onDragstart&&et(i.onDragstart),tt("touchend",document,Je),tt("mouseup",document,Je),tt("touchmove",document,qe),tt("mousemove",document,qe))}function je(){R.value&&(R.value=!1,i.onDragend&&et(i.onDragend),at("touchend",document,Je),at("mouseup",document,Je),at("touchmove",document,qe),at("mousemove",document,qe))}function qe(y){const{value:S}=V;if(!R.value||S===-1){je();return}const A=Jt(y);A!==void 0&&K(ce(A,v.value[S]),S)}function Je(){je()}function hr(y){V.value=y,h.value||(x.value=y)}function pr(y){V.value===y&&(V.value=-1,je()),x.value===y&&(x.value=-1)}function vr(y){x.value=y}function fr(y){x.value===y&&(x.value=-1)}he(V,(y,S)=>void se(()=>b.value=S)),he(m,()=>{if(i.marks){if(w.value)return;w.value=!0,se(()=>{w.value=!1})}se(E)}),Fr(()=>{je()});const Qt=W(()=>{const{self:{markFontSize:y,railColor:S,railColorHover:A,fillColor:$,fillColorHover:U,handleColor:X,opacityDisabled:pe,dotColor:J,dotColorModal:Z,handleBoxShadow:ye,handleBoxShadowHover:Mt,handleBoxShadowActive:It,handleBoxShadowFocus:gr,dotBorder:mr,dotBoxShadow:yr,railHeight:_r,railWidthVertical:br,handleSize:xr,dotHeight:Sr,dotWidth:wr,dotBorderRadius:Mr,fontSize:Ir,dotBorderActive:Cr,dotColorPopover:Vr},common:{cubicBezierEaseInOut:Ar}}=r.value;return{"--n-bezier":Ar,"--n-dot-border":mr,"--n-dot-border-active":Cr,"--n-dot-border-radius":Mr,"--n-dot-box-shadow":yr,"--n-dot-color":J,"--n-dot-color-modal":Z,"--n-dot-color-popover":Vr,"--n-dot-height":Sr,"--n-dot-width":wr,"--n-fill-color":$,"--n-fill-color-hover":U,"--n-font-size":Ir,"--n-handle-box-shadow":ye,"--n-handle-box-shadow-active":It,"--n-handle-box-shadow-focus":gr,"--n-handle-box-shadow-hover":Mt,"--n-handle-color":X,"--n-handle-size":xr,"--n-opacity-disabled":pe,"--n-rail-color":S,"--n-rail-color-hover":A,"--n-rail-height":_r,"--n-rail-width-vertical":br,"--n-mark-font-size":y}}),Ve=t?aa("slider",void 0,Qt,i):void 0,ea=W(()=>{const{self:{fontSize:y,indicatorColor:S,indicatorBoxShadow:A,indicatorTextColor:$,indicatorBorderRadius:U}}=r.value;return{"--n-font-size":y,"--n-indicator-border-radius":U,"--n-indicator-box-shadow":A,"--n-indicator-color":S,"--n-indicator-text-color":$}}),Ae=t?aa("slider-indicator",void 0,ea,i):void 0;return{mergedClsPrefix:a,namespace:e,uncontrolledValue:f,mergedValue:m,mergedDisabled:h,mergedPlacement:I,isMounted:Gr(),adjustedTo:Ot(i),dotTransitionDisabled:w,markInfos:D,isShowTooltip:L,shouldKeepTooltipTransition:T,handleRailRef:o,setHandleRefs:s,setFollowerRefs:c,fillStyle:_,getHandleStyle:O,activeIndex:V,arrifiedValues:v,followerEnabledIndexSet:d,handleRailMouseDown:cr,handleHandleFocus:hr,handleHandleBlur:pr,handleHandleMouseEnter:vr,handleHandleMouseLeave:fr,handleRailKeyDown:ur,indicatorCssVars:t?void 0:ea,indicatorThemeClass:Ae==null?void 0:Ae.themeClass,indicatorOnRender:Ae==null?void 0:Ae.onRender,cssVars:t?void 0:Qt,themeClass:Ve==null?void 0:Ve.themeClass,onRender:Ve==null?void 0:Ve.onRender}},render(){var i;const{mergedClsPrefix:a,themeClass:e,formatTooltip:t}=this;return(i=this.onRender)===null||i===void 0||i.call(this),Q("div",{class:[`${a}-slider`,e,{[`${a}-slider--disabled`]:this.mergedDisabled,[`${a}-slider--active`]:this.activeIndex!==-1,[`${a}-slider--with-mark`]:this.marks,[`${a}-slider--vertical`]:this.vertical,[`${a}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},Q("div",{class:`${a}-slider-rail`},Q("div",{class:`${a}-slider-rail__fill`,style:this.fillStyle}),this.marks?Q("div",{class:[`${a}-slider-dots`,this.dotTransitionDisabled&&`${a}-slider-dots--transition-disabled`]},this.markInfos.map(r=>Q("div",{key:r.key,class:[`${a}-slider-dot`,{[`${a}-slider-dot--active`]:r.active}],style:r.style}))):null,Q("div",{ref:"handleRailRef",class:`${a}-slider-handles`},this.arrifiedValues.map((r,o)=>{const n=this.isShowTooltip(o);return Q(kr,null,{default:()=>[Q(zr,null,{default:()=>Q("div",{ref:this.setHandleRefs(o),class:`${a}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,role:"slider","aria-valuenow":r,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-orientation":this.vertical?"vertical":"horizontal","aria-disabled":this.disabled,style:this.getHandleStyle(r,o),onFocus:()=>{this.handleHandleFocus(o)},onBlur:()=>{this.handleHandleBlur(o)},onMouseenter:()=>{this.handleHandleMouseEnter(o)},onMouseleave:()=>{this.handleHandleMouseLeave(o)}},Tr(this.$slots.thumb,()=>[Q("div",{class:`${a}-slider-handle`})]))}),this.tooltip&&Q(Or,{ref:this.setFollowerRefs(o),show:n,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(o),teleportDisabled:this.adjustedTo===Ot.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>Q(Pr,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(o),onEnter:()=>{this.followerEnabledIndexSet.add(o)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(o)}},{default:()=>{var s;return n?((s=this.indicatorOnRender)===null||s===void 0||s.call(this),Q("div",{class:[`${a}-slider-handle-indicator`,this.indicatorThemeClass,`${a}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof t=="function"?t(r):r)):null}})})]})})),this.marks?Q("div",{class:`${a}-slider-marks`},this.markInfos.map(r=>Q("div",{key:r.key,class:`${a}-slider-mark`,style:r.style},typeof r.label=="function"?r.label():r.label))):null))}}),Yi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Zi=ue({name:"BackupTableSharp",render:function(a,e){return G(),ae("svg",Yi,e[0]||(e[0]=[de("path",{d:"M20 6v14H6v2h16V6z",fill:"currentColor"},null,-1),de("path",{d:"M18 2H2v16h16V2zM9 16H4v-5h5v5zm7 0h-5v-5h5v5zm0-7H4V4h12v5z",fill:"currentColor"},null,-1)]))}}),ji=ue({__name:"DataFields",props:Ft({allFields:{},dividerKey:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const a=i,e=ct(i,"modelValue"),t=W(()=>{const o=[];return dt(a.allFields,(n,s)=>{o.push({key:s,label:s,children:n==null?void 0:n.map(l=>({key:`${s}${a.dividerKey}${l}`,label:l}))})}),o}),r=(o,n)=>{};return(o,n)=>{const s=Qr;return G(),ne(s,{"block-line":"","show-line":"",checkable:"","expand-on-click":"","check-on-click":"","default-expand-all":"","check-strategy":"child",data:k(t),"checked-keys":e.value,"onUpdate:checkedKeys":n[0]||(n[0]=l=>e.value=l),onUpdateCheckedKeys:r},null,8,["data","checked-keys"])}}}),qi={key:0,class:"flex items-center gap-2"},Ji={class:"w-2"},Qi=ue({__name:"VarSelect",props:Ft({options:{},plotType:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const a=i,e=ct(i,"modelValue"),t=["X","Y","Z"],r=W(()=>{var n;return(n=a.options)==null?void 0:n.map(s=>s==null?void 0:s.map((l,c)=>({...l,label:Ne(l),value:c})))}),o=(n,s)=>{};return(n,s)=>{const l=Fa,c=Kt,d=Gt;return G(),ne(d,{cols:n.plotType==="1d_normal"?1:2,"x-gap":10,"y-gap":"10"},{default:re(()=>[(G(!0),ae(gt,null,Ut(n.options,(u,h)=>(G(),ne(c,null,{default:re(()=>[!k(te)(u)&&k(r)?(G(),ae("div",qi,[de("span",Ji,_e(t[h]),1),ee(l,{options:k(r)[h],value:e.value[h],"onUpdate:value":p=>e.value[h]=p,class:"flex-1",onUpdateValue:o,size:"small"},null,8,["options","value","onUpdate:value"])])):me("",!0)]),_:2},1024))),256))]),_:1},8,["cols"])}}});var Ht=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.getInitialData=function(e,t){return yt(null,this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(e,t,r){var o=this.coordinateSystem;if(o&&o.clampData){var n=o.clampData(e),s=o.dataToPoint(n);if(r)B(o.getAxes(),function(h,p){if(h.type==="category"&&t!=null){var f=h.getTicksCoords(),g=h.getTickModel().get("alignWithLabel"),m=n[p],v=t[p]==="x1"||t[p]==="y1";if(v&&!g&&(m+=1),f.length<2)return;if(f.length===2){s[p]=h.toGlobalCoord(h.getExtent()[v?1:0]);return}for(var M=void 0,I=void 0,z=1,V=0;V<f.length;V++){var b=f[V].coord,x=V===f.length-1?f[V-1].tickValue+z:f[V].tickValue;if(x===m){I=b;break}else if(x<m)M=b;else if(M!=null&&x>m){I=(b+M)/2;break}V===1&&(z=x-f[0].tickValue)}I==null&&(M?M&&(I=f[f.length-1].coord):I=f[0].coord),s[p]=h.toGlobalCoord(I)}});else{var l=this.getData(),c=l.getLayout("offset"),d=l.getLayout("size"),u=o.getBaseAxis().isHorizontal()?0:1;s[u]+=c+d/2}return s}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(_t);_t.registerClass(Ht);var en=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.getInitialData=function(){return yt(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},a.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},a.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},a.prototype.brushSelector=function(e,t,r){return r.rect(t.getItemLayout(e))},a.type="series.bar",a.dependencies=["grid","polar"],a.defaultOption=Wt(Ht.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),a}(Ht),tn=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),va=function(i){q(a,i);function a(e){var t=i.call(this,e)||this;return t.type="sausage",t}return a.prototype.getDefaultShape=function(){return new tn},a.prototype.buildPath=function(e,t){var r=t.cx,o=t.cy,n=Math.max(t.r0||0,0),s=Math.max(t.r,0),l=(s-n)*.5,c=n+l,d=t.startAngle,u=t.endAngle,h=t.clockwise,p=Math.PI*2,f=h?u-d<p:d-u<p;f||(d=u-(h?p:-p));var g=Math.cos(d),m=Math.sin(d),v=Math.cos(u),M=Math.sin(u);f?(e.moveTo(g*n+r,m*n+o),e.arc(g*c+r,m*c+o,l,-Math.PI+d,d,!h)):e.moveTo(g*s+r,m*s+o),e.arc(r,o,s,d,u,!h),e.arc(v*c+r,M*c+o,l,u-Math.PI*2,u-Math.PI,!h),n!==0&&e.arc(r,o,n,u,d,h)},a}(Xt);function an(i,a){a=a||{};var e=a.isRoundCap;return function(t,r,o){var n=r.position;if(!n||n instanceof Array)return sa(t,r,o);var s=i(n),l=r.distance!=null?r.distance:5,c=this.shape,d=c.cx,u=c.cy,h=c.r,p=c.r0,f=(h+p)/2,g=c.startAngle,m=c.endAngle,v=(g+m)/2,M=e?Math.abs(h-p)/2:0,I=Math.cos,z=Math.sin,V=d+h*I(g),b=u+h*z(g),x="left",R="top";switch(s){case"startArc":V=d+(p-l)*I(v),b=u+(p-l)*z(v),x="center",R="top";break;case"insideStartArc":V=d+(p+l)*I(v),b=u+(p+l)*z(v),x="center",R="bottom";break;case"startAngle":V=d+f*I(g)+rt(g,l+M,!1),b=u+f*z(g)+it(g,l+M,!1),x="right",R="middle";break;case"insideStartAngle":V=d+f*I(g)+rt(g,-l+M,!1),b=u+f*z(g)+it(g,-l+M,!1),x="left",R="middle";break;case"middle":V=d+f*I(v),b=u+f*z(v),x="center",R="middle";break;case"endArc":V=d+(h+l)*I(v),b=u+(h+l)*z(v),x="center",R="bottom";break;case"insideEndArc":V=d+(h-l)*I(v),b=u+(h-l)*z(v),x="center",R="top";break;case"endAngle":V=d+f*I(m)+rt(m,l+M,!0),b=u+f*z(m)+it(m,l+M,!0),x="left",R="middle";break;case"insideEndAngle":V=d+f*I(m)+rt(m,-l+M,!0),b=u+f*z(m)+it(m,-l+M,!0),x="right",R="middle";break;default:return sa(t,r,o)}return t=t||{},t.x=V,t.y=b,t.align=x,t.verticalAlign=R,t}}function rn(i,a,e,t){if(ei(t)){i.setTextConfig({rotation:t});return}else if(le(a)){i.setTextConfig({rotation:0});return}var r=i.shape,o=r.clockwise?r.startAngle:r.endAngle,n=r.clockwise?r.endAngle:r.startAngle,s=(o+n)/2,l,c=e(a);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=n;break;default:i.setTextConfig({rotation:0});return}var d=Math.PI*1.5-l;c==="middle"&&d>Math.PI/2&&d<Math.PI*1.5&&(d-=Math.PI),i.setTextConfig({rotation:d})}function rt(i,a,e){return a*Math.sin(i)*(e?-1:1)}function it(i,a,e){return a*Math.cos(i)*(e?1:-1)}function nn(i,a,e){var t=i.get("borderRadius");if(t==null)return{cornerRadius:0};le(t)||(t=[t,t,t,t]);var r=Math.abs(a.r||0-a.r0||0);return{cornerRadius:Te(t,function(o){return Pt(o,r)})}}var Lt=Math.max,kt=Math.min;function on(i,a){var e=i.getArea&&i.getArea();if(Zt(i,"cartesian2d")){var t=i.getBaseAxis();if(t.type!=="category"||!t.onBand){var r=a.getLayout("bandWidth");t.isHorizontal()?(e.x-=r,e.width+=r*2):(e.y-=r,e.height+=r*2)}}return e}var sn=function(i){q(a,i);function a(){var e=i.call(this)||this;return e.type=a.type,e._isFirstFrame=!0,e}return a.prototype.render=function(e,t,r,o){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var n=e.get("coordinateSystem");(n==="cartesian2d"||n==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,r):this._renderNormal(e,t,r,o))},a.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},a.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},a.prototype.eachRendered=function(e){Ga(this._progressiveEls||this.group,e)},a.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},a.prototype._renderNormal=function(e,t,r,o){var n=this.group,s=e.getData(),l=this._data,c=e.coordinateSystem,d=c.getBaseAxis(),u;c.type==="cartesian2d"?u=d.isHorizontal():c.type==="polar"&&(u=d.dim==="angle");var h=e.isAnimationEnabled()?e:null,p=ln(e,c);p&&this._enableRealtimeSort(p,s,r);var f=e.get("clip",!0)||p,g=on(c,s);n.removeClipPath();var m=e.get("roundCap",!0),v=e.get("showBackground",!0),M=e.getModel("backgroundStyle"),I=M.get("borderRadius")||0,z=[],V=this._backgroundEls,b=o&&o.isInitSort,x=o&&o.type==="changeAxisOrder";function R(_){var D=nt[c.type](s,_),O=fn(c,u,D);return O.useStyle(M.getItemStyle()),c.type==="cartesian2d"?O.setShape("r",I):O.setShape("cornerRadius",I),z[_]=O,O}s.diff(l).add(function(_){var D=s.getItemModel(_),O=nt[c.type](s,_,D);if(v&&R(_),!(!s.hasValue(_)||!_a[c.type](O))){var L=!1;f&&(L=fa[c.type](g,O));var T=ga[c.type](e,s,_,O,u,h,d.model,!1,m);p&&(T.forceLabelAnimation=!0),ba(T,s,_,D,O,e,u,c.type==="polar"),b?T.attr({shape:O}):p?ma(p,h,T,O,_,u,!1,!1):ht(T,{shape:O},e,_),s.setItemGraphicEl(_,T),n.add(T),T.ignore=L}}).update(function(_,D){var O=s.getItemModel(_),L=nt[c.type](s,_,O);if(v){var T=void 0;V.length===0?T=R(D):(T=V[D],T.useStyle(M.getItemStyle()),c.type==="cartesian2d"?T.setShape("r",I):T.setShape("cornerRadius",I),z[_]=T);var F=nt[c.type](s,_),E=er(u,F,c);Fe(T,{shape:E},h,_)}var P=l.getItemGraphicEl(D);if(!s.hasValue(_)||!_a[c.type](L)){n.remove(P);return}var Y=!1;if(f&&(Y=fa[c.type](g,L),Y&&n.remove(P)),P?ti(P):P=ga[c.type](e,s,_,L,u,h,d.model,!!P,m),p&&(P.forceLabelAnimation=!0),x){var K=P.getTextContent();if(K){var ce=ai(K);ce.prevValue!=null&&(ce.prevValue=ce.value)}}else ba(P,s,_,O,L,e,u,c.type==="polar");b?P.attr({shape:L}):p?ma(p,h,P,L,_,u,!0,x):Fe(P,{shape:L},e,_,null),s.setItemGraphicEl(_,P),P.ignore=Y,n.add(P)}).remove(function(_){var D=l.getItemGraphicEl(_);D&&la(D,e,_)}).execute();var w=this._backgroundGroup||(this._backgroundGroup=new Re);w.removeAll();for(var C=0;C<z.length;++C)w.add(z[C]);n.add(w),this._backgroundEls=z,this._data=s},a.prototype._renderLarge=function(e,t,r){this._clear(),Sa(e,this.group),this._updateLargeClip(e)},a.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Sa(t,this.group,this._progressiveEls,!0)},a.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&ri(e.coordinateSystem,!1,e),r=this.group;t?r.setClipPath(t):r.removeClipPath()},a.prototype._enableRealtimeSort=function(e,t,r){var o=this;if(t.count()){var n=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,r),this._isFirstFrame=!1;else{var s=function(l){var c=t.getItemGraphicEl(l),d=c&&c.shape;return d&&Math.abs(n.isHorizontal()?d.height:d.width)||0};this._onRendered=function(){o._updateSortWithinSameData(t,s,n,r)},r.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(e,t,r){var o=[];return e.each(e.mapDimension(t.dim),function(n,s){var l=r(s);l=l??NaN,o.push({dataIndex:s,mappedValue:l,ordinalNumber:n})}),o.sort(function(n,s){return s.mappedValue-n.mappedValue}),{ordinalNumbers:Te(o,function(n){return n.ordinalNumber})}},a.prototype._isOrderChangedWithinSameData=function(e,t,r){for(var o=r.scale,n=e.mapDimension(r.dim),s=Number.MAX_VALUE,l=0,c=o.getOrdinalMeta().categories.length;l<c;++l){var d=e.rawIndexOf(n,o.getRawOrdinalNumber(l)),u=d<0?Number.MIN_VALUE:t(e.indexOfRawIndex(d));if(u>s)return!0;s=u}return!1},a.prototype._isOrderDifferentInView=function(e,t){for(var r=t.scale,o=r.getExtent(),n=Math.max(0,o[0]),s=Math.min(o[1],r.getOrdinalMeta().categories.length-1);n<=s;++n)if(e.ordinalNumbers[n]!==r.getRawOrdinalNumber(n))return!0},a.prototype._updateSortWithinSameData=function(e,t,r,o){if(this._isOrderChangedWithinSameData(e,t,r)){var n=this._dataSort(e,r,t);this._isOrderDifferentInView(n,r)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:n}))}},a.prototype._dispatchInitSort=function(e,t,r){var o=t.baseAxis,n=this._dataSort(e,o,function(s){return e.get(e.mapDimension(t.otherAxis.dim),s)});r.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:n})},a.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},a.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},a.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(e){var t=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl(function(o){la(o,e,Xe(o).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(Yt),fa={cartesian2d:function(i,a){var e=a.width<0?-1:1,t=a.height<0?-1:1;e<0&&(a.x+=a.width,a.width=-a.width),t<0&&(a.y+=a.height,a.height=-a.height);var r=i.x+i.width,o=i.y+i.height,n=Lt(a.x,i.x),s=kt(a.x+a.width,r),l=Lt(a.y,i.y),c=kt(a.y+a.height,o),d=s<n,u=c<l;return a.x=d&&n>r?s:n,a.y=u&&l>o?c:l,a.width=d?0:s-n,a.height=u?0:c-l,e<0&&(a.x+=a.width,a.width=-a.width),t<0&&(a.y+=a.height,a.height=-a.height),d||u},polar:function(i,a){var e=a.r0<=a.r?1:-1;if(e<0){var t=a.r;a.r=a.r0,a.r0=t}var r=kt(a.r,i.r),o=Lt(a.r0,i.r0);a.r=r,a.r0=o;var n=r-o<0;if(e<0){var t=a.r;a.r=a.r0,a.r0=t}return n}},ga={cartesian2d:function(i,a,e,t,r,o,n,s,l){var c=new Le({shape:jt({},t),z2:1});if(c.__dataIndex=e,c.name="item",o){var d=c.shape,u=r?"height":"width";d[u]=0}return c},polar:function(i,a,e,t,r,o,n,s,l){var c=!r&&l?va:Ua,d=new c({shape:t,z2:1});d.name="item";var u=Qa(r);if(d.calculateTextPosition=an(u,{isRoundCap:c===va}),o){var h=d.shape,p=r?"r":"endAngle",f={};h[p]=r?t.r0:t.startAngle,f[p]=t[p],(s?Fe:ht)(d,{shape:f},o)}return d}};function ln(i,a){var e=i.get("realtimeSort",!0),t=a.getBaseAxis();if(e&&t.type==="category"&&a.type==="cartesian2d")return{baseAxis:t,otherAxis:a.getOtherAxis(t)}}function ma(i,a,e,t,r,o,n,s){var l,c;o?(c={x:t.x,width:t.width},l={y:t.y,height:t.height}):(c={y:t.y,height:t.height},l={x:t.x,width:t.width}),s||(n?Fe:ht)(e,{shape:l},a,r,null);var d=a?i.baseAxis.model:null;(n?Fe:ht)(e,{shape:c},d,r)}function ya(i,a){for(var e=0;e<a.length;e++)if(!isFinite(i[a[e]]))return!0;return!1}var un=["x","y","width","height"],cn=["cx","cy","r","startAngle","endAngle"],_a={cartesian2d:function(i){return!ya(i,un)},polar:function(i){return!ya(i,cn)}},nt={cartesian2d:function(i,a,e){var t=i.getItemLayout(a),r=e?hn(e,t):0,o=t.width>0?1:-1,n=t.height>0?1:-1;return{x:t.x+o*r/2,y:t.y+n*r/2,width:t.width-o*r,height:t.height-n*r}},polar:function(i,a,e){var t=i.getItemLayout(a);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function dn(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function Qa(i){return function(a){var e=a?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(i)}function ba(i,a,e,t,r,o,n,s){var l=a.getItemVisual(e,"style");if(s){if(!o.get("roundCap")){var d=i.shape,u=nn(t.getModel("itemStyle"),d);jt(d,u),i.setShape(d)}}else{var c=t.get(["itemStyle","borderRadius"])||0;i.setShape("r",c)}i.useStyle(l);var h=t.getShallow("cursor");h&&i.attr("cursor",h);var p=s?n?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":n?r.height>=0?"bottom":"top":r.width>=0?"right":"left",f=Et(t);Ka(i,f,{labelFetcher:o,labelDataIndex:e,defaultText:ii(o.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var g=i.getTextContent();if(s&&g){var m=t.get(["label","position"]);i.textConfig.inside=m==="middle"?!0:null,rn(i,m==="outside"?p:m,Qa(n),t.get(["label","rotate"]))}ni(g,f,o.getRawValue(e),function(M){return li(a,M)});var v=t.getModel(["emphasis"]);Wa(i,v.get("focus"),v.get("blurScope"),v.get("disabled")),oi(i,t),dn(r)&&(i.style.fill="none",i.style.stroke="none",B(i.states,function(M){M.style&&(M.style.fill=M.style.stroke="none")}))}function hn(i,a){var e=i.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=i.get(["itemStyle","borderWidth"])||0,r=isNaN(a.width)?Number.MAX_VALUE:Math.abs(a.width),o=isNaN(a.height)?Number.MAX_VALUE:Math.abs(a.height);return Math.min(t,r,o)}var pn=function(){function i(){}return i}(),xa=function(i){q(a,i);function a(e){var t=i.call(this,e)||this;return t.type="largeBar",t}return a.prototype.getDefaultShape=function(){return new pn},a.prototype.buildPath=function(e,t){for(var r=t.points,o=this.baseDimIdx,n=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,d=0;d<r.length;d+=3)l[o]=c,l[n]=r[d+2],s[o]=r[d+o],s[n]=r[d+n],e.rect(s[0],s[1],l[0],l[1])},a}(Xt);function Sa(i,a,e,t){var r=i.getData(),o=r.getLayout("valueAxisHorizontal")?1:0,n=r.getLayout("largeDataIndices"),s=r.getLayout("size"),l=i.getModel("backgroundStyle"),c=r.getLayout("largeBackgroundPoints");if(c){var d=new xa({shape:{points:c},incremental:!!t,silent:!0,z2:0});d.baseDimIdx=o,d.largeDataIndices=n,d.barWidth=s,d.useStyle(l.getItemStyle()),a.add(d),e&&e.push(d)}var u=new xa({shape:{points:r.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=o,u.largeDataIndices=n,u.barWidth=s,a.add(u),u.useStyle(r.getVisual("style")),u.style.stroke=null,Xe(u).seriesIndex=i.seriesIndex,i.get("silent")||(u.on("mousedown",wa),u.on("mousemove",wa)),e&&e.push(u)}var wa=si(function(i){var a=this,e=vn(a,i.offsetX,i.offsetY);Xe(a).dataIndex=e>=0?e:null},30,!1);function vn(i,a,e){for(var t=i.baseDimIdx,r=1-t,o=i.shape.points,n=i.largeDataIndices,s=[],l=[],c=i.barWidth,d=0,u=o.length/3;d<u;d++){var h=d*3;if(l[t]=c,l[r]=o[h+2],s[t]=o[h+t],s[r]=o[h+r],l[r]<0&&(s[r]+=l[r],l[r]=-l[r]),a>=s[0]&&a<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return n[d]}return-1}function er(i,a,e){if(Zt(e,"cartesian2d")){var t=a,r=e.getArea();return{x:i?t.x:r.x,y:i?r.y:t.y,width:i?t.width:r.width,height:i?r.height:t.height}}else{var r=e.getArea(),o=a;return{cx:r.cx,cy:r.cy,r0:i?r.r0:o.r0,r:i?r.r:o.r,startAngle:i?o.startAngle:0,endAngle:i?o.endAngle:Math.PI*2}}}function fn(i,a,e){var t=i.type==="polar"?Ua:Le;return new t({shape:er(a,e,i),silent:!0,z2:0})}function gn(i){i.registerChartView(sn),i.registerSeriesModel(en),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,ui(hi,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ci("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,di("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(a,e){var t=a.componentType||"series";e.eachComponent({mainType:t,query:a},function(r){a.sortInfo&&r.axis.setCategorySortInfo(a.sortInfo)})})}var mn=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return a.prototype.getInitialData=function(e,t){return yt(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},a.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},a.prototype.brushSelector=function(e,t,r){return r.point(t.getItemLayout(e))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(_t),tr=4,yn=function(){function i(){}return i}(),_n=function(i){q(a,i);function a(e){var t=i.call(this,e)||this;return t._off=0,t.hoverDataIdx=-1,t}return a.prototype.getDefaultShape=function(){return new yn},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(e,t){var r=t.points,o=t.size,n=this.symbolProxy,s=n.shape,l=e.getContext?e.getContext():e,c=l&&o[0]<tr,d=this.softClipShape,u;if(c){this._ctx=l;return}for(this._ctx=null,u=this._off;u<r.length;){var h=r[u++],p=r[u++];isNaN(h)||isNaN(p)||d&&!d.contain(h,p)||(s.x=h-o[0]/2,s.y=p-o[1]/2,s.width=o[0],s.height=o[1],n.buildPath(e,s,!0))}this.incremental&&(this._off=u,this.notClear=!0)},a.prototype.afterBrush=function(){var e=this.shape,t=e.points,r=e.size,o=this._ctx,n=this.softClipShape,s;if(o){for(s=this._off;s<t.length;){var l=t[s++],c=t[s++];isNaN(l)||isNaN(c)||n&&!n.contain(l,c)||o.fillRect(l-r[0]/2,c-r[1]/2,r[0],r[1])}this.incremental&&(this._off=s,this.notClear=!0)}},a.prototype.findDataIndex=function(e,t){for(var r=this.shape,o=r.points,n=r.size,s=Math.max(n[0],4),l=Math.max(n[1],4),c=o.length/2-1;c>=0;c--){var d=c*2,u=o[d]-s/2,h=o[d+1]-l/2;if(e>=u&&t>=h&&e<=u+s&&t<=h+l)return c}return-1},a.prototype.contain=function(e,t){var r=this.transformCoordToLocal(e,t),o=this.getBoundingRect();if(e=r[0],t=r[1],o.contain(e,t)){var n=this.hoverDataIdx=this.findDataIndex(e,t);return n>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape,r=t.points,o=t.size,n=o[0],s=o[1],l=1/0,c=1/0,d=-1/0,u=-1/0,h=0;h<r.length;){var p=r[h++],f=r[h++];l=Math.min(p,l),d=Math.max(p,d),c=Math.min(f,c),u=Math.max(f,u)}e=this._rect=new pi(l-n/2,c-s/2,d-l+n,u-c+s)}return e},a}(Xt),bn=function(){function i(){this.group=new Re}return i.prototype.updateData=function(a,e){this._clear();var t=this._create();t.setShape({points:a.getLayout("points")}),this._setCommon(t,a,e)},i.prototype.updateLayout=function(a){var e=a.getLayout("points");this.group.eachChild(function(t){if(t.startIndex!=null){var r=(t.endIndex-t.startIndex)*2,o=t.startIndex*4*2;e=new Float32Array(e.buffer,o,r)}t.setShape("points",e),t.reset()})},i.prototype.incrementalPrepareUpdate=function(a){this._clear()},i.prototype.incrementalUpdate=function(a,e,t){var r=this._newAdded[0],o=e.getLayout("points"),n=r&&r.shape.points;if(n&&n.length<2e4){var s=n.length,l=new Float32Array(s+o.length);l.set(n),l.set(o,s),r.endIndex=a.end,r.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=a.start,c.endIndex=a.end,c.incremental=!0,c.setShape({points:o}),this._setCommon(c,e,t)}},i.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},i.prototype._create=function(){var a=new _n({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},i.prototype._setCommon=function(a,e,t){var r=e.hostModel;t=t||{};var o=e.getVisual("symbolSize");a.setShape("size",o instanceof Array?o:[o,o]),a.softClipShape=t.clipShape||null,a.symbolProxy=pt(e.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var n=a.shape.size[0]<tr;a.useStyle(r.getModel("itemStyle").getItemStyle(n?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&a.setColor(l);var c=Xe(a);c.seriesIndex=r.seriesIndex,a.on("mousemove",function(d){c.dataIndex=null;var u=a.hoverDataIdx;u>=0&&(c.dataIndex=u+(a.startIndex||0))})},i.prototype.remove=function(){this._clear()},i.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},i}(),xn=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.render=function(e,t,r){var o=e.getData(),n=this._updateSymbolDraw(o,e);n.updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(e,t,r){var o=e.getData(),n=this._updateSymbolDraw(o,e);n.incrementalPrepareUpdate(o),this._finished=!1},a.prototype.incrementalRender=function(e,t,r){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},a.prototype.updateTransform=function(e,t,r){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var n=Xa("").reset(e,t,r);n.progress&&n.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},a.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},a.prototype._getClipShape=function(e){if(e.get("clip",!0)){var t=e.coordinateSystem;return t&&t.getArea&&t.getArea(.1)}},a.prototype._updateSymbolDraw=function(e,t){var r=this._symbolDraw,o=t.pipelineContext,n=o.large;return(!r||n!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=n?new bn:new vi,this._isLargeDraw=n,this.group.removeAll()),this.group.add(r.group),r},a.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(Yt);function Sn(i){Se(fi),i.registerSeriesModel(mn),i.registerChartView(xn),i.registerLayout(Xa("scatter"))}var Ge=B,wn=we,vt=-1,j=function(){function i(a){var e=a.mappingMethod,t=a.type,r=this.option=fe(a);this.type=t,this.mappingMethod=e,this._normalizeData=Cn[e];var o=i.visualHandlers[t];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[e],e==="piecewise"?(zt(r),Mn(r)):e==="category"?r.categories?In(r):zt(r,!0):(yi(e!=="linear"||r.dataExtent),zt(r))}return i.prototype.mapValueToVisual=function(a){var e=this._normalizeData(a);return this._normalizedToVisual(e,a)},i.prototype.getNormalizer=function(){return oe(this._normalizeData,this)},i.listVisualTypes=function(){return gi(i.visualHandlers)},i.isValidType=function(a){return i.visualHandlers.hasOwnProperty(a)},i.eachVisual=function(a,e,t){we(a)?B(a,e,t):e.call(t,a)},i.mapVisual=function(a,e,t){var r,o=le(a)?[]:we(a)?{}:(r=!0,null);return i.eachVisual(a,function(n,s){var l=e.call(t,n,s);r?o=l:o[s]=l}),o},i.retrieveVisuals=function(a){var e={},t;return a&&Ge(i.visualHandlers,function(r,o){a.hasOwnProperty(o)&&(e[o]=a[o],t=!0)}),t?e:null},i.prepareVisualTypes=function(a){if(le(a))a=a.slice();else if(wn(a)){var e=[];Ge(a,function(t,r){e.push(r)}),a=e}else return[];return a.sort(function(t,r){return r==="color"&&t!=="color"&&t.indexOf("color")===0?1:-1}),a},i.dependsOn=function(a,e){return e==="color"?!!(a&&a.indexOf(e)===0):a===e},i.findPieceIndex=function(a,e,t){for(var r,o=1/0,n=0,s=e.length;n<s;n++){var l=e[n].value;if(l!=null){if(l===a||Ya(l)&&l===a+"")return n;t&&h(l,n)}}for(var n=0,s=e.length;n<s;n++){var c=e[n],d=c.interval,u=c.close;if(d){if(d[0]===-1/0){if(st(u[1],a,d[1]))return n}else if(d[1]===1/0){if(st(u[0],d[0],a))return n}else if(st(u[0],d[0],a)&&st(u[1],a,d[1]))return n;t&&h(d[0],n),t&&h(d[1],n)}}if(t)return a===1/0?e.length-1:a===-1/0?0:r;function h(p,f){var g=Math.abs(p-a);g<o&&(o=g,r=f)}},i.visualHandlers={color:{applyVisual:Pe("color"),getColorMapper:function(){var a=this.option;return oe(a.mappingMethod==="category"?function(e,t){return!t&&(e=this._normalizeData(e)),Ee.call(this,e)}:function(e,t,r){var o=!!r;return!t&&(e=this._normalizeData(e)),r=Vt(e,a.parsedVisual,r),o?r:Ct(r,"rgba")},this)},_normalizedToVisual:{linear:function(a){return Ct(Vt(a,this.option.parsedVisual),"rgba")},category:Ee,piecewise:function(a,e){var t=Bt.call(this,e);return t==null&&(t=Ct(Vt(a,this.option.parsedVisual),"rgba")),t},fixed:be}},colorHue:ot(function(a,e){return At(a,e)}),colorSaturation:ot(function(a,e){return At(a,null,e)}),colorLightness:ot(function(a,e){return At(a,null,null,e)}),colorAlpha:ot(function(a,e){return bi(a,e)}),decal:{applyVisual:Pe("decal"),_normalizedToVisual:{linear:null,category:Ee,piecewise:null,fixed:null}},opacity:{applyVisual:Pe("opacity"),_normalizedToVisual:$t([0,1])},liftZ:{applyVisual:Pe("liftZ"),_normalizedToVisual:{linear:be,category:be,piecewise:be,fixed:be}},symbol:{applyVisual:function(a,e,t){var r=this.mapValueToVisual(a);t("symbol",r)},_normalizedToVisual:{linear:Ma,category:Ee,piecewise:function(a,e){var t=Bt.call(this,e);return t==null&&(t=Ma.call(this,a)),t},fixed:be}},symbolSize:{applyVisual:Pe("symbolSize"),_normalizedToVisual:$t([0,1])}},i}();function Mn(i){var a=i.pieceList;i.hasSpecialVisual=!1,B(a,function(e,t){e.originIndex=t,e.visual!=null&&(i.hasSpecialVisual=!0)})}function In(i){var a=i.categories,e=i.categoryMap={},t=i.visual;if(Ge(a,function(n,s){e[n]=s}),!le(t)){var r=[];we(t)?Ge(t,function(n,s){var l=e[s];r[l??vt]=n}):r[vt]=t,t=ar(i,r)}for(var o=a.length-1;o>=0;o--)t[o]==null&&(delete e[a[o]],a.pop())}function zt(i,a){var e=i.visual,t=[];we(e)?Ge(e,function(o){t.push(o)}):e!=null&&t.push(e);var r={color:1,symbol:1};!a&&t.length===1&&!r.hasOwnProperty(i.type)&&(t[1]=t[0]),ar(i,t)}function ot(i){return{applyVisual:function(a,e,t){var r=this.mapValueToVisual(a);t("color",i(e("color"),r))},_normalizedToVisual:$t([0,1])}}function Ma(i){var a=this.option.visual;return a[Math.round(Me(i,[0,1],[0,a.length-1],!0))]||{}}function Pe(i){return function(a,e,t){t(i,this.mapValueToVisual(a))}}function Ee(i){var a=this.option.visual;return a[this.option.loop&&i!==vt?i%a.length:i]}function be(){return this.option.visual[0]}function $t(i){return{linear:function(a){return Me(a,i,this.option.visual,!0)},category:Ee,piecewise:function(a,e){var t=Bt.call(this,e);return t==null&&(t=Me(a,i,this.option.visual,!0)),t},fixed:be}}function Bt(i){var a=this.option,e=a.pieceList;if(a.hasSpecialVisual){var t=j.findPieceIndex(i,e),r=e[t];if(r&&r.visual)return r.visual[this.type]}}function ar(i,a){return i.visual=a,i.type==="color"&&(i.parsedVisual=Te(a,function(e){var t=_i(e);return t||[0,0,0,1]})),a}var Cn={linear:function(i){return Me(i,this.option.dataExtent,[0,1],!0)},piecewise:function(i){var a=this.option.pieceList,e=j.findPieceIndex(i,a,!0);if(e!=null)return Me(e,[0,a.length-1],[0,1],!0)},category:function(i){var a=this.option.categories?this.option.categoryMap[i]:i;return a??vt},fixed:mi};function st(i,a,e){return i?a<=e:a<e}var Vn=256,An=function(){function i(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var a=ua.createCanvas();this.canvas=a}return i.prototype.update=function(a,e,t,r,o,n){var s=this._getBrush(),l=this._getGradient(o,"inRange"),c=this._getGradient(o,"outOfRange"),d=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),p=a.length;u.width=e,u.height=t;for(var f=0;f<p;++f){var g=a[f],m=g[0],v=g[1],M=g[2],I=r(M);h.globalAlpha=I,h.drawImage(s,m-d,v-d)}if(!u.width||!u.height)return u;for(var z=h.getImageData(0,0,u.width,u.height),V=z.data,b=0,x=V.length,R=this.minOpacity,w=this.maxOpacity,C=w-R;b<x;){var I=V[b+3]/256,_=Math.floor(I*(Vn-1))*4;if(I>0){var D=n(I)?l:c;I>0&&(I=I*C+R),V[b++]=D[_],V[b++]=D[_+1],V[b++]=D[_+2],V[b++]=D[_+3]*I*256}else b+=4}return h.putImageData(z,0,0),u},i.prototype._getBrush=function(){var a=this._brushCanvas||(this._brushCanvas=ua.createCanvas()),e=this.pointSize+this.blurSize,t=e*2;a.width=t,a.height=t;var r=a.getContext("2d");return r.clearRect(0,0,t,t),r.shadowOffsetX=t,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,Math.PI*2,!0),r.closePath(),r.fill(),a},i.prototype._getGradient=function(a,e){for(var t=this._gradientPixels,r=t[e]||(t[e]=new Uint8ClampedArray(256*4)),o=[0,0,0,0],n=0,s=0;s<256;s++)a[e](s/255,!0,o),r[n++]=o[0],r[n++]=o[1],r[n++]=o[2],r[n++]=o[3];return r},i}();function Dn(i,a,e){var t=i[1]-i[0];a=Te(a,function(n){return{interval:[(n.interval[0]-i[0])/t,(n.interval[1]-i[0])/t]}});var r=a.length,o=0;return function(n){var s;for(s=o;s<r;s++){var l=a[s].interval;if(l[0]<=n&&n<=l[1]){o=s;break}}if(s===r)for(s=o-1;s>=0;s--){var l=a[s].interval;if(l[0]<=n&&n<=l[1]){o=s;break}}return s>=0&&s<r&&e[s]}}function Rn(i,a){var e=i[1]-i[0];return a=[(a[0]-i[0])/e,(a[1]-i[0])/e],function(t){return t>=a[0]&&t<=a[1]}}function Ia(i){var a=i.dimensions;return a[0]==="lng"&&a[1]==="lat"}var Ln=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.render=function(e,t,r){var o;t.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===e&&(o=s)})}),this._progressiveEls=null,this.group.removeAll();var n=e.coordinateSystem;n.type==="cartesian2d"||n.type==="calendar"?this._renderOnCartesianAndCalendar(e,r,0,e.getData().count()):Ia(n)&&this._renderOnGeo(n,e,o,r)},a.prototype.incrementalPrepareRender=function(e,t,r){this.group.removeAll()},a.prototype.incrementalRender=function(e,t,r,o){var n=t.coordinateSystem;n&&(Ia(n)?this.render(t,r,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,o,e.start,e.end,!0)))},a.prototype.eachRendered=function(e){Ga(this._progressiveEls||this.group,e)},a.prototype._renderOnCartesianAndCalendar=function(e,t,r,o,n){var s=e.coordinateSystem,l=Zt(s,"cartesian2d"),c,d,u,h;if(l){var p=s.getAxis("x"),f=s.getAxis("y");c=p.getBandWidth()+.5,d=f.getBandWidth()+.5,u=p.scale.getExtent(),h=f.scale.getExtent()}for(var g=this.group,m=e.getData(),v=e.getModel(["emphasis","itemStyle"]).getItemStyle(),M=e.getModel(["blur","itemStyle"]).getItemStyle(),I=e.getModel(["select","itemStyle"]).getItemStyle(),z=e.get(["itemStyle","borderRadius"]),V=Et(e),b=e.getModel("emphasis"),x=b.get("focus"),R=b.get("blurScope"),w=b.get("disabled"),C=l?[m.mapDimension("x"),m.mapDimension("y"),m.mapDimension("value")]:[m.mapDimension("time"),m.mapDimension("value")],_=r;_<o;_++){var D=void 0,O=m.getItemVisual(_,"style");if(l){var L=m.get(C[0],_),T=m.get(C[1],_);if(isNaN(m.get(C[2],_))||isNaN(L)||isNaN(T)||L<u[0]||L>u[1]||T<h[0]||T>h[1])continue;var F=s.dataToPoint([L,T]);D=new Le({shape:{x:F[0]-c/2,y:F[1]-d/2,width:c,height:d},style:O})}else{if(isNaN(m.get(C[1],_)))continue;D=new Le({z2:1,shape:s.dataToRect([m.get(C[0],_)]).contentShape,style:O})}if(m.hasItemOption){var E=m.getItemModel(_),P=E.getModel("emphasis");v=P.getModel("itemStyle").getItemStyle(),M=E.getModel(["blur","itemStyle"]).getItemStyle(),I=E.getModel(["select","itemStyle"]).getItemStyle(),z=E.get(["itemStyle","borderRadius"]),x=P.get("focus"),R=P.get("blurScope"),w=P.get("disabled"),V=Et(E)}D.shape.r=z;var Y=e.getRawValue(_),K="-";Y&&Y[2]!=null&&(K=Y[2]+""),Ka(D,V,{labelFetcher:e,labelDataIndex:_,defaultOpacity:O.opacity,defaultText:K}),D.ensureState("emphasis").style=v,D.ensureState("blur").style=M,D.ensureState("select").style=I,Wa(D,x,R,w),D.incremental=n,n&&(D.states.emphasis.hoverLayer=!0),g.add(D),m.setItemGraphicEl(_,D),this._progressiveEls&&this._progressiveEls.push(D)}},a.prototype._renderOnGeo=function(e,t,r,o){var n=r.targetVisuals.inRange,s=r.targetVisuals.outOfRange,l=t.getData(),c=this._hmLayer||this._hmLayer||new An;c.blurSize=t.get("blurSize"),c.pointSize=t.get("pointSize"),c.minOpacity=t.get("minOpacity"),c.maxOpacity=t.get("maxOpacity");var d=e.getViewRect().clone(),u=e.getRoamTransform();d.applyTransform(u);var h=Math.max(d.x,0),p=Math.max(d.y,0),f=Math.min(d.width+d.x,o.getWidth()),g=Math.min(d.height+d.y,o.getHeight()),m=f-h,v=g-p,M=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],I=l.mapArray(M,function(x,R,w){var C=e.dataToPoint([x,R]);return C[0]-=h,C[1]-=p,C.push(w),C}),z=r.getExtent(),V=r.type==="visualMap.continuous"?Rn(z,r.option.range):Dn(z,r.getPieceList(),r.option.selected);c.update(I,m,v,n.color.getNormalizer(),{inRange:n.color.getColorMapper(),outOfRange:s.color.getColorMapper()},V);var b=new Za({style:{width:m,height:v,x:h,y:p,image:c.canvas},silent:!0});this.group.add(b)},a.type="heatmap",a}(Yt),kn=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.getInitialData=function(e,t){return yt(null,this,{generateCoord:"value"})},a.prototype.preventIncremental=function(){var e=xi.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},a.type="series.heatmap",a.dependencies=["grid","geo","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},a}(_t);function zn(i){i.registerChartView(Ln),i.registerSeriesModel(kn)}var Ca=B;function Va(i){if(i){for(var a in i)if(i.hasOwnProperty(a))return!0}}function Aa(i,a,e){var t={};return Ca(a,function(o){var n=t[o]=r();Ca(i[o],function(s,l){if(j.isValidType(l)){var c={type:l,visual:s};e&&e(c,o),n[l]=new j(c),l==="opacity"&&(c=fe(c),c.type="colorAlpha",n.__hidden.__alphaForOpacity=new j(c))}})}),t;function r(){var o=function(){};o.prototype.__hidden=o.prototype;var n=new o;return n}}function Tn(i,a,e){var t;B(e,function(r){a.hasOwnProperty(r)&&Va(a[r])&&(t=!0)}),t&&B(e,function(r){a.hasOwnProperty(r)&&Va(a[r])?i[r]=fe(a[r]):delete i[r]})}function On(i,a,e,t){var r={};return B(i,function(o){var n=j.prepareVisualTypes(a[o]);r[o]=n}),{progress:function(n,s){var l;t!=null&&(l=s.getDimensionIndex(t));function c(V){return Si(s,u,V)}function d(V,b){wi(s,u,V,b)}for(var u,h=s.getStore();(u=n.next())!=null;){var p=s.getRawDataItem(u);if(!(p&&p.visualMap===!1))for(var f=t!=null?h.get(l,u):u,g=e(f),m=a[g],v=r[g],M=0,I=v.length;M<I;M++){var z=v[M];m[z]&&m[z].applyVisual(f,c,d)}}}}}var rr={get:function(i,a,e){var t=fe((Pn[i]||{})[a]);return e&&le(t)?t[t.length-1]:t}},Pn={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Da=j.mapVisual,En=j.eachVisual,Nn=le,Ra=B,Hn=ja,$n=Me,ft=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return a.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r)},a.prototype.optionUpdated=function(e,t){var r=this.option;!t&&Tn(r,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},a.prototype.resetVisual=function(e){var t=this.stateList;e=oe(e,this),this.controllerVisuals=Aa(this.option.controller,t,e),this.targetVisuals=Aa(this.option.target,t,e)},a.prototype.getItemSymbol=function(){return null},a.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return e==null||e==="all"?this.ecModel.eachSeries(function(r,o){t.push(o)}):t=Mi(e),t},a.prototype.eachTargetSeries=function(e,t){B(this.getTargetSeriesIndices(),function(r){var o=this.ecModel.getSeriesByIndex(r);o&&e.call(t,o)},this)},a.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries(function(r){r===e&&(t=!0)}),t},a.prototype.formatValueText=function(e,t,r){var o=this.option,n=o.precision,s=this.dataBound,l=o.formatter,c;r=r||["<",">"],le(e)&&(e=e.slice(),c=!0);var d=t?e:c?[u(e[0]),u(e[1])]:u(e);if(Ya(l))return l.replace("{value}",c?d[0]:d).replace("{value2}",c?d[1]:d);if(Ii(l))return c?l(e[0],e[1]):l(e);if(c)return e[0]===s[0]?r[0]+" "+d[1]:e[1]===s[1]?r[1]+" "+d[0]:d[0]+" - "+d[1];return d;function u(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(n,20))}},a.prototype.resetExtent=function(){var e=this.option,t=Hn([e.min,e.max]);this._dataExtent=t},a.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(t!=null)return e.getDimensionIndex(t);for(var r=e.dimensions,o=r.length-1;o>=0;o--){var n=r[o],s=e.getDimensionInfo(n);if(!s.isCalculationCoord)return s.storeDimIndex}},a.prototype.getExtent=function(){return this._dataExtent.slice()},a.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,r={inRange:t.inRange,outOfRange:t.outOfRange},o=t.target||(t.target={}),n=t.controller||(t.controller={});ca(o,r),ca(n,r);var s=this.isCategory();l.call(this,o),l.call(this,n),c.call(this,o,"inRange","outOfRange"),d.call(this,n);function l(u){Nn(t.color)&&!u.inRange&&(u.inRange={color:t.color.slice().reverse()}),u.inRange=u.inRange||{color:e.get("gradientColor")}}function c(u,h,p){var f=u[h],g=u[p];f&&!g&&(g=u[p]={},Ra(f,function(m,v){if(j.isValidType(v)){var M=rr.get(v,"inactive",s);M!=null&&(g[v]=M,v==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function d(u){var h=(u.inRange||{}).symbol||(u.outOfRange||{}).symbol,p=(u.inRange||{}).symbolSize||(u.outOfRange||{}).symbolSize,f=this.get("inactiveColor"),g=this.getItemSymbol(),m=g||"roundRect";Ra(this.stateList,function(v){var M=this.itemSize,I=u[v];I||(I=u[v]={color:s?f:[f]}),I.symbol==null&&(I.symbol=h&&fe(h)||(s?m:[m])),I.symbolSize==null&&(I.symbolSize=p&&fe(p)||(s?M[0]:[M[0],M[0]])),I.symbol=Da(I.symbol,function(b){return b==="none"?m:b});var z=I.symbolSize;if(z!=null){var V=-1/0;En(z,function(b){b>V&&(V=b)}),I.symbolSize=Da(z,function(b){return $n(b,[0,V],[0,M[0]],!0)})}},this)}},a.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},a.prototype.isCategory=function(){return!!this.option.categories},a.prototype.setSelected=function(e){},a.prototype.getSelected=function(){return null},a.prototype.getValueState=function(e){return null},a.prototype.getVisualMeta=function(e){return null},a.type="visualMap",a.dependencies=["series"],a.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},a}(Ci),La=[20,140],Bn=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.optionUpdated=function(e,t){i.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(r){r.mappingMethod="linear",r.dataExtent=this.getExtent()}),this._resetRange()},a.prototype.resetItemSize=function(){i.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=La[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=La[1])},a.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):le(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},a.prototype.completeVisualOption=function(){i.prototype.completeVisualOption.apply(this,arguments),B(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)},this)},a.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},a.prototype.getSelected=function(){var e=this.getExtent(),t=ja((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},a.prototype.getValueState=function(e){var t=this.option.range,r=this.getExtent();return(t[0]<=r[0]||t[0]<=e)&&(t[1]>=r[1]||e<=t[1])?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries(function(r){var o=[],n=r.getData();n.each(this.getDataDimensionIndex(n),function(s,l){e[0]<=s&&s<=e[1]&&o.push(l)},this),t.push({seriesId:r.id,dataIndex:o})},this),t},a.prototype.getVisualMeta=function(e){var t=ka(this,"outOfRange",this.getExtent()),r=ka(this,"inRange",this.option.range.slice()),o=[];function n(p,f){o.push({value:p,color:e(p,f)})}for(var s=0,l=0,c=r.length,d=t.length;l<d&&(!r.length||t[l]<=r[0]);l++)t[l]<r[s]&&n(t[l],"outOfRange");for(var u=1;s<c;s++,u=0)u&&o.length&&n(r[s],"outOfRange"),n(r[s],"inRange");for(var u=1;l<d;l++)(!r.length||r[r.length-1]<t[l])&&(u&&(o.length&&n(o[o.length-1].value,"outOfRange"),u=0),n(t[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},a.type="visualMap.continuous",a.defaultOption=Wt(ft.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),a}(ft);function ka(i,a,e){if(e[0]===e[1])return e.slice();for(var t=200,r=(e[1]-e[0])/t,o=e[0],n=[],s=0;s<=t&&o<e[1];s++)n.push(o),o+=r;return n.push(e[1]),n}var ir=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return a.prototype.init=function(e,t){this.ecModel=e,this.api=t},a.prototype.render=function(e,t,r,o){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,t,r,o)},a.prototype.renderBackground=function(e){var t=this.visualMapModel,r=Vi(t.get("padding")||0),o=e.getBoundingRect();e.add(new Le({z2:-1,silent:!0,shape:{x:o.x-r[3],y:o.y-r[0],width:o.width+r[3]+r[1],height:o.height+r[0]+r[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},a.prototype.getControllerVisual=function(e,t,r){r=r||{};var o=r.forceState,n=this.visualMapModel,s={};if(t==="color"){var l=n.get("contentColor");s.color=l}function c(p){return s[p]}function d(p,f){s[p]=f}var u=n.controllerVisuals[o||n.getValueState(e)],h=j.prepareVisualTypes(u);return B(h,function(p){var f=u[p];r.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",f=u.__alphaForOpacity),j.dependsOn(p,t)&&f&&f.applyVisual(e,c,d)}),s[t]},a.prototype.positionGroup=function(e){var t=this.visualMapModel,r=this.api;Ai(e,t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},a.prototype.doRender=function(e,t,r,o){},a.type="visualMap",a}(Di),za=[["left","right","width"],["top","bottom","height"]];function nr(i,a,e){var t=i.option,r=t.align;if(r!=null&&r!=="auto")return r;for(var o={width:a.getWidth(),height:a.getHeight()},n=t.orient==="horizontal"?1:0,s=za[n],l=[0,null,10],c={},d=0;d<3;d++)c[za[1-n][d]]=l[d],c[s[d]]=d===2?e[0]:t[s[d]];var u=[["x","width",3],["y","height",0]][n],h=Ri(c,o,t.padding);return s[(h.margin[u[2]]||0)+h[u[0]]+h[u[1]]*.5<o[u[1]]*.5?0:1]}function ut(i,a){return B(i||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(a?a.componentIndex:"")}),i}var ve=Me,Fn=B,Ta=Math.min,Tt=Math.max,Gn=12,Un=6,Kn=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return a.prototype.init=function(e,t){i.prototype.init.call(this,e,t),this._hoverLinkFromSeriesMouseOver=oe(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=oe(this._hideIndicator,this)},a.prototype.doRender=function(e,t,r,o){(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},a.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var r=e.get("text");this._renderEndsText(t,r,0),this._renderEndsText(t,r,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},a.prototype._renderEndsText=function(e,t,r){if(t){var o=t[1-r];o=o!=null?o+"":"";var n=this.visualMapModel,s=n.get("textGap"),l=n.itemSize,c=this._shapes.mainGroup,d=this._applyTransform([l[0]/2,r===0?-s:l[1]+s],c),u=this._applyTransform(r===0?"bottom":"top",c),h=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new Be({style:lt(p,{x:d[0],y:d[1],verticalAlign:h==="horizontal"?"middle":u,align:h==="horizontal"?u:"center",text:o})}))}},a.prototype._renderBar=function(e){var t=this.visualMapModel,r=this._shapes,o=t.itemSize,n=this._orient,s=this._useHandle,l=nr(t,this.api,o),c=r.mainGroup=this._createBarGroup(l),d=new Re;c.add(d),d.add(r.outOfRange=Oa()),d.add(r.inRange=Oa(null,s?Ea(this._orient):null,oe(this._dragHandle,this,"all",!1),oe(this._dragHandle,this,"all",!0))),d.setClipPath(new Le({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var u=t.textStyleModel.getTextRect(""),h=Tt(u.width,u.height);s&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(t,c,0,o,h,n),this._createHandle(t,c,1,o,h,n)),this._createIndicator(t,c,o,h,n),e.add(c)},a.prototype._createHandle=function(e,t,r,o,n,s){var l=oe(this._dragHandle,this,r,!1),c=oe(this._dragHandle,this,r,!0),d=Pt(e.get("handleSize"),o[0]),u=pt(e.get("handleIcon"),-d/2,-d/2,d,d,null,!0),h=Ea(this._orient);u.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(v){Nt(v.event)}}),u.x=o[0]/2,u.useStyle(e.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Li(u,!0),t.add(u);var p=this.visualMapModel.textStyleModel,f=new Be({cursor:h,draggable:!0,drift:l,onmousemove:function(v){Nt(v.event)},ondragend:c,style:lt(p,{x:0,y:0,text:""})});f.ensureState("blur").style={opacity:.1},f.stateTransition={duration:200},this.group.add(f);var g=[d,0],m=this._shapes;m.handleThumbs[r]=u,m.handleLabelPoints[r]=g,m.handleLabels[r]=f},a.prototype._createIndicator=function(e,t,r,o,n){var s=Pt(e.get("indicatorSize"),r[0]),l=pt(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var c=e.getModel("indicatorStyle").getItemStyle();if(l instanceof Za){var d=l.style;l.useStyle(jt({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},c))}else l.useStyle(c);t.add(l);var u=this.visualMapModel.textStyleModel,h=new Be({silent:!0,invisible:!0,style:lt(u,{x:0,y:0,text:""})});this.group.add(h);var p=[(n==="horizontal"?o/2:Un)+r[0]/2,0],f=this._shapes;f.indicator=l,f.indicatorLabel=h,f.indicatorLabelPoint=p,this._firstShowIndicator=!0},a.prototype._dragHandle=function(e,t,r,o){if(this._useHandle){if(this._dragging=!t,!t){var n=this._applyTransform([r,o],this._shapes.mainGroup,!0);this._updateInterval(e,n[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():Pa(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},a.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),r=e.getExtent(),o=[0,e.itemSize[1]];this._handleEnds=[ve(t[0],r,o,!0),ve(t[1],r,o,!0)]},a.prototype._updateInterval=function(e,t){t=t||0;var r=this.visualMapModel,o=this._handleEnds,n=[0,r.itemSize[1]];ki(t,o,n,e,0);var s=r.getExtent();this._dataInterval=[ve(o[0],n,s,!0),ve(o[1],n,s,!0)]},a.prototype._updateView=function(e){var t=this.visualMapModel,r=t.getExtent(),o=this._shapes,n=[0,t.itemSize[1]],s=e?n:this._handleEnds,l=this._createBarVisual(this._dataInterval,r,s,"inRange"),c=this._createBarVisual(r,r,n,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},a.prototype._createBarVisual=function(e,t,r,o){var n={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,n),l=[this.getControllerVisual(e[0],"symbolSize",n),this.getControllerVisual(e[1],"symbolSize",n)],c=this._createBarPoints(r,l);return{barColor:new zi(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},a.prototype._makeColorGradient=function(e,t){var r=100,o=[],n=(e[1]-e[0])/r;o.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var s=1;s<r;s++){var l=e[0]+n*s;if(l>e[1])break;o.push({color:this.getControllerVisual(l,"color",t),offset:s/r})}return o.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),o},a.prototype._createBarPoints=function(e,t){var r=this.visualMapModel.itemSize;return[[r[0]-t[0],e[0]],[r[0],e[0]],[r[0],e[1]],[r[0]-t[1],e[1]]]},a.prototype._createBarGroup=function(e){var t=this._orient,r=this.visualMapModel.get("inverse");return new Re(t==="horizontal"&&!r?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:t==="horizontal"&&r?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:t==="vertical"&&!r?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},a.prototype._updateHandle=function(e,t){if(this._useHandle){var r=this._shapes,o=this.visualMapModel,n=r.handleThumbs,s=r.handleLabels,l=o.itemSize,c=o.getExtent(),d=this._applyTransform("left",r.mainGroup);Fn([0,1],function(u){var h=n[u];h.setStyle("fill",t.handlesColor[u]),h.y=e[u];var p=ve(e[u],[0,l[1]],c,!0),f=this.getControllerVisual(p,"symbolSize");h.scaleX=h.scaleY=f/l[0],h.x=l[0]-f/2;var g=Dt(r.handleLabelPoints[u],Rt(h,this.group));if(this._orient==="horizontal"){var m=d==="left"||d==="top"?(l[0]-f)/2:(l[0]-f)/-2;g[1]+=m}s[u].setStyle({x:g[0],y:g[1],text:o.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",r.mainGroup):"center"})},this)}},a.prototype._showIndicator=function(e,t,r,o){var n=this.visualMapModel,s=n.getExtent(),l=n.itemSize,c=[0,l[1]],d=this._shapes,u=d.indicator;if(u){u.attr("invisible",!1);var h={convertOpacityToAlpha:!0},p=this.getControllerVisual(e,"color",h),f=this.getControllerVisual(e,"symbolSize"),g=ve(e,s,c,!0),m=l[0]-f/2,v={x:u.x,y:u.y};u.y=g,u.x=m;var M=Dt(d.indicatorLabelPoint,Rt(u,this.group)),I=d.indicatorLabel;I.attr("invisible",!1);var z=this._applyTransform("left",d.mainGroup),V=this._orient,b=V==="horizontal";I.setStyle({text:(r||"")+n.formatValueText(t),verticalAlign:b?z:"middle",align:b?"center":z});var x={x:m,y:g,style:{fill:p}},R={style:{x:M[0],y:M[1]}};if(n.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var w={duration:100,easing:"cubicInOut",additive:!0};u.x=v.x,u.y=v.y,u.animateTo(x,w),I.animateTo(R,w)}else u.attr(x),I.attr(R);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var _=0;_<C.length;_++)this.api.enterBlur(C[_])}},a.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var r=e.visualMapModel.itemSize,o=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);o[1]=Ta(Tt(0,o[1]),r[1]),e._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=r[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},a.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},a.prototype._doHoverLinkToSeries=function(e,t){var r=this.visualMapModel,o=r.itemSize;if(r.option.hoverLink){var n=[0,o[1]],s=r.getExtent();e=Ta(Tt(n[0],e),n[1]);var l=Wn(r,s,n),c=[e-l,e+l],d=ve(e,n,s,!0),u=[ve(c[0],n,s,!0),ve(c[1],n,s,!0)];c[0]<n[0]&&(u[0]=-1/0),c[1]>n[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(d,u[1],"< ",l):u[1]===1/0?this._showIndicator(d,u[0],"> ",l):this._showIndicator(d,d," ",l));var h=this._hoverLinkDataIndices,p=[];(t||Pa(r))&&(p=this._hoverLinkDataIndices=r.findTargetDataIndices(u));var f=Ti(h,p);this._dispatchHighDown("downplay",ut(f[0],r)),this._dispatchHighDown("highlight",ut(f[1],r))}},a.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(Oi(e.target,function(l){var c=Xe(l);if(c.dataIndex!=null)return t=c,!0},!0),!!t){var r=this.ecModel.getSeriesByIndex(t.seriesIndex),o=this.visualMapModel;if(o.isTargetSeries(r)){var n=r.getData(t.dataType),s=n.getStore().get(o.getDataDimensionIndex(n),t.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},a.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var r=0;r<t.length;r++)this.api.leaveBlur(t[r])},a.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ut(e,this.visualMapModel)),e.length=0},a.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},a.prototype._applyTransform=function(e,t,r,o){var n=Rt(t,o?null:this.group);return le(e)?Dt(e,n,r):Pi(e,n,r)},a.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},a.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},a.type="visualMap.continuous",a}(ir);function Oa(i,a,e,t){return new Ei({shape:{points:i},draggable:!!e,cursor:a,drift:e,onmousemove:function(r){Nt(r.event)},ondragend:t})}function Wn(i,a,e){var t=Gn/2,r=i.get("hoverLinkDataSize");return r&&(t=ve(r,a,e,!0)/2),t}function Pa(i){var a=i.get("hoverLinkOnHandle");return!!(a??i.get("realtime"))}function Ea(i){return i==="vertical"?"ns-resize":"ew-resize"}var Xn={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Yn=function(i,a){a.eachComponent({mainType:"visualMap",query:i},function(e){e.setSelected(i.selected)})},Zn=[{createOnAllSeries:!0,reset:function(i,a){var e=[];return a.eachComponent("visualMap",function(t){var r=i.pipelineContext;!t.isTargetSeries(i)||r&&r.large||e.push(On(t.stateList,t.targetVisuals,oe(t.getValueState,t),t.getDataDimensionIndex(i.getData())))}),e}},{createOnAllSeries:!0,reset:function(i,a){var e=i.getData(),t=[];a.eachComponent("visualMap",function(r){if(r.isTargetSeries(i)){var o=r.getVisualMeta(oe(jn,null,i,r))||{stops:[],outerColors:[]},n=r.getDataDimensionIndex(e);n>=0&&(o.dimension=n,t.push(o))}}),i.getData().setVisual("visualMeta",t)}}];function jn(i,a,e,t){for(var r=a.targetVisuals[t],o=j.prepareVisualTypes(r),n={color:Ni(i.getData(),"color")},s=0,l=o.length;s<l;s++){var c=o[s],d=r[c==="opacity"?"__alphaForOpacity":c];d&&d.applyVisual(e,u,h)}return n.color;function u(p){return n[p]}function h(p,f){n[p]=f}}var Na=B;function qn(i){var a=i&&i.visualMap;le(a)||(a=a?[a]:[]),Na(a,function(e){if(e){De(e,"splitList")&&!De(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&le(t)&&Na(t,function(r){we(r)&&(De(r,"start")&&!De(r,"min")&&(r.min=r.start),De(r,"end")&&!De(r,"max")&&(r.max=r.end))})}})}function De(i,a){return i&&i.hasOwnProperty&&i.hasOwnProperty(a)}var Ha=!1;function or(i){Ha||(Ha=!0,i.registerSubTypeDefaulter("visualMap",function(a){return!a.categories&&(!(a.pieces?a.pieces.length>0:a.splitNumber>0)||a.calculable)?"continuous":"piecewise"}),i.registerAction(Xn,Yn),B(Zn,function(a){i.registerVisual(i.PRIORITY.VISUAL.COMPONENT,a)}),i.registerPreprocessor(qn))}function Jn(i){i.registerComponentModel(Bn),i.registerComponentView(Kn),or(i)}var Qn=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e._pieceList=[],e}return a.prototype.optionUpdated=function(e,t){i.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],eo[this._mode].call(this,this._pieceList),this._resetSelected(e,t);var o=this.option.categories;this.resetVisual(function(n,s){r==="categories"?(n.mappingMethod="category",n.categories=fe(o)):(n.dataExtent=this.getExtent(),n.mappingMethod="piecewise",n.pieceList=Te(this._pieceList,function(l){return l=fe(l),s!=="inRange"&&(l.visual=null),l}))})},a.prototype.completeVisualOption=function(){var e=this.option,t={},r=j.listVisualTypes(),o=this.isCategory();B(e.pieces,function(s){B(r,function(l){s.hasOwnProperty(l)&&(t[l]=1)})}),B(t,function(s,l){var c=!1;B(this.stateList,function(d){c=c||n(e,d,l)||n(e.target,d,l)},this),!c&&B(this.stateList,function(d){(e[d]||(e[d]={}))[l]=rr.get(l,d==="inRange"?"active":"inactive",o)})},this);function n(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}i.prototype.completeVisualOption.apply(this,arguments)},a.prototype._resetSelected=function(e,t){var r=this.option,o=this._pieceList,n=(t?r:e).selected||{};if(r.selected=n,B(o,function(l,c){var d=this.getSelectedMapKey(l);n.hasOwnProperty(d)||(n[d]=!0)},this),r.selectedMode==="single"){var s=!1;B(o,function(l,c){var d=this.getSelectedMapKey(l);n[d]&&(s?n[d]=!1:s=!0)},this)}},a.prototype.getItemSymbol=function(){return this.get("itemSymbol")},a.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},a.prototype.getPieceList=function(){return this._pieceList},a.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},a.prototype.setSelected=function(e){this.option.selected=fe(e)},a.prototype.getValueState=function(e){var t=j.findPieceIndex(e,this._pieceList);return t!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(e){var t=[],r=this._pieceList;return this.eachTargetSeries(function(o){var n=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var d=j.findPieceIndex(l,r);d===e&&n.push(c)},this),t.push({seriesId:o.id,dataIndex:n})},this),t},a.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(e.value!=null)t=e.value;else{var r=e.interval||[];t=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return t},a.prototype.getVisualMeta=function(e){if(this.isCategory())return;var t=[],r=["",""],o=this;function n(d,u){var h=o.getRepresentValue({interval:d});u||(u=o.getValueState(h));var p=e(h,u);d[0]===-1/0?r[0]=p:d[1]===1/0?r[1]=p:t.push({value:d[0],color:p},{value:d[1],color:p})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return B(s,function(d){var u=d.interval;u&&(u[0]>c&&n([c,u[0]],"outOfRange"),n(u.slice()),c=u[1])},this),{stops:t,outerColors:r}},a.type="visualMap.piecewise",a.defaultOption=Wt(ft.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),a}(ft),eo={splitNumber:function(i){var a=this.option,e=Math.min(a.precision,20),t=this.getExtent(),r=a.splitNumber;r=Math.max(parseInt(r,10),1),a.splitNumber=r;for(var o=(t[1]-t[0])/r;+o.toFixed(e)!==o&&e<5;)e++;a.precision=e,o=+o.toFixed(e),a.minOpen&&i.push({interval:[-1/0,t[0]],close:[0,0]});for(var n=0,s=t[0];n<r;s+=o,n++){var l=n===r-1?t[1]:s+o;i.push({interval:[s,l],close:[1,1]})}a.maxOpen&&i.push({interval:[t[1],1/0],close:[0,0]}),da(i),B(i,function(c,d){c.index=d,c.text=this.formatValueText(c.interval)},this)},categories:function(i){var a=this.option;B(a.categories,function(e){i.push({text:this.formatValueText(e,!0),value:e})},this),$a(a,i)},pieces:function(i){var a=this.option;B(a.pieces,function(e,t){we(e)||(e={value:e});var r={text:"",index:t};if(e.label!=null&&(r.text=e.label),e.hasOwnProperty("value")){var o=r.value=e.value;r.interval=[o,o],r.close=[1,1]}else{for(var n=r.interval=[],s=r.close=[0,0],l=[1,0,1],c=[-1/0,1/0],d=[],u=0;u<2;u++){for(var h=[["gte","gt","min"],["lte","lt","max"]][u],p=0;p<3&&n[u]==null;p++)n[u]=e[h[p]],s[u]=l[p],d[u]=p===2;n[u]==null&&(n[u]=c[u])}d[0]&&n[1]===1/0&&(s[0]=0),d[1]&&n[0]===-1/0&&(s[1]=0),n[0]===n[1]&&s[0]&&s[1]&&(r.value=n[0])}r.visual=j.retrieveVisuals(e),i.push(r)},this),$a(a,i),da(i),B(i,function(e){var t=e.close,r=[["<",""][t[1]],[">",""][t[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,r)},this)}};function $a(i,a){var e=i.inverse;(i.orient==="vertical"?!e:e)&&a.reverse()}var to=function(i){q(a,i);function a(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,r=t.get("textGap"),o=t.textStyleModel,n=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),c=t.itemSize,d=this._getViewData(),u=d.endsText,h=Hi(t.get("showLabel",!0),!u),p=!t.get("selectedMode");u&&this._renderEndsText(e,u[0],c,h,l),B(d.viewPieceList,function(f){var g=f.piece,m=new Re;m.onclick=oe(this._onItemClick,this,g),this._enableHoverLink(m,f.indexInModelPieceList);var v=t.getRepresentValue(g);if(this._createItemSymbol(m,v,[0,0,c[0],c[1]],p),h){var M=this.visualMapModel.getValueState(v);m.add(new Be({style:{x:l==="right"?-r:c[0]+r,y:c[1]/2,text:g.text,verticalAlign:"middle",align:l,font:n,fill:s,opacity:M==="outOfRange"?.5:1},silent:p}))}e.add(m)},this),u&&this._renderEndsText(e,u[1],c,h,l),$i(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},a.prototype._enableHoverLink=function(e,t){var r=this;e.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(n){var s=r.visualMapModel;s.option.hoverLink&&r.api.dispatchAction({type:n,batch:ut(s.findTargetDataIndices(t),s)})}},a.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if(t.orient==="vertical")return nr(e,this.api,e.itemSize);var r=t.align;return(!r||r==="auto")&&(r="left"),r},a.prototype._renderEndsText=function(e,t,r,o,n){if(t){var s=new Re,l=this.visualMapModel.textStyleModel;s.add(new Be({style:lt(l,{x:o?n==="right"?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:o?n:"center",text:t})})),e.add(s)}},a.prototype._getViewData=function(){var e=this.visualMapModel,t=Te(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),r=e.get("text"),o=e.get("orient"),n=e.get("inverse");return(o==="horizontal"?n:!n)?t.reverse():r&&(r=r.slice().reverse()),{viewPieceList:t,endsText:r}},a.prototype._createItemSymbol=function(e,t,r,o){var n=pt(this.getControllerVisual(t,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(t,"color"));n.silent=o,e.add(n)},a.prototype._onItemClick=function(e){var t=this.visualMapModel,r=t.option,o=r.selectedMode;if(o){var n=fe(r.selected),s=t.getSelectedMapKey(e);o==="single"||o===!0?(n[s]=!0,B(n,function(l,c){n[c]=c===s})):n[s]=!n[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})}},a.type="visualMap.piecewise",a}(ir);function ao(i){i.registerComponentModel(Qn),i.registerComponentView(to),or(i)}function ro(i){Se(Jn),Se(ao)}const io=ue({__name:"LineChart",props:{data:{},yname:{},size:{}},setup(i){const a=i;Se([xt,St,qa,qt,wt,Bi,Ja]);const e=Ue(),t=ke(),r=H(),o=H();return ze(()=>{r.value=mt(bt(o.value,t.value.baseColor==="#000"?"dark":"light"))}),he(()=>a.data,n=>{var l,c,d,u,h;if(!n)return;const s={backgroundColor:t.value.cardColor,tooltip:{trigger:"none",axisPointer:{type:"cross"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"filter",start:0}],xAxis:{type:"category",name:(l=a.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:30,axisTick:{alignWithLabel:!0},data:(c=a.data)==null?void 0:c.x,nameTextStyle:{color:t.value.primaryColor}},yAxis:{type:"value",name:a.yname||"",nameLocation:"middle",nameGap:80,nameTextStyle:{color:t.value.primaryColor},axisLine:{show:!0},min:(d=a.data)!=null&&d.y?Math.min(...a.data.y):0,max:(u=a.data)!=null&&u.y?Math.max(...a.data.y):0,axisTick:{show:!0,alignWithLabel:!0},axisLabel:{formatter:function(p){if(p===0)return"0";if(Math.abs(p)>=1e4){const f=Math.floor(Math.log10(Math.abs(p)));return`${(p/Math.pow(10,f)).toPrecision(3)}10{sup|${f}}`}return parseFloat(p.toFixed(4)).toString()},rich:{sup:{verticalAlign:"super",fontSize:10,padding:[0,2]}}}},series:[{type:"line",data:(h=a.data)==null?void 0:h.y}]};se(()=>{var p;(p=r.value)==null||p.setOption(s)})},{immediate:!0}),Ke(()=>{var n;(n=r.value)==null||n.dispose()}),he(()=>e.chartLayoutCols,()=>{var n;(n=r.value)==null||n.resize()}),(n,s)=>{var l,c,d,u;return G(),ae("div",{ref_key:"chartRef",ref:o,style:xe({width:`${((l=n.size)==null?void 0:l.w)||690}px`,height:`${((c=n.size)==null?void 0:c.h)||400}px`}),class:We([[`min-w-[${((d=n.size)==null?void 0:d.w)||690}px] min-h-[${((u=n.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),no=ue({__name:"HeatMap",props:{data:{},size:{},activeKey:{}},setup(i){const a=i;Se([xt,St,ro,wt,zn]);const e=Ue(),t=ke(),r=H(),o=H();return ze(()=>{r.value=mt(bt(o.value,t.value.baseColor==="#000"?"dark":"light"))}),he(()=>a.data,n=>{var l,c,d,u,h,p,f;if(!n)return;const s={backgroundColor:t.value.cardColor,tooltip:{formatter:function({data:g}){var m,v;return`x: ${(m=a.data)==null?void 0:m.x[g[0]]}<br> y: ${(v=a.data)==null?void 0:v.y[g[1]]}<br> value: ${g[2]}`}},grid:{top:"20px",left:"80px",right:"90px",bottom:"50"},xAxis:{type:"category",name:(l=a.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:25,data:(c=a.data)==null?void 0:c.x,axisLabel:{width:75,overflow:"truncate"},nameTextStyle:{color:t.value.primaryColor}},yAxis:[{type:"category",name:((d=a.data)==null?void 0:d.yname)||"",nameLocation:"middle",nameGap:70,nameTextStyle:{color:t.value.primaryColor},splitArea:{show:!0},data:(u=a.data)==null?void 0:u.y,axisLabel:{width:40,overflow:"truncate"}},{name:(a.activeKey||"").replace(/^.*\/([^/]+)$/,"$1"),nameLocation:"middle",nameGap:5}],visualMap:{min:((h=a.data)==null?void 0:h.min)||0,max:((p=a.data)==null?void 0:p.max)||1,calculable:!0,realtime:!1,align:"left",right:0,bottom:40,width:"100%",itemHeight:320,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},formatter:function(g){if(g===0)return"0";if(Math.abs(g)>=1e4){const m=Math.floor(Math.log10(Math.abs(g)));return`${(g/Math.pow(10,m)).toPrecision(3)}10{sup|${m}}`}return parseFloat(g.toFixed(4)).toString()},textStyle:{width:30,overflow:"break",rich:{sup:{verticalAlign:"super",fontSize:10,padding:[0,2],rotate:30}}}},series:[{type:"heatmap",data:(f=a.data)==null?void 0:f.data}]};se(()=>{var g;(g=r.value)==null||g.setOption(s)})},{immediate:!0}),Ke(()=>{var n;(n=r.value)==null||n.dispose()}),he(()=>e.chartLayoutCols,()=>{var n;(n=r.value)==null||n.resize()}),(n,s)=>{var l,c,d,u;return G(),ae("div",{ref_key:"chartRef",ref:o,style:xe({width:`${((l=n.size)==null?void 0:l.w)||690}px`,height:`${((c=n.size)==null?void 0:c.h)||400}px`}),class:We([[`min-w-[${((d=n.size)==null?void 0:d.w)||690}px] min-h-[${((u=n.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),oo=ue({__name:"ScatterView",props:{data:{},size:{},allValues:{}},setup(i){const a=i;Se([xt,St,qt,wt,Ja,Sn,Fi]);const e=Ue(),t=ke(),r=H(),o=H();return ze(()=>{r.value=mt(bt(o.value,t.value.baseColor==="#000"?"dark":"light"))}),he(()=>a.data,n=>{var l;if(!n)return;const s={backgroundColor:t.value.cardColor,tooltip:{axisPointer:{type:"cross"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"filter",start:0}],xAxis:{name:"Real",nameLocation:"middle",nameGap:25,nameTextStyle:{color:t.value.primaryColor},axisLabel:{width:75,overflow:"truncate"}},yAxis:{name:"Imag",nameLocation:"middle",nameGap:60,nameTextStyle:{color:t.value.primaryColor},axisLabel:{width:40,overflow:"truncate"}}};n.length==1?s.series={type:"scatter",data:n[0]}:(s.series=n.map((c,d)=>({type:"scatter",data:c,name:te(a.allValues)?"":String(a.allValues[d])})),s.legend={type:"scroll",data:(l=a.allValues)==null?void 0:l.map(c=>String(c)),left:"center",bottom:1}),se(()=>{var c;(c=r.value)==null||c.setOption(s,{notMerge:!0})})},{immediate:!0}),Ke(()=>{var n;(n=r.value)==null||n.dispose()}),he(()=>e.chartLayoutCols,()=>{var n;(n=r.value)==null||n.resize()}),(n,s)=>{var l,c,d,u;return G(),ae("div",{ref_key:"chartRef",ref:o,style:xe({width:`${((l=n.size)==null?void 0:l.w)||690}px`,height:`${((c=n.size)==null?void 0:c.h)||400}px`}),class:We([[`min-w-[${((d=n.size)==null?void 0:d.w)||690}px] min-h-[${((u=n.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),so={key:0,class:"flex items-center gap-2"},lo=ue({__name:"SliderView",props:Ft({options:{}},{value:{},valueModifiers:{},showall:{},showallModifiers:{}}),emits:["update:value","update:showall"],setup(i){const a=ke(),e=i,t=ct(i,"value"),r=ct(i,"showall"),o=H(),n=W(()=>{var f;return(f=e.options)==null?void 0:f.map(g=>g==null?void 0:g.map((m,v)=>({...m,label:Ne(m),value:v})))}),s=W(()=>{var f;return(f=e.options)==null?void 0:f.map(g=>{if(!te(g))return 100/(g[0].value.length-1)})}),l=(f,g,m)=>{if(m===void 0)return"";const v=Math.round(f/m);return e.options?e.options[g][0].value[v]:"0"},c=(f,g)=>{if(s.value){const m=Math.round(f/s.value[g]),v=t.value||[];v[g]=m,t.value=v}},d=W(()=>{var g;let f=0;return(g=e.options)==null||g.forEach(m=>{te(m)||f++}),f}),u=f=>{te(f)?o.value=[]:o.value=[f.pop()],se(()=>{r.value=o.value[0]})},h=H(),p=H();return ze(()=>{var f;h.value&&(p.value=(f=h.value)==null?void 0:f.offsetWidth)}),(f,g)=>{const m=Fa,v=Kr,M=Xi,I=Kt,z=Gt,V=Ur;return G(),ae("div",null,[ee(V,{value:k(o),"onUpdate:value":[g[0]||(g[0]=b=>He(o)?o.value=b:null),u]},{default:re(()=>[de("div",{ref_key:"wrapRef",ref:h},[ee(z,{cols:k(p)<650?1:k(d)>2?2:k(d),"x-gap":5,"y-gap":5},{default:re(()=>[(G(!0),ae(gt,null,Ut(f.options,(b,x)=>(G(),ne(I,{key:x,class:We(["p-2",[k(te)(b)?"w-0 hidden":""]]),style:xe({border:`1px solid ${k(a).tabColor}`})},{default:re(()=>{var R;return[k(te)(b)?me("",!0):(G(),ae("div",so,[$e(_e(["X","Y","Z"][x])+" : ",1),ee(m,{options:k(n)?k(n)[x]:[],"default-value":0,class:"flex-1",size:"small"},null,8,["options"]),ee(v,{value:x},{default:re(()=>g[1]||(g[1]=[$e("Show All")])),_:2},1032,["value"])])),k(s)&&k(s)[x]!==void 0&&!k(te)(b)?(G(),ne(M,{key:1,class:"!flex-1",disabled:(R=k(o))==null?void 0:R.includes(x),step:k(s)[x],"format-tooltip":w=>l(w,x,k(s)?k(s)[x]:void 0),onUpdateValue:w=>c(w,x)},null,8,["disabled","step","format-tooltip","onUpdateValue"])):me("",!0)]}),_:2},1032,["class","style"]))),128))]),_:1},8,["cols"])],512)]),_:1},8,["value"])])}}}),uo=ue({__name:"BarChart",props:{data:{},size:{}},setup(i){const a=i;Se([xt,St,qa,qt,wt,gn]);const e=Ue(),t=ke(),r=H(),o=H();return ze(()=>{r.value=mt(bt(o.value,t.value.baseColor==="#000"?"dark":"light"))}),he(()=>a.data,n=>{var l,c,d,u;if(!n)return;const s={backgroundColor:t.value.cardColor,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},xAxis:{type:"category",name:(l=a.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:30,nameTextStyle:{color:t.value.primaryColor},axisTick:{alignWithLabel:!0},data:(c=a.data)==null?void 0:c.x},yAxis:{type:"value",name:((d=a.data)==null?void 0:d.yname)||"",nameLocation:"middle",nameGap:70,nameTextStyle:{color:t.value.primaryColor},axisLabel:{width:40,overflow:"truncate"},axisTick:{alignWithLabel:!0}},series:[{type:"bar",data:(u=a.data)==null?void 0:u.data}]};se(()=>{var h;(h=r.value)==null||h.setOption(s)})},{immediate:!0}),Ke(()=>{var n;(n=r.value)==null||n.dispose()}),he(()=>e.chartLayoutCols,()=>{var n;(n=r.value)==null||n.resize()}),(n,s)=>{var l,c,d,u;return G(),ae("div",{ref_key:"chartRef",ref:o,style:xe({width:`${((l=n.size)==null?void 0:l.w)||690}px`,height:`${((c=n.size)==null?void 0:c.h)||400}px`}),class:We([[`min-w-[${((d=n.size)==null?void 0:d.w)||690}px] min-h-[${((u=n.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),co={class:"h-8 text-center"},ho={key:0},po=ue({__name:"ChartView",props:{activeKey:{},latestStep:{},barChart:{}},setup(i,{expose:a}){const e=["1d_complex_scatter","2d_complex_scatter","3d_complex_scatter","scalar_complex_scatter"],t=i,r=Gi(),o=H(),n=H([]),s=H({}),l=H(),c=H([]),d=H([0,0]),u=H(),h=({data:v,type:M})=>{var I,z;Array.isArray(t.activeKey)||(M==="concat"?s.value={[t.activeKey]:(z=(I=s.value[t.activeKey])==null?void 0:I.slice(0,t.latestStep))==null?void 0:z.concat(v||[])}:s.value={[t.activeKey]:v||[]})},p=W(()=>{let v=0;return dt(n.value,M=>{te(M)||v++}),v}),f=async v=>{o.value=v.exp_detail,s.value=v.data.result,l.value=v.data.plot_type;const M=[];dt(v.sweep_variables,I=>{M.push(I)}),n.value=M,te(c.value)&&(c.value=M.map(I=>{if(!te(I))return 0}))},g=W(()=>{const v=Object.keys(l.value||{});return!te(v)&&l.value?l.value[v[0]]:""}),m=W(()=>{var M,I,z,V;if(Array.isArray(t.activeKey))return;const v=s.value[t.activeKey];if(g.value==="1d_normal"){const b=c.value[0],x=b!==void 0?n.value[0][b]:{};return{x:x==null?void 0:x.value,y:v,xname:Ne(x)}}if(g.value==="2d_normal"){const b=c.value[0],x=c.value[1];if(b===void 0||x===void 0)return[];const R=n.value[0][b].value,w=n.value[1][x].value,C=w.length;let _=[];return w.forEach((D,O)=>{const L=[];R.forEach((T,F)=>{L.push([F,O,v[F*C+O]])}),_=_.concat(L)}),{data:_,x:R,y:w,xname:Ne(n.value[0][b]),yname:Ne(n.value[1][x]),min:Math.min(...v),max:Math.max(...v)}}if(g.value==="scalar_complex_scatter")return[(M=v.real[0])==null?void 0:M.map((b,x)=>[b,v.imag[0][x]])];if(g.value==="1d_complex_scatter"){const[b=0]=d.value;if(u.value===0){const x=[];return n.value[u.value][0].value.forEach((w,C)=>{var _;x.push((_=v.real[C])==null?void 0:_.map((D,O)=>[D,v.imag[C][O]]))}),x}return[(I=v.real[b])==null?void 0:I.map((x,R)=>[x,v.imag[b][R]])]}if(g.value==="2d_complex_scatter"){const b=[],[x=0,R=0]=d.value,w=n.value[1][0].value.length;if(u.value!==void 0){const C=n.value[u.value][0].value;if(u.value===0)return C.forEach((_,D)=>{var O;b.push((O=v.real[D*w+R])==null?void 0:O.map((L,T)=>[L,v.imag[D*w+R][T]]))}),b;if(u.value===1)return C.forEach((_,D)=>{var O;b.push((O=v.real[x*w+D])==null?void 0:O.map((L,T)=>[L,v.imag[x*w+D][T]]))}),b}return[(z=v.real[x*w+R])==null?void 0:z.map((C,_)=>[C,v.imag[x*w+R][_]])]}if(g.value==="3d_complex_scatter"){const[b=0,x=0,R=0]=d.value,w=n.value[1][0].value.length,C=n.value[2][0].value.length,_=[],D=n.value[u.value][0].value;return u.value===0?D.forEach((O,L)=>{var T;_.push((T=v.real[L*w*C+x*C+R])==null?void 0:T.map((F,E)=>[F,v.imag[L*w*C+x*C+R][E]]))}):u.value===1?D.forEach((O,L)=>{var T;_.push((T=v.real[b*w*C+L*C+R])==null?void 0:T.map((F,E)=>[F,v.imag[b*w*C+L*C+R][E]]))}):u.value===2&&D.forEach((O,L)=>{var T;_.push((T=v.real[b*w*C+x*C+L])==null?void 0:T.map((F,E)=>[F,v.imag[b*w*C+x*C+L][E]]))}),[(V=v.real[b*w*C+x*C+R])==null?void 0:V.map((O,L)=>[O,v.imag[b*w*C+x*C+R][L]])]}return{x:[],y:[],xname:""}});return a({setData:h,updateStore:f}),(v,M)=>{var z,V,b,x,R;const I=Wr;return G(),ae("div",null,[de("div",co,[ee(I,{color:{color:"#7816ff",textColor:"#fff"},size:"tiny"},{default:re(()=>{var w,C;return[$e(" Exp "+_e((C=(w=k(r))==null?void 0:w.expInfo)==null?void 0:C.exp_id),1)]}),_:1}),$e(" "+_e((z=k(o))==null?void 0:z.title)+" ",1),de("div",null,[$e(_e((V=k(r).expInfo)==null?void 0:V.group_name)+" :: "+_e((b=k(r).expInfo)==null?void 0:b.space_name)+" ",1),(x=k(r).expInfo)!=null&&x.create_time?(G(),ae("span",ho,":: "+_e((R=k(r).expInfo)==null?void 0:R.create_time),1)):me("",!0)])]),Array.isArray(v.activeKey)?me("",!0):(G(),ae(gt,{key:0},[k(g)==="1d_normal"?(G(),ne(io,{key:0,data:k(m),yname:v.activeKey},null,8,["data","yname"])):me("",!0),k(g)==="2d_normal"?(G(),ne(no,{key:1,data:k(m),"active-key":v.activeKey},null,8,["data","active-key"])):me("",!0)],64)),e.includes(k(g))?(G(),ne(oo,{key:1,"all-values":k(te)(k(n)[k(u)])?[]:k(n)[k(u)][0].value,data:k(m)},null,8,["all-values","data"])):me("",!0),Array.isArray(v.activeKey)&&v.activeKey.length>0?(G(),ne(uo,{key:2,data:v.barChart},null,8,["data"])):me("",!0),!e.includes(k(g))&&k(p)>0?(G(),ne(Qi,{key:3,"plot-type":k(g),options:k(n),modelValue:k(c),"onUpdate:modelValue":M[0]||(M[0]=w=>He(c)?c.value=w:null)},null,8,["plot-type","options","modelValue"])):(G(),ne(lo,{key:4,options:k(n),value:k(d),"onUpdate:value":M[1]||(M[1]=w=>He(d)?d.value=w:null),showall:k(u),"onUpdate:showall":M[2]||(M[2]=w=>He(u)?u.value=w:null)},null,8,["options","value","showall"]))])}}}),vo={class:"flex min-h-96"},fo={class:"font-bold mb-2"},go={class:"flex-1 px-5"},mo="/",yo=ue({__name:"PlotView",setup(i){const{t:a}=Xr(),e=Ue(),t=Yr(),r=ke(),o=H({}),n=H(),s=H(),l=H([]),c=H(null),d=H({}),u=H([]),h=H([]),p=H(null),f=w=>{p.value=setInterval(w,1e3)},g=()=>{p.value&&(clearInterval(p.value),p.value=null)},m=w=>{const C=[ge.SERVICE_QUEUING,ge.SERVICE_PENDING,ge.HOST_DOWNLOADED,ge.WAITING,"LOADING_DATA"].includes(w),_=[ge.RUNNING].includes(w),D=[ge.COMPLETE,ge.CANCELING,ge.CANCELED,ge.ERROR].includes(w);if(C)return"LOADING";if(_)return"RUNNING";if(D)return"COMPLETE"},v=H(0),M=ra(async()=>{var D,O,L,T,F;const w={device_group_name:t.query.device_group_name,space_id:t.query.space_id,exp_id:t.query.exp_id,fields:l.value||[],latest_step:Array(l.value.length===0?1:l.value.length).fill(v.value)},[C,_]=await oa(w);if(!C&&(_==null?void 0:_.status)===0){const E=(D=_.data.data)==null?void 0:D.result;p.value&&!te(E)&&dt(d.value,(K,ce)=>{K&&K.setData({data:E[ce],type:"concat"})});const P=Object.keys(((L=(O=_.data)==null?void 0:O.data)==null?void 0:L.data_range)||{});P.length>0?v.value=_.data.data.data_range[P[0]].pop():v.value=0;const Y=m(_.data.status);Y&&Y!=="COMPLETE"&&!p.value&&f(M),p.value&&m(_.data.status)==="COMPLETE"&&g(),o.value=((T=_.data)==null?void 0:T.all_fields)||{},n.value=_.data.status,(F=_.data)!=null&&F.message&&(s.value=_.data.message)}},200),I=W(()=>m(n.value)),z=H(),V=H(),b=H({x:[],data:[]}),x=ra(async w=>{var O,L,T,F;const C={device_group_name:t.query.device_group_name,space_id:t.query.space_id,exp_id:t.query.exp_id,fields:w,latest_step:[0]},[_,D]=await oa(C);!_&&(D==null?void 0:D.status)===0&&(z.value={...z.value,...((L=(O=D.data)==null?void 0:O.data)==null?void 0:L.plot_type)||{}},D.data.data.plot_type[w[0]]==="scalar_normal"&&(V.value={...V.value||{},...((F=(T=D.data)==null?void 0:T.data)==null?void 0:F.result)||{}}),se(()=>{const E=[];let P=-1;l.value.forEach((K,ce)=>{if(z.value[K]==="scalar_normal"){const Ie=E.findIndex(Ce=>Array.isArray(Ce));Ie>-1?(E[Ie].push(K),P=Ie):(E.push([K]),P=ce)}else E.push(K)});const Y=[];Array.isArray(E[P])&&E[P].forEach(K=>{Y.push(V.value[K][0])}),b.value={x:E[P],data:Y},h.value=E}),se(()=>{setTimeout(()=>{var E;(E=d.value[w[0]])==null||E.updateStore(D.data)},100)}))},200);ze(M),Ke(g),he(l,w=>{var _,D,O;if((w==null?void 0:w.length)>((_=u.value)==null?void 0:_.length)){const L=ia(w,u.value);x(L)}let C="";if((w==null?void 0:w.length)<u.value.length&&(C=ia(u.value,w)[0]),u.value=w,C){let L=JSON.parse(JSON.stringify(h.value||[]));L=na(L,C);const T=L.findIndex(P=>Array.isArray(P));if(T>-1){let P=L[T];P=na(P,C),te(P)?L.splice(T,1):L[T]=P}h.value=L;const F=JSON.parse(JSON.stringify(b.value||{})),E=(D=F.x)==null?void 0:D.findIndex(P=>P===C);E>-1&&(F.x.splice(E,1),(O=F.data)==null||O.splice(E,1)),se(()=>{b.value=F})}se(()=>{var L;(L=c.value)==null||L.scrollTo({top:384*Math.ceil(l.value.length/2),behavior:"smooth"})})});const R=(w,C)=>{d.value[C]=w};return(w,C)=>{const _=Zr,D=Kt,O=Gt,L=jr,T=qr,F=Jr;return G(),ne(F,{style:{height:"calc(100vh - 260px)"}},{default:re(()=>[de("div",vo,[de("div",{class:"w-52",style:xe({borderRight:`1px solid ${k(r).tabColor}`,height:"calc(100vh - 300px)"})},[de("div",fo,_e(k(a)("expInfo.dataField")),1),ee(_,{style:{"max-height":"calc(100vh - 370px)"}},{default:re(()=>[ee(ji,{modelValue:k(l),"onUpdate:modelValue":C[0]||(C[0]=E=>He(l)?l.value=E:null),"all-fields":k(o),"divider-key":mo},null,8,["modelValue","all-fields"])]),_:1})],4),de("div",go,[ee(_,{style:{"max-height":"calc(100vh - 300px)"},ref_key:"scrollbarRef",ref:c,trigger:"none"},{default:re(()=>[ee(L,{show:k(I)==="LOADING",style:{height:"calc(100vh - 350px)"}},{default:re(()=>[ee(O,{cols:k(e).chartLayoutCols,"x-gap":"10","y-gap":"10"},{default:re(()=>[(G(!0),ae(gt,null,Ut(k(h),E=>(G(),ne(D,{class:"min-h-[500px] p-4 rounded-xl",style:xe({border:`1px solid ${k(r).tabColor}`}),key:Array.isArray(E)?"bar":E},{default:re(()=>[ee(po,{"latest-step":k(v),"bar-chart":k(b),ref_for:!0,ref:P=>R(P,Array.isArray(E)?"bar--":E),"active-key":E},null,8,["latest-step","bar-chart","active-key"])]),_:2},1032,["style"]))),128))]),_:1},8,["cols"])]),_:1},8,["show"])]),_:1},512)]),de("div",null,[ee(T,{type:"primary",size:"small",onClick:k(e).toggleChartLayoutCols},{icon:re(()=>[ee(k(Zi))]),_:1},8,["onClick"])])])]),_:1})}}}),_o={class:"flex gap-5"},Io=ue({__name:"ExpFinalSetting",setup(i){return(a,e)=>(G(),ae("div",_o,[ee(yo)]))}});export{Io as default};
