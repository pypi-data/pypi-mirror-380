import{S as je,i as Te,s as Ce,V as lt,W as nt,a as k,d as u,f,g as C,h as c,n as at,H as pe,I as _e,C as J,D as G,E as K,K as ge,q as B,r as N,F as q,k as ue,v as ze,e as w,t as A,l as V,c as v,b as O,p as U,G as te,j as M,y as Me,u as Pe,N as ht,x as pt,z as _t,A as gt,B as bt,M as wt,L as st,J as vt,X as kt}from"./JdJvpXsd.js";import"./IHki7fMi.js";import{e as se,d as yt,c as $t,u as Et}from"./jTPhk4Bq.js";import{t as Se}from"./Bn9KmUGN.js";import{a as Ae,s as It,b as Dt}from"./Cy4KZWi6.js";import{i as St}from"./CqxBw7o8.js";import{M as ct}from"./eLkVlJik.js";import{L as jt}from"./BGGU5h9L.js";import{X as dt}from"./DTKIxvQd.js";import"./sVask8_D.js";import{b as Tt,c as Oe}from"./GXOrFlnQ.js";import{f as Ct}from"./g5t9vw8M.js";import{D as Bt}from"./BszIMfa5.js";import{G as Vt}from"./CIMC518F.js";import{P as Ut}from"./B8-EyseT.js";import{T as Nt}from"./DSv6SC83.js";import{D as Ft}from"./DiR8_Y1k.js";import{S as xt}from"./C641ttU9.js";import"./D4WEw8sP.js";import{T as At}from"./hqyv9apC.js";import{K as Ot}from"./qUpNiEZl.js";const Br=async(s,e)=>{let t=null;const r=await fetch(`${se}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify(e)}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(t=n.detail,null));if(t)throw t;return r},Vr=async(s="")=>{let e=null;const t=await fetch(`${se}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async r=>{if(!r.ok)throw await r.json();return r.json()}).then(r=>r).catch(r=>(e=r.detail,null));if(e)throw e;return t},Mt=async(s,e)=>{let t=null;const r=await fetch(`${se}/folders/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(t=n.detail,null));if(t)throw t;return r},Ur=async(s,e,t)=>{let r=null;const n=await fetch(`${se}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify(t)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return n},Nr=async(s,e,t)=>{let r=null;const n=await fetch(`${se}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify({is_expanded:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return n},Fr=async(s,e,t)=>{let r=null;const n=await fetch(`${se}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify({parent_id:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return n},xr=async(s,e)=>{let t=null;const r=await fetch(`${se}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(t=n.detail,null));if(t)throw t;return r};function Pt(s){let e,t;return{c(){e=lt("svg"),t=lt("path"),this.h()},l(r){e=nt(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=k(e);t=nt(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(u),n.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",s[1]),f(e,"stroke","currentColor"),f(e,"class",s[0])},m(r,n){C(r,e,n),c(e,t)},p(r,[n]){n&2&&f(e,"stroke-width",r[1]),n&1&&f(e,"class",r[0])},i:at,o:at,d(r){r&&u(e)}}}function zt(s,e,t){let{className:r="size-4"}=e,{strokeWidth:n="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,r=o.className),"strokeWidth"in o&&t(1,n=o.strokeWidth)},[r,n]}class Ar extends je{constructor(e){super(),Te(this,e,zt,Pt,Ce,{className:0,strokeWidth:1})}}function ot(s){var L;let e,t,r,n,o,a,l,i,g,_,E,h,d;function b(p,$){return p[2].share_id?Rt:Lt}let S=b(s),j=S(s),y=((L=s[4])==null?void 0:L.features.enable_community_sharing)&&it(s);g=new jt({});function x(p,$){return p[2].share_id?Jt:Wt}let m=x(s),T=m(s);return{c(){e=w("div"),t=w("div"),j.c(),r=V(),n=w("div"),o=w("div"),a=w("div"),y&&y.c(),l=V(),i=w("button"),J(g.$$.fragment),_=V(),T.c(),this.h()},l(p){e=v(p,"DIV",{class:!0});var $=k(e);t=v($,"DIV",{class:!0});var H=k(t);j.l(H),H.forEach(u),r=U($),n=v($,"DIV",{class:!0});var Z=k(n);o=v(Z,"DIV",{class:!0});var I=k(o);a=v(I,"DIV",{class:!0});var R=k(a);y&&y.l(R),l=U(R),i=v(R,"BUTTON",{class:!0,type:!0,id:!0});var W=k(i);G(g.$$.fragment,W),_=U(W),T.l(W),W.forEach(u),R.forEach(u),I.forEach(u),Z.forEach(u),$.forEach(u),this.h()},h(){f(t,"class","text-sm dark:text-gray-300 mb-1"),f(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),f(i,"type","button"),f(i,"id","copy-and-share-chat-button"),f(a,"class","flex gap-1"),f(o,"class","flex flex-col items-end space-x-1 mt-3"),f(n,"class","flex justify-end"),f(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(p,$){C(p,e,$),c(e,t),j.m(t,null),c(e,r),c(e,n),c(n,o),c(o,a),y&&y.m(a,null),c(a,l),c(a,i),K(g,i,null),c(i,_),T.m(i,null),E=!0,h||(d=te(i,"click",s[11]),h=!0)},p(p,$){var H;S===(S=b(p))&&j?j.p(p,$):(j.d(1),j=S(p),j&&(j.c(),j.m(t,null))),(H=p[4])!=null&&H.features.enable_community_sharing?y?y.p(p,$):(y=it(p),y.c(),y.m(a,l)):y&&(y.d(1),y=null),m===(m=x(p))&&T?T.p(p,$):(T.d(1),T=m(p),T&&(T.c(),T.m(i,null)))},i(p){E||(B(g.$$.fragment,p),E=!0)},o(p){N(g.$$.fragment,p),E=!1},d(p){p&&u(e),j.d(),y&&y.d(),q(g),T.d(),h=!1,d()}}}function Lt(s){let e=s[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",t;return{c(){t=A(e)},l(r){t=O(r,e)},m(r,n){C(r,t,n)},p(r,n){n&8&&e!==(e=r[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&M(t,e)},d(r){r&&u(t)}}}function Rt(s){let e,t=s[3].t("You have shared this chat")+"",r,n,o,a=s[3].t("before")+"",l,i,g,_,E=s[3].t("Click here to")+"",h,d,b,S=s[3].t("delete this link")+"",j,y,x=s[3].t("and create a new shared link.")+"",m,T,L;return{c(){e=w("a"),r=A(t),n=V(),o=w("span"),l=A(a),i=A("."),_=V(),h=A(E),d=V(),b=w("button"),j=A(S),y=V(),m=A(x),this.h()},l(p){e=v(p,"A",{href:!0,target:!0});var $=k(e);r=O($,t),n=U($),o=v($,"SPAN",{class:!0});var H=k(o);l=O(H,a),H.forEach(u),i=O($,"."),$.forEach(u),_=U(p),h=O(p,E),d=U(p),b=v(p,"BUTTON",{class:!0});var Z=k(b);j=O(Z,S),Z.forEach(u),y=U(p),m=O(p,x),this.h()},h(){f(o,"class","underline"),f(e,"href",g="/s/"+s[2].share_id),f(e,"target","_blank"),f(b,"class","underline")},m(p,$){C(p,e,$),c(e,r),c(e,n),c(e,o),c(o,l),c(e,i),C(p,_,$),C(p,h,$),C(p,d,$),C(p,b,$),c(b,j),C(p,y,$),C(p,m,$),T||(L=te(b,"click",s[9]),T=!0)},p(p,$){$&8&&t!==(t=p[3].t("You have shared this chat")+"")&&M(r,t),$&8&&a!==(a=p[3].t("before")+"")&&M(l,a),$&4&&g!==(g="/s/"+p[2].share_id)&&f(e,"href",g),$&8&&E!==(E=p[3].t("Click here to")+"")&&M(h,E),$&8&&S!==(S=p[3].t("delete this link")+"")&&M(j,S),$&8&&x!==(x=p[3].t("and create a new shared link.")+"")&&M(m,x)},d(p){p&&(u(e),u(_),u(h),u(d),u(b),u(y),u(m)),T=!1,L()}}}function it(s){let e,t=s[3].t("Share to Open WebUI Community")+"",r,n,o;return{c(){e=w("button"),r=A(t),this.h()},l(a){e=v(a,"BUTTON",{class:!0,type:!0});var l=k(e);r=O(l,t),l.forEach(u),this.h()},h(){f(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),f(e,"type","button")},m(a,l){C(a,e,l),c(e,r),n||(o=te(e,"click",s[10]),n=!0)},p(a,l){l&8&&t!==(t=a[3].t("Share to Open WebUI Community")+"")&&M(r,t)},d(a){a&&u(e),n=!1,o()}}}function Wt(s){let e=s[3].t("Copy Link")+"",t;return{c(){t=A(e)},l(r){t=O(r,e)},m(r,n){C(r,t,n)},p(r,n){n&8&&e!==(e=r[3].t("Copy Link")+"")&&M(t,e)},d(r){r&&u(t)}}}function Jt(s){let e=s[3].t("Update and Copy Link")+"",t;return{c(){t=A(e)},l(r){t=O(r,e)},m(r,n){C(r,t,n)},p(r,n){n&8&&e!==(e=r[3].t("Update and Copy Link")+"")&&M(t,e)},d(r){r&&u(t)}}}function Gt(s){let e,t,r,n=s[3].t("Share Chat")+"",o,a,l,i,g,_,E,h;i=new dt({props:{className:"size-5"}});let d=s[2]&&ot(s);return{c(){e=w("div"),t=w("div"),r=w("div"),o=A(n),a=V(),l=w("button"),J(i.$$.fragment),g=V(),d&&d.c(),this.h()},l(b){e=v(b,"DIV",{});var S=k(e);t=v(S,"DIV",{class:!0});var j=k(t);r=v(j,"DIV",{class:!0});var y=k(r);o=O(y,n),y.forEach(u),a=U(j),l=v(j,"BUTTON",{class:!0});var x=k(l);G(i.$$.fragment,x),x.forEach(u),j.forEach(u),g=U(S),d&&d.l(S),S.forEach(u),this.h()},h(){f(r,"class","text-lg font-medium self-center"),f(l,"class","self-center"),f(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(b,S){C(b,e,S),c(e,t),c(t,r),c(r,o),c(t,a),c(t,l),K(i,l,null),c(e,g),d&&d.m(e,null),_=!0,E||(h=te(l,"click",s[8]),E=!0)},p(b,S){(!_||S&8)&&n!==(n=b[3].t("Share Chat")+"")&&M(o,n),b[2]?d?(d.p(b,S),S&4&&B(d,1)):(d=ot(b),d.c(),B(d,1),d.m(e,null)):d&&(Me(),N(d,1,1,()=>{d=null}),Pe())},i(b){_||(B(i.$$.fragment,b),B(d),_=!0)},o(b){N(i.$$.fragment,b),N(d),_=!1},d(b){b&&u(e),q(i),d&&d.d(),E=!1,h()}}}function Kt(s){let e,t,r;function n(a){s[12](a)}let o={size:"md",$$slots:{default:[Gt]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new ct({props:o}),pe.push(()=>_e(e,"show",n)),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,l){K(e,a,l),r=!0},p(a,[l]){const i={};l&65567&&(i.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,i.show=a[0],ge(()=>t=!1)),e.$set(i)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){N(e.$$.fragment,a),r=!1},d(a){q(e,a)}}}function qt(s,e,t){let r,n,o;ue(s,yt,m=>t(14,r=m)),ue(s,$t,m=>t(4,o=m));let{chatId:a}=e,l=null,i=null;const g=ze("i18n");ue(s,g,m=>t(3,n=m));const _=async()=>{const m=await It(localStorage.token,a);return i=`${window.location.origin}/s/${m.id}`,t(2,l=await Ae(localStorage.token,a)),i},E=async()=>{const m=l.chat;Se.success(n.t("Redirecting you to Open WebUI Community"));const T="https://openwebui.com",L=await window.open(`${T}/chats/upload`,"_blank");window.addEventListener("message",p=>{p.origin===T&&p.data==="loaded"&&L.postMessage(JSON.stringify({chat:m,models:r.filter($=>m.models.includes($.id))}),"*")},!1)};let{show:h=!1}=e;const d=m=>l?m?l.id!==m.id||l.share_id!==m.share_id:!1:!0,b=()=>{t(0,h=!1)},S=async()=>{await Dt(localStorage.token,a)&&t(2,l=await Ae(localStorage.token,a))},j=()=>{E(),t(0,h=!1)},y=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const T=async()=>{const L=await _();return new Blob([L],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":T()})]).then(()=>!0).catch(L=>!1)}else St(await _());Se.success(n.t("Copied shared chat URL to clipboard!")),t(0,h=!1)};function x(m){h=m,t(0,h)}return s.$$set=m=>{"chatId"in m&&t(1,a=m.chatId),"show"in m&&t(0,h=m.show)},s.$$.update=()=>{s.$$.dirty&7&&h&&(async()=>{if(a){const m=await Ae(localStorage.token,a);d(m)&&t(2,l=m)}else t(2,l=null)})()},[h,a,l,n,o,g,_,E,b,S,j,y,x]}class Or extends je{constructor(e){super(),Te(this,e,qt,Kt,Ce,{chatId:1,show:0})}}function Ht(s){let e,t,r,n;const o=s[8].default,a=pt(o,s,s[15],null);return{c(){e=w("button"),a&&a.c()},l(l){e=v(l,"BUTTON",{});var i=k(e);a&&a.l(i),i.forEach(u)},m(l,i){C(l,e,i),a&&a.m(e,null),t=!0,r||(n=te(e,"click",s[12]),r=!0)},p(l,i){a&&a.p&&(!t||i&32768)&&_t(a,o,l,l[15],t?bt(o,l[15],i,null):gt(l[15]),null)},i(l){t||(B(a,l),t=!0)},o(l){N(a,l),t=!1},d(l){l&&u(e),a&&a.d(l),r=!1,n()}}}function Yt(s){let e,t;return e=new Nt({props:{content:s[5].t("More"),$$slots:{default:[Ht]},$$scope:{ctx:s}}}),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,n){K(e,r,n),t=!0},p(r,n){const o={};n&32&&(o.content=r[5].t("More")),n&32784&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Xt(s){let e,t,r,n=s[5].t("Edit")+"",o,a;return e=new Ut({}),{c(){J(e.$$.fragment),t=V(),r=w("div"),o=A(n),this.h()},l(l){G(e.$$.fragment,l),t=U(l),r=v(l,"DIV",{class:!0});var i=k(r);o=O(i,n),i.forEach(u),this.h()},h(){f(r,"class","flex items-center")},m(l,i){K(e,l,i),C(l,t,i),C(l,r,i),c(r,o),a=!0},p(l,i){(!a||i&32)&&n!==(n=l[5].t("Edit")+"")&&M(o,n)},i(l){a||(B(e.$$.fragment,l),a=!0)},o(l){N(e.$$.fragment,l),a=!1},d(l){l&&(u(t),u(r)),q(e,l)}}}function Zt(s){let e,t,r,n=s[5].t("Export")+"",o,a;return e=new Ft({}),{c(){J(e.$$.fragment),t=V(),r=w("div"),o=A(n),this.h()},l(l){G(e.$$.fragment,l),t=U(l),r=v(l,"DIV",{class:!0});var i=k(r);o=O(i,n),i.forEach(u),this.h()},h(){f(r,"class","flex items-center")},m(l,i){K(e,l,i),C(l,t,i),C(l,r,i),c(r,o),a=!0},p(l,i){(!a||i&32)&&n!==(n=l[5].t("Export")+"")&&M(o,n)},i(l){a||(B(e.$$.fragment,l),a=!0)},o(l){N(e.$$.fragment,l),a=!1},d(l){l&&(u(t),u(r)),q(e,l)}}}function Qt(s){let e,t,r,n=s[5].t("Delete")+"",o,a;return e=new Vt({}),{c(){J(e.$$.fragment),t=V(),r=w("div"),o=A(n),this.h()},l(l){G(e.$$.fragment,l),t=U(l),r=v(l,"DIV",{class:!0});var i=k(r);o=O(i,n),i.forEach(u),this.h()},h(){f(r,"class","flex items-center")},m(l,i){K(e,l,i),C(l,t,i),C(l,r,i),c(r,o),a=!0},p(l,i){(!a||i&32)&&n!==(n=l[5].t("Delete")+"")&&M(o,n)},i(l){a||(B(e.$$.fragment,l),a=!0)},o(l){N(e.$$.fragment,l),a=!1},d(l){l&&(u(t),u(r)),q(e,l)}}}function er(s){let e,t,r,n,o,a;return e=new Oe({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Xt]},$$scope:{ctx:s}}}),e.$on("click",s[9]),r=new Oe({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Zt]},$$scope:{ctx:s}}}),r.$on("click",s[10]),o=new Oe({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Qt]},$$scope:{ctx:s}}}),o.$on("click",s[11]),{c(){J(e.$$.fragment),t=V(),J(r.$$.fragment),n=V(),J(o.$$.fragment)},l(l){G(e.$$.fragment,l),t=U(l),G(r.$$.fragment,l),n=U(l),G(o.$$.fragment,l)},m(l,i){K(e,l,i),C(l,t,i),K(r,l,i),C(l,n,i),K(o,l,i),a=!0},p(l,i){const g={};i&32800&&(g.$$scope={dirty:i,ctx:l}),e.$set(g);const _={};i&32800&&(_.$$scope={dirty:i,ctx:l}),r.$set(_);const E={};i&32800&&(E.$$scope={dirty:i,ctx:l}),o.$set(E)},i(l){a||(B(e.$$.fragment,l),B(r.$$.fragment,l),B(o.$$.fragment,l),a=!0)},o(l){N(e.$$.fragment,l),N(r.$$.fragment,l),N(o.$$.fragment,l),a=!1},d(l){l&&(u(t),u(n)),q(e,l),q(r,l),q(o,l)}}}function tr(s){let e,t,r;return t=new Tt({props:{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800   z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:s[0],transition:Ct,$$slots:{default:[er]},$$scope:{ctx:s}}}),{c(){e=w("div"),J(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{slot:!0});var o=k(e);G(t.$$.fragment,o),o.forEach(u),this.h()},h(){f(e,"slot","content")},m(n,o){C(n,e,o),K(t,e,null),r=!0},p(n,o){const a={};o&1&&(a.align=n[0]),o&32814&&(a.$$scope={dirty:o,ctx:n}),t.$set(a)},i(n){r||(B(t.$$.fragment,n),r=!0)},o(n){N(t.$$.fragment,n),r=!1},d(n){n&&u(e),q(t)}}}function rr(s){let e,t,r;function n(a){s[13](a)}let o={$$slots:{content:[tr],default:[Yt]},$$scope:{ctx:s}};return s[4]!==void 0&&(o.show=s[4]),e=new Bt({props:o}),pe.push(()=>_e(e,"show",n)),e.$on("change",s[14]),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,l){K(e,a,l),r=!0},p(a,[l]){const i={};l&32831&&(i.$$scope={dirty:l,ctx:a}),!t&&l&16&&(t=!0,i.show=a[4],ge(()=>t=!1)),e.$set(i)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){N(e.$$.fragment,a),r=!1},d(a){q(e,a)}}}function lr(s,e,t){let r,{$$slots:n={},$$scope:o}=e;const a=ze("i18n");ue(s,a,m=>t(5,r=m));const l=ht();let{align:i="start"}=e,{onEdit:g=()=>{}}=e,{onExport:_=()=>{}}=e,{onDelete:E=()=>{}}=e,h=!1;const d=()=>{g()},b=()=>{_()},S=()=>{E()},j=m=>{m.stopPropagation(),t(4,h=!h)};function y(m){h=m,t(4,h)}const x=m=>{m.detail===!1&&l("close")};return s.$$set=m=>{"align"in m&&t(0,i=m.align),"onEdit"in m&&t(1,g=m.onEdit),"onExport"in m&&t(2,_=m.onExport),"onDelete"in m&&t(3,E=m.onDelete),"$$scope"in m&&t(15,o=m.$$scope)},[i,g,_,E,h,r,a,l,n,d,b,S,j,y,x,o]}class Mr extends je{constructor(e){super(),Te(this,e,lr,rr,Ce,{align:0,onEdit:1,onExport:2,onDelete:3})}}function nr(s){let e=s[6].t("Create Folder")+"",t;return{c(){t=A(e)},l(r){t=O(r,e)},m(r,n){C(r,t,n)},p(r,n){n&64&&e!==(e=r[6].t("Create Folder")+"")&&M(t,e)},d(r){r&&u(t)}}}function ar(s){let e=s[6].t("Edit Folder")+"",t;return{c(){t=A(e)},l(r){t=O(r,e)},m(r,n){C(r,t,n)},p(r,n){n&64&&e!==(e=r[6].t("Edit Folder")+"")&&M(t,e)},d(r){r&&u(t)}}}function ut(s){let e,t,r=s[6].t("System Prompt")+"",n,o,a,l,i,g;function _(h){s[16](h)}let E={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:s[6].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),maxSize:200};return s[4].system_prompt!==void 0&&(E.value=s[4].system_prompt),l=new At({props:E}),pe.push(()=>_e(l,"value",_)),{c(){e=w("div"),t=w("div"),n=A(r),o=V(),a=w("div"),J(l.$$.fragment),this.h()},l(h){e=v(h,"DIV",{class:!0});var d=k(e);t=v(d,"DIV",{class:!0});var b=k(t);n=O(b,r),b.forEach(u),o=U(d),a=v(d,"DIV",{});var S=k(a);G(l.$$.fragment,S),S.forEach(u),d.forEach(u),this.h()},h(){f(t,"class","mb-2 text-xs text-gray-500"),f(e,"class","my-1")},m(h,d){C(h,e,d),c(e,t),c(t,n),c(e,o),c(e,a),K(l,a,null),g=!0},p(h,d){(!g||d&64)&&r!==(r=h[6].t("System Prompt")+"")&&M(n,r);const b={};d&64&&(b.placeholder=h[6].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`)),!i&&d&16&&(i=!0,b.value=h[4].system_prompt,ge(()=>i=!1)),l.$set(b)},i(h){g||(B(l.$$.fragment,h),g=!0)},o(h){N(l.$$.fragment,h),g=!1},d(h){h&&u(e),q(l)}}}function sr(s){let e,t,r,n=s[6].t("Knowledge")+"",o;return{c(){e=w("div"),t=w("div"),r=w("div"),o=A(n),this.h()},l(a){e=v(a,"DIV",{slot:!0});var l=k(e);t=v(l,"DIV",{class:!0});var i=k(t);r=v(i,"DIV",{class:!0});var g=k(r);o=O(g,n),g.forEach(u),i.forEach(u),l.forEach(u),this.h()},h(){f(r,"class","mb-2 text-xs text-gray-500"),f(t,"class","flex w-full justify-between"),f(e,"slot","label")},m(a,l){C(a,e,l),c(e,t),c(t,r),c(r,o)},p(a,l){l&64&&n!==(n=a[6].t("Knowledge")+"")&&M(o,n)},d(a){a&&u(e)}}}function ft(s){let e,t,r;return t=new xt({}),{c(){e=w("div"),J(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=k(e);G(t.$$.fragment,o),o.forEach(u),this.h()},h(){f(e,"class","ml-2 self-center")},m(n,o){C(n,e,o),K(t,e,null),r=!0},i(n){r||(B(t.$$.fragment,n),r=!0)},o(n){N(t.$$.fragment,n),r=!1},d(n){n&&u(e),q(t)}}}function or(s){var Je,Ge,Ke,qe;let e,t,r,n,o,a,l,i,g,_,E,h,d=s[6].t("Folder Name")+"",b,S,j,y,x,m,T,L,p,$,H=s[6].t("Folder Background Image")+"",Z,I,R,W,re,ae=((((Je=s[3])==null?void 0:Je.background_image_url)??null)===null?s[6].t("Upload"):s[6].t("Reset"))+"",be,Be,we,Ve,ve,oe,le,Ue,Ne,ie,X,fe=s[6].t("Save")+"",ke,Fe,ye,Q,xe,Le;function Re(D,F){return D[1]?ar:nr}let $e=Re(s),ee=$e(s);a=new dt({props:{className:"size-5"}});let P=(((Ge=s[7])==null?void 0:Ge.role)==="admin"||(((qe=(Ke=s[7])==null?void 0:Ke.permissions.chat)==null?void 0:qe.system_prompt)??!0))&&ut(s);function mt(D){s[17](D)}let We={$$slots:{label:[sr]},$$scope:{ctx:s}};s[4].files!==void 0&&(We.selectedItems=s[4].files),le=new Ot({props:We}),pe.push(()=>_e(le,"selectedItems",mt));let z=s[5]&&ft();return{c(){e=w("div"),t=w("div"),r=w("div"),ee.c(),n=V(),o=w("button"),J(a.$$.fragment),l=V(),i=w("div"),g=w("div"),_=w("form"),E=w("div"),h=w("div"),b=A(d),S=V(),j=w("div"),y=w("input"),m=V(),T=w("input"),L=V(),p=w("div"),$=w("div"),Z=A(H),I=V(),R=w("div"),W=w("button"),re=w("span"),be=A(ae),Be=V(),we=w("hr"),Ve=V(),P&&P.c(),ve=V(),oe=w("div"),J(le.$$.fragment),Ne=V(),ie=w("div"),X=w("button"),ke=A(fe),Fe=V(),z&&z.c(),this.h()},l(D){e=v(D,"DIV",{});var F=k(e);t=v(F,"DIV",{class:!0});var ne=k(t);r=v(ne,"DIV",{class:!0});var ce=k(r);ee.l(ce),ce.forEach(u),n=U(ne),o=v(ne,"BUTTON",{class:!0});var de=k(o);G(a.$$.fragment,de),de.forEach(u),ne.forEach(u),l=U(F),i=v(F,"DIV",{class:!0});var me=k(i);g=v(me,"DIV",{class:!0});var he=k(g);_=v(he,"FORM",{class:!0});var Y=k(_);E=v(Y,"DIV",{class:!0});var Ee=k(E);h=v(Ee,"DIV",{class:!0});var He=k(h);b=O(He,d),He.forEach(u),S=U(Ee),j=v(Ee,"DIV",{class:!0});var Ye=k(j);y=v(Ye,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0,autocomplete:!0}),Ye.forEach(u),Ee.forEach(u),m=U(Y),T=v(Y,"INPUT",{id:!0,type:!0,accept:!0}),L=U(Y),p=v(Y,"DIV",{class:!0});var Ie=k(p);$=v(Ie,"DIV",{class:!0});var Xe=k($);Z=O(Xe,H),Xe.forEach(u),I=U(Ie),R=v(Ie,"DIV",{class:!0});var Ze=k(R);W=v(Ze,"BUTTON",{"aria-labelledby":!0,class:!0,type:!0});var Qe=k(W);re=v(Qe,"SPAN",{class:!0,id:!0});var et=k(re);be=O(et,ae),et.forEach(u),Qe.forEach(u),Ze.forEach(u),Ie.forEach(u),Be=U(Y),we=v(Y,"HR",{class:!0}),Ve=U(Y),P&&P.l(Y),ve=U(Y),oe=v(Y,"DIV",{class:!0});var tt=k(oe);G(le.$$.fragment,tt),tt.forEach(u),Ne=U(Y),ie=v(Y,"DIV",{class:!0});var rt=k(ie);X=v(rt,"BUTTON",{class:!0,type:!0});var De=k(X);ke=O(De,fe),Fe=U(De),z&&z.l(De),De.forEach(u),rt.forEach(u),Y.forEach(u),he.forEach(u),me.forEach(u),F.forEach(u),this.h()},h(){f(r,"class","text-lg font-medium self-center"),f(o,"class","self-center"),f(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),f(h,"class","mb-1 text-xs text-gray-500"),f(y,"id","folder-name"),f(y,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),f(y,"type","text"),f(y,"placeholder",x=s[6].t("Enter folder name")),f(y,"autocomplete","off"),f(j,"class","flex-1"),f(E,"class","flex flex-col w-full mt-1"),f(T,"id","folder-background-image-input"),f(T,"type","file"),T.hidden=!0,f(T,"accept","image/*"),f($,"class","text-xs text-gray-500"),f(re,"class","ml-2 self-center"),f(re,"id","background-image-url-state"),f(W,"aria-labelledby","chat-background-label background-image-url-state"),f(W,"class","p-1 px-3 text-xs flex rounded-sm transition"),f(W,"type","button"),f(R,"class",""),f(p,"class","flex justify-between w-full mt-1 items-center"),f(we,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),f(oe,"class","my-2"),f(X,"class",ye="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(s[5]?" cursor-not-allowed":"")),f(X,"type","submit"),X.disabled=s[5],f(ie,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),f(_,"class","flex flex-col w-full"),f(g,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),f(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(D,F){C(D,e,F),c(e,t),c(t,r),ee.m(r,null),c(t,n),c(t,o),K(a,o,null),c(e,l),c(e,i),c(i,g),c(g,_),c(_,E),c(E,h),c(h,b),c(E,S),c(E,j),c(j,y),st(y,s[2]),c(_,m),c(_,T),c(_,L),c(_,p),c(p,$),c($,Z),c(p,I),c(p,R),c(R,W),c(W,re),c(re,be),c(_,Be),c(_,we),c(_,Ve),P&&P.m(_,null),c(_,ve),c(_,oe),K(le,oe,null),c(_,Ne),c(_,ie),c(ie,X),c(X,ke),c(X,Fe),z&&z.m(X,null),Q=!0,xe||(Le=[te(o,"click",s[12]),te(y,"input",s[13]),te(T,"change",s[14]),te(W,"click",s[15]),te(_,"submit",vt(s[18]))],xe=!0)},p(D,F){var ce,de,me,he;$e===($e=Re(D))&&ee?ee.p(D,F):(ee.d(1),ee=$e(D),ee&&(ee.c(),ee.m(r,null))),(!Q||F&64)&&d!==(d=D[6].t("Folder Name")+"")&&M(b,d),(!Q||F&64&&x!==(x=D[6].t("Enter folder name")))&&f(y,"placeholder",x),F&4&&y.value!==D[2]&&st(y,D[2]),(!Q||F&64)&&H!==(H=D[6].t("Folder Background Image")+"")&&M(Z,H),(!Q||F&72)&&ae!==(ae=((((ce=D[3])==null?void 0:ce.background_image_url)??null)===null?D[6].t("Upload"):D[6].t("Reset"))+"")&&M(be,ae),((de=D[7])==null?void 0:de.role)==="admin"||(((he=(me=D[7])==null?void 0:me.permissions.chat)==null?void 0:he.system_prompt)??!0)?P?(P.p(D,F),F&128&&B(P,1)):(P=ut(D),P.c(),B(P,1),P.m(_,ve)):P&&(Me(),N(P,1,1,()=>{P=null}),Pe());const ne={};F&8388672&&(ne.$$scope={dirty:F,ctx:D}),!Ue&&F&16&&(Ue=!0,ne.selectedItems=D[4].files,ge(()=>Ue=!1)),le.$set(ne),(!Q||F&64)&&fe!==(fe=D[6].t("Save")+"")&&M(ke,fe),D[5]?z?F&32&&B(z,1):(z=ft(),z.c(),B(z,1),z.m(X,null)):z&&(Me(),N(z,1,1,()=>{z=null}),Pe()),(!Q||F&32&&ye!==(ye="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(D[5]?" cursor-not-allowed":"")))&&f(X,"class",ye),(!Q||F&32)&&(X.disabled=D[5])},i(D){Q||(B(a.$$.fragment,D),B(P),B(le.$$.fragment,D),B(z),Q=!0)},o(D){N(a.$$.fragment,D),N(P),N(le.$$.fragment,D),N(z),Q=!1},d(D){D&&u(e),ee.d(),q(a),P&&P.d(),q(le),z&&z.d(),xe=!1,kt(Le)}}}function ir(s){let e,t,r;function n(a){s[19](a)}let o={size:"md",$$slots:{default:[or]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new ct({props:o}),pe.push(()=>_e(e,"show",n)),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,l){K(e,a,l),r=!0},p(a,[l]){const i={};l&8388863&&(i.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,i.show=a[0],ge(()=>t=!1)),e.$set(i)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){N(e.$$.fragment,a),r=!1},d(a){q(e,a)}}}function ur(s,e,t){let r,n;ue(s,Et,I=>t(7,n=I));const o=ze("i18n");ue(s,o,I=>t(6,r=I));let{show:a=!1}=e,{onSubmit:l=I=>{}}=e,{folderId:i=null}=e,{edit:g=!1}=e,_=null,E="",h={background_image_url:null},d={system_prompt:"",files:[]},b=!1;const S=async()=>{if(t(5,b=!0),((d==null?void 0:d.files)??[]).some(I=>I.status==="uploading")){Se.error(r.t("Please wait until all files are uploaded.")),t(5,b=!1);return}await l({name:E,meta:h,data:d}),t(0,a=!1),t(5,b=!1)},j=async()=>{i&&(_=await Mt(localStorage.token,i).catch(I=>(Se.error(`${I}`),null)),t(2,E=_.name),t(3,h=_.meta||{background_image_url:null}),t(4,d=_.data||{system_prompt:"",files:[]})),y()},y=async()=>{await wt();const I=document.getElementById("folder-name");I&&(I.focus(),I.select())},x=()=>{t(0,a=!1)};function m(){E=this.value,t(2,E),t(0,a),t(1,g)}const T=I=>{const R=I.target.files;let W=new FileReader;W.onload=re=>{let ae=`${re.target.result}`;t(3,h.background_image_url=ae,h)},R&&R.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(R[0].type)?W.readAsDataURL(R[0]):(`${R[0].type}`,I.target.value="")},L=()=>{if((h==null?void 0:h.background_image_url)!==null)t(3,h.background_image_url=null,h);else{const I=document.getElementById("folder-background-image-input");I&&I.click()}};function p(I){s.$$.not_equal(d.system_prompt,I)&&(d.system_prompt=I,t(4,d),t(0,a),t(1,g))}function $(I){s.$$.not_equal(d.files,I)&&(d.files=I,t(4,d),t(0,a),t(1,g))}const H=()=>{S()};function Z(I){a=I,t(0,a)}return s.$$set=I=>{"show"in I&&t(0,a=I.show),"onSubmit"in I&&t(10,l=I.onSubmit),"folderId"in I&&t(11,i=I.folderId),"edit"in I&&t(1,g=I.edit)},s.$$.update=()=>{s.$$.dirty&1&&a&&j(),s.$$.dirty&3&&!a&&!g&&(t(2,E=""),t(3,h={background_image_url:null}),t(4,d={system_prompt:"",files:[]}))},[a,g,E,h,d,b,r,n,o,S,l,i,x,m,T,L,p,$,H,Z]}class Pr extends je{constructor(e){super(),Te(this,e,ur,ir,Ce,{show:0,onSubmit:10,folderId:11,edit:1})}}export{Ar as F,Or as S,Pr as a,Mr as b,Nr as c,xr as d,Fr as e,Vr as f,Mt as g,Br as h,Ur as u};
//# sourceMappingURL=CVKquHBZ.js.map
