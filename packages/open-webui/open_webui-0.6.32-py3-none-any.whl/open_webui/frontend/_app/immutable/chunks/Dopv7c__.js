import{S as Ce,i as Ve,s as Ne,H as fe,I as _e,C as X,l as q,D as x,p as R,E as W,g as G,K as me,q as T,r as z,d as b,F as K,v as He,k as Be,e as y,t as Q,c as I,a as B,b as ee,T as ne,f as p,h as g,L as he,G as Y,j as te,y as Z,u as J,X as de,n as re,m as pe,x as Se,z as Oe,A as Ae,B as qe,U as ge}from"./JdJvpXsd.js";import{e as ve,u as Re,o as Ge}from"./Di7MzXQI.js";import"./IHki7fMi.js";import{t as Me}from"./Bn9KmUGN.js";import{d as ce}from"./I1CDPYOB.js";import{l as Fe,f as ue,h as Xe}from"./CqxBw7o8.js";import{d as xe}from"./Cy4KZWi6.js";import{M as We}from"./eLkVlJik.js";import{T as ze}from"./DSv6SC83.js";import{C as Ke}from"./DctKlGIQ.js";import{S as je}from"./C641ttU9.js";import{L as $e}from"./D72nB_g9.js";import{X as Ye}from"./DTKIxvQd.js";import{C as oe}from"./B2nUHCdl.js";import{C as Pe}from"./D5t9AWP7.js";import{g as Ze}from"./CRoZp3LG.js";import{g as Je}from"./jTPhk4Bq.js";const Qe=n=>({}),be=n=>({});function ke(n,e,l){const t=n.slice();return t[34]=e[l],t[36]=l,t}function we(n){let e,l,t,s,r,a;return t=new Ye({props:{className:"size-3",strokeWidth:"2"}}),{c(){e=y("div"),l=y("button"),X(t.$$.fragment),this.h()},l(f){e=I(f,"DIV",{class:!0});var o=B(e);l=I(o,"BUTTON",{class:!0});var d=B(l);x(t.$$.fragment,d),d.forEach(b),o.forEach(b),this.h()},h(){p(l,"class","p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"),p(e,"class","self-center pl-1.5 pr-1 translate-y-[0.5px] rounded-l-xl bg-transparent")},m(f,o){G(f,e,o),g(e,l),W(t,l,null),s=!0,r||(a=Y(l,"click",n[25]),r=!0)},p:re,i(f){s||(T(t.$$.fragment,f),s=!0)},o(f){z(t.$$.fragment,f),s=!1},d(f){f&&b(e),K(t),r=!1,a()}}}function et(n){let e,l,t;return l=new je({props:{className:"size-5"}}),{c(){e=y("div"),X(l.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=B(e);x(l.$$.fragment,r),r.forEach(b),this.h()},h(){p(e,"class","w-full h-full flex justify-center items-center min-h-20")},m(s,r){G(s,e,r),W(l,e,null),t=!0},p:re,i(s){t||(T(l.$$.fragment,s),t=!0)},o(s){z(l.$$.fragment,s),t=!1},d(s){s&&b(e),K(l)}}}function tt(n){let e,l,t,s,r=[],a=new Map,f,o,d,_=n[6].length>0&&ye(n),i=n[6].length===0&&Ie(n),k=ve(n[6]);const M=c=>c[34].id;for(let c=0;c<k.length;c+=1){let u=ke(n,k,c),U=M(u);a.set(U,r[c]=Ue(U,u))}let v=!n[7]&&n[9]&&De(n),m=n[1]===""&&Te(n);return{c(){e=y("div"),_&&_.c(),l=q(),t=y("div"),i&&i.c(),s=q();for(let c=0;c<r.length;c+=1)r[c].c();f=q(),v&&v.c(),o=q(),m&&m.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var u=B(e);_&&_.l(u),l=R(u),t=I(u,"DIV",{class:!0});var U=B(t);i&&i.l(U),s=R(U);for(let N=0;N<r.length;N+=1)r[N].l(U);f=R(U),v&&v.l(U),U.forEach(b),o=R(u),m&&m.l(u),u.forEach(b),this.h()},h(){p(t,"class","text-left text-sm w-full mb-3 max-h-[22rem] overflow-y-scroll"),p(e,"class","w-full")},m(c,u){G(c,e,u),_&&_.m(e,null),g(e,l),g(e,t),i&&i.m(t,null),g(t,s);for(let U=0;U<r.length;U+=1)r[U]&&r[U].m(t,null);g(t,f),v&&v.m(t,null),g(e,o),m&&m.m(e,null),d=!0},p(c,u){c[6].length>0?_?(_.p(c,u),u[0]&64&&T(_,1)):(_=ye(c),_.c(),T(_,1),_.m(e,l)):_&&(Z(),z(_,1,1,()=>{_=null}),J()),c[6].length===0?i?i.p(c,u):(i=Ie(c),i.c(),i.m(t,s)):i&&(i.d(1),i=null),u[0]&27745&&(k=ve(c[6]),Z(),r=Re(r,u,M,1,c,k,a,t,Ge,Ue,f,ke),J()),!c[7]&&c[9]?v?(v.p(c,u),u[0]&640&&T(v,1)):(v=De(c),v.c(),T(v,1),v.m(t,null)):v&&(Z(),z(v,1,1,()=>{v=null}),J()),c[1]===""?m?(m.p(c,u),u[0]&2&&T(m,1)):(m=Te(c),m.c(),T(m,1),m.m(e,null)):m&&(Z(),z(m,1,1,()=>{m=null}),J())},i(c){if(!d){T(_);for(let u=0;u<k.length;u+=1)T(r[u]);T(v),T(m),d=!0}},o(c){z(_);for(let u=0;u<r.length;u+=1)z(r[u]);z(v),z(m),d=!1},d(c){c&&b(e),_&&_.d(),i&&i.d();for(let u=0;u<r.length;u+=1)r[u].d();v&&v.d(),m&&m.d()}}}function ye(n){let e,l,t,s=n[14].t("Title")+"",r,a,f,o,d,_,i,k=n[14].t("Updated at")+"",M,v,m,c,u,U,N;const S=[st,lt],V=[];function C(w,h){return w[2]==="title"?0:1}f=C(n),o=V[f]=S[f](n);const D=[it,at],O=[];function j(w,h){return w[2]==="updated_at"?0:1}return m=j(n),c=O[m]=D[m](n),{c(){e=y("div"),l=y("button"),t=y("div"),r=Q(s),a=q(),o.c(),d=q(),_=y("button"),i=y("div"),M=Q(k),v=q(),c.c(),this.h()},l(w){e=I(w,"DIV",{class:!0});var h=B(e);l=I(h,"BUTTON",{class:!0});var H=B(l);t=I(H,"DIV",{class:!0});var E=B(t);r=ee(E,s),a=R(E),o.l(E),E.forEach(b),H.forEach(b),d=R(h),_=I(h,"BUTTON",{class:!0});var P=B(_);i=I(P,"DIV",{class:!0});var A=B(i);M=ee(A,k),v=R(A),c.l(A),A.forEach(b),P.forEach(b),h.forEach(b),this.h()},h(){p(t,"class","flex gap-1.5 items-center"),p(l,"class","px-1.5 py-1 cursor-pointer select-none basis-3/5"),p(i,"class","flex gap-1.5 items-center"),p(_,"class","px-1.5 py-1 cursor-pointer select-none hidden sm:flex sm:basis-2/5 justify-end"),p(e,"class","flex text-xs font-medium mb-1.5")},m(w,h){G(w,e,h),g(e,l),g(l,t),g(t,r),g(t,a),V[f].m(t,null),g(e,d),g(e,_),g(_,i),g(i,M),g(i,v),O[m].m(i,null),u=!0,U||(N=[Y(l,"click",n[26]),Y(_,"click",n[27])],U=!0)},p(w,h){(!u||h[0]&16384)&&s!==(s=w[14].t("Title")+"")&&te(r,s);let H=f;f=C(w),f===H?V[f].p(w,h):(Z(),z(V[H],1,1,()=>{V[H]=null}),J(),o=V[f],o?o.p(w,h):(o=V[f]=S[f](w),o.c()),T(o,1),o.m(t,null)),(!u||h[0]&16384)&&k!==(k=w[14].t("Updated at")+"")&&te(M,k);let E=m;m=j(w),m===E?O[m].p(w,h):(Z(),z(O[E],1,1,()=>{O[E]=null}),J(),c=O[m],c?c.p(w,h):(c=O[m]=D[m](w),c.c()),T(c,1),c.m(i,null))},i(w){u||(T(o),T(c),u=!0)},o(w){z(o),z(c),u=!1},d(w){w&&b(e),V[f].d(),O[m].d(),U=!1,de(N)}}}function lt(n){let e,l,t;return l=new oe({props:{className:"size-2"}}),{c(){e=y("span"),X(l.$$.fragment),this.h()},l(s){e=I(s,"SPAN",{class:!0});var r=B(e);x(l.$$.fragment,r),r.forEach(b),this.h()},h(){p(e,"class","invisible")},m(s,r){G(s,e,r),W(l,e,null),t=!0},p:re,i(s){t||(T(l.$$.fragment,s),t=!0)},o(s){z(l.$$.fragment,s),t=!1},d(s){s&&b(e),K(l)}}}function st(n){let e,l,t,s;const r=[nt,rt],a=[];function f(o,d){return o[3]==="asc"?0:1}return l=f(n),t=a[l]=r[l](n),{c(){e=y("span"),t.c(),this.h()},l(o){e=I(o,"SPAN",{class:!0});var d=B(e);t.l(d),d.forEach(b),this.h()},h(){p(e,"class","font-normal")},m(o,d){G(o,e,d),a[l].m(e,null),s=!0},p(o,d){let _=l;l=f(o),l!==_&&(Z(),z(a[_],1,1,()=>{a[_]=null}),J(),t=a[l],t||(t=a[l]=r[l](o),t.c()),T(t,1),t.m(e,null))},i(o){s||(T(t),s=!0)},o(o){z(t),s=!1},d(o){o&&b(e),a[l].d()}}}function rt(n){let e,l;return e=new Pe({props:{className:"size-2"}}),{c(){X(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){K(e,t)}}}function nt(n){let e,l;return e=new oe({props:{className:"size-2"}}),{c(){X(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){K(e,t)}}}function at(n){let e,l,t;return l=new oe({props:{className:"size-2"}}),{c(){e=y("span"),X(l.$$.fragment),this.h()},l(s){e=I(s,"SPAN",{class:!0});var r=B(e);x(l.$$.fragment,r),r.forEach(b),this.h()},h(){p(e,"class","invisible")},m(s,r){G(s,e,r),W(l,e,null),t=!0},p:re,i(s){t||(T(l.$$.fragment,s),t=!0)},o(s){z(l.$$.fragment,s),t=!1},d(s){s&&b(e),K(l)}}}function it(n){let e,l,t,s;const r=[ft,ot],a=[];function f(o,d){return o[3]==="asc"?0:1}return l=f(n),t=a[l]=r[l](n),{c(){e=y("span"),t.c(),this.h()},l(o){e=I(o,"SPAN",{class:!0});var d=B(e);t.l(d),d.forEach(b),this.h()},h(){p(e,"class","font-normal")},m(o,d){G(o,e,d),a[l].m(e,null),s=!0},p(o,d){let _=l;l=f(o),l!==_&&(Z(),z(a[_],1,1,()=>{a[_]=null}),J(),t=a[l],t||(t=a[l]=r[l](o),t.c()),T(t,1),t.m(e,null))},i(o){s||(T(t),s=!0)},o(o){z(t),s=!1},d(o){o&&b(e),a[l].d()}}}function ot(n){let e,l;return e=new Pe({props:{className:"size-2"}}),{c(){X(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){K(e,t)}}}function ft(n){let e,l;return e=new oe({props:{className:"size-2"}}),{c(){X(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){K(e,t)}}}function Ie(n){let e,l=n[14].t("No results found")+"",t;return{c(){e=y("div"),t=Q(l),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=B(e);t=ee(r,l),r.forEach(b),this.h()},h(){p(e,"class","text-xs text-gray-500 dark:text-gray-400 text-center px-5 min-h-20 w-full h-full flex justify-center items-center")},m(s,r){G(s,e,r),g(e,t)},p(s,r){r[0]&16384&&l!==(l=s[14].t("No results found")+"")&&te(t,l)},d(s){s&&b(e)}}}function Ee(n){let e,l=n[14].t(n[34].time_range)+"",t,s;return{c(){e=y("div"),t=Q(l),this.h()},l(r){e=I(r,"DIV",{class:!0});var a=B(e);t=ee(a,l),a.forEach(b),this.h()},h(){p(e,"class",s="w-full text-xs text-gray-500 dark:text-gray-500 font-medium "+(n[36]===0?"":"pt-5")+" pb-2 px-2")},m(r,a){G(r,e,a),g(e,t)},p(r,a){a[0]&16448&&l!==(l=r[14].t(r[34].time_range)+"")&&te(t,l),a[0]&64&&s!==(s="w-full text-xs text-gray-500 dark:text-gray-500 font-medium "+(r[36]===0?"":"pt-5")+" pb-2 px-2")&&p(e,"class",s)},d(r){r&&b(e)}}}function Le(n){let e,l;return e=new ze({props:{content:n[14].t("Unarchive Chat"),$$slots:{default:[ct]},$$scope:{ctx:n}}}),{c(){X(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const r={};s[0]&16384&&(r.content=t[14].t("Unarchive Chat")),s[0]&1088|s[1]&4&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){K(e,t)}}}function ct(n){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"></path></svg>',t,s;function r(...a){return n[29](n[34],...a)}return{c(){e=y("button"),e.innerHTML=l,this.h()},l(a){e=I(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-akwxe0"&&(e.innerHTML=l),this.h()},h(){p(e,"class","self-center w-fit px-1 text-sm rounded-xl")},m(a,f){G(a,e,f),t||(s=Y(e,"click",r),t=!0)},p(a,f){n=a},d(a){a&&b(e),t=!1,s()}}}function ut(n){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',t,s;function r(...a){return n[30](n[34],...a)}return{c(){e=y("button"),e.innerHTML=l,this.h()},l(a){e=I(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-uod23x"&&(e.innerHTML=l),this.h()},h(){p(e,"class","self-center w-fit px-1 text-sm rounded-xl")},m(a,f){G(a,e,f),t||(s=Y(e,"click",r),t=!0)},p(a,f){n=a},d(a){a&&b(e),t=!1,s()}}}function Ue(n,e){var O,j,w;let l,t,s,r,a,f=((O=e[34])==null?void 0:O.title)+"",o,d,_,i,k,M=ce(((j=e[34])==null?void 0:j.updated_at)*1e3).calendar()+"",v,m,c,u,U,N,S,V,C=(e[36]===0||e[36]>0&&e[34].time_range!==e[6][e[36]-1].time_range)&&((w=e[34])==null?void 0:w.time_range)&&Ee(e),D=e[10]&&Le(e);return U=new ze({props:{content:e[14].t("Delete Chat"),$$slots:{default:[ut]},$$scope:{ctx:e}}}),{key:n,first:null,c(){l=pe(),C&&C.c(),t=q(),s=y("div"),r=y("a"),a=y("div"),o=Q(f),_=q(),i=y("div"),k=y("div"),v=Q(M),m=q(),c=y("div"),D&&D.c(),u=q(),X(U.$$.fragment),this.h()},l(h){l=pe(),C&&C.l(h),t=R(h),s=I(h,"DIV",{class:!0,draggable:!0});var H=B(s);r=I(H,"A",{class:!0,href:!0});var E=B(r);a=I(E,"DIV",{class:!0});var P=B(a);o=ee(P,f),P.forEach(b),E.forEach(b),_=R(H),i=I(H,"DIV",{class:!0});var A=B(i);k=I(A,"DIV",{class:!0});var $=B(k);v=ee($,M),$.forEach(b),m=R(A),c=I(A,"DIV",{class:!0});var F=B(c);D&&D.l(F),u=R(F),x(U.$$.fragment,F),F.forEach(b),A.forEach(b),H.forEach(b),this.h()},h(){p(a,"class","text-ellipsis line-clamp-1 w-full"),p(r,"class","basis-3/5"),p(r,"href",d=e[5]?`/s/${e[34].id}`:`/c/${e[34].id}`),p(k,"class","hidden sm:flex text-gray-500 dark:text-gray-400 text-xs"),p(c,"class","flex justify-end pl-2.5 text-gray-600 dark:text-gray-300"),p(i,"class","basis-2/5 flex items-center justify-end"),p(s,"class","w-full flex justify-between items-center rounded-lg text-sm py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-850"),p(s,"draggable","false"),this.first=l},m(h,H){G(h,l,H),C&&C.m(h,H),G(h,t,H),G(h,s,H),g(s,r),g(r,a),g(a,o),g(s,_),g(s,i),g(i,k),g(k,v),g(i,m),g(i,c),D&&D.m(c,null),g(c,u),W(U,c,null),N=!0,S||(V=Y(r,"click",e[28]),S=!0)},p(h,H){var P,A,$;e=h,(e[36]===0||e[36]>0&&e[34].time_range!==e[6][e[36]-1].time_range)&&((P=e[34])!=null&&P.time_range)?C?C.p(e,H):(C=Ee(e),C.c(),C.m(t.parentNode,t)):C&&(C.d(1),C=null),(!N||H[0]&64)&&f!==(f=((A=e[34])==null?void 0:A.title)+"")&&te(o,f),(!N||H[0]&96&&d!==(d=e[5]?`/s/${e[34].id}`:`/c/${e[34].id}`))&&p(r,"href",d),(!N||H[0]&64)&&M!==(M=ce((($=e[34])==null?void 0:$.updated_at)*1e3).calendar()+"")&&te(v,M),e[10]?D?(D.p(e,H),H[0]&1024&&T(D,1)):(D=Le(e),D.c(),T(D,1),D.m(c,u)):D&&(Z(),z(D,1,1,()=>{D=null}),J());const E={};H[0]&16384&&(E.content=e[14].t("Delete Chat")),H[0]&10304|H[1]&4&&(E.$$scope={dirty:H,ctx:e}),U.$set(E)},i(h){N||(T(D),T(U.$$.fragment,h),N=!0)},o(h){z(D),z(U.$$.fragment,h),N=!1},d(h){h&&(b(l),b(t),b(s)),C&&C.d(h),D&&D.d(),K(U),S=!1,V()}}}function De(n){let e,l;return e=new $e({props:{$$slots:{default:[dt]},$$scope:{ctx:n}}}),e.$on("visible",n[31]),{c(){X(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const r={};s[0]&16384|s[1]&4&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){K(e,t)}}}function dt(n){let e,l,t,s,r=n[14].t("Loading...")+"",a,f;return l=new je({props:{className:" size-4"}}),{c(){e=y("div"),X(l.$$.fragment),t=q(),s=y("div"),a=Q(r),this.h()},l(o){e=I(o,"DIV",{class:!0});var d=B(e);x(l.$$.fragment,d),t=R(d),s=I(d,"DIV",{class:!0});var _=B(s);a=ee(_,r),_.forEach(b),d.forEach(b),this.h()},h(){p(s,"class",""),p(e,"class","w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2")},m(o,d){G(o,e,d),W(l,e,null),g(e,t),g(e,s),g(s,a),f=!0},p(o,d){(!f||d[0]&16384)&&r!==(r=o[14].t("Loading...")+"")&&te(a,r)},i(o){f||(T(l.$$.fragment,o),f=!0)},o(o){z(l.$$.fragment,o),f=!1},d(o){o&&b(e),K(l)}}}function Te(n){let e;const l=n[20].footer,t=Se(l,n,n[33],be);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||r[1]&4)&&Oe(t,l,s,s[33],e?qe(l,s[33],r,Qe):Ae(s[33]),be)},i(s){e||(T(t,s),e=!0)},o(s){z(t,s),e=!1},d(s){t&&t.d(s)}}}function _t(n){let e,l,t,s,r,a,f='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" clip-rule="evenodd"></path></svg>',o,d,_,i,k,M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',v,m,c,u,U,N,S,V,C,D,O,j=n[1]&&we(n);const w=[tt,et],h=[];function H(E,P){return E[6]?0:1}return S=H(n),V=h[S]=w[S](n),{c(){e=y("div"),l=y("div"),t=y("div"),s=Q(n[4]),r=q(),a=y("button"),a.innerHTML=f,o=q(),d=y("div"),_=y("div"),i=y("div"),k=y("div"),k.innerHTML=M,v=q(),m=y("input"),u=q(),j&&j.c(),U=q(),N=y("div"),V.c(),this.h()},l(E){e=I(E,"DIV",{});var P=B(e);l=I(P,"DIV",{class:!0});var A=B(l);t=I(A,"DIV",{class:!0});var $=B(t);s=ee($,n[4]),$.forEach(b),r=R(A),a=I(A,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-i7w487"&&(a.innerHTML=f),A.forEach(b),o=R(P),d=I(P,"DIV",{class:!0});var F=B(d);_=I(F,"DIV",{class:!0});var ae=B(_);i=I(ae,"DIV",{class:!0});var le=B(i);k=I(le,"DIV",{class:!0,"data-svelte-h":!0}),ne(k)!=="svelte-kinl2y"&&(k.innerHTML=M),v=R(le),m=I(le,"INPUT",{class:!0,placeholder:!0}),u=R(le),j&&j.l(le),le.forEach(b),ae.forEach(b),U=R(F),N=I(F,"DIV",{class:!0});var ie=B(N);V.l(ie),ie.forEach(b),F.forEach(b),P.forEach(b),this.h()},h(){p(t,"class","text-lg font-medium self-center"),p(a,"class","self-center"),p(l,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),p(k,"class","self-center ml-1 mr-3"),p(m,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),p(m,"placeholder",c=n[14].t("Search Chats")),p(i,"class","flex flex-1"),p(_,"class","flex w-full space-x-2 mb-0.5"),p(N,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),p(d,"class","flex flex-col w-full px-5 pb-4 dark:text-gray-200")},m(E,P){G(E,e,P),g(e,l),g(l,t),g(t,s),g(l,r),g(l,a),g(e,o),g(e,d),g(d,_),g(_,i),g(i,k),g(i,v),g(i,m),he(m,n[1]),g(i,u),j&&j.m(i,null),g(d,U),g(d,N),h[S].m(N,null),C=!0,D||(O=[Y(a,"click",n[23]),Y(m,"input",n[24])],D=!0)},p(E,P){(!C||P[0]&16)&&te(s,E[4]),(!C||P[0]&16384&&c!==(c=E[14].t("Search Chats")))&&p(m,"placeholder",c),P[0]&2&&m.value!==E[1]&&he(m,E[1]),E[1]?j?(j.p(E,P),P[0]&2&&T(j,1)):(j=we(E),j.c(),T(j,1),j.m(i,null)):j&&(Z(),z(j,1,1,()=>{j=null}),J());let A=S;S=H(E),S===A?h[S].p(E,P):(Z(),z(h[A],1,1,()=>{h[A]=null}),J(),V=h[S],V?V.p(E,P):(V=h[S]=w[S](E),V.c()),T(V,1),V.m(N,null))},i(E){C||(T(j),T(V),C=!0)},o(E){z(j),z(V),C=!1},d(E){E&&b(e),j&&j.d(),h[S].d(),D=!1,de(O)}}}function mt(n){let e,l,t,s,r,a;function f(i){n[21](i)}let o={};n[13]!==void 0&&(o.show=n[13]),e=new Ke({props:o}),fe.push(()=>_e(e,"show",f)),e.$on("confirm",n[22]);function d(i){n[32](i)}let _={size:"lg",$$slots:{default:[_t]},$$scope:{ctx:n}};return n[0]!==void 0&&(_.show=n[0]),s=new We({props:_}),fe.push(()=>_e(s,"show",d)),{c(){X(e.$$.fragment),t=q(),X(s.$$.fragment)},l(i){x(e.$$.fragment,i),t=R(i),x(s.$$.fragment,i)},m(i,k){W(e,i,k),G(i,t,k),W(s,i,k),a=!0},p(i,k){const M={};!l&&k[0]&8192&&(l=!0,M.show=i[13],me(()=>l=!1)),e.$set(M);const v={};k[0]&32767|k[1]&4&&(v.$$scope={dirty:k,ctx:i}),!r&&k[0]&1&&(r=!0,v.show=i[0],me(()=>r=!1)),s.$set(v)},i(i){a||(T(e.$$.fragment,i),T(s.$$.fragment,i),a=!0)},o(i){z(e.$$.fragment,i),z(s.$$.fragment,i),a=!1},d(i){i&&b(t),K(e,i),K(s,i)}}}function ht(n,e,l){let t,{$$slots:s={},$$scope:r}=e;ce.extend(Fe);const a=He("i18n");Be(n,a,L=>l(14,t=L));let{show:f=!1}=e,{title:o="Chats"}=e,{emptyPlaceholder:d=""}=e,{shareUrl:_=!1}=e,{query:i=""}=e,{orderBy:k="updated_at"}=e,{direction:M="desc"}=e,{chatList:v=null}=e,{allChatsLoaded:m=!1}=e,{chatListLoading:c=!1}=e,u=null,U=0,N=!1,{onUpdate:S=()=>{}}=e,{loadHandler:V=null}=e,{unarchiveHandler:C=null}=e;const D=L=>{k===L?l(3,M=M==="asc"?"desc":"asc"):(l(2,k=L),l(3,M="asc"))},O=async L=>{await xe(localStorage.token,L).catch(se=>{Me.error(`${se}`)}),S()};function j(L){N=L,l(13,N)}const w=()=>{u&&(O(u),l(11,u=null))},h=()=>{l(0,f=!1)};function H(){i=this.value,l(1,i)}const E=()=>{l(1,i=""),l(12,U=0)},P=()=>D("title"),A=()=>D("updated_at"),$=()=>l(0,f=!1),F=async(L,se)=>{se.stopImmediatePropagation(),se.stopPropagation(),C(L.id)},ae=async(L,se)=>{se.stopImmediatePropagation(),se.stopPropagation(),l(11,u=L.id),l(13,N=!0)},le=L=>{c||V()};function ie(L){f=L,l(0,f)}return n.$$set=L=>{"show"in L&&l(0,f=L.show),"title"in L&&l(4,o=L.title),"emptyPlaceholder"in L&&l(18,d=L.emptyPlaceholder),"shareUrl"in L&&l(5,_=L.shareUrl),"query"in L&&l(1,i=L.query),"orderBy"in L&&l(2,k=L.orderBy),"direction"in L&&l(3,M=L.direction),"chatList"in L&&l(6,v=L.chatList),"allChatsLoaded"in L&&l(7,m=L.allChatsLoaded),"chatListLoading"in L&&l(8,c=L.chatListLoading),"onUpdate"in L&&l(19,S=L.onUpdate),"loadHandler"in L&&l(9,V=L.loadHandler),"unarchiveHandler"in L&&l(10,C=L.unarchiveHandler),"$$scope"in L&&l(33,r=L.$$scope)},[f,i,k,M,o,_,v,m,c,V,C,u,U,N,t,a,D,O,d,S,s,j,w,h,H,E,P,A,$,F,ae,le,ie,r]}class zt extends Ce{constructor(e){super(),Ve(this,e,ht,mt,Ne,{show:0,title:4,emptyPlaceholder:18,shareUrl:5,query:1,orderBy:2,direction:3,chatList:6,allChatsLoaded:7,chatListLoading:8,onUpdate:19,loadHandler:9,unarchiveHandler:10},null,[-1,-1])}}function pt(n){let e,l,t,s,r,a,f,o,d,_='<div class="p-1 rounded-full bg-white text-black border-gray-100 shadow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-3"><path d="m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"></path></svg></div>',i,k,M,v=n[3].t("Remove")+"",m,c,u,U=n[3].t("Initials")+"",N,S,V,C=n[3].t("Gravatar")+"",D,O,j;return{c(){e=y("input"),l=q(),t=y("div"),s=y("div"),r=y("button"),a=y("img"),o=q(),d=y("div"),d.innerHTML=_,i=q(),k=y("div"),M=y("button"),m=Q(v),c=q(),u=y("button"),N=Q(U),S=q(),V=y("button"),D=Q(C),this.h()},l(w){e=I(w,"INPUT",{id:!0,type:!0,accept:!0}),l=R(w),t=I(w,"DIV",{class:!0});var h=B(t);s=I(h,"DIV",{class:!0});var H=B(s);r=I(H,"BUTTON",{class:!0,type:!0});var E=B(r);a=I(E,"IMG",{src:!0,alt:!0,class:!0}),o=R(E),d=I(E,"DIV",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-33lu34"&&(d.innerHTML=_),E.forEach(b),H.forEach(b),i=R(h),k=I(h,"DIV",{class:!0});var P=B(k);M=I(P,"BUTTON",{class:!0,type:!0});var A=B(M);m=ee(A,v),A.forEach(b),c=R(P),u=I(P,"BUTTON",{class:!0,type:!0});var $=B(u);N=ee($,U),$.forEach(b),S=R(P),V=I(P,"BUTTON",{class:!0,type:!0});var F=B(V);D=ee(F,C),F.forEach(b),P.forEach(b),h.forEach(b),this.h()},h(){var w;p(e,"id","profile-image-input"),p(e,"type","file"),e.hidden=!0,p(e,"accept","image/*"),ge(a.src,f=n[0]!==""?n[0]:ue((w=n[1])==null?void 0:w.name))||p(a,"src",f),p(a,"alt","profile"),p(a,"class","rounded-full size-14 md:size-18 object-cover"),p(d,"class","absolute bottom-0 right-0 opacity-0 group-hover:opacity-100 transition"),p(r,"class","relative rounded-full dark:bg-gray-700"),p(r,"type","button"),p(s,"class","self-center flex"),p(M,"class","text-xs text-center text-gray-500 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all"),p(M,"type","button"),p(u,"class","text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all"),p(u,"type","button"),p(V,"class","text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all"),p(V,"type","button"),p(k,"class","flex flex-col w-full justify-center mt-2"),p(t,"class","flex flex-col self-start group")},m(w,h){G(w,e,h),n[5](e),G(w,l,h),G(w,t,h),g(t,s),g(s,r),g(r,a),g(r,o),g(r,d),g(t,i),g(t,k),g(k,M),g(M,m),g(k,c),g(k,u),g(u,N),g(k,S),g(k,V),g(V,D),O||(j=[Y(e,"change",n[6]),Y(r,"click",n[7]),Y(M,"click",n[8]),Y(u,"click",n[9]),Y(V,"click",n[10])],O=!0)},p(w,[h]){var H;h&3&&!ge(a.src,f=w[0]!==""?w[0]:ue((H=w[1])==null?void 0:H.name))&&p(a,"src",f),h&8&&v!==(v=w[3].t("Remove")+"")&&te(m,v),h&8&&U!==(U=w[3].t("Initials")+"")&&te(N,U),h&8&&C!==(C=w[3].t("Gravatar")+"")&&te(D,C)},i:re,o:re,d(w){w&&(b(e),b(l),b(t)),n[5](null),O=!1,de(j)}}}function gt(n,e,l){let t;const s=He("i18n");Be(n,s,v=>l(3,t=v));let{profileImageUrl:r}=e,{user:a=null}=e,f;function o(v){fe[v?"unshift":"push"](()=>{f=v,l(2,f)})}const d=v=>{const m=f.files??[];let c=new FileReader;c.onload=u=>{let U=`${u.target.result}`;const N=new Image;N.src=U,N.onload=function(){const S=document.createElement("canvas"),V=S.getContext("2d"),C=N.width/N.height;let D,O;C>1?(D=250*C,O=250):(D=250,O=250/C),S.width=250,S.height=250;const j=(250-D)/2,w=(250-O)/2;V.drawImage(N,j,w,D,O);const h=S.toDataURL("image/jpeg");l(0,r=h),l(2,f.files=null,f)}},m.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(m[0].type)&&c.readAsDataURL(m[0])},_=()=>{f.click()},i=async()=>{l(0,r=`${Je}/user.png`)},k=async()=>{Xe()?l(0,r=ue(a==null?void 0:a.name)):Me.info(t.t("Fingerprint spoofing detected: Unable to use initials as avatar. Defaulting to default profile image."),{duration:1e3*10})},M=async()=>{const v=await Ze(localStorage.token,a==null?void 0:a.email);l(0,r=v)};return n.$$set=v=>{"profileImageUrl"in v&&l(0,r=v.profileImageUrl),"user"in v&&l(1,a=v.user)},[r,a,f,t,s,o,d,_,i,k,M]}class jt extends Ce{constructor(e){super(),Ve(this,e,gt,pt,Ne,{profileImageUrl:0,user:1})}}export{zt as C,jt as U};
//# sourceMappingURL=Dopv7c__.js.map
