<mujoco model="archer_d6y">
  <compiler angle="radian"/>
  <option integrator="implicitfast"/>
  <option timestep="4e-3"/>

  <asset>
    <mesh name="arm_base_link" file="arm_base_link.STL"/>
    <mesh name="arm_link_1" file="arm_link_1.STL"/>
    <mesh name="arm_link_2" file="arm_link_2.STL"/>
    <mesh name="arm_link_3" file="arm_link_3.STL"/>
    <mesh name="arm_link_4" file="arm_link_4.STL"/>
    <mesh name="arm_link_5" file="arm_link_5.STL"/>
    <mesh name="picker_base_link" file="picker_base_link.STL"/>
    <mesh name="picker_narrow1_link" file="picker_narrow1_link.STL"/>
    <mesh name="picker_narrow2_link" file="picker_narrow2_link.STL"/>
    <mesh name="picker_narrow3_link" file="picker_narrow3_link.STL"/>
    <mesh name="picker_narrow_loop_link" file="picker_narrow_loop_link.STL"/>
    <mesh name="picker_wide1_link" file="picker_wide1_link.STL"/>
    <mesh name="picker_wide2_link" file="picker_wide2_link.STL"/>
    <mesh name="picker_wide3_link" file="picker_wide3_link.STL"/>
    <mesh name="picker_wide_loop_link" file="picker_wide_loop_link.STL"/>
  </asset>

  <worldbody>
    <body name="base_link">
      <inertial pos="-0.001 0.0318 0" quat="0.5 0.5 0.5 0.5" mass="0.687" diaginertia="0.0007 0.0006 0.0005"/>
      <geom type="mesh" rgba="1 1 1 1" mesh="arm_base_link"/>

      <!-- link 1 -->
      <body name="link_1" pos="0 0 0.0665">
        <inertial pos="0.008 0.0878 0.0023" mass="0.2154" diaginertia="0.0003 0.0003 0.0002"/>
        <joint name="joint_1" pos="0 0 0" axis="0 0 1" range="-2.7 2.7"
               limited="true" armature="0.1" damping="10.0" frictionloss="3.0"/>
        <geom type="mesh" rgba="0.92549 0.92549 0.92549 1" mesh="arm_link_1"/>

        <!-- link 2 -->
        <body name="link_2" pos="0.02 0 0.045">
          <inertial pos="0.0201 0.2429 0.0038" quat="0.705084 0.709124 0 0" mass="1.3123" diaginertia="0.0185 0.0182006 0.000699429"/>
          <joint name="joint_2" pos="0 0 0" axis="0 1 0" range="-1.57 2.09"
                 limited="true" armature="0.1" damping="10.0" frictionloss="3.0"/>
          <geom type="mesh" rgba="1 1 1 1" mesh="arm_link_2"/>

          <!-- link 3 -->
          <body name="link_3" pos="0 0 0.264">
            <inertial pos="-0.031 0.52 -0.0009" quat="0.681878 0.727918 0.0361167 0.0622413" mass="1.1083" diaginertia="0.0114986 0.0111374 0.001364"/>
            <joint name="joint_3" pos="0 0 0" axis="0 1 0" range="0 3.14"
                   limited="true" armature="0.1" damping="10.0" frictionloss="3.0"/>
            <geom type="mesh" rgba="1 1 1 1" mesh="arm_link_3"/>

            <!-- link 4 -->
            <body name="link_4" pos="-0.06 0 0.245">
              <inertial pos="-0.0998 0.6777 0.001" quat="0.653281 0.653281 0.270598 0.270598" mass="0.5398" diaginertia="0.0011 0.001 0.0005"/>
              <joint name="joint_4" pos="0 0 0" axis="0 1 0" range="-1.57 1.57"
                     limited="true" armature="0.1" damping="10.0" frictionloss="3.0"/>
              <geom type="mesh" rgba="0.792157 0.792157 0.792157 1" mesh="arm_link_4"/>

              <!-- link 5 -->
              <body name="link_5" pos="-0.0553006 0 0.07025">
                <inertial pos="-0.0442 0.6936 -0.0001" quat="0.5 0.5 -0.5 0.5" mass="0.3984" diaginertia="0.0003 0.0002 0.0002"/>
                <joint name="joint_5" pos="0 0 0" axis="-1 0 0" range="-1.57 1.57"
                       limited="true" armature="0.1" damping="10.0" frictionloss="3.0"/>
                <geom type="mesh" rgba="0.898039 0.917647 0.929412 1" mesh="arm_link_5"/>

                <!-- picker base link -->
                <body name="picker_base_link" pos="0.0547 0 0.02895">
                  <inertial pos="0.00913219 -0.00104428 0.0437714" quat="0.779177 -0.153227 -0.105966 0.598478"
                            mass="0.416893" diaginertia="0.00112999 0.000894143 0.000426247"/>
                  <joint name="joint_6" pos="0 0 0" axis="0 0 1" range="-1.57 1.57"
                         limited="true" armature="0.1" damping="10.0" frictionloss="3.0"/>
                  <geom pos="0 0 0.005" type="mesh" mesh="picker_base_link" rgba="0.75 0.75 0.75 1.0" />
                  <camera name="end_camera" pos="-0.06 0.0 0.0" xyaxes="0 -1 0 -1 0 0" fovy="50"/>
                  <site name="end_camera_link" pos="-0.06 0.0 0.0" size="0.01 0.04 0.01" 
                        rgba="0.1 0.1 0.1 1" type="box"/>

                  <!-- narrow gripper -->
                  <body name="picker_narrow1_link" pos="0 -0.0195 0.0565" quat="0.0 -0.707 0.0 -0.707">
                    <inertial pos="0.0094685 0.0068806 6.5437e-05" quat="0.488058 0.00022793 0.00062709 0.872811"
                              mass="0.025428" diaginertia="2.65562e-06 1.69368e-06 1.5501e-06"/>
                    <joint name="hand_narrow1_joint" pos="0 0 0" axis="0 0 1" range="0.0 0.8"
                          limited="true" armature="0.01" damping="1.0" frictionloss="0.1" />
                    <geom type="mesh" mesh="picker_narrow1_link" rgba="0.75 0.75 0.75 1.0" />

                    <body name="picker_narrow2_link" pos="0.030852 0.018551 0">
                      <inertial pos="0.0088027 -0.007035 1.6424e-05" quat="0.259339 0.661207 -0.251356 0.657547"
                                mass="0.0040132" diaginertia="1.70091e-07 1.66561e-07 5.03584e-08"/>
                      <joint name="hand_narrow2_joint" pos="0 0 0" axis="0 0 -1" range="-1.57 1.57"
                            limited="true" armature="0.001" damping="1.0" frictionloss="0.1"
                            springref="-0.01" stiffness="1.0" />
                      <geom type="mesh" mesh="picker_narrow2_link" rgba="0.75 0.75 0.75 1.0" />

                      <body name="picker_narrow3_link" pos="0.018118 -0.01574 0">
                        <inertial pos="0.012508 -0.0079729 9.4339e-05" quat="0.575033 0.575033 0.411506 0.411506"
                                  mass="0.018029" diaginertia="2.75843e-06 2.3252e-06 9.52273e-07"/>
                        <joint name="hand_narrow3_joint" pos="0 0 0" axis="0 0 -1" range="-0.5 0.5"
                              limited="true" armature="0.001" damping="1.0" frictionloss="0.1" />
                        <geom type="mesh" mesh="picker_narrow3_link" rgba="0.75 0.75 0.75 1.0" />
                      </body>
                    </body>
                  </body>

                  <!-- narrow helper -->
                  <body name="picker_narrow_loop_link" pos="0 -0.021633 0.07387" quat="0.0 -0.707 0.0 -0.707">
                    <inertial pos="0.014869 -0.0036066 0.00029307" quat="0.800794 2.10378e-06 -6.78039e-07 0.59894"
                              mass="0.022591" diaginertia="4.76981e-06 4.35879e-06 6.0445e-07"/>
                    <joint name="hand_narrow_loop_joint" pos="0 0 0" axis="0 0 -1"
                          limited="auto" armature="0.0" damping="0.01" frictionloss="0.01" />
                    <geom type="mesh" mesh="picker_narrow_loop_link" rgba="0.75 0.75 0.75 1.0" />
                  </body>

                  <!-- wide gripper -->
                  <body name="picker_wide1_link" pos="0 0.0195 0.0565" quat="0.0 -0.707 0.0 -0.707">
                    <inertial pos="0.0095051 -0.0068479 6.8268e-05" quat="0.872477 -0.000843631 -0.000472499 0.488655"
                              mass="0.025428" diaginertia="2.65502e-06 1.69428e-06 1.5501e-06"/>
                    <joint name="hand_wide1_joint" pos="0 0 0" axis="0 0 -1" range="0.0 0.8"
                          limited="true" armature="0.1" damping="1.0" frictionloss="0.1" />
                    <geom type="mesh" mesh="picker_wide1_link" rgba="0.75 0.75 0.75 1.0" />

                    <body name="picker_wide2_link" pos="0.030852 -0.018551 0">
                      <inertial pos="0.0088027 0.007035 -1.6424e-05" quat="-0.251356 0.657548 0.259339 0.661207"
                                mass="0.0040132" diaginertia="1.70091e-07 1.66561e-07 5.03584e-08"/>
                      <joint name="hand_wide2_joint" pos="0 0 0" axis="0 0 -1" range="-1.57 1.57" 
                            limited="true" armature="0.001" damping="1.0" frictionloss="0.1"
                            springref="0.01" stiffness="1.0" />
                      <geom type="mesh" mesh="picker_wide2_link" rgba="0.75 0.75 0.75 1.0" />

                      <body name="picker_wide3_link" pos="0.018118 0.01574 0">
                        <inertial pos="0.016206 0.0094593 4.7668e-05" quat="0.574355 3.4175e-06 6.47256e-06 0.818606"
                                  mass="0.035835" diaginertia="1.16461e-05 8.09447e-06 4.6309e-06"/>
                        <joint name="hand_wide3_joint" pos="0 0 0" axis="0 0 -1" range="-0.5 0.5"
                              limited="true" armature="0.001" damping="1.0" frictionloss="0.1" />
                        <geom type="mesh" mesh="picker_wide3_link" rgba="0.75 0.75 0.75 1.0" />
                      </body>
                    </body>
                  </body>

                  <!-- wide helper -->
                  <body name="picker_wide_loop_link" pos="0 0.021633 0.07387" quat="0.0 -0.707 0.0 -0.707">
                    <inertial pos="0.016268 0.0040555 0.00030323" quat="0.599119 -2.137e-06 -5.96717e-07 0.80066"
                              mass="0.025142" diaginertia="6.26903e-06 5.85397e-06 6.2389e-07"/>
                    <joint name="hand_wide_loop_joint" pos="0 0 0" axis="0 0 -1"
                          limited="auto" armature="0.0" damping="0.01" frictionloss="0.01" />
                    <geom type="mesh" mesh="picker_wide_loop_link" rgba="0.75 0.75 0.75 1.0" />
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <contact>
    <exclude body1="base_link" body2="link_1" />
    <exclude body1="link_1" body2="link_2" />
    <exclude body1="link_2" body2="link_3" />
    <exclude body1="link_3" body2="link_4" />
    <exclude body1="link_4" body2="link_5" />
    <exclude body1="link_5" body2="picker_base_link" />
    <exclude body1="picker_base_link" body2="picker_narrow1_link" />
    <exclude body1="picker_narrow1_link" body2="picker_narrow2_link" />
    <exclude body1="picker_narrow2_link" body2="picker_narrow3_link" />
    <exclude body1="picker_narrow3_link" body2="picker_narrow_loop_link" />
    <exclude body1="picker_narrow_loop_link" body2="picker_base_link" />
    <exclude body1="picker_base_link" body2="picker_wide1_link" />
    <exclude body1="picker_wide1_link" body2="picker_wide2_link" />
    <exclude body1="picker_wide2_link" body2="picker_wide3_link" />
    <exclude body1="picker_wide3_link" body2="picker_wide_loop_link" />
    <exclude body1="picker_wide_loop_link" body2="picker_base_link" />
  </contact>

  <equality>
    <connect body1="picker_narrow_loop_link" body2="picker_narrow3_link" anchor="0.03153 -0.00975 0.0" />
    <connect body1="picker_wide_loop_link" body2="picker_wide3_link" anchor="0.03153 0.00975 0.0" />
  </equality>

  <actuator>
    <position joint="joint_1" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="-2.7 2.7" forcerange="-30 30"/>
    <position joint="joint_2" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="-1.57 2.09" forcerange="-30 30"/>
    <position joint="joint_3" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="0 3.14" forcerange="-30 30"/>
    <position joint="joint_4" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="-1.57 1.57" forcerange="-30 30"/>
    <position joint="joint_5" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="-1.57 1.57" forcerange="-30 30"/>
    <position joint="joint_6" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="-1.57 1.57" forcerange="-30 30"/>
    <position joint="hand_narrow1_joint" kp="200" kv="5.0" 
              ctrllimited="true" ctrlrange="0.0 0.8" forcerange="-20 20"/>
    <position joint="hand_wide1_joint" kp="200" kv="5.0"
              ctrllimited="true" ctrlrange="0.0 0.8" forcerange="-20 20"/>
  </actuator>

  <keyframe>
    <key name="home"
         qpos="0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0"
         ctrl="0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0"/>
  </keyframe>
</mujoco>
