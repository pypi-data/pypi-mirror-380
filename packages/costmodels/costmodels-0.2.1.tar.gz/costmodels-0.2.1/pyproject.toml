[project]
authors = [{ name = "ernie", email = "ernim@dtu.dk" }]
description = "Add a short description here"
name = "costmodels"
requires-python = ">=3.10,<3.13"
dynamic = ["version"]
dependencies = [
    "numpy",
    "scipy>=1.10.1,<2",
    "matplotlib>=3.7.5,<4",
    "jax>=0.5.3,<1.0",
]
[project.optional-dependencies]
test = [
    "pytest>=8.3.4,<9",
    "pytest-cov>=6.0.0,<7",
    "pytest-xdist>=3.6.1,<4",
    "pre-commit>=4.1.0,<5",
    "pandas>=2.2.3,<3",
    "openmdao>=3.36.0,<4",
    "psutil>=7.0.0,<8",
    "mypy>=1.18.2,<2",
]

[build-system]
build-backend = "hatchling.build"
requires = ["hatchling", "hatch-vcs"]

[tool.hatch.version]
source = "vcs"

[tool.hatch.build.hooks.vcs]
version-file = "src/costmodels/_version.py"

[tool.hatch.version.raw-options]
version_scheme = "no-guess-dev"

[tool.pytest.ini_options]
testpaths = ["tests"]
norecursedirs = ["tests/assets"]
addopts = "--dist=worksteal --cov-report=term-missing:skip-covered --cov-report=html"

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["linux-64", "win-64"]

[tool.pixi.pypi-dependencies]
costmodels = { path = ".", editable = true }

[tool.pixi.dependencies]
python = ">=3.10,<3.13"

[tool.pixi.feature.test.dependencies]
pip = ">=25.0.1,<26"

[tool.pixi.feature.test.tasks]
pytest-cov = "pytest --cov=src/costmodels"

[tool.pixi.feature.examples.dependencies]
py-wake = ">=2.6.10,<3"
topfarm = ">=2.5.1,<3"

[tool.pixi.feature.build.dependencies]
hatch = "*"

[tool.pixi.environments]
test = { features = ["test"] }
examples = { features = ["examples"] }
default = { features = ["test", "examples"] }
build = { features = ["build"], no-default-feature = true }

[tool.mypy]
files = "src/costmodels"
exclude = "src/costmodels/external"
ignore_missing_imports = true

[tool.coverage.run]
omit = ["src/costmodels/_version.py"]

[tool.coverage.report]
fail_under = 90
precision = 2
