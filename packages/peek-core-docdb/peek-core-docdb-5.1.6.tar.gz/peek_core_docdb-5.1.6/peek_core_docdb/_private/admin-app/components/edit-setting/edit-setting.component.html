<nz-card>
    <form nz-form autocomplete="off" novalidate>
        <div class="card-header">
            <h3 nz-typography>Edit Settings</h3>
            <div class="button-container">
                <nz-space>
                    <button
                        *nzSpaceItem
                        nz-button
                        nzType="primary"
                        [nzLoading]="loading$ | async"
                        (click)="handleSave()"
                    >
                        Save
                    </button>
                    <button
                        *nzSpaceItem
                        nz-button
                        [nzLoading]="loading$ | async"
                        (click)="handleReset()"
                    >
                        Reset
                    </button>
                </nz-space>
            </div>
        </div>

        <nz-table
            #basicTable
            [nzData]="items$ | async"
            nzBordered
            [nzShowSizeChanger]="true"
        >
            <thead>
                <tr>
                    <th>Setting</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of basicTable.data">
                    <td>{{ item.key }}</td>
                    <td>
                        <!-- Boolean Input -->
                        <nz-switch
                            *ngIf="item.type === 'boolean'"
                            [ngModel]="item.boolean_value"
                            (ngModelChange)="item.boolean_value = $event"
                            [name]="item.key"
                        >
                        </nz-switch>

                        <!-- Integer Input -->
                        <nz-input-number
                            *ngIf="item.type === 'integer'"
                            [ngModel]="item.int_value"
                            (ngModelChange)="item.int_value = $event"
                            [name]="item.key"
                            [nzStep]="1"
                        >
                        </nz-input-number>

                        <!-- String Input (Password) -->
                        <input
                            *ngIf="
                                item.type === 'string' &&
                                item.key.endsWith('pass')
                            "
                            nz-input
                            type="password"
                            [ngModel]="item.char_value"
                            (ngModelChange)="item.char_value = $event"
                            [name]="item.key"
                        />

                        <!-- String Input (Normal) -->
                        <input
                            *ngIf="
                                item.type === 'string' &&
                                !item.key.endsWith('pass')
                            "
                            nz-input
                            [ngModel]="item.char_value"
                            (ngModelChange)="item.char_value = $event"
                            [name]="item.key"
                        />
                    </td>
                </tr>
            </tbody>
        </nz-table>

        <nz-empty *ngIf="!(items$ | async)?.length"></nz-empty>
    </form>
</nz-card>
